---
layout: fix
title: "4D v18 修正リスト"
date: 2021-04-20 08:00:00
categories: 修正リスト
tags: "18.4"
build: 265055
version: 18.4
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100769 Write Proウィジェットに`WP Insert table`を使用しているメソッドを入力してフォーミュラを評価した場合，アプリケーションがクラッシュしました。

**注記**: 問題は修正されましたが，Write Proドキュメントを更新するフォーミュラを同じWrite Proドキュメントに挿入することは勧められていません。

* ACI0101654 リボンインターフェースからスタイルを設定した場合，`VP SET CELL STYLE`に`Null`を渡しても`parentName`プロパティがクリアされず，スタイルをリセットすることができませんでした。

* ACI0101887 Windows版のみ。コンボボックスをクリックするたびに`On Activate`および`On Deactivate`イベントが発生しました。
 
* ACI0101860 定数の`wk list font family`でWrite Proドキュメントの段落番号フォントをファミリー名で設定しようとした場合，エラー`205`（無効な定数）が返されました。

**注記**: 修正により，定数名は`_o_ wk list font family`に変更され，値が`listFont`（`wk list font`と同じ値）になりました。

* ACI0101647 Mac版のみ。`ZIP Create archive`でアーカイブしたアプリをFinderのアーカイブユーティリティで展開することができませんでした。シンボリックリンクが作成できないようです。4Dのコマンドであれば展開することができます。

* ACI0101263 Write Proドキュメントのテキスト全文（`500,000`文字程度）を選択してコンテキストメニューの「コピー」を選択した場合，アプリケーションがフリーズすることがありました。

**注記**: Write Proが内部的に使用しているXMLパーサーのxercesライブラリは，複雑なXHTMLドキュメントの解析およびシリアライズに最適化されていないことに加え，Write Proのコピーは4Dのマルチスタイルテキスト・HTML・RTF・Write Pro内部フォーマットのテキストデータをペーストボードに転写するため，一般的なHTMLエディターよりも多くの処理が必要です。修正により，極端な分量のテキストをペーストボードに転写しようとした場合，一部のデータタイプが省略されるようになりました。

* ACI0101247 Windows版のみ。ヘッドレスモードでサーバーが実行されている場合，`RESTORE`コマンドでアプリケーションを復元することができませんでした。

* ACI0099508 Windows版のみ。`GET PRINT OPTION`の第３パラメーターを省略して`Double sided option`を取得しようとすると，ランタイムエラーが返されました。「丁合い」は任意のパラメーターなので，省略しても問題ないはずです。

* ACI0101813 Windows版のみ。スタティックテキストの内容がオブジェクトのサイズに収まらない場合，フォームエディターではオブジェクトの下端で表示が切れますが，ランタイムのレンダリングでは，テキストが`1`行でフォントサイズに対してオブジェクトの高さが不足している場合，テキストが下揃えになり，オブジェクトの上端を超えて表示されました。

**注記**: ランタイムのレンダリングは，単一行のスタティックテキストが完全に表示されるようにするための措置であり，仕様です。修正により，バイナリモードのフォームエディターが変更され，ランタイムのレンダリングと同じになりました。

* ACI0101775 Write Proドキュメントに挿入されたフォーミュラ内で`WP TABLE DELETE ROWS`を実行した場合，表組の行が削除されませんでした。

* ACI0100164 Windows版のみ。`PRINT SELECTION`でフォームを印刷した場合，v15よりも時間がかかりました。`SET PRINT OPTION` で `Legacy printing layer option` オプションを有効にし，旧式プリントレイヤー（GDI）を使用すれば問題ありません。また，プリントマージンを変更しなければ問題ありません。

* ACI0101843 `U+FFFF` または `U+FFFE` のような制御文字を含むテキストをスタイル付きテキスト入力エリアにペーストすることができませんでした。外部HTMLソースには，制御文字が含まれていることがあります。

**注記**: Write Proエリア，`ST`コマンドおよびスタイルテキストエリアのデータソースに対する代入も修正されました。制御文字は無効なシンボルであることを示す文字で置換されます。

* ACI0101801 4D WriteドキュメントをWrite Proに変換した場合，FuturaフォントのcondensedスタイルがHelveticaフォントのregularスタイルで置換されました。

* ACI0101805 ヘッドレスモードで実行中のサーバーで`PRINT RECORD` または `PRINT LABEL` のアスタリスク（`*`）オプションを省略した場合，アプリケーションが無反応になりました。ヘッドレスモードの場合，印刷ダイアログを表示することはできないので，アスタリスク（`*`）オプションが省略された場合，コマンドは何もせず，`OK`には`0`が代入されるべきです。

* ACI0101832 Mac版のみ。macOS Big Surでは，サーモメーターのフォーマットを「バーバーショップ」に設定した場合，データソースに`0`以外の値をセットしても，プログレスバーがアニメーション表示されませんでした。Catalinaでは問題ありません。

* ACI0101782 Windows版のみ。MDIウィンドウ内でフォームのウィンドウを最大化してからMDIウィンドウをリサイズした場合，フォーム上のオブジェクトが正しくリサイズされません。オブジェクトが過剰に拡大され，元のサイズに戻すことができなくなりました。リサイズが「なし」に設定されているオブジェクトもMDIと一緒にリサイズされます。

* ACI0101665 Windows版のみ。サービス起動したサーバーで`PRINT SELECTION`を使用し，Microsoft Print to PDFドライバー経由でPDFを出力した場合，`0`バイトのファイルが作成されました。`Print form`であれば問題ありません。

* ACI0101796 クライアント側でトランザクションを開始してから「サーバー側で実行メソッド」を実行した場合，すぐにはトランザクション状態がサーバー側のツインプロセスに反映されませんでした。`Find in field`のようなデータベースアクセスコマンドをクライアント側で実行すれば，トランザクション状態の同期が取られました。

* ACI0101761 `112`文字を下回るテキストを`COMPRESS BLOB`で圧縮した場合，`EXPAND BLOB`で展開することができませんでした。圧縮ではなくgzipアルゴリズムの展開に問題があります。

* ACI0101642 Mac版のみ。`ON EVENT CALL`でイベントハンドラーメソッドをインストールした場合，リストボックスのヘッダーをタップをしても`On Header Click`イベントが発生しませんでした。クリックであれば問題ありません。

* ACI0101626 チェコ語版の「ようこそ画面」でWebサイトのリンクをクリックした場合，"cz.4d.com"ではなく"us.4d.com"にジャンプしました。

* ACI0101786 Mac版のみ。最前面ではないウィンドウの3Dボタンはタイトルテキストがグレーアウト表示されました。

* ACI0101683 `METHOD SET CODE`でテーブルフォームのメソッドをセットした場合，定数の`On Load`が当該テーブルの１番フィールドの名前にトークナイズされました。テーブルフォームのメソッドでなければ，問題ありません。
