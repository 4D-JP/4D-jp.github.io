---
layout: fix
title: "4D v19r2 修正リスト"
date: 2021-07-21 08:00:00
categories: 修正リスト
tags: 19r2
build: 268630
version: 19r2
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0101855 システムの環境設定でアピアランスがダークモードに設定されている場合，4Dの環境設定でコードエディターのテーマを変更することができませんでした。

* ACI0101854 スケーラブルなセッション管理が有効にされている場合，セッションを開始した後，Webサーバーを再起動してから同じクライアントから接続すると，新しいセッションが作成されました。

* ACI0101853 ポップアップメニューのデータソースにリスト参照が使用されており，「選択項目の参照」または「選択項目の値」プロパティが存在する場合，項目を選択することができませんでした。

* ACI0101852 ポップアップメニューに変数または式が設定されている場合，標準アクションとデータソースの値が同期しませんでした。

* ACI0101851 Windows版のみ。`WP EXPORT DOCUMENT`を使用してWrite ProドキュメントをPDF形式でエクスポートした場合，ピクチャが出力されませんでした。

* ACI0101850 オブジェクト型のプロパティに代入されたリスト参照番号を使用することができませんでした。

* ACI0101849 Mac版のみ。複数のディスプレイが接続されている場合，メニューバーが表示されていないほうの画面では`Open window`で作成したウィンドウが表示されないことがありました。

* ACI0101847 View Proスプレッドシートを`VP Convert to picture`でSVGに変換した場合，画像が出力されませんでした。

* ACI0101846 フィールドの値にアクセント文字が含まれている場合，4D for iOSのカスタムフォーマッターでアイコン画像が表示されませんでした。

* ACI0101845 フランス語版のみ。View Proエリアのインタフェースにローカライズされていない箇所がありました。

* ACI0101843 `U+FFFF` または `U+FFFE` のような制御文字を含むテキストをスタイル付きテキスト入力エリアにペーストすることができませんでした。外部HTMLソースには，制御文字が含まれていることがあります。

* ACI0101842 `Open datastore`でデータベースにアクセスしてスケーラブルなセッションを開始した後，ブラウザでREST APIのURLを開いた場合，スケーラブルなセッションが`2`件になりますが，その状態でブラウザをリフレッシュすると，さらに`2`件のセッションが作成されました。また，すでにセッションを開始しているデータベースに対し，新規プロセスで`Open datastore`を再実行した場合，` On REST Authentication`がコールされ，セッションが追加されました。

* ACI0101840 ピクチャボタンのデータソースを変数からファイルパスに変換した後，ストラクチャをプロジェクトに変換した場合，データソース名がプロパティリストに赤い文字で表示されました。データソースの値が`"picture":"var:"`（変数名が空）および`"dataSource":"<>vPict"`（プロパティを変更する前のピクチャ変数名）のような値に変換されるためです。`"picture":"var:vPict"`のように出力されるべきです。

* ACI0101839 `MSG_GetBody`から本文が返されませんでした。

**注記**: 問題は修正されましたが，できれば`MAIL convert from MIME`の使用を検討してください。

* ACI0101838 ストラクチャをプロジェクトに変換した場合，プロパティリストに継承フォーム名が赤い文字で表示され，値を選択することができませんでした。

* ACI0101837 `|format1`のようなカスタムフィルターがフィールドに設定されているストラクチャをプロジェクトに変換した場合，プロパティリストの値が赤い文字で表示されました。フィルターの値が`"numberFormat":{"$ref":"/SOURCES/filters.json#/format1"}`のように無効なJSONポインターに変換されるためです。`"numberFormat":"|format1"`のように出力されるべきです。

* ACI0101833 Windows版のみ。フィールドに関連づけられたポップアップメニューから値を選択した後，他のフィールドに値が入力できなくなりました。

* ACI0101832 Mac版のみ。macOS Big Surでは，サーモメーターのフォーマットを「バーバーショップ」に設定した場合，データソースに`0`以外の値をセットしても，プログレスバーがアニメーション表示されませんでした。Catalinaでは問題ありません。

* ACI0101831 `MSG_GetBody`からアクセント文字が正しく返されませんでした。

* ACI0101826 ユーザーモードでレコードのロードとアンロードを繰り返していると，アプリケーションがクラッシュしました。

* ACI0101824 `VP SET CELL STYLE`に`VP Row`または`VP Column`を渡すことができませんでした。

* ACI0101822 `New process`で新規プロセスを起動した場合，１回目はランタイムエクスプローラーでプロセスをアボートすることができますが，２回目はできませんでした。

* ACI0101821 クライアント/サーバー版のみ。`dataClass.newSelection()`でエンティティセレクションを作成した場合，`entity.reload()`が使用できませんでした。

* ACI0101813 Windows版のみ。スタティックテキストの内容がオブジェクトのサイズに収まらない場合，フォームエディターではオブジェクトの下端で表示が切れますが，ランタイムのレンダリングでは，テキストが`1`行でフォントサイズに対してオブジェクトの高さが不足している場合，テキストが下揃えになり，オブジェクトの上端を超えて表示されました。

* ACI0101811 コンパイルモードでは`Milliseconds`が倍長整数ではなく実数型を返しました。

**注記**: シンタックス定義ファイルが修正されました。インタープリターモードではシンタックス定義ファイルが参照されないため，実際のデータ型つまり倍長整数が返されました。修正により，どちらのモードでも`Value type(Milliseconds)`は`Is longint`を返すようになりました。

* ACI0101810 配列型リストボックスに表示されているブール型の列を高速でクリックし，ブール値を立て続けに更新した場合，すべての操作に対して`On Data Change`イベントが発生しませんでした。整数型の列であれば，イベントがスタックされます。

* ACI0101809 アンダースコア記号で単語が連結されたテキストをダブルクリックした場合，テキスト全体ではなく，単語がハイライト選択されました。

* ACI0101807 サーバー側にインストールされたプラグインを入れ替えた場合，新しいプラグインがクライアント側に転送されませんでした。

* ACI0101805 ヘッドレスモードで実行中のサーバーで`PRINT RECORD` または `PRINT LABEL` のアスタリスク（`*`）オプションを省略した場合，アプリケーションが無反応になりました。ヘッドレスモードの場合，印刷ダイアログを表示することはできないので，アスタリスク（`*`）オプションが省略された場合，コマンドは何もせず，`OK`には`0`が代入されるべきです。

* ACI0101801 4D WriteドキュメントをWrite Proに変換した場合，FuturaフォントのcondensedスタイルがHelveticaフォントのregularスタイルで置換されました。

* ACI0101799 Mac版のみ。リスト型サブフォームの行に配置されたオブジェクトのクリックイベントで新規ウィンドウを表示した場合，イベントを処理したオブジェクト以降の行がレンダリングされませんでした。

* ACI0101794 クライアント/サーバー版のみ。クライアント側のWebサーバーは，常にスケーラブルなセッション管理が有効でした。

* ACI0101787 時間・日付・ピクチャ型のリストボックス列を`OBJECT SET FORMAT`で操作することができませんでした。

* ACI0101785 Windows版のみ。テキスト入力オブジェクトまたはリストボックスのセルに日本語テキストを入力し，変換候補を確定した直後にスペースバーを使用した場合，入力したばかりの文字列が消滅しました。メソッドエディターでは問題ありません。

* ACI0101775 Write Proドキュメントに挿入されたフォーミュラ内で`WP TABLE DELETE ROWS`を実行した場合，表組の行が削除されませんでした。

* ACI0101766 Windows版のみ。Write Proドキュメントから生成したマルチスタイルテキストに標準テキストを連結してテキスト入力エリアに表示した場合，アプリケーションがクラッシュすることがありました。

* ACI0101748 Windows版のみ。地域と言語の設定が「トルコ」に設定されている場合，プロパティリストを表示するとアプリケーションがクラッシュしました。

**注記**: 内部コンポーネントがバイナリモードからプロジェクトに変換されたことに伴う副作用でした。トルコ語の「アイ」（`İi`）は大文字に点がついており，ラテン文字のアイとは別の文字として扱われなければなりません。

* ACI0101744 4D WriteドキュメントをWrite Proに変換した場合，スタイルが正しく適用されないことがありました。

* ACI0101732 View Proスプレッドシートのリボンインターフェースが表示されている場合，JavaScript（`spread.commandManager().execute()`）でコピー＆ペーストができませんでした。

* ACI0101729 `shift`キーを押しながら上下矢印キーを入力してリストボックス行の選択範囲を拡大しようとした場合，範囲が移動するだけで，常に一定の行数が選択されました。

* ACI0101725 `LISTBOX SELECT ROW`と`lk remove from selection`でリストボックス行の選択を解除した後，`shift`キーを押しながらクリックまたは上下矢印キーの操作で選択範囲を変更しようとした場合，コマンドで選択を解除した行が選択の起点となりました。

* ACI0101698 プロジェクトモードのみ。ストラクチャのコメントにXML 1.0で許可されていない文字が使用されている場合，バイナリデータベースから変換したプロジェクトを開くことができませんでした。

* ACI0101691 `MAIL Convert to MIME `で出力されるメ--ルの`Content-Type`ヘッダーに不要なアンダースコア記号（`_`）が挿入されることがありました。

* ACI0101684 保存オプションが「データファイル内」に設定されているピクチャに対して`SET EXTERNAL DATA PATH`を実行した場合，オーファンBLOBが発生しました。MSCのデータ検証を実行することにより，そのようなオーファンBLOBを検出することができます。

* ACI0101665 Windows版のみ。サービス起動したサーバーで`PRINT SELECTION`を使用し，Microsoft Print to PDFドライバー経由でPDFを出力した場合，`0`バイトのファイルが作成されました。`Print form`であれば問題ありません。

* ACI0101647 Mac版のみ。`ZIP Create archive`でアーカイブしたアプリをFinderのアーカイブユーティリティで展開することができませんでした。シンボリックリンクが作成できないようです。4Dのコマンドであれば展開することができます。

* ACI0101591 テキストエディターなどの外部アプリケーションからコピーしたテキストをView Proエリアのリボンインターフェースまたはコンテキストメニューでペーストすることができませんでした。編集メニューは問題ありません。

* ACI0101408 `HTTP SET OPTION`の`HTTP timeout`オプションが`HTTP Get`の動作に反映されませんでした。つまり，サーバー接続に成功し，なかなか応答が返されず，切断もされない場合，いつまでもレスポンスを待ちました。

* ACI0101348 ユーザー設定が有効にされたアプリケーションをビルドし，Program Filesにインストールして，書き込みが許可されている場所にデータフォルダーを作成した場合，`OPEN SETTINGS WINDOW`で`User settings for data file`を開こうとすると，アプリケーションがクラッシュしました。`Structure settings`であれば，開くことができます。

* ACI0101309 `VP Import from object`に`Null`または空のオブジェクトを渡した場合，エラーが返されました。期待されるのは，新規スプレッドシートが作成されることです。

* ACI0101263 Write Proドキュメントのテキスト全文（`500,000`文字程度）を選択してコンテキストメニューの「コピー」を選択した場合，アプリケーションがフリーズすることがありました。

* ACI0101247 Windows版のみ。ヘッドレスモードでサーバーが実行されている場合，`RESTORE`コマンドでアプリケーションを復元することができませんでした。

* ACI0101236 メソッドエディターに`Begin SQL` `end s` と入力した場合，自動コード補完を確定したタイミングでアプリケーションがクラッシュしました。

* ACI0100864 フィールドのフォントが`3of9.TTF`に設定されたラベル設定ファイルを開こうとした場合，エラーが返されました。

**注記**: 修正により，エラーは表示されなくなりましたが，1993年製の「3 of 9」バーコードフォントは，現在のシステムでサポートされていないテクノロジーを使用しているため，画面にも印刷にもレンダリングされません。

* ACI0100769 Write Proウィジェットに`WP Insert table`を使用しているメソッドを入力してフォーミュラを評価した場合，アプリケーションがクラッシュしました。

**注記**: 問題は修正されましたが，Write Proドキュメントを更新するフォーミュラを同じWrite Proドキュメントに挿入することは勧められていません。

* ACI0100450 HTTPのボディが`0x000D`から始まる場合，Webサーバーがリクエストを正しく処理しませんでした。受信に時間を要するだけでなく，ヘッダーの`Content-Length`と`GET HTTP BODY`で受信したBLOBのサイズが一致しませんでした。

* ACI0100355 View ProスプレッドシートをPDF形式でエクスポートした場合，フッターおよびヘッダーのフォントがドキュメントに埋め込まれませんでした。

* ACI0100164 Windows版のみ。`PRINT SELECTION`でフォームを印刷した場合，v15よりも時間がかかりました。`SET PRINT OPTION` で `Legacy printing layer option` オプションを有効にし，旧式プリントレイヤー（GDI）を使用すれば問題ありません。また，プリントマージンを変更しなければ問題ありません。

* ACI0099508 Windows版のみ。`GET PRINT OPTION`の第３パラメーターを省略して`Double sided option`を取得しようとすると，ランタイムエラーが返されました。「丁合い」は任意のパラメーターなので，省略しても問題ないはずです。

* ACI0099046 macOS Big Surのみ。結合文字のダイアクリティカルマーク（`^`など）を入力した場合，別々の文字になりました。

* ACI0098367 クイックレポートエディターで選択したフィールドをドラッグ＆ドロップ操作で並び替えた場合，移動したフィールドがすべて同じフィールドになりました。回避するためには，フィールドを選択した後，画面を確定し，クイックレポートエディターを再表示してから並び替える必要がありました。

* ACI0102125 プロジェクトモードのみ。フィールド入力の確定を`REJECT`で拒むことができませんでした。

* ACI0102062 `SET DATABASE PARAMETER`のセレクター`98`（スリープ中のクライアントに対するタイムアウト）が適用されませんでした。スリープ中のクライアントに対するタイムアウトを過ぎてもユーザーがドロップされず，接続ライセンスも回復しませんでした。

* ACI0102106 プロジェクトフォームの`0`ページで入力順を変更した場合，設定が反映されませんでした。

* ACI0102145 バイナリモードのみ。プロジェクトモードにデータベースを変換した場合，リストボックスのヘッダーや列のフォントカラーや整列が変わってしまうことがありました。「自動」に設定されているプロパティ値が省略され，リストボックス全体の値を継承するようになってしまうことが原因です。

* ACI0102127 バイナリデータベースをプロジェクトに変換した場合，ピクチャボタンの`pathname`プロパティがエクスポートされないことがありました。昔のベータバージョンで作成されたボタンで問題が発生するようです。

* ACI0102035 プロジェクトモードのみ。プロジェクトを開くたびに*catalog.4DCatalog*ファイルの内容が更新されました。フィールドなどのヘルプTipsが記述された`<tip>`タグの最後に改行コードが挿入されます。v18.4 HF3までは問題ありませんでした。動作に影響はありませんが，バージョン管理に支障をきたします。

* ACI0101948 RESTリクエストでプロジェクトメソッドが実行された場合，管理画面でRESTセッションがドロップできなくなりました。

* ACI0101642 Mac版のみ。`ON EVENT CALL`でイベントハンドラーメソッドをインストールした場合，リストボックスのヘッダーをタップをしても`On Header Click`イベントが発生しませんでした。クリックであれば問題ありません。

* ACI0102087 表組内のマージフィールドにフォーマット（例：`MERGEFIELD pt_FC \# $,#.00`）が設定されている`.docx`ドキュメントをWrite Proにインポートした場合，マージフィールド名（`«pt_FC»`）は正しく取り出されますが，`WP Get text`から返されるテキスト値に改行コードが追加されました（`«pt_FC»\r\r`）。

* ACI0102140 スケーラブルWebセッションを有効に設定し，REST API経由で同一のプロジェクトメソッドを連続コールした場合，アプリケーションがクラッシュしました。

* ACI0102094 Mac版のみ。Apple Magic Mouseで入力エリアをクリックし，`GOTO OBJECT(*; "")`でフォーカスを消すと同時に`ALERT`などで新しいウィンドウを表示した場合，元のフォームに復帰したときにタブ順が次のオブジェクトにフォーカス表示が移動し，かつ，どこをクリックしても前のオブジェクトのコードが実行される状態に陥りました。

* ACI0102157 `APPLY TO SELECTION`のフォーミュラにローカル変数が使用されている場合，コンパイルモードでエラーが返されました。`EXECUTE FORMULA`を実行しているわけではないので，コンパイルモードでも問題ないはずです。

* ACI0102122 サーバーとの接続が閉じられてしまった場合，`SMTP Transporter.send()`メソッドがエラーを返しました。トランスポーターのkeepAliveが有効にされている場合，前回の`send()`から間隔が空いたときには，まず，リクエストの前に`NOOP `コマンドを送信し，必要であれば，サーバーに再接続するべきです。

* ACI0102130 Mac版のみ。Apple Siliconターゲットのコンパイルモードでは，ビットワイズ演算値が正しくありませんでした。

* ACI0102030 フォームに組み込まれたクイックレポートエディター上でカラムのドラッグ＆ドロップを何度も繰り返した場合，エラーが返されました。

* ACI0101878 プロジェクトモードのみ。データファイルのインデックス型がカタログのインデックス型と合致しない場合，ストラクチャエディターにはデータファイル側のインデックス型がストラクチャエディターに表示されました。そのため，ストラクチャ（プロジェクト）の入れ替えでインデックス型を変更することができません。バイナリモードでは，ストラクチャ側のインデックスが使用されました。

* ACI0101933 Apple Silicon版のみ。フローティング画像が配置されているView Proスプレッドシートを`VP convert to picture`でピクチャに変換した場合，エラーが返されました。Intelアーキテクチャでは問題ありません。

* ACI0102139 バイナリモードのデータベースをプロジェクトモードに変換した場合，「スケーラブルWebセッション」の設定ができませんでした。データベース設定でオプションを有効にしても，`WEB GET OPTION`の`Web scalable session`は`0`を返しました。デフォルト値が正しくないようです。新規作成したプロジェクトは，デフォルトが`1`なので問題ありません。

* ACI0102107 エクスプローラーの「テーブル」ページでテーブルを選択した場合，ダイアログの右側にフィールドリストが表示されますが，「ホーム」ページでは何も表示されませんでした。

* ACI0102024 データファイルの暗号化を有効にした場合，レコードが登録されていないテーブルにはMSCが警告マークを表示しました。

* ACI0099336 クライアント/サーバー版のみ。`SET AUTOMATIC RELATION`の設定が`RELATE ONE SELECTION`に反映されませんでした。ORDAのリレーション属性は問題ありません。

* ACI0102086 Windows版のみ。ライセンス登録者のファーストネームにアクセント文字が含まれている場合，ビルド版アプリケーションを起動すると，ライセンスが有効ではないというエラーが表示され，使用できませんでした。v19でライセンスファイルのBOMが取り除かれたことに伴う副作用のようです。

* ACI0101966 アプリケーションビルドの`CommonCopyright`キーがスタンドアロン版およびビルド版のサーバーアプリケーションに反映されませんでした。ビルド版のクライアントアプリケーションは問題ありません。`RuntimeVLCopyright` `ServerCopyright`も反映されません。

* ACI0102110 フィールドのコメントに絵文字が使用されているストラクチャをプロジェクトモードに変換した場合，無効なXMLカタログファイルが出力されました。

* ACI0102093 Windows版のみ。Write ProドキュメントをPDF形式でエクスポートした場合，SVG画像が表示されませんでした。`WP PRINT`でPDFを作成した場合は問題ありません。

* ACI0102092 Mac版のみ。Apple SiliconネイティブのコンパイルモードでView Proエリアを使用した場合，エラーハンドリングメソッドが実行されませんでした。

* ACI0102089 クライアント/サーバー版のみ。コンパイルモードでは，ORDAデータモデルクラスの関数がクライアント側で実行されました。

* ACI0102085 コンポーネント内で4D View Proメソッドが使用されている場合，プロジェクトをコンパイルモードで再起動するとエラーが返されました。Windows版でコンパイルしたプロジェクトであれば，問題ありません。
