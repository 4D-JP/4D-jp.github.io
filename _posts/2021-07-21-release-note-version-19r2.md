---
layout: fix
title: "4D v19r2 修正リスト"
date: 2021-08-25 08:00:00
categories: 修正リスト
tags: 19r2
build: 269643
version: 19r2
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0101233 View Proエリアのセットアップ中にウィンドウをリサイズした場合，アプリケーションがフリーズしました。`On VP ready'`イベント直後のタイミングでJavaScriptの無限ループに陥る可能性があるようです。

* ACI0102253 Mac版のみ。コンパイラーの画面に「設定」ボタンが表示されませんでした。
 
* ACI0102248 Write ProドキュメントをMIME形式でHTMLエクスポートした場合，セル内テキストの垂直揃えが正しく変換されませんでした。セルの高さがテキストの高さを超えている場合，常に中央揃えとなりました。

* ACI0102227 古いバージョンで作成されたフォームをv19に変換した場合，入力可チェックボックスが入力不可になりました。

* ACI0102240 Write Proのドキュメントのセルに箇条書きまたは段落番号の付与されたテキストを記述した場合，ドキュメントを保存して開き直すと，セルが空になりました。

* ACI0102228 4D WriteドキュメントをWrite Proに変換した場合，テキストに余計なタブが挿入されることがありました。

* ACI0102060 MSCのデータ検証で暗号化の問題が検出され，同じキーでデータを再暗号化して問題を解消した後，もう一度データを再暗号化した場合，MSCに表示されたエラーメッセージが消えませんでした。
 
* ACI0102230 プラグインエリア上で`option`キーを押しながらドラッグ＆ドロップ操作を開始することができませんでした。

* ACI0102210 `HTTP Get`のレスポンスに`text/plain`型で無効なJSONが返された場合，データの受信に使用したオブジェクト型の変数に`Null`が代入されませんでした。

**注記**: 19 R2では`4D.Blob`クラスのオブジェクトがサポートされるようになりました。後方
互換性のため，`text/plain`型のレスポンスを`C_OBJECT`型の変数で受け取ろうとした場合，汎用的なオブジェクト型がそのまま使用されることになりました。JSONが無効であれば，`0`バイトの`4D.Blob`オブジェクトではなく，`Null`が代入されます。

* ACI0102204 `var`キーワードで宣言された拡張クラスオブジェクトのメンバー関数を選択し，`Alt`+クリックで定義に移動しようとした場合，継承されたメンバー関数ではなく，拡張クラスがメソッドエディターで開れました。

* ACI0102180 `QR BLOB TO REPORT`の第２パラメーターに空のBLOBを渡した場合，エラー`9852`が返されるはずですが，エラー`200`（データストリームの終端を超えた読み込み）が返されました。

* ACI0102226 Mac版のみ。Macで作成したプロジェクトをWindowsで開き，ツールボックスを開いた場合，一番上の一般ユーザー（DesignerまたはAdministratorではないユーザー）が消滅しました。`GET USER LIST`でも当該ユーザーが返されません。Windowsで作成したプロジェクト，バイナリモード，v18では問題ありません。

**注記**: JSONファイルの解析に問題がありました。出現順にユーザーがロードされるため，Administratorよりも上位に一般ユーザーが存在する場合，ユーザー番号`2`がそのユーザーに与えられました。`2`というユーザー番号はAdministratorのために予約されているため，そのユーザーはAdministratorによって上書きされました。

* ACI0102222 コンパイルモードでクラスのメンバー関数がエラーを返した場合，問題が発生した箇所の次行のコードがエラー画面にプレビュー表示されました。

* ACI0102220 プロジェクトモードのみ。フォームエディター上で範囲を指定したオブジェクトを選択した場合，透明スプリッターやドロップダウンリストのボーダーが表示されました。スプリッターや透明ボタン（レンダリングしないボタン）のボーダーは，オブジェクトのサイズよりもおおきな領域をカバーする四角形として描画されました。

* ACI0102212 SpreadJS `14.1`以前に作成されたスプレッドシートを`VP IMPORT FROM OBJECT`でインポートした場合，無効なスプレッドシートオブジェクトが返されました。
 
* ACI0102144 プロジェクトメソッドをRESTサーバーで公開した場合，テーブルが未選択でもスコープが選択できました。

* ACI0102010 エンティティセレクション型のリストボックスのメタ情報式から返されるオブジェクトの`unselectable`プロパティを使用して行を選択不可にした場合，画面上は行が選択できませんが，カレント項目およびカレント位置プロパティが更新されました。

* ACI0101963 Apple Siliconターゲットのみ。Xcode 12.5でSiliconターゲットのコンパイルを実行した場合，clangが *$constants.cpp* の処理に`10`分以上を要することがありました。

* ACI0102160 クライアント/サーバー版のみ。ネットワーク設定を変更してから「最近使用したサーバー」画面からサーバーに接続しようとした場合，選択したサーバーに対する接続は失敗しますが，クライアントキャッシュには`unuse.txt`ファイルが作成されるため，再接続を試みるたびに新しいローカルキャッシュフォルダーが作成されました。`unuse.txt`ファイルは，サーバーとの接続が確立されるまで作成されるべきではなく。接続エラーの発生と同時に削除されるべきです。そうでないと，再接続時にサーバー側のセッションが消えず，接続ライセンスが回収されません。
 
* ACI0102181 Write Proドキュメントのテキストを上付き文字または上付き文字に設定した場合，行間スペースが変化しました。

**注記**: 修正により，4D WriteプラグインやMicrosoft Wordと同じ仕様になりましたが，修正前のWrite Proドキュメントは，段落スタイルや改ページ処理の位置が変わるかもしれません。

* ACI0102189 Windows版のみ。SVGピクチャが挿入されたWrite ProドキュメントをPDF形式でエクスポートした場合，`textArea`要素のフォントカラーがすべてブラックになりました。プリンタードライバーでPDF出力した場合は問題ありません。

* ACI0102171 クライアント/サーバー版のみ。ローカルクライアントでフォームエディターを使用した場合，データクラスがエンティティセレクション型リストボックスのデータソース候補として表示されませんでした。

* ACI0102170 クライアント/サーバー版のみ。`On Startup`データベースメソッドにコードが記述されている場合，テーブル間にリレーションが設定されているデータベースに起動時にクライアント側でエラーが返されました。

* ACI0102159 コンパイルされたコンポーネントは，`.4DZ`形式のホストアプリケーションの共有メソッドに`METHOD GET PATHS`でアクセスできませんでした。

* ACI0102195 ストラクチャエディターの検索ウィンドウが使用できませんでした。

* ACI0102155 Windows版のみ。4D Mobileの「ラベル＆アイコン」セクションでアイコンを追加した場合，プロジェクトのビルドに失敗しました。`.svg`ファイルの変換でエラーが返されているようです。
 
* ACI0102016 プロジェクトモードのみ。プロジェクトメソッドのドキュメンテーションのハイパーリンクが動作しませんでした。

* ACI0101855 システムの環境設定でアピアランスがダークモードに設定されている場合，4Dの環境設定でコードエディターのテーマを変更することができませんでした。

* ACI0101854 スケーラブルなセッション管理が有効にされている場合，セッションを開始した後，Webサーバーを再起動してから同じクライアントから接続すると，新しいセッションが作成されました。

* ACI0101853 ポップアップメニューのデータソースにリスト参照が使用されており，「選択項目の参照」または「選択項目の値」プロパティが存在する場合，項目を選択することができませんでした。

* ACI0101852 ポップアップメニューに変数または式が設定されている場合，標準アクションとデータソースの値が同期しませんでした。

* ACI0101851 Windows版のみ。`WP EXPORT DOCUMENT`を使用してWrite ProドキュメントをPDF形式でエクスポートした場合，ピクチャが出力されませんでした。

* ACI0101850 オブジェクト型のプロパティに代入されたリスト参照番号を使用することができませんでした。

* ACI0101849 Mac版のみ。複数のディスプレイが接続されている場合，メニューバーが表示されていないほうの画面では`Open window`で作成したウィンドウが表示されないことがありました。

* ACI0101847 View Proスプレッドシートを`VP Convert to picture`でSVGに変換した場合，画像が出力されませんでした。

* ACI0101846 フィールドの値にアクセント文字が含まれている場合，4D for iOSのカスタムフォーマッターでアイコン画像が表示されませんでした。

* ACI0101845 フランス語版のみ。View Proエリアのインタフェースにローカライズされていない箇所がありました。

* ACI0101843 `U+FFFF` または `U+FFFE` のような制御文字を含むテキストをスタイル付きテキスト入力エリアにペーストすることができませんでした。外部HTMLソースには，制御文字が含まれていることがあります。

* ACI0101842 `Open datastore`でデータベースにアクセスしてスケーラブルなセッションを開始した後，ブラウザでREST APIのURLを開いた場合，スケーラブルなセッションが`2`件になりますが，その状態でブラウザをリフレッシュすると，さらに`2`件のセッションが作成されました。また，すでにセッションを開始しているデータベースに対し，新規プロセスで`Open datastore`を再実行した場合，` On REST Authentication`がコールされ，セッションが追加されました。

* ACI0101840 ピクチャボタンのデータソースを変数からファイルパスに変換した後，ストラクチャをプロジェクトに変換した場合，データソース名がプロパティリストに赤い文字で表示されました。データソースの値が`"picture":"var:"`（変数名が空）および`"dataSource":"<>vPict"`（プロパティを変更する前のピクチャ変数名）のような値に変換されるためです。`"picture":"var:vPict"`のように出力されるべきです。

* ACI0101839 `MSG_GetBody`から本文が返されませんでした。

**注記**: 問題は修正されましたが，できれば`MAIL convert from MIME`の使用を検討してください。

* ACI0101838 ストラクチャをプロジェクトに変換した場合，プロパティリストに継承フォーム名が赤い文字で表示され，値を選択することができませんでした。

* ACI0101837 `|format1`のようなカスタムフィルターがフィールドに設定されているストラクチャをプロジェクトに変換した場合，プロパティリストの値が赤い文字で表示されました。フィルターの値が`"numberFormat":{"$ref":"/SOURCES/filters.json#/format1"}`のように無効なJSONポインターに変換されるためです。`"numberFormat":"|format1"`のように出力されるべきです。

* ACI0101833 Windows版のみ。フィールドに関連づけられたポップアップメニューから値を選択した後，他のフィールドに値が入力できなくなりました。

* ACI0101832 Mac版のみ。macOS Big Surでは，サーモメーターのフォーマットを「バーバーショップ」に設定した場合，データソースに`0`以外の値をセットしても，プログレスバーがアニメーション表示されませんでした。Catalinaでは問題ありません。

* ACI0101831 `MSG_GetBody`からアクセント文字が正しく返されませんでした。

* ACI0101826 ユーザーモードでレコードのロードとアンロードを繰り返していると，アプリケーションがクラッシュしました。

* ACI0101824 `VP SET CELL STYLE`に`VP Row`または`VP Column`を渡すことができませんでした。

* ACI0101822 `New process`で新規プロセスを起動した場合，１回目はランタイムエクスプローラーでプロセスをアボートすることができますが，２回目はできませんでした。

* ACI0101821 クライアント/サーバー版のみ。`dataClass.newSelection()`でエンティティセレクションを作成した場合，`entity.reload()`が使用できませんでした。

* ACI0101813 Windows版のみ。スタティックテキストの内容がオブジェクトのサイズに収まらない場合，フォームエディターではオブジェクトの下端で表示が切れますが，ランタイムのレンダリングでは，テキストが`1`行でフォントサイズに対してオブジェクトの高さが不足している場合，テキストが下揃えになり，オブジェクトの上端を超えて表示されました。

* ACI0101811 コンパイルモードでは`Milliseconds`が倍長整数ではなく実数型を返しました。

**注記**: シンタックス定義ファイルが修正されました。インタープリターモードではシンタックス定義ファイルが参照されないため，実際のデータ型つまり倍長整数が返されました。修正により，どちらのモードでも`Value type(Milliseconds)`は`Is longint`を返すようになりました。

* ACI0101810 配列型リストボックスに表示されているブール型の列を高速でクリックし，ブール値を立て続けに更新した場合，すべての操作に対して`On Data Change`イベントが発生しませんでした。整数型の列であれば，イベントがスタックされます。

* ACI0101809 アンダースコア記号で単語が連結されたテキストをダブルクリックした場合，テキスト全体ではなく，単語がハイライト選択されました。

* ACI0101807 サーバー側にインストールされたプラグインを入れ替えた場合，新しいプラグインがクライアント側に転送されませんでした。

* ACI0101805 ヘッドレスモードで実行中のサーバーで`PRINT RECORD` または `PRINT LABEL` のアスタリスク（`*`）オプションを省略した場合，アプリケーションが無反応になりました。ヘッドレスモードの場合，印刷ダイアログを表示することはできないので，アスタリスク（`*`）オプションが省略された場合，コマンドは何もせず，`OK`には`0`が代入されるべきです。

* ACI0101801 4D WriteドキュメントをWrite Proに変換した場合，FuturaフォントのcondensedスタイルがHelveticaフォントのregularスタイルで置換されました。

* ACI0101799 Mac版のみ。リスト型サブフォームの行に配置されたオブジェクトのクリックイベントで新規ウィンドウを表示した場合，イベントを処理したオブジェクト以降の行がレンダリングされませんでした。

* ACI0101794 クライアント/サーバー版のみ。クライアント側のWebサーバーは，常にスケーラブルなセッション管理が有効でした。

* ACI0101787 時間・日付・ピクチャ型のリストボックス列を`OBJECT SET FORMAT`で操作することができませんでした。

* ACI0101785 Windows版のみ。テキスト入力オブジェクトまたはリストボックスのセルに日本語テキストを入力し，変換候補を確定した直後にスペースバーを使用した場合，入力したばかりの文字列が消滅しました。メソッドエディターでは問題ありません。

* ACI0101775 Write Proドキュメントに挿入されたフォーミュラ内で`WP TABLE DELETE ROWS`を実行した場合，表組の行が削除されませんでした。

* ACI0101766 Windows版のみ。Write Proドキュメントから生成したマルチスタイルテキストに標準テキストを連結してテキスト入力エリアに表示した場合，アプリケーションがクラッシュすることがありました。

* ACI0101748 Windows版のみ。地域と言語の設定が「トルコ」に設定されている場合，プロパティリストを表示するとアプリケーションがクラッシュしました。

**注記**: 内部コンポーネントがバイナリモードからプロジェクトに変換されたことに伴う副作用でした。トルコ語の「アイ」（`İi`）は大文字に点がついており，ラテン文字のアイとは別の文字として扱われなければなりません。

* ACI0101744 4D WriteドキュメントをWrite Proに変換した場合，スタイルが正しく適用されないことがありました。

* ACI0101732 View Proスプレッドシートのリボンインターフェースが表示されている場合，JavaScript（`spread.commandManager().execute()`）でコピー＆ペーストができませんでした。

* ACI0101729 `shift`キーを押しながら上下矢印キーを入力してリストボックス行の選択範囲を拡大しようとした場合，範囲が移動するだけで，常に一定の行数が選択されました。

* ACI0101725 `LISTBOX SELECT ROW`と`lk remove from selection`でリストボックス行の選択を解除した後，`shift`キーを押しながらクリックまたは上下矢印キーの操作で選択範囲を変更しようとした場合，コマンドで選択を解除した行が選択の起点となりました。

* ACI0101698 プロジェクトモードのみ。ストラクチャのコメントにXML 1.0で許可されていない文字が使用されている場合，バイナリデータベースから変換したプロジェクトを開くことができませんでした。

* ACI0101691 `MAIL Convert to MIME `で出力されるメ--ルの`Content-Type`ヘッダーに不要なアンダースコア記号（`_`）が挿入されることがありました。

* ACI0101684 保存オプションが「データファイル内」に設定されているピクチャに対して`SET EXTERNAL DATA PATH`を実行した場合，オーファンBLOBが発生しました。MSCのデータ検証を実行することにより，そのようなオーファンBLOBを検出することができます。

* ACI0101665 Windows版のみ。サービス起動したサーバーで`PRINT SELECTION`を使用し，Microsoft Print to PDFドライバー経由でPDFを出力した場合，`0`バイトのファイルが作成されました。`Print form`であれば問題ありません。

* ACI0101647 Mac版のみ。`ZIP Create archive`でアーカイブしたアプリをFinderのアーカイブユーティリティで展開することができませんでした。シンボリックリンクが作成できないようです。4Dのコマンドであれば展開することができます。

* ACI0101591 テキストエディターなどの外部アプリケーションからコピーしたテキストをView Proエリアのリボンインターフェースまたはコンテキストメニューでペーストすることができませんでした。編集メニューは問題ありません。

* ACI0101408 `HTTP SET OPTION`の`HTTP timeout`オプションが`HTTP Get`の動作に反映されませんでした。つまり，サーバー接続に成功し，なかなか応答が返されず，切断もされない場合，いつまでもレスポンスを待ちました。

* ACI0101348 ユーザー設定が有効にされたアプリケーションをビルドし，Program Filesにインストールして，書き込みが許可されている場所にデータフォルダーを作成した場合，`OPEN SETTINGS WINDOW`で`User settings for data file`を開こうとすると，アプリケーションがクラッシュしました。`Structure settings`であれば，開くことができます。

* ACI0101309 `VP Import from object`に`Null`または空のオブジェクトを渡した場合，エラーが返されました。期待されるのは，新規スプレッドシートが作成されることです。

* ACI0101263 Write Proドキュメントのテキスト全文（`500,000`文字程度）を選択してコンテキストメニューの「コピー」を選択した場合，アプリケーションがフリーズすることがありました。

* ACI0101247 Windows版のみ。ヘッドレスモードでサーバーが実行されている場合，`RESTORE`コマンドでアプリケーションを復元することができませんでした。

* ACI0101236 メソッドエディターに`Begin SQL` `end s` と入力した場合，自動コード補完を確定したタイミングでアプリケーションがクラッシュしました。

* ACI0100864 フィールドのフォントが`3of9.TTF`に設定されたラベル設定ファイルを開こうとした場合，エラーが返されました。

**注記**: 修正により，エラーは表示されなくなりましたが，1993年製の「3 of 9」バーコードフォントは，現在のシステムでサポートされていないテクノロジーを使用しているため，画面にも印刷にもレンダリングされません。

* ACI0100769 Write Proウィジェットに`WP Insert table`を使用しているメソッドを入力してフォーミュラを評価した場合，アプリケーションがクラッシュしました。

**注記**: 問題は修正されましたが，Write Proドキュメントを更新するフォーミュラを同じWrite Proドキュメントに挿入することは勧められていません。

* ACI0100450 HTTPのボディが`0x000D`から始まる場合，Webサーバーがリクエストを正しく処理しませんでした。受信に時間を要するだけでなく，ヘッダーの`Content-Length`と`GET HTTP BODY`で受信したBLOBのサイズが一致しませんでした。

* ACI0100355 View ProスプレッドシートをPDF形式でエクスポートした場合，フッターおよびヘッダーのフォントがドキュメントに埋め込まれませんでした。

* ACI0100164 Windows版のみ。`PRINT SELECTION`でフォームを印刷した場合，v15よりも時間がかかりました。`SET PRINT OPTION` で `Legacy printing layer option` オプションを有効にし，旧式プリントレイヤー（GDI）を使用すれば問題ありません。また，プリントマージンを変更しなければ問題ありません。

* ACI0099508 Windows版のみ。`GET PRINT OPTION`の第３パラメーターを省略して`Double sided option`を取得しようとすると，ランタイムエラーが返されました。「丁合い」は任意のパラメーターなので，省略しても問題ないはずです。

* ACI0099046 macOS Big Surのみ。結合文字のダイアクリティカルマーク（`^`など）を入力した場合，別々の文字になりました。

* ACI0098367 クイックレポートエディターで選択したフィールドをドラッグ＆ドロップ操作で並び替えた場合，移動したフィールドがすべて同じフィールドになりました。回避するためには，フィールドを選択した後，画面を確定し，クイックレポートエディターを再表示してから並び替える必要がありました。

* ACI0102125 プロジェクトモードのみ。フィールド入力の確定を`REJECT`で拒むことができませんでした。

* ACI0102062 `SET DATABASE PARAMETER`のセレクター`98`（スリープ中のクライアントに対するタイムアウト）が適用されませんでした。スリープ中のクライアントに対するタイムアウトを過ぎてもユーザーがドロップされず，接続ライセンスも回復しませんでした。

* ACI0102106 プロジェクトフォームの`0`ページで入力順を変更した場合，設定が反映されませんでした。

* ACI0102145 バイナリモードのみ。プロジェクトモードにデータベースを変換した場合，リストボックスのヘッダーや列のフォントカラーや整列が変わってしまうことがありました。「自動」に設定されているプロパティ値が省略され，リストボックス全体の値を継承するようになってしまうことが原因です。

* ACI0102127 バイナリデータベースをプロジェクトに変換した場合，ピクチャボタンの`pathname`プロパティがエクスポートされないことがありました。昔のベータバージョンで作成されたボタンで問題が発生するようです。

* ACI0102035 プロジェクトモードのみ。プロジェクトを開くたびに*catalog.4DCatalog*ファイルの内容が更新されました。フィールドなどのヘルプTipsが記述された`<tip>`タグの最後に改行コードが挿入されます。v18.4 HF3までは問題ありませんでした。動作に影響はありませんが，バージョン管理に支障をきたします。

* ACI0101948 RESTリクエストでプロジェクトメソッドが実行された場合，管理画面でRESTセッションがドロップできなくなりました。

* ACI0101642 Mac版のみ。`ON EVENT CALL`でイベントハンドラーメソッドをインストールした場合，リストボックスのヘッダーをタップをしても`On Header Click`イベントが発生しませんでした。クリックであれば問題ありません。

* ACI0102087 表組内のマージフィールドにフォーマット（例：`MERGEFIELD pt_FC \# $,#.00`）が設定されている`.docx`ドキュメントをWrite Proにインポートした場合，マージフィールド名（`«pt_FC»`）は正しく取り出されますが，`WP Get text`から返されるテキスト値に改行コードが追加されました（`«pt_FC»\r\r`）。

* ACI0102140 スケーラブルWebセッションを有効に設定し，REST API経由で同一のプロジェクトメソッドを連続コールした場合，アプリケーションがクラッシュしました。

* ACI0102094 Mac版のみ。Apple Magic Mouseで入力エリアをクリックし，`GOTO OBJECT(*; "")`でフォーカスを消すと同時に`ALERT`などで新しいウィンドウを表示した場合，元のフォームに復帰したときにタブ順が次のオブジェクトにフォーカス表示が移動し，かつ，どこをクリックしても前のオブジェクトのコードが実行される状態に陥りました。

* ACI0102157 `APPLY TO SELECTION`のフォーミュラにローカル変数が使用されている場合，コンパイルモードでエラーが返されました。`EXECUTE FORMULA`を実行しているわけではないので，コンパイルモードでも問題ないはずです。

* ACI0102122 サーバーとの接続が閉じられてしまった場合，`SMTP Transporter.send()`メソッドがエラーを返しました。トランスポーターのkeepAliveが有効にされている場合，前回の`send()`から間隔が空いたときには，まず，リクエストの前に`NOOP`コマンドを送信し，必要であれば，サーバーに再接続するべきです。

* ACI0102130 Mac版のみ。Apple Siliconターゲットのコンパイルモードでは，ビットワイズ演算値が正しくありませんでした。

* ACI0102030 フォームに組み込まれたクイックレポートエディター上でカラムのドラッグ＆ドロップを何度も繰り返した場合，エラーが返されました。

* ACI0101878 プロジェクトモードのみ。データファイルのインデックス型がカタログのインデックス型と合致しない場合，ストラクチャエディターにはデータファイル側のインデックス型がストラクチャエディターに表示されました。そのため，ストラクチャ（プロジェクト）の入れ替えでインデックス型を変更することができません。バイナリモードでは，ストラクチャ側のインデックスが使用されました。

* ACI0101933 Apple Silicon版のみ。フローティング画像が配置されているView Proスプレッドシートを`VP convert to picture`でピクチャに変換した場合，エラーが返されました。Intelアーキテクチャでは問題ありません。

* ACI0102139 バイナリモードのデータベースをプロジェクトモードに変換した場合，「スケーラブルWebセッション」の設定ができませんでした。データベース設定でオプションを有効にしても，`WEB GET OPTION`の`Web scalable session`は`0`を返しました。デフォルト値が正しくないようです。新規作成したプロジェクトは，デフォルトが`1`なので問題ありません。

* ACI0102107 エクスプローラーの「テーブル」ページでテーブルを選択した場合，ダイアログの右側にフィールドリストが表示されますが，「ホーム」ページでは何も表示されませんでした。

* ACI0102024 データファイルの暗号化を有効にした場合，レコードが登録されていないテーブルにはMSCが警告マークを表示しました。

* ACI0099336 クライアント/サーバー版のみ。`SET AUTOMATIC RELATION`の設定が`RELATE ONE SELECTION`に反映されませんでした。ORDAのリレーション属性は問題ありません。

* ACI0102086 Windows版のみ。ライセンス登録者のファーストネームにアクセント文字が含まれている場合，ビルド版アプリケーションを起動すると，ライセンスが有効ではないというエラーが表示され，使用できませんでした。v19でライセンスファイルのBOMが取り除かれたことに伴う副作用のようです。

* ACI0101966 アプリケーションビルドの`CommonCopyright`キーがスタンドアロン版およびビルド版のサーバーアプリケーションに反映されませんでした。ビルド版のクライアントアプリケーションは問題ありません。`RuntimeVLCopyright` `ServerCopyright`も反映されません。

* ACI0102110 フィールドのコメントに絵文字が使用されているストラクチャをプロジェクトモードに変換した場合，無効なXMLカタログファイルが出力されました。

* ACI0102093 Windows版のみ。Write ProドキュメントをPDF形式でエクスポートした場合，SVG画像が表示されませんでした。`WP PRINT`でPDFを作成した場合は問題ありません。

* ACI0102092 Mac版のみ。Apple SiliconネイティブのコンパイルモードでView Proエリアを使用した場合，エラーハンドリングメソッドが実行されませんでした。

* ACI0102089 クライアント/サーバー版のみ。コンパイルモードでは，ORDAデータモデルクラスの関数がクライアント側で実行されました。

* ACI0102085 コンポーネント内で4D View Proメソッドが使用されている場合，プロジェクトをコンパイルモードで再起動するとエラーが返されました。Windows版でコンパイルしたプロジェクトであれば，問題ありません。

* ACI0102068 `Associated standard action`という定数がメニューアイテムプロパティと階層リストの両テーマに存在し，値がそれぞれ違っていました。

* ACI0102067 Mac版のみ。プロジェクトモードでタブコントロールがオブジェクトの幅に収まらない場合，ポップアップメニューとして表示されますが，そのメニューがタブの幅いっぱいに表示されました。もっとも長いメニュー項目の幅に表示されるべきです。

* ACI0102066 暗号化されたデータファイルを「レコードを強制更新」または「アドレステーブルを圧縮」モードでメンテナンスした場合，再起動後に「問題が検出されました（テーブルは暗号化されていますが一部のBLOBは暗号化されていません）」というエラーが返されました。

* ACI0102063 Mac版のみ。Siliconターゲットのコンパイルモードでは，デバッグログにメソッドコールが記録されませんでした。

* ACI0102061 バイナリモードのみ。フォームエディターでビュー名を変更することができませんでした。

* ACI0102060 MSCのデータ検証で暗号化の問題が検出され，同じキーでデータを再暗号化して問題を解消した後，もう一度データを再暗号化した場合，MSCに表示されたエラーメッセージが消えませんでした。

* ACI0102058 プロジェクトモードのみ。フォームオブジェクトをグループ化した場合，`.4DForm`ファイルのJSONにはグループがページ毎に列挙されました。バージョン管理が効率的にできるよう，グループ名はページに関係なく列挙されるべきです。

* ACI0102053 `GET HIGHLIGHT `を実行するたびに返される値が増えてゆきました。

* ACI0102051 Windows版のみ。`File.setAppInfo()` `File.getAppInfo` をダイナミックリンクライブラリ（`.dll`）に対して使用することができませんでした。実行ファイル（`.exe`）であれば問題ありません。

* ACI0102048 データファイルの暗号化をMSCで解除した場合，そのデータファイルをv18.4または18r6で開くことができませんでした。

* ACI0102046 クライアント/サーバー版のみ。4D Serverとは別のマシンで4D Remoteのデザインモードを開き，エクスプローラーの「すべてのデータクラスを表示」を実行した場合，ユーザークラスだけが表示され，データクラスは表示されませんでした。

* ACI0102040 クライアント/サーバー版のみ。`entity.clone()` でクローンしたエンティティに対して `entity.reload()` を実行した場合，両方のエンティティがリロードされました。

* ACI0102038 暗号化されたデータファイルをMSCで検証した場合，保存オプションが「データファイル内」に設定されたBLOBフィールドが実際には暗号化されていなくても，エラーが検出されませんでした。

* ACI0102034 クライアント/サーバー版のみ。サーバーからクラスを返した場合，クラス名が失われました。`OB Class().name`がクラス名ではなく，"Object"を返しました。

* ACI0102026 `entitySelection.drop()`でテーブルの全レコードを削除しようとした場合，デッドロック状態に陥ることがありました。内部的なセマフォの順序が良くないため，テーブルに対して別のスレッドが同時にアクセスした場合，問題が発生する可能性があります。

* ACI0101897 再帰的なコレクションに対して`collection.join()`を実行した場合，アプリケーションがクラッシュしました。

**注記**: 修正により，ランタイムエラーが返されるようになりました。

* ACI0101894 テキスト型のコンボボックスに表示フォーマットが設定されている場合，編集中のテキストにもフォーマットが適用されました。配列型のデータソースであれば問題ありません。

* ACI0101891 オブジェクト型のプロパティがデータソースに設定されたコンボボックスまたはタブコントロールを`OBJECT DUPLICATE`で複製することができませんでした。

* ACI0101890 メソッドエディターでトークナイズされたプロジェクトメソッドを部分的に選択した状態で`command`+`K`を入力した場合，選択テキストに合致するメソッドではなく，トークナイズされたメソッドが検索されました。

* ACI0101887 Windows版のみ。コンボボックスをクリックするたびに`On Activate`および`On Deactivate`イベントが発生しました。

* ACI0101886 テキスト型の変数またはフィールドがデータソースに設定されたコンボボックスは，自動挿入が動作しませんでした。選択リストに存在しない値を入力した場合，値がリストに追加されませんでした。

* ACI0101883 Windows版のみ。4D for OCIプラグインがインストールされませんでした。

* ACI0101882 データブラウザでクエリを実行した場合，作成されたエンティティセットが解放されませんでした。`/rest/$info`で確認することができます。

* ACI0101881 スケーラブルWebセッションが有効にされている場合，Webサーバーを再起動してもRESTライセンスが解放されませんでした。

* ACI0101880 プロジェクトモードのみ。コンボボックスのJSONスキーマ（`formsSchema.json`）が正しくありませんでした。`dataSourceTypeHint`は`integer`ではなく`text`であるべきです。

* ACI0101877 インポート＆エクスポートダイアログの上部にあるオブジェクトがダークモードに対応していませんでした。

* ACI0101876 フォームエディターにView Proエリアが表示されませんでした。

* ACI0101875 `On Before Keystroke`イベントで`Get edited text`を使用した場合，キーストローク前のテキストに加えて入力された文字が返されました。

* ACI0101873 Write Proエリアドキュメントに挿入されたフォーミュラの前にカーソルを移動してツールバーの「式を挿入」ボタンをクリックした場合，すでに挿入されているフォーミュラがエディターに表示されました。

* ACI0101871 レコードが存在するテーブルにフィールドを追加した場合，既存フィールドは`null`となりますが，そのようなエンティティセレクションに対して`max()` `min()` `average()` を実行した場合，`undefined`が返されました。「ヌル値を空値にマップ」を有効にしてレコードを強制的に更新すれば，問題が解消されます。

* ACI0101869 Web Adminが旧式セッション管理で動作している場合，ブラウザから管理画面にアクセスしてからWebサーバーを再起動し，再起動中にページをリフレッシュした場合，アプリケーションがクラッシュしました。REST認証のために作成されるコオペラティブスレッドがWebプロセスの初期化に干渉しているようです。

* ACI0101868 フィールドに表示フォーマットが設定されているストラクチャをプロジェクトに変換した場合，プロパティリストの値が赤い文字で表示されました。

* ACI0101867 プロジェクトモードのみ。クライアント側からサーバーをコンパイルモードで再起動した場合，`.4DZ`ファイルが使用中なので開けないという内容のエラーメッセージが表示されました。

* ACI0101866 MSCの「修復」ページにアイコン画像が正しく表示されませんでした。

* ACI0101865 プロジェクトフォームの継承フォームに使用されているテーブルを削除した場合，そのフォームをデザインモードで開こうとすると，アプリケーションが終了しました。

* ACI0101863 クライアント/サーバー版のみ。`On Startup`データベースイベントで`OB Entries(cs).length`を評価した場合，本来よりも少ない数が返されました。しばらくしてから実行すれば，正しい数が返されます。

* ACI0101862 サービス公開したサーバーアプリケーションを`RESTART 4D`で再起動することができませんでした。アップデーターがサービスを停止できないためです。

* ACI0101861 `VP Convert to picture`に`0`よりも高いカラム番号から始まるレンジを渡した場合，エラーが返されました。

* ACI0101860 定数の`wk list font family`でWrite Proドキュメントの段落番号フォントをファミリー名で設定しようとした場合，エラー`205`（無効な定数）が返されました。

* ACI0101999 カレントセレクションが空であり，フォーミュラを適用する対象のレコードが存在しない場合でも`ORDER BY FORMULA`に渡されたフォーミュラが評価されました。たとえば，配列の項目番号が無効であれば，範囲外エラーが返されました。

* ACI0101996 プロジェクトモードでは，文字列型フィールドの入力エリアに最大文字数の制限が適用されませんでした。最大文字数を超過するデータは，フィールドをデータベースに保存したタイミングで失われます。

* ACI0101992 暗号化されたデータファイルをMSCで修復した後，アプリケーションの開始時に「プライマリーキーの問題が検出されました」というメッセージが表示されました。

* ACI0101991 階層リストボックスの選択行を`shift`キーと上下矢印の操作で増減することができませんでした。ACI0101729およびACI0101725が修正されたことによる副作用です。

* ACI0101988 View Proエリアをオフスクリーンモードで使用した場合，`WA Evaluate JavaScript`で`$4d`オブジェクトのメソッドを実行することができませんでした。

* ACI0101987 日付フィールドに設定された表示フォーマットが`EXPORT TEXT`に反映されませんでした。

* ACI0101984 ダークモードのみ。フォームエディターの背景色にCSSプロパティの`media:dark`が反映されませんでした。

* ACI0101983 保存オプションが「データファイル内」に設定されたテキスト・ピクチャ・オブジェクト・BLOB型のフィールドは暗号化されませんでした。

* ACI0101980 スタイルシートが使用されているWrite ProドキュメントをHTML形式でエクスポートに場合，行間のスペースが狭くなってしまうことがありました。

* ACI0101979 `IMAP Transporter`でGmail本文の日本語を検索した場合，受信ボックスの全メールが返されました。

* ACI0101977 Apple Siliconのみ。4D Internet Commandsがインストールされたプロジェクトを開こうとした場合，アプリケーションがクラッシュしました。

**注記**: Rosettaの不具合でした。macOS 11.4 Release Candidate (20F71) の時点で修正されていないため，Windowsと共通の一般的なAPIを使用してコードが書き換えられました。

* ACI0101971 フォームエディターでAreaList Proエリアの拡張プロパティに画面にカラムのリストが表示されませんでした。

* ACI0101969 メールのエンコーティングが`us-ascii`だった場合，`CR` `.` `CR` という文字列（dot-stuffing）以降の本文が切り捨てられました。`quoted-printable`エンコーディングであれば，問題ありません。

* ACI0101968 ピクチャを返すフォーミュラをJavaScriptでView Proエリアに表示しようとした場合，アプリケーションがフリーズしました。ピクチャが`1`枚であれば，問題ありません。ピクチャを返さないフォーミュラも問題ありません。

* ACI0101964 `EXECUTE FORMULA`で実行したフォーミュラからエラーが返された場合，`ON ERROR CALL`でインストールしたエラー処理メソッドがコールされる前にランタイムエラーが返されました。

* ACI0101962 旧式ネットワークレイヤーが使用されている場合，リモートデバッガがクラッシュしました。「リモートデバッガを開始時に有効化する」が使用されている場合，スタートアップ直後にクライアントがクラッシュします。回避するためには`4DPreferences`ファイルの`remote_debugger_auto_attach`を取り除かなればなりません。

* ACI0101958 Windows版のみ。`HTTP Get`を実行するたびに，ハンドルが作成され，解放されませんでした。ハンドルの数は，Windows Resource Monitorで確認することができます。

* ACI0101952 `Encrypt data BLOB`および`Decrypt data BLOB`がスレッドセーフではありませんでした。

* ACI0101944 View Proスプレッドシートのフォントリストをマウスオーバーしたときに表示されるヘルプTipsに完全なフォントファミリー名が表示されませんでした。

* ACI0101941 View ProスプレッドシートをSVGピクチャ形式でエクスポートした場合，結合されたセルが正しく出力されませんでした。

* ACI0101940 タブコントロールのデータソースにオブジェクト記法が使用されている場合，

* ACI0101937 ラベル名にスラッシュ記号（`/`）が含まれる4D for iOSアクションを実行した場合，エラーが返されました。

* ACI0101934 フローティング画像が挿入されたView Proスプレッドシートを`VP Convert to picture`でSVG形式に変換した場合，画像が完全に表示されませんでした。

* ACI0101932 Windows版のみ。検索ピッカーウィジェットのテキストをクリアする「×」ボタンが表示されませんでした。

* ACI0101931 Mac版のみ。タブコントロールのデータソースにオブジェクト記法が使用されており，幅の関係でコントロールがポップアップメニューとして表示されている場合，項目を選択することができませんでした。

* ACI0101927 絞り込まれたエンティティセレクションに対して空のコレクションと`NOT IN`条件でクエリを実行した場合，データクラスの全エンティティが返されました。

* ACI0101923 Mac版バイナリモードのみ。CEF版のWebエリアがデフォルトで表示されませんでした。

* ACI0101922 プロジェクトモードのみ。フォームの１ページ目にWebエリアが配置されている場合，ページを切り替えて１ページ目に戻った場合，Webページが表示されませんでした。

* ACI0101921 `Compare strings`の`sk width insensitive`（半角と全角を区別しない）モードでカタカナを比較した場合，半角と全角の濁音または半濁音が等価と判定されませんでした。

* ACI0101916 コンパイルされたコンポーネントから`ODBC Pro`プラグインを実行するとエラーが返されました。

**注記**: プラグインSDKに問題がありました。インタープリターモードのホストから渡されたポインター型のパラメーターをコンパイルされたコンポーネント内で参照する場合の処理が修正されました。

* ACI0101910 カレントレコードがロードされていない状況でテキスト型フィールドをパラメーターとしてコンポーネントに渡した場合，ランタイムエラーが返されました。

* ACI0101909 `ORDER BY FORMULA`のソート条件に`Choose`を使用した場合，コンパイルエラーになることがありました。

* ACI0101908 標準テキストだけのメールを`MAIL Convert from MIME`に渡した場合，本文のないメールオブジェクトが返されました。`Content-Type`ヘッダーが存在しない場合に問題が発生します。[RFC 1342](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html)によれば，このヘッダーは省略しても良いことになっています。

* ACI0101907 Windows版のみ。`BUILD APPLICATION`を実行すると，ソースコードの再コンパイルが実行され，Mac版コンパイルで作成した`lib4d-arm64.dylib`ファイル（Apple Siliconターゲットのダイナミックリンクライブラリ）が削除されました。アプリケーションビルド画面を使用すれば問題ありません。

* ACI0101903 クライアント自動アップデートでv18からv19にアップグレードすることができませんでした。サーバーのプラットフォームがMacの場合，クライアントがサーバーに再接続しませんでした。クライアントをダブルクリックすると，アプリを開くための権限がない，というメッセージが表示されます。サーバーのプラットフォームがWindowsの場合，再起動後にクライアントがクラッシュしました。

* ACI0101902 テキスト配列がデータソースに設定されたタブコントロールを`OBJECT DUPLICATE`で複製することができませんでした。

* ACI0101901 フランス語版のみ。View Proエリアの関数リストの内容が正しく表示されませんでした。

* ACI0101900 `application/pdf`形式のファイルが添付されたメールを`MAIL Convert from MIME`で処理した場合，添付ファイルが失われてました。

* ACI0102022 スプリッターの線カラーがプロジェクトにエクスポートされませんでした。

* ACI0102021 フォーミュラの埋め込まれたWrite Proドキュメントがフィールドに保存されているデータファイルを「レコードを強制更新」モードで圧縮した場合，アプリケーションがクラッシュしました。

* ACI0102015 Windows版のみ。ピクチャポップアップメニューの選択された項目がハイライト表示されませんでした。

* ACI0102014 日本語版のみ。メソッド名が`20`文字以上のプロジェクトメソッドに`31`個以上のパラメーターが定義されている場合，シンボルファイルが文字化けする恐れがありました。無効なUTF-8シーケンスが出力されるためです。

* ACI0102013 `WEB SET ROOT FOLDER`で指定したフォルダーパスの末尾にフォルダーセパレーターを追加しなかった場合，`Get 4D folder`のセレクター`HTML Root folder`から返されるパス名にもフォルダーセパレーターが追加されませんでした。末尾にフォルダーセパレーターが省略された場合，自動的に追加されるべきです。

* ACI0102008 クラスメソッドでダイアログを開き，エンティティセレクション型リストボックスのフッターにリレーションエンティティの`Sum`を表示した場合，ダイアログを閉じるとクラスメソッドの`This`がクラスではなく，エンティティを指しました。

* ACI0102006 デバッグログの記録が有効にされている場合，`ORDER BY FORMULA`を実行すると，アプリケーションがクラッシュしました。

* ACI0102002 ビルド版のサーバーアプリケーションのメニューにデバッガを有効化するためのメニュー項目が表示されました。

**注記**: 修正により，コンパイルモードではメニュー項目が無効化され，ビルド版では表示されないようになりました。

* ACI0102017 Mac版プロジェクトモードのみ。ダークモードでは，データベース設定の項目タイトルの一部が低コントラストのフォントカラーで表示され，よく読めませんでした。

* ACI0102000 リストボックス列のデータソースにブール値が設定されている場合，データタイプを文字列に変更するとアプリケーションがクラッシュしました。

* ACI0101899 英語版のみ。View Proのリボンインタフェースの「フォーミュラ」タブで関数タイプの「カスタム」カテゴリが表示されるべき箇所に空欄が表示されました。

* ACI0101879 `entity.save()`から返されるステータスオブジェクトのドキュメントに`user4d_id`の古い説明が残されていました。

**注記**: バイナリモードでは，`user4d_id`はアカウント名ではなく，ユーザー番号が返されます。エイリアス（またはユーザー名）は`user4d_alias`に返されます。

* ACI0101857 Mac版のみ。外部プロセスから`UTF-8`以外のエンコーディングで標準出力ストリームが返された場合，`LAUNCH EXTERNAL PROCESS`には空の文字列が渡されました。

**注記**: 修正により，`UTF8`から`UTF-16`の内部的な変換がロッシー変換（無効な文字は`?`と出力される）になりました。

* ACI0101848 コンパイラーメソッドが存在する場合，メソッドエディターのコード補完でプロジェクトメソッドが候補として表示されませんでした。

* ACI0102154 `Mobile/medias/icons/`に追加した4D Mobileのカスタムアイコンが「ラベル＆アイコン」セクションのパネルに表示されませんでした。

* ACI0102152 4D MobileのターゲットをAndroidに設定した場合，Android SDKが自動的にダウンロードされませんでした。[URL](https://resources-download.4d.com/sdk/19R2/267957/android/android.zip)が正しくありませんでした。

* ACI0100954 フィールドを連結した式が設定されているクイックレポートの列を非表示にしてから非表示を解除した場合，式が「C1」に変化しました。

* ACI0102163 パスに括弧が含まれる場合，Androidアプリのビルドに失敗しました。

* ACI0101946 フォント名の末尾に数字が使用されている場合（例：Wingdings 3），View ProスプレッドシートのSVGエクスポートが失敗しました。

* ACI0102080 Apple Siliconターゲットのみ。`C_LONGINT`で宣言した変数に整数部が`6`桁の実数を代入した場合，小数部が切り捨てられました。

* ACI0102073`MAIL New attachement`に`File`オブジェクトを渡すことができませんでした。

* ACI0102072 `MailAttachement`オブジェクトに`path`プロパティがありませんでした。

* ACI0101514 クライアント/サーバー版のみ。`OB Instance of`で`entity` `dataClass` `entitySelection`といったORDAクラスを判定することができませんでした。

* ACI0102102 コンパイルモードのみ。`OBJECT Get title(Self->)`が空の文字列を返しました。

* ACI0102162 Windows版のみ。4D Mobileのプロジェクトエディターでシミュレーターのリストを表示しようとした場合，シンタックスエラーが返されました。

* ACI0101926 `Begin SQL`と`End SQL`の間に実行したSQLリクエストがデバッグログに記録されませんでした。

* ACI0101132 View Proスプレッドシートのズーム率を変更した場合，「自動」に設定された行の高さも変化しました。

* ACI0102027 `VP SET SHOW PRINT LINES`を実行した場合，エリアのチェックボックス表示が更新されませんでした。
