---
layout: fix
title: "4D v17 修正リスト"
date: 2019-07-11 10:00:00
categories: 修正リスト
tags: "17.2"  
build: 239401
version: 17.2

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099773 テキスト入力エリアのプロパティで自動ドラッグと自動ドロップを有効にした上で「ドラッグ可」と「ドロップ可」を無効にした場合，ドラッグ＆ドロップができませんでした。

* ACI0099731 フランス語版のみ。Windowsで自動アップグレード用にMac版にクライアントアプリケーションをビルドしたときに表示されるメッセージにスペルミス（clienteではなくclient, de l'applicationではなくdu l'application）がありました。
	
* ACI0099789 Windows 64ビット版のみ。旧式プリントレイヤー（GDIモード）では，プリントプレビューで用紙の向きが無視され，横向き（landscape）に出力することができませんでした。

* ACI0099759 クライアント/サーバー版のみ。エンティティセレクションを作成した後，クエリをキャンセルした場合，そのエンティティセレクションを使用するコマンドでエラー ``1303``が返されました。たとえば，``USE ENTITY SELECTION`` ``QUERY`` キャンセル ``Create entity selection``のような処理で問題が発生しました。

**注記**: 17r5で導入された最適化コンテキストが無効になってしまうことが関係しています。17.xで記述されたコードの場合，同一のエンティティセレクションは暗黙的に最適化コンテキストを流用します。クエリをキャンセルした後，下記のように新しい最適化コンテキストを使用すれば，問題を回避することができます。

```
USE ENTITY SELECTION(Form.list)
QUERY([Tabelle_1])
$querysettings:=New object("context";"dummy")
Form.list:=Create entity selection([Tabelle_1];$querysettings)
UNLOAD RECORD([Tabelle_1])
```

* ACI0099624 ``CREATE VIEW``コマンドと``CASE...WHEN...END``構文が併用されているSQLを実行した場合，アプリケーションがクラッシュしました。どちらか一方が使用されていなければ，問題ありません。

```sql
CREATE OR REPLACE VIEW Mutatielog_T001 (Functie, Record, table_uid, number) AS
SELECT functie_naam, recordid, table_uid,
CASE
  WHEN table_uid in ('526a221561405849a27350d9bd6217f9') THEN 1
  WHEN table_uid in ('c54043630f8bbd4cb6cfb1c8862b3271') THEN 2
END AS number
FROM sys_mutatie
WHERE sys_mutatie.administratie='t001'
```	

* ACI0099714 Microsoft Excelなどの表計算ソフトからタブ区切りテキストをコピーして4D Write Proの表にペーストした場合，文字列全体が単一のセルにすべて挿入されました。期待されるのは，区切られた文字列がそれぞれ隣接するセルに挿入されることです。

* ACI0099667 メソッドの``For each``ブロックの前に不釣り合いなカッコ（開くカッコが足りない）が存在する場合，シンタックスエラーを実行すると，アプリケーションがクラッシュしました。閉じるカッコが足りない場合は問題ありません。

* ACI0099461 インデックスが設定されたオブジェクト型フィールドに対するクエリで``Null``または``Undefined``を検索値に指定した場合，返される結果が正しくありませんでした。

* ACI0099749 クライアント/サーバー版のみ。プロセスの作成や削除にタイミングで，稀にサーバーのデッドロックが発生することがありました。

**注記**: ユーザーをロックする前にサーバーをロックするよう，内部的なオブジェクトロックの仕組みが修正されました。

* ACI0099637 ストラクチャエディターのインスペクターに日本語でテーブルまたはフィールドの名前を入力した後，``return``キーを``3``回（日本語入力の確定・テキスト入力の確定・次のオブジェクトにタブ移動）してからストラクチャエディターのウィンドウをクリックし，再度，インスペクターのウィンドウをクリックしてテーブルまたはフィールドの名前を入力しようとした場合，日本語入力ができませんでした。インスペクターのウィンドウを閉じてから再表示させると，日本語入力ができるようになります。

**注記**: 「フォーカス可」かつ「タブ有効」が設定されたチェックボックスがフォーカスされた状態で，そのウィンドウを閉じずに別ウィンドウでテキスト入力を開始しようとした場合に問題が発生しました。

* ACI0099523 SVGコンポーネントの``SVG_New_textArea``コマンドに標準テキストを渡した場合，文中の改行コード（``CR`` ``LF``）がSVGの``tbreak``要素で置換されませんでした。

* ACI0099675 64ビット版のみ。クイックレポートエディターで計算カラム（例：``[Table_1]price*[Table_1]quantity``）にフォーマット（例：``###0``）を設定した場合，カラムのフォーミュラがクリアされました。

* ACI0099585 64ビット版のみ。MSCでレコードヘッダーによる修復を実行した場合，インデックスの再構築が必要になりますが，この処理にデータベース設定のキャッシュサイズが使用されないため，レコード数が多い場合（例：データファイル``200``GB），非常に時間がかかりました。また，キャッシュにレコードがロードされていない状態でインデックスの構築が実行されると，ゼロ除算により，アプリケーションがクラッシュする恐れがありました。

* ACI0099554 クライアント/サーバー版のみ。アプリケーションプロセスで``REDUCE SELECTION``を実行してカレントセレクションのサイズを``0``に設定した場合，カレントレコードがアンロードされませんでした。

* ACI0099314 64ビット版のみ。``SET MENU BAR``を実行してから``EDIT ACCESS``でツールボックスの「ユーザー＆グループ」ページを表示した場合，設定したメニューバーではなく，デザインモードのメニューバーが表示されました。また，ダイアログを閉じると，復帰したメニューバーの項目は一部が選択不可の状態になりました。

* ACI0099456 シングルサインオン（SSO）が有効にされている場合，一部の接続ユーザー名が管理ウィンドウのリストに表示されませんでした。

* ACI0099689 macOS 10.15 Catalinaでアプリケーションを起動すると，すぐにクラッシュしました。

**注記**: ファイルシステムの「データ領域」に対応し，メニュー項目のキーボードショートカットによる入力処理が修正されました。

* ACI0099615 Windows 64ビット版のみ。複数のパレットウィンドウを表示させた場合，最後に開いたウィンドウが最初に開いたウィンドウの背面に表示されました。期待されるのは，最後に開いたウィンドウが最前面に表示されることです。

* ACI0099599 Mac版のみ。存在しないテーブル名をメソッドエディターに入力してトークナイズ（確定）すると，行末に制御文字（バックスラッシュ記号）が表示されました。

* ACI0099404 インデックスを再構築した後，一部のインデックスページがまだフラッシュツリーに残されている状態でインデックスを削除した場合，アプリケーションがクラッシュすることがありました。

* ACI0099605 激しく壊れたデータファイルに対して「タグによる修復」を実行した場合，アプリケーションがクラッシュすることがありました。データファイルや``.match``ファイルがランサムウェアの標的にされた場合，ファイルは暗号化され，まったく修復不可能になりますが，そのような場合に問題が発生します。

* ACI0099674 ``COLLECTION TO ARRAY``の第``3``パラメーターにテキスト型が渡された場合，コンパイラーからエラーが返されました。リテラルテキストであれば，問題ありません。

* ACI0099662 ``WP SET ATTRIBUTES``にWrite Pro属性の値がドット記法で渡された場合，シンタックスチェックでエラーが返されました。最後のパラメーターであれば，ドット記法でも問題ありません。

* ACI0099621 同一のフォームに複数の日付ピッカーが表示されている場合，一方のピッカーに日付を代入すると，両方のピッカーに同じ日付がセットされました。

* ACI0099544 64ビット版のみ。表示フォーマットが設定された実数フィールド（例：``String([TEST]Prix;"##0.00€;-##0.00€")``）がラベルに挿入されていた場合，最初の1枚でラベルの出力が終了しました。
