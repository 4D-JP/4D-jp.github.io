---
layout: fix
title: "4D v17 修正リスト"
date: 2019-03-02 21:37:00
categories: 修正リスト
tags: "17.1" 
build: 234139
version: 17.x

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099272 Write Proエリアに対してドラッグ＆ドロップ操作をした場合，テキスト中のドロップ位置を示すカーソルが表示されませんでした。自動ドラッグ＆ドロップでは問題ありません。

**注記**: Write Proエリアだけでなく，テキスト入力エリア全般が修正されました。``Drop position``から返される位置は，ヘッダー・本文・フッターそれぞれの相対位置です。下記のようなコードで

```
$selection:=WP Selection range($wp) 
If ($selection.container#Null) //drop position is in header/footer
  $range:=WP Create range($selection.container;$dropPos;$dropPos)
Else 
  $range:=WP Create range($wp;$dropPos;$dropPos)
End if
```

* ACI0099265 Windows 64ビット版のみ。データベース設定で「スプラッシュスクリーン」が非表示に設定されている場合，SDIモードでアプリケーションを起動中に一瞬，画面の左上にスプラッシュスクリーンが表示されました。

* ACI0099003 Mac 64ビット版のみ。リストフォームの``On Display Detail``イベントで非表示に設定された入力エリアを``On Load Record``イベントで再表示した場合，オブジェクトのボーダーだけが表示され，内容は表示されませんでした。

**注記**: 似たような現象で，リストフォームの``On Display Detail``イベントで値が代入された入力エリアをリスト上で更新しようとした場合，その行の値ではなく，最後に代入された値が表示されました。これは仕様です。編集中のオブジェクトに対して``On Display Detail``イベントは発生しません。``On Display Detail``だけでなく，``On Load Record``イベントでも同等の代入文を実行する必要があります。

* ACI0099291 Mac版のみ。システム版Webエリアに対して`` WA Evaluate Javascript``を使用した場合，``\r``と``\n``がリテラル文字列として処理され，JavaScriptコードが正しく実行されませんでした。

* ACI0099098 Write Proで非表示文字であるタブが表示されるようにした場合，下線が付されたタブの下線が表示されませんでした。

* ACI0099253 クイックレポートの出力中，「レポート生成中」という進捗ダイアログがモーダルウィンドウで表示され，処理が完了するまでアプリケーションを操作することができませんでした。

**注記**: ウィンドウタイプがフローティングウィンドウに変更されました。

* ACI0099061 64ビット版のみ。クイックレポートエディターでカラムの水平揃えを変更することができませんでした。

* ACI0098951 詳細フォームが設定されていないリスト型サブフォームをダブルクリックした場合，予期しないエラーが返されました。期待されるのは，そのテーブルのデフォルト入力フォームが使用されることです。

* ACI0098925 バックアップ設定の「指定時間経過後に再試行」オプションは設定ファイルに保存されませんでした。Windowsでは常に``0``秒となり，macOSでは常に``60``分となりました。

* ACI0099225 リストボックスのクリックイベントで``FORM GOTO PAGE``がコールされ，ページが切り替わることにより，そのリストボックスが画面上から消えるような場合，アプリケーションがクラッシュしました。

* ACI0098765 Mac版のみ。（プロパティリストではなく）ストラクチャエディター上でフィールド名を編集し，日本語変換を確定した場合，日本語変換プログラムのウィンドウが閉じられませんでした。

**注記**: 修正により，矢印キーだけでなく，``enter``キーが押されるか，入力エリアのフォーカスが移動したタイミングでも，変換ウィンドウが閉じられるようになりました。

* ACI0099229 ネットワーク接続が利用できない状態でアプリケーションを起動し，その後，ネットワークが利用できるようにして``HTTP Get``を実行した場合，エラー``30``が返されました。以前のバージョンでは，ネットワーク接続後，数秒を置けば，コマンドが使用できました。

* ACI0099244 複数のプロセスが同一のエンティティに対して同時にORDAでアクセスした場合，アプリケーションがクラッシュすることがありました。

* ACI0099217 v16以前に4D Mobileでタッチされたレコードをv17で更新しようとした場合，スタンプの不一致により，``400``エラーが返されることがありました。

**注記**: Wakandaからのリクエストに限り，スタンプが``0``のレコードも保存されるようになりました。

* ACI0099165 クライアント/サーバー版のみ。``dataClass.newSelection()``で作成したエンティティセレクションに``entitySelection.add()``でエンティティを追加した場合，そのエンティティセレクションのリレーション属性を求めると``Null``が返されました。

* ACI0099123 クライアント/サーバー版のみ。エンティティセレクションに``entitySelection.add()``でエンティティを追加した場合，追加されたばかりのエンティティの位置が``entity.indexOf()``で返されませんでした。

* ACI0099246 64ビット版のみ。``GRAPH``で作成されたタイプ``2`` ``3`` ``7``のグラフは，SVGのIDが正しくありませんでした。

* ACI0099187 Windows版のみ。特定のプラグインの組み合わせがインストールされている場合，コンパイル処理を実行するとアプリケーションがクラッシュしました。

* ACI0099232 4D WriteドキュメントをWrite Proの変換した場合，フォントカラーがブルーからブラックに変化する場合がありました。

* ACI0099231 4D WriteドキュメントをWrite Proの変換した場合，スモールキャピタル文字が通常の大文字に変化する場合がありました。

* ACI0099202 4D WriteドキュメントをWrite Proの変換した場合，カスタマイズされた箇条書きの記号を変更することができませんでした。

* ACI0098972 4D WriteドキュメントをWrite Proに変換した場合，カスタマイズされた箇条書きの記号が引き継がれませんでした。

* ACI0099101 4D WriteドキュメントをWrite Proに変換した場合，印刷時に背景が透明ではなくなりました。

**注記**: 4D WriteドキュメントをWrite Proに変換した後，``WP SET ATTRIBUTES``で``wk background color``を``wk transparent``に指定し，``WP PRINT``で印刷してください。``WP New``で作成した新規ドキュメントのデフォルト背景色は，表示モードを問わず``#FFFFFF``ですが，埋め込みモードであれば，背景を``wk transparent``に設定し，背後のオブジェクトが透けて表示されるようにすることができます。

* ACI0099164 Windows版のみ。``Popup form window``タイプのウィンドウ上では，マウスボタンが押されていない限り，``On Mouse Move``イベントが発生しませんでした。

**注記**: MDIモードのポップアップウィンドウにフローティングウィンドウ属性が設定されていないことが原因でした。

* ACI0099160 Windows版のみ。``Pop up menu``の第２引数（デフォルト項目の指定）が無視されました。

* ACI0099110 ``SET CHANNEL``で``3600``を下回るボーレートを指定した場合，エラー``-28``が返されました。

* ACI0099107 インタプリターモードのみ。選択リストが設定された変数のデータ型は，デフォルトで``18``（テキスト配列）に設定されました。期待されるのは，選択リストが設定されてない変数のように``5``（未定義）になることです。フォームロード時にデータ型がテキスト配列になってしまうため，文字列の代入文がシンタックスエラーになってしまいます。変数をテキスト型（``2``）で宣言してコンパイルすれば問題ありません。

* ACI0099091 テンプレート（レンジオブジェクト）に挿入された式を評価し，新規Write Pro文書に組み込んだ場合，式に設定されたフォントサイズが失われ，前後のフォントサイズが評価された式のテキストに適用されました。

* ACI0099018 Mac版のみ。境界線スタイル「標準」のオブジェクトは，Retinaディスプレイで左と下のボーダーラインがそれぞれ1ピクセルずれて表示されました。

* ACI0098939 Mac 64ビット版のみ。CEF版Webエリアは``WA Evaluate javascript``の実行が低速でした。システム版と比較しておよそ500倍の時間を要します。Webエリア上でマウスポインターを移動すると，幾らか速度が改善されますが，それでもかなり低速でした。

**注記**: 修正により，速度の問題は改善されましたが，それでもシステム版のほうが``div``の操作は高速です。

* ACI0098697 Mac 64ビット版のみ。エクスプローラーの「拡大」アイコンをクリックすると，ウィンドウが過剰にリサイズされ，復帰できなくなりました。

* ACI0099065 64ビット版のみ。``PRINT LABEL``で用紙またはラベルの枠外にオブジェクトが印刷されることがありました。
