---
layout: post
title: "コンパイラー指示でチェックを無効化"
date: 2020-08-31 12:00:00
categories: 仕様
tags: 18.x programming preemptive
---

v18では，プロジェクトメソッドをプリエンプティブモードで実行できるようにするため，スレッドセーフではないコマンドのチェックを部分的にスキップすることができるようになりました。チェックを無効化するためには，下記のようにアンセーフなコマンドの前後にコンパイラー指示を記述します。

```
//%T
SET MENU BAR(1) //not thread safe
//%T+
```

このテクニックは，論理的な条件分岐により，スレッドセーフではないコマンドがプリエンプティブモードで実行されることはないとわかっているような場合に有用です。

チェックの対象から外されるのは，4Dコマンドだけであることに留意してください。プリエンプティブモードで実行できないプロジェクトメソッドをチェックから除外することはできません。

この点はドキュメントに明記されています。

https://doc.4d.com/4Dv18R3/4D/18-R3/Preemptive-4D-processes.300-4901397.ja.html
