---
layout: fix
title: "4D v19r8 修正リスト"
date: 2023-04-10 08:00:00
categories: 修正リスト
tags: 19r8
build: 100218
version: 19r8
permalink: /2023/10/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0103831 メソッドエディターでプロセス変数名およびインタープロセス変数名のタイプアヘッドが機能しませんでした。

* ACI0103830 Windows版のみ。データベース設定で開始モードが「アプリケーション」に設定されており，標準アクションの「デザインモード」が関連づけられたメニューやオブジェクトが存在せず，SDIモードが有効にされている場合，デザインモードに移動する手段がなくなりました。SDIモードでは*Alt*+*Shfit*+右クリックを入力しても[プロセスメニュー](https://doc.4d.com/4Dv19/4D/19.6/Debugger.300-6269364.ja.html)が表示されないためです。

* ACI0103827 新ネットワークレイヤーのみ。サーバーの管理画面で新規クライアント接続を拒否した場合，操作をする前から接続していたクライアントもサーバーと通信できなくなりました。

* ACI0103820 クライアント/サーバー版のみ。元サイズが`0`ではない`4D.Blob`属性をサイズが`0`の`4D.Blob`で更新することができませんでした。

* ACI0103814 クライアント/サーバー版のみ。元サイズよりも小さなサイズの`4D.Blob`属性を`dk auto merge`モードで更新することができませんでした。
 
* ACI0103825 サーバー終了時に多数のプロセスが遅延されていた場合，アプリケーションがすぐには終了しませんでした。遅延中のプロセスを強制的に終了するまでのタイムアウトが`3`秒ではなく`50`秒に設定されていたため，プロセスが強制的に終了させられるよりも早く"Task Pending"アラートが表示されました。

**注記**: 問題は修正されましたが，修正前のバージョンでも，何もしていないプロセスが終了を阻んでいるだけだったので，たとえ強制的にサーバーを終了してもデータファイルに破損が生じる恐れはありません。

* ACI0103795 Windows版のみ。ビルド版のクライアント/サーバーアプリケーションは「同時接続ユーザー数の上限に達しました」メッセージが表示されず，単純に「接続できませんでした。アプリケーションの管理者に問い合わせてください」というエラーが返されました。

* ACI0103768 サイズが`0`バイトのBLOBを *GZIP fast compression mode* または *GZIP best compression mode* で圧縮した場合，`COMPRESS BLOB`がエラー`100`を返しました。ACI0103487が修正されたことによる副作用のようです。
 
* ACI0103791 クライアント/サーバー版のみ。ORDAでアクセスした`4D.Blob`を元よりも小さなサイズの`4D.Blob`で上書き保存することができませんでした。元よりもおおきなサイズの`4D.Blob`であれば問題ありません。

* ACI0103785 クライアント/サーバー版のみ。サイズが`1`バイト以上`99`バイト以下の`4D.Blob`にORDAでアクセスすることができませんでした。`size`プロパティが未定義の`4D.Blob`オブジェクトが返されました。

* ACI0103758 リストボックスを垂直方向にリサイズした場合，*On Display Detail* イベントが過剰に発生しました。

* ACI0103725 リストボックスを垂直方向にリサイズした場合，出現した行で追加の*On Display Detail* イベントが発生せず，リストボックスが完全に再描画されませんでした。垂直スクロールバーを操作してリストボックスを再描画すれば，出現した行の内容が表示されます。

* ACI0103504 ストラクチャエディターでリレーションの上にマウスポインターを移動するとリレーション名がステータスバーに表示されますが，スペース不足により，長いリレーション名が途切れてしまいました。

* ACI0103153 `LISTBOX SET PROPERTY`と *lk cell vertical padding* を使用してセルの垂直パディングを変更した後，スクロールと`shift`クリック操作で多数の行を選択した場合，ハイライトに隙間が表示されました。

* ACI0103756 Windows版のみ。高解像度ディスプレイ（拡大率が`100%`を超える設定）にフォームを表示した場合，スタイル付きテキストのフォントサイズをフォントピッカーで変更した場合，選択したサイズに拡大率を掛けたサイズが適用されました。また，フォントピッカー表示中にスタイル付きテキストを選択した場合，サイズを拡大率で割ったフォントサイズが表示されました。
 
* ACI0103737 クライアント/サーバー版のみ。`entity.save(dk auto merge)`でBLOB型の属性を保存した場合，`0`バイトのBLOBが保存されました。

* ACI0103712 クライアント/サーバー版のみ。コンパイルモードでプライマリーキー値にカンマ記号（`,`）が含まれているエンティティに`dataClass.get()`でアクセスした場合，クライアントがクラッシュしました。

* ACI0103786 `IMAPTransporter`の`checkConnection()`メソッドで接続をチェックせずに`createBox()`を実行した場合，アプリケーションがクラッシュしました。

* ACI0103713 エンティティセレクション型のリストボックスで自動行高さを有効にした場合，動的に追加したセルや行の内容が正しく表示されませんでした。明示的にリストボックスを再描画する必要があります。

* ACI0103482 4D Serverを再起動せずに新ネットワークレイヤーのプロジェクトから旧式ネットワークレイヤーのプロジェクトに切り替えた場合，エラー`-1`が返されました。
 
* ACI0103769	*NetKit* コンポーネントの`OAuth2.getToken()`を続けて実行した場合，リフレッシュトークンを渡しており，その期限が過ぎていないにも関わらず，毎回，ブラウザが起動して認証画面が表示されました。期限の計算が間違っているようです。

* ACI0103751 Write Proドキュメントに*Conduit ITC Pro* フォントの*Medium* スタイルを使用したい場合，MacとWindowsで別々の名称を指定する必要がありました。Windowsでは*Conduit ITC Pro Medium*，Macでは*ConduitITCPro-Medium* というフォント名で指定する必要があります。

**注記**: 修正により，フォントのフルネーム（`wk font`または`wk list font`で返される属性）はプラットフォーム共通となりました。修正前にMacで保存されたドキュメントの場合，保存されているのはPostScript名ですが，そのようなフォント名も正しく解釈することができます。いずれにしても，属性値として返されるのはPostScript名でも表示名でもないニュートラルなフォント名となります。

* ACI0103679 エンティティセレクション型のリストボックスの行を`LISTBOX SELECT ROWS`で選択した後，上下矢印キーを入力した場合，コマンドで選択した行ではなく，その前にクリック操作で選択された行を基準にハイライトが移動しました。
 
**注記**: コマンドで行の選択を解除した場合の動作は，別の不具合として扱われます。

* ACI0103587 Windows版のみ。文字列リテラルとして記述されているプロジェクトメソッド名やフォーム名を*Alt*+ダブルクリックした場合，そのメソッドやフォームがエディターで開きませんでした。*Control*+`K`で開くことはできます。

* ACI0103759 `WP Get sections`にメモリリークがあり，ハングやクラッシュに至ることがありました。

* ACI0103723 `VP MOVE CELLS` `VP Copy to object` `VP PASTE FROM OBJECT`が大量のメモリを消費し，処理に時間を要しました。
 
* ACI0103753 Windows版のみ。リストボックスに関連づけられたコンボボックス型のドロップダウンメニューに`25`個以上の項目が存在する場合，入力エリアにテキストを入力した上で矢印アイコンをクリックすると，メニューが表示された後すぐに閉じられました。

* ACI0103747 *Visual Studio Code* に4D-Analyzerをインストールして4Dのトリガを開いた場合，LSPサーバーがクラッシュし，コードがトークン表示されませんでした。

* ACI0103734 `IMAPTransporter.selectBox()`を実行した場合，エラー`11`が返されました。

* ACI0103749 新ネットワークレイヤーのみ。新規クライアント接続を拒否した後に許可した場合，サーバーのアプリケーション名がUDPでブロードキャストされませんでした。UDPを再開するためには，サーバーを再起動する必要がありました。旧式ネットワークレイヤーでは問題ありません。

* ACI0103740 デザインモードのエクスプローラーを閉じた後にメソッドメニューの「エクスプローラーに表示…」を実行した場合，アプリケーションがフリーズしました。

* ACI0103710 コマンドラインインターフェースの`--dataless`および`--headless`オプションを使用して実行したプロジェクトが開始時にWebサーバーを起動するように設定されていた場合，アプリケーションがクラッシュしました。`--headless`だけであれば問題ありません。

* ACI0103711 ピクチャ入力オブジェクトに設定したボーダースタイルがフォーム実行時に反映されきませんでした。フォームエディターには正しく表示されます。

* ACI0103727 バイナリモードのみ。別のクライアントがロックしているメソッドをエディターで開いた場合，エディターのツールバーにロックアイコンは表示されますが，アラートが表示されませんでした。
 
* ACI0103446 メソッドのコメント文を右クリックした場合，コンテキストメニューに「参照箇所を検索」と「定義に移動」が表示されませんでした。

* ACI0103728 4D for Mobileで作成したiOSアプリのセクションに配置したフィールドにはデータフォーマッターが適用されませんでした。

* ACI0103717 配列型リストボックスに自動行高さを設定した場合，セルの内容を更新した後にリストボックスの描画が崩れました。`REDRAW`コマンドを使用すれば正しく再描画されます。
 
* ACI0103721 CEF版Webエリアにカメラおよびマイクのアクセスが許可されていませんでした。

* ACI0103708 `IMAPTransporter.getBoxList()`がアクセント記号を正しく返しませんでした。

* ACI0103720 4D for MobileのプロジェクトエディターにAndroidシミュレーターの一覧が表示されませんでした。

* ACI0103628 Write Proエリアが入力不可に設定されている場合，ツールバーの置換ボタンをクリックするとエラーが返されました。エリアが入力不可のときは置換ツールが非アクティブになるべきです。
 
* ACI0103592 フォームに組み込んだクイックレポートの罫線が交差するポイントをクリックした場合，エラー``9850``が返されました。

* ACI0103368 エンティティを`2`回リロードすると，エンティティのロックが開放されました。

* ACI0103593 Mac版のみ。特定のプロジェクトをIntelおよびApple Siliconアーキテクチャをターゲットにコンパイルした場合，不要な桁区切りが定数に適用されるために関数パラメーターの数が狂ってしまい，コンパイルエラーが返されました。

* ACI0103541 フォームに埋め込まれたクイックレポートエディターのカラムをドラッグ＆ドロップした後，右クリックメニューが正しく更新されませんでした。
 
* ACI0103718 WebサーバーまたはRESTサーバーに高い負荷がかかった場合，アプリケーションがクラッシュすることがありました。

* ACI0103697 コンパイルモードのみ。レイジー演算子（`||`および`&&`）とマイナス数値リテラルの比較が間違っていました。`5 || -1`が`5`ではなく`4`を返しました。明示的にカッコを挿入すれば（`5 || (-1)`）問題ありません。

* ACI0103657 データソース値が`Null`がセットされた入力オブジェクトに値を入力することができませんでした。データソース値が空の文字列であれば問題ありません。また「Nullを空値にマップ」を有効にすれば問題ありません。

**注記**: 修正により，フォームオブジェクトのデータソースがエンティティ属性（`entity.name`）で値が`Null`の場合，`entity.getDataClass()[name].fieldType`が入力制御に反映されるようになりました。

* ACI0103663 Write Proエリアのスペルチェックを有効にした場合，赤い点線がテキストボックスの背後から透けて表示されました。

* ACI0103570 スケーラブルセッション管理が有効にされている場合，*On Web Connection* データベースメソッドはスレッドセーフであることが求められますが，コンパイラーがプリエンプティブモードに対応していないコードを検出しませんでした。一旦，セッションなしを選択してから，スケーラブルセッション管理を有効にすれば問題ありません。

* ACI0103683 リストボックスのセルにピクチャを表示した場合，画像の右端が罫線の上に描画されました。

* ACI0103673 ビルドしたデスクトップ版アプリケーションが正常に終了しませんでした。スポンサーメッセージを表示した後にアプリケーションがクラッシュします。
 
* ACI0103682 4D Go Mobileのプロジェクトエディターでバージョン番号を設定してAndroid版アプリをビルドした場合，アプリのバージョン番号が更新されず，常に`1.0`となりました。

* ACI0103681 Mac版のみ。Xcodeのパスにスペース記号などの文字が含まれている場合，Apple Siliconターゲットのコンパイルを実行しようとすると「xcode-selectの呼び出しに失敗した」というエラーが返されました。Xcodeのパスが正しくエスケープされていないようです。

* ACI0103652 テキスト入力の*On Getting Focus* イベント中に`Pop up menu`を実行した後，`POST KEY`で`Tab`を送信した場合，フォームのどこをクリックしてもテキスト入力が再フォーカスされてイベントが繰り返されました。フォームイベントをトレースすれば問題ありません。

* ACI0103533 テキストフィールドの背景色が透明に設定されたラベルをラベルエディターにインポートした場合，グレーの背景色が表示されました。

* ACI0103672 クライアント/サーバー版のみ。データクラスのメンバー関数からプリエンプティブ非対応のコンポーネントメソッドを実行した場合，エラーが返されませんでした。

* ACI0103647 Mac版のみ。プロジェクトに大量の文字列リテラルが存在する場合，Apple Siliconアーキテクチャのコンパイル版アプリケーションがクラッシュすることがありました。プロセスの初期化中に定数がスタックメモリを使い果たしているようです。
 
* ACI0103669 Mac版のみ。Apple Silicon搭載のMacを再起動した後，プロジェクトをコンパイルしようとした場合，*Couldn't find active developer tools* というエラーが返されることがありました。コンパイラーは内部的に`LAUNCH EXTERNAL PROCESS`を`2`秒のタイムアウトで実行していますが，システムを再起動した直後はタイムアウトが短すぎることがあるためです。

**注記**: タイムアウトが`60`秒に延長されました。

* ACI0103658 おおきなピクチャを`TRANSFORM PICTURE`コマンドの`Scale`オプションで引き伸ばした後，`PICTURE TO BLOB`を実行した場合，アプリケーションがメモリ不足でクラッシュすることがありました。

**注記**: 修正により，若干，処理速度が低下しましたが，クラッシュは回避されるようになりました。

* ACI0103653 テーブルのレコードがすべてキャッシュされている場合，複数条件のインデックス検索速度が大幅に低下しました。ACI0103507が修正されたことによる副作用のようです。

* ACI0103639 フォームの異なるページに同名のオブジェクトが存在する場合，Apple Siliconターゲットのコンパイルで*Internal error while compiling with clang* というエラーが返されました。

* ACI0103608 クライアント/サーバー版のみ。*On Startup* で`CHANGE CURRENT USER`を使用した場合，デザインモードでセットしたブレークポイントが保存されませんでした。

* ACI0103664 デザインモード検索を実行中に表示されるプログレスバーに中止ボタンが表示されませんでした。

* ACI0103644 診断ログ（データベースパラメーター`79`）を有効にした場合，Webプロセスで発生したエラーがログファイルに出力されますが，スタックトレースは出力されませんでした。ヘッドレスモードでは問題ありません。

* ACI0103645 Mac版のみ。タブコントロールのベースラインが低くレンダリングされました。

* ACI0103642 *keep-alive* モードを指定せずに`HTTP Request`コマンドを実行した場合，ステータスコード`503`と空のレスポンスが返されることがありました。

* ACI0103630 メソッドエディターにヘッダーコメントをペーストした場合，編集中の行もコメントのようにトークナイズされました。
 
* ACI0103632 クライアント接続ライセンスとREST拡張ライセンスの両方がインストールされているサーバーにクライアントとRESTの両方でアクセスし，RESTセッションがタイムアウトに達した場合，一部のRESTライセンスが解放されませんでした。

* ACI0103629 リストボックスの交互に使用する背景色（`alternateFill`）をCSSで自動交互色（`automaticAlternate`）に設定した場合，CSS解析エラーが返されました。

* ACI0103624 `Dynamic pop up menu`を実行した場合，アプリケーションがクラッシュしました。

* ACI0103604 Mac版のみ。*disabled* 状態のボタン表示が正しくありませんでした。ボタンの背景色は薄暗くなりますが，タイトル文字色がグレーアウトされませんでした。

* ACI0103577 １対Ｎリレーション属性（複合インデックス）をORDAで検索した後，同じ属性をORDAでシーケンシャル検索した場合，アプリケーションがフリーズまたはクラッシュしました。
 
* ACI0103567 Mac版のみ。データベースフォルダーをネットワーク共有し，クライアント/サーバー版の開発者モードでユーザーモードを使用した場合，ピクチャボタンのアイコン画像が表示されませんでした。

* ACI0103549 リレーションがエイリアス属性としてセクションに表示されていた場合，4D Go MobileのAndroid版アプリがクラッシュしました。

* ACI0103569 `RESTORE`コマンドを実行した場合，処理が完了しても復元ダイアログが閉じられないことがありました。
 
* ACI0103439 4D Go Mobileのカスタム入力コントロールでレコードの編集アクションを実行した場合，値が表示されませんでした。

* ACI0103579 クイックレポートエディターのマスターテーブルに非表示フィールドが存在する場合，間違ったフィールドが挿入されました。
 
* ACI0103225 ネイティブSQLコマンドで`SELECT`を実行して数値をテキスト配列で受け取った場合，整数値が文字列に自動変換されませんでした。ODBC Proであれば問題ありません。

* ACI0103606 REST APIでピクチャフィールドを更新した後に返されるURLが間違っていました。

```
/rest/TableName?$method=update
```

というリクエストを送信した場合，

```
{__deferred:{uri:/rest/Employees[1428]/photo?$imageformat=best&$version=699&$expand=photo,mediatype:image/jpeg,height:197,width:256,image:true}}
```

のようなレスポンスが返されるはずですが，`[1428]`ではなく`(1428)`のような形式でプライマリーキーが返されました。

**注記**: プライマリーキー値の特殊文字に対応するための改良が不完全だったことが原因でした。

* ACI0103530 空のピクチャを`Equal pictures`で比較した場合，`False`が返されました。

* ACI0103466 最前面に移動したメソッドエディターのロックを解除してタイプ入力を再開した場合，それまでに外部ツールで編集した内容がエディターにリロードされませんでした。

* ACI0103595 プロジェクトを開かずに*WebAdmin* を起動している4Dに対してRESTリクエストを送信した場合，アプリケーションがクラッシュすることがありました。

* ACI0103467 コマンドラインインターフェースに`--version`または`--help`オプションを指定した場合，アプリケーションがクラッシュしました。

* ACI0103462 Mac版のみ。システム環境設定の地域を英国，言語をオランダ語に設定し，日付フォーマット*Internal date short* を使用した場合，`DD-MM-YYYY`ではなく`DD/MM/YYYY`形式で日付が表示されました。
