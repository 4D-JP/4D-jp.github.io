---
layout: fix
title: "4D v19r8 修正リスト"
date: 2023-02-21 08:00:00
categories: 修正リスト
tags: 19r8
build: 100168
version: 19r8
permalink: /2023/10/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0103728 4D for Mobileで作成したiOSアプリのセクションに配置したフィールドにはデータフォーマッターが適用されませんでした。

* ACI0103717 配列型リストボックスに自動行高さを設定した場合，セルの内容を更新した後にリストボックスの描画が崩れました。`REDRAW`コマンドを使用すれば正しく再描画されます。
 
* ACI0103721 CEF版Webエリアにカメラおよびマイクのアクセスが許可されていませんでした。

* ACI0103708 `IMAPTransporter.getBoxList()`がアクセント記号を正しく返しませんでした。

* ACI0103720 4D for MobileのプロジェクトエディターにAndroidシミュレーターの一覧が表示されませんでした。

* ACI0103628 Write Proエリアが入力不可に設定されている場合，ツールバーの置換ボタンをクリックするとエラーが返されました。エリアが入力不可のときは置換ツールが非アクティブになるべきです。
 
* ACI0103592 フォームに組み込んだクイックレポートの罫線が交差するポイントをクリックした場合，エラー``9850``が返されました。

* ACI0103368 エンティティを`2`回リロードすると，エンティティのロックが開放されました。

* ACI0103593 Mac版のみ。特定のプロジェクトをIntelおよびApple Siliconアーキテクチャをターゲットにコンパイルした場合，不要な桁区切りが定数に適用されるために関数パラメーターの数が狂ってしまい，コンパイルエラーが返されました。

* ACI0103541 フォームに埋め込まれたクイックレポートエディターのカラムをドラッグ＆ドロップした後，右クリックメニューが正しく更新されませんでした。
 
* ACI0103718 WebサーバーまたはRESTサーバーに高い負荷がかかった場合，アプリケーションがクラッシュすることがありました。

* ACI0103697 コンパイルモードのみ。レイジー演算子（`||`および`&&`）とマイナス数値リテラルの比較が間違っていました。`5 || -1`が`5`ではなく`4`を返しました。明示的にカッコを挿入すれば（`5 || (-1)`）問題ありません。

* ACI0103657 データソース値が`Null`がセットされた入力オブジェクトに値を入力することができませんでした。データソース値が空の文字列であれば問題ありません。また「Nullを空値にマップ」を有効にすれば問題ありません。

**注記**: 修正により，フォームオブジェクトのデータソースがエンティティ属性（`entity.name`）で値が`Null`の場合，`entity.getDataClass()[name].fieldType`が入力制御に反映されるようになりました。

* ACI0103663 Write Proエリアのスペルチェックを有効にした場合，赤い点線がテキストボックスの背後から透けて表示されました。

* ACI0103570 スケーラブルセッション管理が有効にされている場合，*On Web Connection* データベースメソッドはスレッドセーフであることが求められますが，コンパイラーがプリエンプティブモードに対応していないコードを検出しませんでした。一旦，セッションなしを選択してから，スケーラブルセッション管理を有効にすれば問題ありません。

* ACI0103683 リストボックスのセルにピクチャを表示した場合，画像の右端が罫線の上に描画されました。

* ACI0103673 ビルドしたデスクトップ版アプリケーションが正常に終了しませんでした。スポンサーメッセージを表示した後にアプリケーションがクラッシュします。
 
* ACI0103682 4D Go Mobileのプロジェクトエディターでバージョン番号を設定してAndroid版アプリをビルドした場合，アプリのバージョン番号が更新されず，常に`1.0`となりました。

* ACI0103681 Mac版のみ。Xcodeのパスにスペース記号などの文字が含まれている場合，Apple Siliconターゲットのコンパイルを実行しようとすると「xcode-selectの呼び出しに失敗した」というエラーが返されました。Xcodeのパスが正しくエスケープされていないようです。

* ACI0103652 テキスト入力の*On Getting Focus* イベント中に`Pop up menu`を実行した後，`POST KEY`で`Tab`を送信した場合，フォームのどこをクリックしてもテキスト入力が再フォーカスされてイベントが繰り返されました。フォームイベントをトレースすれば問題ありません。

* ACI0103533 テキストフィールドの背景色が透明に設定されたラベルをラベルエディターにインポートした場合，グレーの背景色が表示されました。

* ACI0103672 クライアント/サーバー版のみ。データクラスのメンバー関数からプリエンプティブ非対応のコンポーネントメソッドを実行した場合，エラーが返されませんでした。

* ACI0103647 Mac版のみ。プロジェクトに大量の文字列リテラルが存在する場合，Apple Siliconアーキテクチャのコンパイル版アプリケーションがクラッシュすることがありました。プロセスの初期化中に定数がスタックメモリを使い果たしているようです。
 
* ACI0103669 Mac版のみ。Apple Silicon搭載のMacを再起動した後，プロジェクトをコンパイルしようとした場合，*Couldn't find active developer tools* というエラーが返されることがありました。コンパイラーは内部的に`LAUNCH EXTERNAL PROCESS`を`2`秒のタイムアウトで実行していますが，システムを再起動した直後はタイムアウトが短すぎることがあるためです。

**注記**: タイムアウトが`60`秒に延長されました。

* ACI0103658 おおきなピクチャを`TRANSFORM PICTURE`コマンドの`Scale`オプションで引き伸ばした後，`PICTURE TO BLOB`を実行した場合，アプリケーションがメモリ不足でクラッシュすることがありました。

**注記**: 修正により，若干，処理速度が低下しましたが，クラッシュは回避されるようになりました。

* ACI0103653 テーブルのレコードがすべてキャッシュされている場合，複数条件のインデックス検索速度が大幅に低下しました。ACI0103507が修正されたことによる副作用のようです。

* ACI0103639 フォームの異なるページに同名のオブジェクトが存在する場合，Apple Siliconターゲットのコンパイルで*Internal error while compiling with clang* というエラーが返されました。

* ACI0103608 クライアント/サーバー版のみ。*On Startup* で`CHANGE CURRENT USER`を使用した場合，デザインモードでセットしたブレークポイントが保存されませんでした。

* ACI0103664 デザインモード検索を実行中に表示されるプログレスバーに中止ボタンが表示されませんでした。

* ACI0103644 診断ログ（データベースパラメーター`79`）を有効にした場合，Webプロセスで発生したエラーがログファイルに出力されますが，スタックトレースは出力されませんでした。ヘッドレスモードでは問題ありません。

* ACI0103645 Mac版のみ。タブコントロールのベースラインが低くレンダリングされました。

* ACI0103642 *keep-alive* モードを指定せずに`HTTP Request`コマンドを実行した場合，ステータスコード`503`と空のレスポンスが返されることがありました。

* ACI0103630 メソッドエディターにヘッダーコメントをペーストした場合，編集中の行もコメントのようにトークナイズされました。
 
* ACI0103632 クライアント接続ライセンスとREST拡張ライセンスの両方がインストールされているサーバーにクライアントとRESTの両方でアクセスし，RESTセッションがタイムアウトに達した場合，一部のRESTライセンスが解放されませんでした。

* ACI0103629 リストボックスの交互に使用する背景色（`alternateFill`）をCSSで自動交互色（`automaticAlternate`）に設定した場合，CSS解析エラーが返されました。

* ACI0103624 `Dynamic pop up menu`を実行した場合，アプリケーションがクラッシュしました。

* ACI0103604 Mac版のみ。*disabled* 状態のボタン表示が正しくありませんでした。ボタンの背景色は薄暗くなりますが，タイトル文字色がグレーアウトされませんでした。

* ACI0103577 １対Ｎリレーション属性（複合インデックス）をORDAで検索した後，同じ属性をORDAでシーケンシャル検索した場合，アプリケーションがフリーズまたはクラッシュしました。
 
* ACI0103567 Mac版のみ。データベースフォルダーをネットワーク共有し，クライアント/サーバー版の開発者モードでユーザーモードを使用した場合，ピクチャボタンのアイコン画像が表示されませんでした。

* ACI0103549 リレーションがエイリアス属性としてセクションに表示されていた場合，4D Go MobileのAndroid版アプリがクラッシュしました。

* ACI0103569 `RESTORE`コマンドを実行した場合，処理が完了しても復元ダイアログが閉じられないことがありました。
 
* ACI0103439 4D Go Mobileのカスタム入力コントロールでレコードの編集アクションを実行した場合，値が表示されませんでした。

* ACI0103579 クイックレポートエディターのマスターテーブルに非表示フィールドが存在する場合，間違ったフィールドが挿入されました。
 
* ACI0103225 ネイティブSQLコマンドで`SELECT`を実行して数値をテキスト配列で受け取った場合，整数値が文字列に自動変換されませんでした。ODBC Proであれば問題ありません。

* ACI0103606 REST APIでピクチャフィールドを更新した後に返されるURLが間違っていました。

```
/rest/TableName?$method=update
```

というリクエストを送信した場合，

```
{__deferred:{uri:/rest/Employees[1428]/photo?$imageformat=best&$version=699&$expand=photo,mediatype:image/jpeg,height:197,width:256,image:true}}
```

のようなレスポンスが返されるはずですが，`[1428]`ではなく`(1428)`のような形式でプライマリーキーが返されました。

**注記**: プライマリーキー値の特殊文字に対応するための改良が不完全だったことが原因でした。

* ACI0103530 空のピクチャを`Equal pictures`で比較した場合，`False`が返されました。

* ACI0103466 最前面に移動したメソッドエディターのロックを解除してタイプ入力を再開した場合，それまでに外部ツールで編集した内容がエディターにリロードされませんでした。

* ACI0103595 プロジェクトを開かずに*WebAdmin* を起動している4Dに対してRESTリクエストを送信した場合，アプリケーションがクラッシュすることがありました。

* ACI0103467 コマンドラインインターフェースに`--version`または`--help`オプションを指定した場合，アプリケーションがクラッシュしました。

* ACI0103462 Mac版のみ。システム環境設定の地域を英国，言語をオランダ語に設定し，日付フォーマット*Internal date short* を使用した場合，`DD-MM-YYYY`ではなく`DD/MM/YYYY`形式で日付が表示されました。
