---
layout: post
title: "マルチスタイルテキストのフォントサイズ"
date: 2021-03-24 12:00:00
categories: 仕様
tags: writepro 
---


Windows版のマルチスタイルテキストのコンテキストメニューでフォントサイズ（たとえば`15`）を選択した場合，ソースコードのHTMLには別の数値（たとえば`20pt`）が挿入されます。これは仕様です。 Macでは，フォームのフォントサイズと`span`に書き込まれるフォントサイズの値が一致しますが，Windowsでは`72/96`倍の値になります。`span`には，4Dのフォントサイズではなく，システムのフォントサイズが記録されるようになっているためです。

フォームのDPIは，プラットフォームに関係なく`72`です。フォームエディター等でフォントサイズを`20`（つまり`20px`）に設定した場合，システムのDPIが`72`であるMacでは`20pt`のテキストが表示されますが，システムのDPIが`96`であるWindowsでは`15pt`のテキストが表示されます。マルチスタイルテキストのソースコードには，システムのフォントサイズ（Windowsであれば`15pt`）が記録されることになります。

v12でマルチスタイルテキストが追加されたとき，ソースコードにシステムのフォントサイズを記録することにしたのは，明らかに間違いでした。クロスプラットフォームの振る舞いではないからです。過去のバージョンで作成されたアプリケーションに配慮し，現在も上述したような仕様となっています。
