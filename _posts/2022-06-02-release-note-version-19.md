---
layout: fix
title: "4D v19.3 Hotfix 2 修正リスト"
date: 2022-07-29 08:00:00
categories: 修正リスト
tags: 19.3 hotfix
build: 281510
version: "19.3"
permalink: /153/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0102957 ユーザー設定が有効にされている場合，コンパイルが実行できないことがありました。ユーザー設定ファイル * settings.4DSettings* を削除すれば，コンパイルができるようになります。「メソッドをUnicodeで保存する」「オブジェクト記法を有効にする」はいずれもストラクチャレベルの設定であり，ユーザー設定ファイルには影響されないはずです。

* ACI0102587 Mac版のみ。Apple Siliconマシンでは，システムスリープを解除した後，アプリケーションが無反応になることがありました。
 
* ACI0103070 Write Proドキュメントのセクション`2`がセクション`1`に統合されることがありました。

* ACI0102343 フランス語版のみ。`WA Démarrer hors écran`コマンドがエディターに認識されず，プロセス変数としてトークナイズされました。仕様上のコマンド名にハイフン記号が含まれているためです。
 
* ACI0103065 Mac版のみ。ヘルプTipsに日本語の文字列が含まれる場合，余計な空行が表示されました。

* ACI0103039 Mac版のみ。クイックレポートエディターを表示した場合，CPU占有率が異常に高い数値になりました。内部的に`SET TIMER`と*On Bound Variable Change*イベントの処理で無限ループが発生しているようです。
 
* ACI0102851 Mac版のみ。ツールバースタイルのボタンのタイトル位置をアイコンの左に設定し，リンクされたポップアップメニューをボタンに設定にした場合，アイコン画像が半分しか表示されませんでした。また，ポップアップメニューの存在を示す三角形のマークが表示されませんでした。Write Proインターフェースにそのようなボタンが使用されています。

* ACI0103043 フランス語版のみ。Write Proインターフェースのツールバーにあるエクスポートボタンをクリックしたときに表示されるポップアップメニューの内容が正しくありませんでした。

* ACI0103096 `SMTP Transporter`で送信した*Quoted-Printable*エンコーディングのメール本文は`76`文字で改行していないため，一部のセキュリティソフトでスパンメール扱いになりました。

**注記**: [RFC 5522](https://datatracker.ietf.org/doc/html/rfc5322#section-2.1.1)ではメールの`1`行は`998`文字を超えてはならず（MUST），改行コードを含めて`78`文字以内に改行することが勧められています（SHOULD）。しかしながら[RFC 1341](https://www.w3.org/Protocols/rfc1341/5_Content-Transfer-Encoding.html)では`76`文字を超えてはならない，となっているので，修正により，*Quote-Printable*エンコーディングについては`76`文字で改行するようになりました。

* ACI0102993 空のフォルダーを圧縮した.zipファイルを`ZIP Read archive`で開いた場合，`zip.root.folders`に空のルートフォルダーが返されませんでした。

* ACI0103084 プロジェクトモードのみ。サブフォームでは入力不可のブール型フィールドが入力可のチェックボックスとして表示されえました。

* ACI0103091 特定のメールサーバーで`IMAP Transporter`の`move()`関数が「IMAP MOVE command not supported by serve」というエラーを返しました。OutlookやThunderbirdでは問題がないので，サーバーの問題ではないはずです。

* ACI0103068 Mac版ダークモードのみ。タブコントロールをクリックしてページを切り替えた場合，マウスボタンをリリースするまで編集中のテキスト入力オブジェクトのハイライトカラーがライトモードの背景色で描画されました。非アクティブ状態のウィンドウをクリックして前面に移動した場合も同じ現象が発生します。

* ACI0103091 特定のメールサーバーで`IMAP Transporter`の`move()`関数が「IMAP MOVE command not supported by serve」というエラーを返しました。OutlookやThunderbirdでは問題がないので，サーバーの問題ではないはずです。

* ACI0103071 Mac版のみ。キーを長押しして拡張文字を入力することができませんでした。

**注記**: コンボボックス・ストラクチャエディター・Write Pro・View Pro・リストボックス・テキスト入力エリア・プロパティリストが修正されました。システム環境設定で長押しによるアクセント記号の入力画面が有効にされている場合，連続入力（`ApplePressAndHoldEnabled`）よりもアクセント記号の入力画面のほうが優先されるようになりました。ただし，日本語などのフロントエンドプロセッサ（IME）を使用しているときは，長押しのアクセント記号の入力画面は表示されず，連続入力のほうが優先されます。システム環境設定でアクセント記号の入力画面が無効にされている場合，長押しは常に連続入力として処理されます。

* ACI0103068 Mac版のみ。タブコントロールをクリックした場合，ボタンをリリースするまで，フォーカスされたテキスト入力エリアのフォーカスが失われました。
 
* ACI0102722 Write Proドキュメントのヘッダーやフッターにカーソルが表示されている場合，参照の表示と非表示を切り替えるたびにカーソルの位置が移動しました。本文にカーソルが表示されている場合は問題ありません。

* ACI0102528 `wk text color`属性でハイパーリンクのテキストカラーを変更することができないことがありました。

* ACI0102284 Write Proドキュメントのブックマークのレンジテキストに`¶`が含まれている場合，`WP GET TEXT`から返されるテキストにすべての`¶`が含まれないことがありました。キーボード操作で選択した範囲は改行コードがひとつ足りないためです。`WP SELECT`でレンジを選択すれば問題ありません。

* ACI0103087 プロジェクトモードのみ。ドロップダウンメニューのデータソースにオブジェクト型を使用した場合，カレント項目を再選択したときは`currentValue`が更新されませんでした。項目が変わったわけではないのは事実ですが，オブジェクトの初期値は`currentValue`が明示的に定義されているとは限らないので，やはりプロパティは更新されるべきです。

* ACI0103045 Write ProドキュメントをMIME形式でエクスポートした場合，添付したインライン画像がAppleのメールクライアントに繰り返し表示されました。`Content-Disposition`が`multipart/related`に設定されていないためです。

* ACI0103082 LinuxのApacheをリバースプロキシとして使用した場合，Webサーバーがステータスコード`400`を返すことがありました（HTTP/1.1 requests must include Host header）。ACI0100450が修正されたことによる副作用のようです。

* ACI0102324 `OBJECT SET STYLE SHEET`でパスワードフォントを解除することができませんでした。

**注記**: [ドキュメント](https://doc.4d.com/4Dv19/4D/19.1/OBJECT-SET-STYLE-SHEET.301-5653487.ja.html)に明記されているように，`OBJECT SET FONT`や`OBJECT SET FONT SIZE`を使用すればオブジェクトのスタイルシートは自動的に解除されるように修正されました。また，空の文字列を渡した場合も自動的に解除されるようになりました。

* ACI0100883 4D Writeドキュメント（`.4W7`）をWrite Proに変換した場合，`Year of`が正しく変換されず，シンタックスエラーになりました。

**注記**: 問題は修正されましたが，ドキュメントを再変換する必要があります。

* ACI0102937 Mac版のみ。タブコントロールの幅が限られているときは，タブの代わりにポップアップメニューが表示されますが，そのようなポップアップメニューをクリックした場合，項目のアイコンが表示されませんでした。

* ACI0101904 プロジェクトモードのみ。コンボボックスのドラッグ＆ドロップイベントがサポートされていませんでした。

* ACI0102827 テーブル番号に欠番が存在する場合，ストラクチャエディターの検索ツールが正しく動作しませんでした。

* ACI0102323 編集中のマルチスタイルテキストの背景色を`ST SET ATTRIBUTE`で変更した場合，`<span>`タグの`background-color`属性が正しく更新されないことがありました。`<span>`タグが入れ子になっており，背景色の定義が複数のレベルにまたがっている場合に問題が発生します。
 
* ACI0102767 バックグランドプロセスでリストボックスに対して`GOTO OBJECT`を使用した場合，前面プロセスのオブジェクトがフォーカスを失いました。

* ACI0103019 Write Proドキュメントのセルの内容を*backspace*キーでクリアした後，新しい内容をタイプ入力し，再び*backspace*キーを使用した場合，セルそのものがテーブルから削除されました。

**注記**: *delete*キーは選択したセルの内容を削除するのに対し，*backspace*キーは編集メニューのカットと同じように選択したセルを削除する役割がありました。しかし，この区別は紛らわしいため，修正により，どちらのキーもセルの内容だけを削除するように仕様が変更されました。

* ACI0102924 .DOCX形式でエクスポートしたWrite Proドキュメントのフッターマージンが正しくないことがありました。

**注記**: Write Proドキュメントでは，通常ページから完全に独立したサブセクションを先頭ページに設定することができるため，奇数ページとは違うマージンのヘッダーやフッターを先頭ページに設定した場合，Wordとは違う値になることがありました。修正により，.DOCX形式のエクスポートに限り，Wordと同じようなマージンの計算がされるようになりました。

* ACI0102344 フランス版のみ。メソッドプロパティ「コンパイルモード済みのプロジェクトでのみ使用されます」の綴りが間違っていました。

    - 誤：uniquement utilisé dans les projets compilées
    - 正：uniquement utilisé dans les projets compilés
   
* ACI0103036 Mac版のみ。クイックレポートエディターの印刷プレビューボタンがグレーアウト表示されました。Windows版では，XPSがシステムにインストールされていることが条件ですが，Macでは関係ないはずです。

* ACI0103003 `Compile project`から返される変数タイプの定数が間違っていました。ポインター型`40`・ピクチャ型`10`・テキスト型`33`のタイプがランゲージの定数と違います。ポインター型`23`・ピクチャ型`3`・テキスト型`2`が返されるべきです。

**注記**: テキスト型とピクチャ型はv11で内部的なフォーマットが変更されました。ポインター型はv16以降で新しいフォーマットが使用されています。コマンドはコンパイラーが内部的に使用している定数をそのまま返していました。修正により，`Is text` `Is pointer` `Is picture`と同じ値が返されるようになりました。

* ACI0102522 フランス語版のみ。ランゲージをフランス設定に変更した場合，`fk logs folder`が`kf dossier fichiers d'historique`に変換されますが，定数がメソッドエディターに認識されず，エラーが表示されました。アポストロフィが原因のようです。

**注記**: オートコンプリートでエラーが返されないように一部の定数名が変更されました。`Fichier historique des sauvegardes` `Fichier de configuration application` `Fichier dernière intégration historique` `Dossier des thèmes éditeur`

* ACI0103046 Mac版のみ。タブコントロールの上下どこをクリックしてもイベントが発生しました。

* ACI0101062 `CONFIRM`ダイアログの高さに余裕がありませんでした。

* ACI0100583 HTTPサーバーの停止と開始を繰り返した場合，TLSの証明書チェーンに同一の証明書が何度も追加されました。
