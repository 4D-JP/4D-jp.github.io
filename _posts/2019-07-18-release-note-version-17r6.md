---
layout: fix
title: "4D v17r6 修正リスト"
date: 2019-09-24 -08:00:00
categories: 修正リスト
tags: 17r6
build: 241878
version: 17r6
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099981 ヘルプメニューの「4D SVGについて…」ダイアログを表示した場合，デフォルトでバージョン文字列が選択されていました。

**注記**: オブジェクトの「フォーカス可」プロパティが有効にされていたことが原因でした。

* ACI0099909 ビューリストが表示された状態で，ピクチャまたはテキストをフォーム間でドラッグ＆ドロップした場合，エラー``-9996``（スタック不足）が返されました。

* ACI0099939 クライアント/サーバー版のみ。リストボックスにエンティティセレクションが表示されたフォーム上で，``entitySelection.next()`` ``entitySelection.previous()`` を実行した場合，リストボックスに表示されるべき属性をリフレッシュするためのリクエストがサーバーに送信されませんでした。

* ACI0099891 ORDAのネットワーク最適化が有効にされた状態で，テーブル間のＮ対１リレーションにアクセスした場合，１テーブル側のエンティティが正しくロードされないことがありました。

* ACI0099840 エンティティセレクションに対し，``entitySelection.attribute``のようなコードで存在しない属性名を参照した場合，``entitySelection.first()``が返されました。期待されるのは，``ON ERROR CALL``で捕捉できるエラーが発生し，``Null``が返されることです。

* ACI0099679 Windows版のみ。``SGV_ABOUT``メソッドを実行した場合，エラー``-9996``（スタック不足）が返されました。

``注記``: ``New process``のスタックサイズに``0``（デフォルト値）以外の値が渡されていたことが原因でした。現行バージョンは，以前のバージョンよりも多くのスタックをプロセスに渡す必要があります。このような問題を未然に防ぐため，スタックサイズは固定値ではなく，``0``（デフォルト値）に指定することが推奨されています。

* ACI0099908 クライアント/サーバー版のみ。日付のような形式の文字列，たとえば商品コード『1234-56-78』を文字列フィールドにORDAでアクセスした場合，``0000-00-00``が返されました。誤ってデータが日付型と判断されているためです。

* ACI0099859 Mac版のみ。ビルド版のクライアント/サーバーアプリケーションの自動アップデート画面にカスタムアイコンが表示されませんでした。

* ACI0099924 Windows版のみ。「データベース設定 > データベース > テンポラリフォルダーの場所 > 次回起動時」が「システム」に設定されている場合，``C:\Users\{name}\AppData\Local\Temp\``に「4D」フォルダーが作成され，そこがテンポラリフォルダーのルートとなります。``entitySelection.orderByFormula()``のようなオペレーションを実行した場合，ストラクチャ毎のテンポラリフォルダーが必要に応じてテンポラリフォルダーのルートに作成されますが，ストラクチャ毎のテンポラリフォルダー作成はルートフォルダー内に作成されることが前提になっているため，アプリケーションの実行中にWindowsがTempフォルダーを自動的に削除した場合，ストラクチャ毎のテンポラリフォルダーを作成することができず，「シーケンシャルソートが完了できません」などのエラーが返されました。

* ACI0099559 SVGコンポーネントのメソッド``SVG_FADE_TO_GREY_SCALE``の第２パラメーターがコード（``C_REAL``）と``Compiler_``メソッド（``C_LONGINT``）で矛盾していました。

* ACI0099897 XLIFFシンタックスのヘルプTipsがプ正しく表示されませんでした。

* ACI0099692 プロパティリストにXLIFFシンタックスで入力したヘルプTipsがプ正しく登録されませんでした。

* ACI0099895 Mac版のみ。4D WriteドキュメントをWrite Proに変換した場合，ヘッダーに余計な水平線が追加されました。

* ACI0099893 Write ProをHTML形式でエクスポートした場合，段落全体に適用されたアンダーラインが表示されませんでした。``<p>``タグのCSSクラス（``text-decoration: underline``）が``style``属性（``text-decoration: none``）にオーバーライドされています。

* ACI0099839 ``ST FREEZE EXPRESSIONS``を実行した場合，Write Proフッターに挿入されたページ数が「0ページ中の1ページ目」のように評価されました。

**注記**: ヘッダーやフッターに対して``ST FREEZE EXPRESSIONS``を実行した場合，数式は１度だけ評価されます。したがって「合計ページ数」は正確ですが，「ページ番号」はすべて``1``となります。これは仕様です。複数のページが存在する場合，ヘッダーやフッターの数式にページ特有の情報は含めないようにしてください。

* ACI0099890 ``VP Convert from 4D View``でドキュメントを変換するたびにメモリーリークが発生しました。

* ACI0099873 ブール型エンティティをコレクション型リストボックスに表示させた場合，チェックボックスではなく，空のポップアップメニューが表示されました。アプリケーションを再起動した後は，問題ありません。初回だけの現象です。

* ACI0099862 フッターの高さが１ページ目と２ページ目以降で違う4D Write文書をWrite Proに変換した場合，２ページ目以降の本文フレームが正しく変換されませんでした。

* ACI0099911 すでに削除されたレコードをSQLクエリでロードしようとした場合，アプリケーションがクラッシュする恐れがありました。

* ACI0099894 特定のタイムゾーン（例：パリ）では，4D View Proのセルに``=DATE(2019,11,1)`という日付を入力することができませんでした。

* ACI0099885 プロジェクトモードで``SET USER ALIAS``を使用し，ツールボックスのフィルターとフォーマットのページに移動した場合，シンタックスエラーが表示されました。

**注記**: カレントユーザーにエイリアスが設定されている場合，ユーザー名は``Current user(4D user account)``で取得することができます。

* ACI0098412 クイックリポートエディターでレポートを新規作成した場合，メニューに表示されるカラムの情報がリセットされませんでした。

* ACI0099581 パラメーターを省略して``ds.startRequestLog()``を実行した場合，以前のコールで渡された数値（バッファサイズ）が継承されますが，初回のコールでパラメーターを省略した場合，関係のないエラーメッセージが返されました。

* ACI0099764 互換性のデータベース設定「新しいコンテキスト参照モードを使用しない」「Webフォーム変数の自動代入」を外し，「未知のURLから``/``を取り除く」は残したままプロジェクトモードにエクスポートした場合，変換ログファイルには，すでに外されている前者を無効にしたというメッセージが出力され，強制的に外された後者の情報が出力されませんでした。

**注記**: Webサーバー関連のデータベース設定は，スタンドアロン/サーバー側とクライアント側の値が別個に存在します。修正により，それぞれの値がログファイルに出力されるようになりました。	

* ACI0099777 クライアント/サーバー版のみ。「互換性 > アプリケーション配布のための新しいアーキテクチャを使用する」オプションが有効にされていない場合，ビルドしたサーバーアプリケーションは最後に使用したデータファイルの場所を継承せず，毎回，データファイルの場所を尋ねるダイアログが表示されました。

* ACI0099907 SQLの``ORDER BY``でカラムをフィールド名ではなく順序で指定した場合，アプリケーションがクラッシュすることがありました。

* ACI0099906 SQLサーバーを起動時に開始した場合，データベースサーバーが開始する前に外部SQLリクエストが処理され，アプリケーションがクラッシュすることがありました。``On Server Startup``データベースイベントで``START SQL SERVER``を実行し，コマンドでSQLサーバーを起動すれば，問題ありません。

* ACI0099901 インデックスが設定されたオブジェクト型エンティティに対し，複数のプロセスが同時にアクセスした場合，アプリケーションがデッドロック状態に陥ることがありました。

* ACI0099889 Write Proドキュメントのテキストをすべて選択し，フォントのサイズ・カラー・スタイルを変更した場合，文末の空行には変更が適用されませんでした。

* ACI0096405 マウスポインターがサブフォーム内の入力可オブジェクトを指している場合，マウスのロールボタンでサブフォームをスクロールすることができませんでした。

**注記**: 修正により，アクティブオブジェクトがホイールイベントをハンドルしなかった場合，外側のオブジェクト（サブフォーム）にイベントが転送されるよう，仕様が変更されました。

* ACI0099853 クライアント/サーバー版のみ。プロジェクトモードでツールボックスを開き，グループのプラグインアクセス権を変更した場合，設定した内容が保存されませんでした。	

* ACI0099834 プロジェクトモードでは，ボタンタイトルが空のオブジェクトに対して``OBJECT SET TITLE``を使用することができませんでした。

* ACI0099806 オブジェクトメソッドまたはフォームメソッドをプロジェクトモードに変換した場合，テーブル名が省略されたフィールドの参照が正しくトークナイズされずシンタックスエラーになりました。

**注記**: プロジェクトモードでは，テーブル名を省略することが許されていません。

* ACI0099800 ``MAIL Convert to MIME``に``Null``が渡された場合，アプリケーションがクラッシュしました。

* ACI0099784 Mac版のみ。多数のプロセスで同時に``Semaphore``でグローバルセマフォにアクセスした場合，プロセスが終了した後もシステムスレッドが残存し，やがてアプリケーションがクラッシュする恐れがありました。ローカルセマフォでは問題ありません。

* ACI0099741 クライアント/サーバー版のみ。エンティティが参照しているレコードがすでに削除されている場合，あるいはスタンプが更新されている場合，あるいは重複するプライマリーキーが存在する場合，ORDAの``entity.save()``は失敗するはずですが，クライアント/サーバー版ではステータスオブジェクトの``success``プロパティに``true``が返されました。

* ACI0099740 クライアント/サーバー版のみ。保存オプションが「レコードの外」または「データファイルの外」に設定された属性が存在する場合，``dk auto merge``モードで実行したORDAの``entity.save()``は失敗するはずですが，クライアント/サーバー版ではステータスオブジェクトの``success``プロパティに``true``が返されました。

* ACI0099723 Mac日本語版のみ。選択されたテキスト範囲の日本語フォントがWrite Proツールバーに認識されませんでした。英語フォント，あるいはシステム環境設定で言語が英語に設定されたMacであれば問題ありません。

* ACI0099879 ``ALERT``で大量（``80000``文字以上）のテキストを表示した場合，Windowsでは，アプリケーションがフリーズし，Macでは空のメッセージボックスが表示されました。

* ACI0099877 4D for iOSのプロジェクトエディターを起動すると，ランタイムエラー（コレクションの添字は正の値でなければならない）が表示され，先に進むことができませんでした。

* ACI0099871 スタンドアロン版のみ。``QUIT 4D``を実行すると，アプリケーションがハングすることがありました。ツールバーをフローティングウィンドウで表示するタイミングが関係しており，開発途上バージョン特有の一時的な不具合です。

* ACI0099869 ``On Web Close Process``データベースイベントで``WEB CLOSE SESSION``を実行しても。アクティブなWebセッションが閉じられませんでした。

* ACI0099868 Windows版のみ。SDIモードでアプリケーションを実行した場合，ボールド体またはイタリック体のようなスタイルが設定された項目が含まれるメニューのテキストはすべて空になりました。

* ACI0099860 Mac 旧式ネットワークレイヤーのみ。サーバー管理画面の「アプリケーションサーバー」ページから「プロセス」ページに切り替えたタイミングでアプリケーションがクラッシュすることがありました。

* ACI0099849 View Proドキュメントのセルの背景をファイル名だけで指定した場合，画像が表示されませんでした。4D View Proコンポーネントと同じ階層でファイルが探されているためです。	

**注記**: 修正により，リソースフォルダー，あるいはストラクチャまたはプロジェクトと同階層の画像ファイルが指定できるようになりました。

* ACI0099824 ``Current user``を実行するとシステム変数``OK``に``1``が代入されました。

* ACI0099725 プロジェクトモードでフォームを開いた場合，「オブジェクト名」「タイトル」「メソッド」プロパティの入力中に``delete``キーを入力すると，入力がキャンセルされてキャレットが消えました。

* ACI0099660 ``ds.startRequestLog()``にバッファサイズを渡した場合，バッファリングされたORDAリクエストが必ずしも順番に記録されませんでした。

* ACI0099652 4D ViewドキュメントをView Proに変換した場合，日付型のパラメーターを受け取るメソッドの返り値が正しく表示されませんでした。

**注記**: 17r6の新しいコマンド``VP SET ALLOWED METHODS``で対応することができます。

* ACI0099650 プロジェクトモードでフォームを開いた場合，フォームの０ページに配置されたWrite Proエリアが１ページのオブジェクトの前面に表示されました。

* ACI0099646  プロジェクトモードでフォームを開いた場合，``shift``キーを押しながら入力オブジェクトを範囲選択することにより，入力順プロパティがリセットできますが，フォームを閉じ，再び開くと，以前の入力順がエディターに表示されました。プロパティのほうは正しくクリアされています。

* ACI0099639 プロジェクトモードでフォームを開いた場合，プロパティリストに「継承されたフォーム名」のリストが表示されませんでした。フォームエディターを閉じ，再び開けば，問題ありません。

* ACI0099627 ``SOAP DECLARATION``で``Is DOM reference``が宣言されているWebサービスを``WEB SERVICE CALL``でコールした場合，アプリケーションがクラッシュしました。

* ACI0099603 ラベルエディターの「自動リサイズ」チェックボックスが解除されており，``pt``以外の単位が選択されている場合，ラベルのレイアウトが正しくありませんでした。

* ACI0099601 ラベルエディターの「自動リサイズ」チェックボックスが選択された状態で「使用フォーム」を変更した場合，ラベルのサイズが自動計算されたものではなくなりました。

* ACI0099600 ラベルエディターの「自動リサイズ」チェックボックスを解除した場合，ラベルのサイズが元に戻りませんでした。

* ACI0099582 ``ds.startRequestLog()``に（テキストでも数値でもない）無効なパラメーターを渡した場合，エラーが返されませんでした。

**注記**: BLOB型のパラメーターを渡した場合，BLOBのサイズがバッファサイズになります。

* ACI0099578 JSONフォームのテキスト入力オブジェクトの「式のタイプ」を「時間」型に設定しても，数式の値が数値型で表示されました。

* ACI0099575 ``File``および``Folder``に無効なパラメーターを渡した場合，エラーが返されませんでした。

* ACI0099574 Windows版のみ。``File``および``Folder``に``fk platform path``モードでPOSIXフォルダー区切り文字のスラッシュ（``/``）が含まれるパスを渡した場合，エラーが返されませんでした。

* ACI0099573 ``File``にフォルダー区切り文字で終わる文字列を渡した場合，エラーが返されませんでした。

* ACI0099567 サーモメーターオブジェクトの「ラベル」プロパティをチェックしても，「表示」テーマの「数値フォーマット」が表示されませんでした。

* ACI0099564 プロジェクトモードのデータベースに対し，MSCでレコードヘッダーによる修復を実行した場合，アプリケーションがクラッシュしました。

* ACI0099563 プロジェクトモードのデータベースに対し，MSCの圧縮を実行した場合，アプリケーションがクラッシュしました。

* ACI0099464 4D WriteドキュメントをWrite Proに変換した場合，ピクチャのスケーリング情報が失われました。

**注記**: 修正により，変換された画像のスケーリングを再現するために``WP SET ATTRIBUTES``で画像の幅と高さを調整する必要はなくなりました。Write Proドキュメントの中で参照された``C_PICTURE``画像（``wk image``または``wk image expression``），および``4PCT``ファイル（``wk image url``）のトランスフォーム情報は保持されます。仕様が見直され，トランスフォームされてない画像はこれまでどおりネイティブ形式（たとえば``.png``）で埋め込まれ，トランスフォームされている画像は``.4pct``形式でエクスポートされるようになりました（``.4wp``または``wk web page html 4D``）。``page complete`` ``wk mime html``および``.docx``形式の場合，これまでどおり，``.jpg``または``.png``形式の画像がエクスポートされますが，Write Proドキュメントのスケーリングされた画像と同じサイズで書き出されるようになりました。

* ACI0099452 最近使用したデータベースのリストに７個以上の項目があり，ようこそ画面にログインしていない場合，サイトにジャンプするバナーのリンクと試用版開始のボタンが重なってしまいました。

* ACI0099447 変換されたデータベースのメソッド（トリガ・プロジェクトメソッド・データベースメソッド）がコンパイルモードで実行できない場合がありました。

* ACI0099444 クイックレポートエディターの小計行から素早くマウスポインターを移動した場合，表示中のヘルプTipsが消えませんでした。

* ACI0099804 ``SET DATABASE PARAMETER``に非公式のセレクター``76``を渡した場合，シーケンシャルクエリとインデックスクエリを切り替える閾値が調整できるはずですが，十分に絞り込まれたクエリでもインデックスが使用されてしまうことがありました。

* ACI0099798 ``menus.json``ファイルがロックされている場合，プロジェクトモードのツールボックスにメニュー項目のプロパティが正しく表示されませんでした。

* ACI0099787 プロジェクトモードでフォームエディターを開いた場合，プロパティリストからプラグインエリアのカスタムプロパティ設定にアクセスできませんでした。ACI0099778と同じ問題です。	

* ACI0099776 フォームエディターとランタイムではデフォルトボタンの外観が違いました。

* ACI0099758 クライアント/サーバー版のみ。ORDAの``dataClass.query()``のクエリ文字列に``order by``指示を含めた場合，返されるエンティティセレクションがソートされていませんでした。

* ACI0099757 クライアント/サーバー版のみ。ORDAの``entitySelection.orderByFormula()``のフォーミュラをリテラル文字列で渡した場合，メモリ割り当てエラーが返されました。

* ACI0099736 クライアント/サーバー版のみ。ORDAの``entity.drop()``が``dk force drop if stamp changed``モードで成功しなかった場合，返されるステータスオブジェクトの``success``に``True``が返されました。

* ACI0099433 64ビット版のみ。 ``OCILobWrite``でOracleのCLOBデータにアクセスした場合，エラー-2（無効なハンドル）が返されました。ACI0099431（OCILobGetLength）ACI0099433（OCILobWrite）と同様の問題です。

* ACI0099422 4D View Proドキュメントにシートを追加した場合，「sheet2』となるべきところが「sheet3」というシート名になりました。

* ACI0099419 コンパイルモードで``ARRAY TO COLLECTION``を多数のワーカーで実行し，``Storage``にアクセスした場合，アプリケーションがクラッシュすることがありました。ACI0099526と同じ問題です。

* ACI0099521 ``METHOD GET PATH``コマンドをコンポーネント内で実行した場合，エラー``21``が返されました。

**注記**: 仕様が明確にされました。ACI0099521が不具合であり，ACI0098712のほうは不具合ではありません。

* ACI0099516 4D for iOSの公開[チュートリアル](https://developer.4d.com/4d-for-ios/docs/en/n-to-one-relations.html)に収録されているテンプレートをXcode 10.2.1で使用した場合，アプリのビルドに失敗しました。Xcode 10.1では問題ありません。

* ACI0099493 Mac版のみ。エクスプローラーのページを切り替えてから，デザインモードでアプリケーションを再起動した場合，「デザイン > エクスプローラー」メニューのアイテムが複数チェックされた状態になりました。

* ACI0099484 既存のコードにキャレットを挿入し，カッコの手前でメソッド名を入力した場合，自動補完で余計なカッコが挿入されました。

* ACI0099475 ASTインタープリター（データベース設定 > 互換性）が有効にされたアプリケーションでは，``obj1.array_ptr->{idx}:=val``のようなシンタックスが使用できませんでした。

* ACI0099561 <i class="fa fa-external-link" aria-hidden="true"></i> Apache [JMeter](https://jmeter.apache.org)でWebサーバーのストレステストを実行し，``/4DWEBTEST`` URLに大量のGETリクエストを発行した場合，アプリケーションがクラッシュしました。

* ACI0099549 4D Viewから変換されたView ProドキュメントをXLSX形式でエクスポートし，Microsoft Excelで開いた場合，エラーが検出されました。ドキュメントの``printInfo``プロパティに問題があります。ACI0099520と同じ問題です。

* ACI0099540 シンタックスチェックまたはコンパイルを繰り返し実行した場合，存在しないシンタックスエラーが返されることがありました。

* ACI0099528 クライアント/サーバー版のみ。``Current date(*)`` または ``Current time (*)`` をコンポーネント内で実行した場合，Windowsでは異常に時間がかかり，Macではアプリケーションがクラッシュしました。

* ACI0099526 コンパイルモードで複数のスレッドから同時に共有オブジェクトまたは共有コレクションを更新した場合，アプリケーションがクラッシュすることがありました。ACI0099419と同じ問題です。

* ACI0099525 ``File`` および ``Folder`` のパラメーター入力中，タイプアヘッドのリストには定数しか表示されませんでした。パスを返すようなコマンドも列挙されるべきです。

* ACI0099672 変換されたデータベースをプロジェクトモードで開き，印刷コマンドを実行した場合，アプリケーションがクラッシュする場合がありました。

* ACI0099721 配列型のリストボックスの行コントロール配列にブール型配列を使用することができませんでした。ACI0099682が修正されたことによる副作用です。

* ACI0099709 コンパイルモードで``Formula``にセットされた代入文を実行した場合，アプリケーションがクラッシュしました。

* ACI0099707 ``ds.startRequestLog()``でORDAリクエストのログ記録を開始した場合，出力されるJSONが正しく整形されていませんでした。

* ACI0099677 クライアント/サーバー版のみ。フォーミュラによるクエリを実行した場合，サーバー側で返されたエラーが無視されました。

**注記**: サーバー側でエラーが返された場合，クライアント側のコード実行は中断されることになります。その点は変わりません。

* ACI0099396 64ビット版のみ。``OCILobRead``でOracleのCLOBデータにアクセスした場合，エラー``-2``（無効なハンドル）が返されました。ACI0099431（``OCILobGetLength``）ACI0099433（``OCILobWrite``）と同様の問題です。

* ACI0099395 Write ProドキュメントのURLだけを変更した場合，``SAVE RECORD``を実行してもレコードが更新されませんでした。

* ACI0099287 クライアント/サーバー版のみ。SQLでオブジェクト型フィールドにデータを``INSERT``した場合，デッドロックに陥ることがありました。

* ACI0099250 プロジェクトモードで``Create menu``を使用し，メニューを作成した場合，``GET MENU ITEMS``は空の配列を返しました。

* ACI0099168 接続中のユーザー名がサーバー管理画面に表示されないことがありました。ACI0099456とは別の問題です。

* ACI0098712 無効なパスが渡された場合，``METHOD GET PATH``から理論上のパスがそのまま返されました。

**注記**: ドキュメントの説明が曖昧でしたが，仕様が明確にされました。このコマンドでメソッドの有無をチェックすることは意図されておらず，存在しないメソッドは「無効なパス」パスに該当しません。修正により，存在しないメソッドを渡すとエラーが返されるというACI0099521は，解消されました。

* ACI0098700 Mac版のみ。閉じたウィンドウが消える前に何度かちらつくことがありました。

* ACI0098421 ORDAの``entity.drop()``がタイプ``4`` (``dk status serious error``) のエラーが返された場合，ステータスオブジェクトに必要なプロパティが代入されませんでした。``success``だけが返され，``message`` ``componentSignature`` ``errCode`` プロパティを有するオブジェクトのコレクションが``errors``が返されませんでした。

* ACI0098286 フランス語版のみ。ライセンス更新ダイアログのテキストが互いに重なり合って表示されました。

* ACI0097732 4D Viewドキュメントを4D View Proに変換した場合，複数のセルに適用されたスタイル（ボールド＋イタリック＋アンダーライン）が再現されない場合がありました。

* ACI0099817 クライアント/サーバー版のみ。ストアドプロシージャで``Current user``を実行した場合，空の文字列が返されました。「サーバー上で実行」メソッドでは問題ありません。

* ACI0099810 Mac クライアント/サーバー版のみ。起動した直後に4D Serverが最前面アプリケーションになりませんでした。Dockのアイコンをクリックするまで，メニューバーが切り替わりません。

* ACI0099797 リストボックスに表示されたエンティティセレクションのカレント項目オブジェクトに対して``entity.next()``または``entity.previous()``を使用した場合，エンティティセレクションの最適化コンテキストではなく，カレント項目オブジェクトのバーチャルコンテキストのほうが使用されるべきですが，実際にはエンティティセレクションの最適化コンテキストが使用されてしまうため，フォームに表示されたリレーション属性のクエリにより，エンティティセレクションの最適化コンテキストに不要な属性が追加されてしまいました。

* ACI0099796 Mac版のみ。プロジェクトモードでリストボックスの「フォーカスの四角を隠す」プロパティを有効にしても，フォーカスの四角が表示されました。

* ACI0099795 プロジェクトモードで入力不可の階層リストに表示された項目を上下矢印キーや英字キーで選択することができませんでした。

* ACI0099803 フォームエディターでページを削除したときに繰り上がって表示されるページにリストボックスが存在する場合，アプリケーションがクラッシュしました。

* ACI0099794 アプリケーションパッケージ内に``%``記号から名前が始まる画像ファイルがあるためにWiseでインストーラーを作成することができませんでした。

* ACI0099773 テキスト入力エリアのプロパティで自動ドラッグと自動ドロップを有効にした上で「ドラッグ可」と「ドロップ可」を無効にした場合，ドラッグ＆ドロップができませんでした。

* ACI0099761 プロセス数がデータベースの設定された上限値（デフォルトは``5``）に達している状況で``PHP Execute``を実行した場合，プロセスがハングしました。

* ACI0099759 クライアント/サーバー版のみ。ORDAとクラシックランゲージの「橋渡し」コマンドを続けて実行した場合，エラー ``1303``が返されることがありました。たとえば，同じエンティティセレクションに対して``USE ENTITY SELECTION``を続けて使用した場合，１回目のコールで作成されたカレントセレクションのIDが解放されてから，２回目のコールで新しいカレントセレクションが作成されるべきですが，コマンドを続けて使用した場合，解放される前に新しいカレントセレクションが作成されてしまい，結果的にコンテキストIDが無効になってしまいました。

* ACI0099749 クライアント/サーバー版のみ。プロセスの作成や削除にタイミングで，稀にサーバーのデッドロックが発生することがありました。

**注記**: ユーザーをロックする前にサーバーをロックするよう，内部的なオブジェクトロックの仕組みが修正されました。

* ACI0099731 フランス語版のみ。Windowsで自動アップグレード用にMac版にクライアントアプリケーションをビルドしたときに表示されるメッセージにスペルミス（clienteではなくclient, de l'applicationではなくdu l'application）がありました。

* ACI0099714 Microsoft Excelなどの表計算ソフトからタブ区切りテキストをコピーして4D Write Proの表にペーストした場合，文字列全体が単一のセルにすべて挿入されました。期待されるのは，区切られた文字列がそれぞれ隣接するセルに挿入されることです。

* ACI0098029 SQLの``LEFT OUTER JOIN``から返される結果が正しくありませんでした。LEFTテーブルに合致するレコードがRIGHTテーブルに存在しないとしても，LEFTテーブルの行はすべて返され，合致するレコードが存在しないRIGHTテーブルの行には``Null``が返されるべきですが，そのような行は返されませんでした。

* ACI0098328 4D WriteドキュメントをWrite Proに変換した場合，一部のテキストにブルーの背景色が追加されました。段落スタイルシートとテキストの両方に背景色が設定されている場合に問題が発生します。

* ACI0098413 ``SVG_SAVE_AS_PICTURE``は，ファイルまたはフォルダーの名前に複数の拡張子が存在する場合に画像が保存できませんでした。内部的に使用されている正規表現が間違っているためです。

* ACI0098452 Mac版のみ。リストフォームに配置されたピクチャ型フィールドの表示に問題がありました。リスト上でレコードの編集を開始すると，ピクチャ型フィールドの画像が消えました。``.svg``形式の場合，レコードの編集を終了すると，すべての行に同じ画像が表示されました。

* ACI0098925 バックアップ設定の「指定時間経過後に再試行」オプションは設定ファイルに保存されませんでした。Windowsでは常に``0``秒となり，macOSでは常に``60``分となりました。

* ACI0099050 ラベルエディターを閉じてから，再び開いた場合，最後に使用したラベル設定ファイルがロードされた状態でダイアログが表示されませんでした。

* ACI0099200 ラベルエディターの用紙を横向きに設定した場合，水平方向に印刷されるラベルの数が正しくありませんでした。

* ACI0099228 クロスタブ形式のクイックレポートは，時間型フィールドの``Sum``が正しくありませんでした。32ビット版では，空のレポートが出力されます。64ビット版では，``1``時間が約``3.57``秒として計算されました。

* ACI0099235 ``HTTP Get``が過剰にCPUパワーを消費しました。

**注記**: 修正により，ネットワークレイヤーのSelectIOモードが有効にされました。つまり，プロセスのループ処理でソケットの読み込みを実行する代わりに，ネットワークレイヤーからデータの有無に関する情報を受け取るようにコードが修正されました。``ACI0098747``の修正により，CPU使用率は90%程度から67~74%程度に改善されましたが，今回の修正でv17と同程度（ほぼ0%）になりました。

* ACI0099298 トランスポーターで送信した件名（日本語）が正しくエンコードされないことがありました。ヘッダーが``78``バイトを超える場合，UTF-8 quoted-printableの``3``バイトシーケンス（``9``文字）が分割されてしまうことがあるためです。

* ACI0099314 64ビット版のみ。``SET MENU BAR``を実行してから``EDIT ACCESS``でツールボックスの「ユーザー＆グループ」ページを表示した場合，設定したメニューバーではなく，デザインモードのメニューバーが表示されました。また，ダイアログを閉じると，復帰したメニューバーの項目は一部が選択不可の状態になりました。

* ACI0099331 リスト型のサブフォームをダブルクリックした場合，``FORM SET INPUT``で設定した詳細フォームではなく，デザインモードで設定したデフォルトの詳細フォームに画面が切り替わりました。

* ACI0099334 ``dataClass.query()`` ``entitySelection.query()``の``IN``条件にコレクションを渡した場合，あるいは``QUERY WITH ARRAY``で検索を実行した場合，日本語の検索結果が正しくありませんでした。データベースの言語が日本語に設定されており，「テキスト検索用の文字列比較を使用する」が有効にされている場合に問題が発生します。

* ACI0099358 ラテンシーが高い（つまり転送が遅い）ネットワークに接続された別々のプラットフォームでクライアントとサーバーを起動し，新ネットワークレイヤーでクエリを実行した場合，旧式ネットワークレイヤーよりも時間がかかりました。

* ACI0099379 非表示セルが含まれる4D Viewドキュメントを4D View Proに変換した場合，セルのプロパティ``visible``が``false``に設定されましたが，これはSpreadJSがサポートしていないプロパティであり，セルが非表示になることもありません。4D View Proでは，4D Viewのようにセルを非表示に設定することはできません。

* ACI0099393 4D WriteドキュメントをWrite Proに変換した場合，先頭ページを除くすべてのページに表示されるピクチャが先頭ページにも表示されました。

* ACI0099400 Windows版のみ。``DISPLAY SELECTION``または``MODIFY SELECTION``でリストフォームを表示しているウィンドウが最前面ではない状態で``CLOSE WINDOW``を実行してウィンドウを閉じようとすると，アプリケーションがクラッシュすることがありました。

* ACI0099403 サーバー管理画面を表示した状態でクライアントの接続を解除し，画面を「ユーザー」ページに切り替えた場合，接続ユーザー数が減算されていないために配列の範囲チェックエラーが返されました。

* ACI0099404 インデックスを再構築した後，一部のインデックスページがまだフラッシュツリーに残されている状態でインデックスを削除した場合，アプリケーションがクラッシュすることがありました。

* ACI0099407 Windows版のみ。``LISTBOX SELECT ROW``に``lk remove from selection``を渡した場合，数秒後にアプリケーションがクラッシュしました。

* ACI0099409 破損した4D Viewドキュメントを``VP Convert from 4D View``で処理した場合，アプリケーションがフリーズする恐れがありました。

* ACI0099415 テキスト入力の背景が明るい色（たとえば黄色）に設定されている場合，キャレットが良く見えませんでした。

**注記**: キャレットの色は，背景の輝度によって決められていました。修正により，背景のグレースケールの輝度によって決められるようになりました。

* ACI0099428 リストボックスの列に対するポインターを``Form``のプロパティに代入し，オブジェクト記法とポインターの逆参照を併用して行の値を代入した場合，右オペランドではエラー``56``が返され，左オペランドでは配列が更新されませんでした。オブジェクト記法をカッコで括れば問題ありません。

* ACI0099430 Windows版のみ。Internet Explorer 11がインストールされたプラットフォームでシステム版のWebエリアにページを表示した場合，``WA Get Page Title``はHTMLのタイトルではなく，URLを返しました。

* ACI0099527 Write Proドキュメントを``.docx``形式でエクスポートした場合，青色の不要な罫線が出力されることがありました。

* ACI0099535 クライアント/サーバー版のみ。エンティティのリレート属性を``If``構文の中で評価した場合，``Null``と評価されることがありました。ORDAの最適化により，一部の属性が遅延ロードされることが原因です。``If``構文の外でリレート属性を参照すれば，``If``構文の中で評価しても問題ありません。

* ACI0099536 64ビット版のクイックレポートエディターは，``Tab``以外のセパレーター記号を設定することができませんでした。

**注記**: ``QR AREA``は，デフォルトでシステム変数の``FldDelimit``と``RecDelimit``を使用しますが，これは``QR SET PROPERTY``でオーバーライドすることができます。修正により，``QR SET DESTINATION``の前に``QR SET PROPERTY``を使用すれば，``FldDelimit``と``RecDelimit``がオーバーライドできるようになりました。

* ACI0099544 64ビット版のみ。表示フォーマットが設定された実数フィールド（例：``String([TEST]Prix;"##0.00€;-##0.00€")``）がラベルに挿入されていた場合，最初の1枚でラベルの出力が終了しました。

* ACI0099547 Mac版のみ。プロジェクトモードでストラクチャファイルの内部リソースにアクセスするようなプラグインコマンドを実行するとアプリケーションがクラッシュしました。

* ACI0099548 ``If``文などのコードブロック内でシンタックスエラーが検出された場合，``If``および``End if``もシンタックスエラーとして計上されました。

* ACI0099551 Welcome ウィザードが表示された直後にアプリケーションを終了した場合，アプリケーションがクラッシュすることがありました。

* ACI0099554 クライアント/サーバー版のみ。アプリケーションプロセスで``REDUCE SELECTION``を実行してカレントセレクションのサイズを``0``に設定した場合，カレントレコードがアンロードされませんでした。

* ACI0099556 トランザクション中に日付型の属性に対して``collection.sort()``メソッドを実行した場合，結果が正しくありませんでした。

* ACI0099557 Windows版のみ。``.css``ファイルを参照する``link``タグが記述されたHTMLをWebサーバーに対して繰り返しリクエストした場合，アプリケーションがクラッシュしたりフリーズしたりすることがありました。TLS ``1.3``を無効にすれば，問題ありません。

* ACI0099700 クライアント/サーバー版のみ。エンティティセレクションに対し，``For each``ブロック内で各エンティティのリレーション属性に対するクエリを``entitySelection.query()``で実行した場合，返されるエンティティセレクションが正しくありませんでした。途中で``entitySelection.toCollection()``など，明示的にエンティティセレクションをフェッチするようなコードを実行すれば問題ありません。17R5で実施されたORDAの最適化に問題がありました。

* ACI0099693 クライアント/サーバー版のみ。空のエンティティセレクションの１対Nリレーション属性（当然，空）のN対１リレーション属性にアクセスしようとした場合，アプリケーションがクラッシュしました。

* ACI0099689 macOS 10.15 Catalinaでアプリケーションを起動すると，すぐにクラッシュしました。

**注記**: ファイルシステムの「データ領域」に対応し，メニュー項目のキーボードショートカットによる入力処理が修正されました。

* ACI0099675 64ビット版のみ。クイックレポートエディターで計算カラム（例：``[Table_1]price*[Table_1]quantity``）にフォーマット（例：``###0``）を設定した場合，カラムのフォーミュラがクリアされました。

* ACI0099674 ``COLLECTION TO ARRAY``の第``3``パラメーターにテキスト型が渡された場合，コンパイラーからエラーが返されました。リテラルテキストであれば，問題ありません。

* ACI0099664 フォームエディターに入れ子にされたサブフォームの内容が表示されませんでした。

* ACI0099661 プロジェクトモードでフォームエディターを開いた場合，サブフォームオブジェクトのプロパティリストに共有が許可されたコンポーネントのフォーム名が表示されませんでした。

* ACI0099659 MSCで「レコードヘッダーによる修復」を実行した場合，修復後のインデックス作成中にサーバーがクラッシュすることがありました。

* ACI0099648 リストボックスあるいはWrite Proオブジェクトを作成した後，フォームを``0``ページから``1``ページに切り替えると，アプリケーションがクラッシュすることがありました。

* ACI0099644 JSONフォームをフォームエディターで開いた場合，フォームオブジェクトの入力順を示すバッジ（シールド）の再描画に問題がありました。入力順ツールを選択して複数のオブジェクトを範囲選択した場合，一部のバッジが消えました。

* ACI0099642 スタイルシートが設定された4D Viewドキュメントを4D View Proに変換した場合，必要以上に時間がかかりました。デフォルトのスプレッドシートサイズが``100``×``1000``に設定されているためです。

* ACI0099641 4D Viewドキュメントを4D View Proに変換した場合，``###0 jours``のような表示フォーマットが正しく変換されませんでした。``#``記号の部分ではなく，文字定数の部分に数字が表示されました。

* ACI0099638 トランスポーターでメールを送信した場合，長い件名がそのまま送信されないことがありました。

* ACI0099636 トランスポーターでメールを送信した場合，``67``文字のブロックに件名が分割され，間に制御文字が挿入されることがありました。

* ACI0099634 4D Viewドキュメントを4D View Proに変換した場合，水平グリッドラインと垂直グリッドラインの設定が逆にインポートされました。

* ACI0099626 JSONフォームをフォームエディターで開いた場合，名称は同じでも，関連付けられたリストが違うプロパティ（例：ボタンスタイル・ピクチャフォーマット・変数タイプ・テキスト揃え・標準アクション・フォント名など）が設定できる複数のオブジェクトを選択したときのプロパティリスト表示に問題がありました。選択されたオブジェクトすべてに共通の設定を一括して適用できないのであれば，プロパティの値（リスト）は表示されるべきではありません。

* ACI0099623 プロジェクトモードでフォームを開いた場合，ボタンまたはポップアップ/ドロップダウンメニューの「描画しない」プロパティを有効に設定にしても，デザインモードでオブジェクトがレンダリングされました。

* ACI0099622 プロジェクトモードのプロパティリストは，サブフォームオブジェクトのプロパティ「垂直スクロールバー」と「水平スクロールバー」が逆に表示されました。

* ACI0099621 同一のフォームに複数の日付ピッカーが表示されている場合，一方のピッカーに日付を代入すると，両方のピッカーに同じ日付がセットされました。

* ACI0099620 旧式ネットワークレイヤーが有効に設定されている場合，スタンドアロン版であっても，コンパイルモードでプリエンプティブプロセスを開始することができませんでした。4D Remoteではないので，プリエンプティブプロセスを開始するために新ネットワークレイヤーは必要ないはずです。

* ACI0099618 エンティティセレクション型のリストボックスに対して``LISTBOX SELECT ROW``を``lk add to selection``オプションで続けて使用した場合，正しい行が選択されませんでした。ACI0099498が修正されたことの副作用です。

* ACI0099615 Windows 64ビット版のみ。複数のパレットウィンドウを表示させた場合，最後に開いたウィンドウが最初に開いたウィンドウの背面に表示されました。期待されるのは，最後に開いたウィンドウが最前面に表示されることです。

* ACI0099606 ``PRINT LABEL``のパラメーターを省略した場合，シンタックスエラーが返されました。具体的には``PRINT LABEL (aTable)``および``PRINT LABEL (aTable;*)``の構文が使用できませんでした。

* ACI0099599 Mac版のみ。存在しないテーブル名をメソッドエディターに入力してトークナイズ（確定）すると，行末に制御文字（バックスラッシュ記号）が表示されました。

* ACI0099597 フランス語のフォント名「Courier Gras」をプロパティリストで選択すると，表示が「Courier Bold」に変わりました。

* ACI0099594 リストボックスのヘッダー・列・フッターに設定されるデフォルトのオブジェクト名が正しくありませんでした。

* ACI0099590 サーバー側でランタイムエクスプローラーを表示することができませんでした。

* ACI0099589 アプリケーションをプロジェクトモードに変換した場合，``.jpg``形式のスタティックピクチャの「透過」プロパティが``False``から``True``になりました。

* ACI0099585 64ビット版のみ。MSCでレコードヘッダーによる修復を実行した場合，インデックスの再構築が必要になりますが，この処理にデータベース設定のキャッシュサイズが使用されないため，レコード数が多い場合（例：データファイル``200``GB），非常に時間がかかりました。また，キャッシュにレコードがロードされていない状態でインデックスの構築が実行されると，ゼロ除算により，アプリケーションがクラッシュする恐れがありました。

* ACI0099584 フォームオブジェクトを作成した直後はコピー＆ペースト操作ができませんでした。

* ACI0099572 Windows版のみ。POSIXパスで``File``オブジェクト	を作成することができませんでした。

* ACI0099568 クライアント/サーバー版のみ。``For each``のようなコードブロック内でプロジェクションとリレーションを併用した場合，２回目に返される結果が正しくありませんでした。``context``を使用したブロックコードの最適化がうまく働いていないようです。

* ACI0099565 旧式ネットワークレイヤーでサーバーに接続しようとした場合，``uuid.txt``ファイルを開くことができない，というエラーが返されました。

* ACI0099524 サーバー管理画面のプロセスベージにプリエンプティブワーカーのプロセス名が正しく表示されませんでした。ローカライズされてない文字列リソース（``:xliff:MONI_PROCESS_Type39 - (process name)``）が表示されました。

* ACI0099523 SVGコンポーネントの``SVG_New_textArea``コマンドに標準テキストを渡した場合，文中の改行コード（``CR`` ``LF``）がSVGの``tbreak``要素で置換されませんでした。

* ACI0099520 4D View ProドキュメントをPDF形式でエクスポートできないケースがありました。

* ACI0099513 Mac版のみ。View Proエリアのユーザーインタフェースを（ツールバー・リボンではなく）「なし」に設定した状態でオブジェクトの幅や高さを変更してフォームを実行した場合，新しいサイズが反映されませんでした。

* ACI0099507 クライアントがシンタックスチェックを実行している間に別のクライアントで``SET DATABASE PARAMETER``を``4D Remote mode timeout``セレクターで実行すると，シンタックスチェックを実行しているほうのクライアントがフリーズしました。

* ACI0099505 4D Viewドキュメントを4D View Proに変換した場合，リボンインタフェースの「タブストリップ（TabStrip）」のチェックボックスを有効にすることができませんでした。

* ACI0099501 ``APPEND MENU ITEM``の第１引数に無効なメニューバー参照が渡された場合，アプリケーションがクラッシュしました。

* ACI0099498 「選択された項目」が設定されているコレクション型のリストボックスに対して``LISTBOX SELECT ROW``に``lk add to selection``オプションを渡して実行した場合，選択行が即座に更新されませんでした。たとえば``3000``行のハイライトに約``16``秒を要しました。

* ACI0099497 ``Designer``グループに属する``User``権限（``Administrator``が作成したユーザー）でログインした場合，ランタイムエクスプローラーを開くことができませんでした。逆に``Designer``グループに属さない``Developer``権限（``Designer``が作成したユーザー）でログインした場合，ランタイムエクスプローラーを開くことができてしまいました。期待されるのは，``Designer``グループに属するユーザー権限でログインであれば，``Designer``や``Administrator``でなくても，ランタイムエクスプローラーを開くことができること（17r5の新しい仕様）です。

* ACI0099494 空のフォームと空のメソッドだけで構成される単純なストラクチャをMSCで修復しようとすると，アプリケーションがクラッシュしました。

* ACI0099485 クライアント/サーバー版のみ。エンティティを代入文の右オペランドに使用したただけで``entity.touched()``が``True``を返しました。

* ACI0099482 リストボックスのセルに右揃えの値を表示した場合，値の文字数とセルの幅によっては，点滅キャレットが表示されないことがありました。

* ACI0099480 プロジェクトモードでコンボボックスのデフォルト値を設定した後，その　内容を変更することができませんでした。Mac版では，アプリケーションがクラッシュしました。

* ACI0099479 プロジェクトモードでテキスト入力オブジェクトにフィルターを設定した場合，フィルター名にパイプ記号（``|``）が挿入されませんでした。

* ACI0099477 プロジェクトモードでは，MSCの情報ページに「ストラクチャ」タブが表示されませんでした。

* ACI0099476 右から左に向かって読む言語（アラビア語など）のWrite Proテキストを揃えた場合，右ではなく，左揃えになりました。

* ACI0099470 インデックス作成中に表示される進捗バーのメッセージにレコード数が表示されませんでした。

* ACI0099468 プロジェクトモードでリストボックスを複製した場合，ヘッダー・カラム・フッターのオブジェクト名がそのまま複製されました。

* ACI0099461 インデックスが設定されたオブジェクト型フィールドに対するクエリで``Null``または``Undefined``を検索値に指定した場合，返される結果が正しくありませんでした。

* ACI0099458 ピクチャオブジェクトに表示された``.svg``画像を（矢印キーではなく）スクロールバーやホイールボタンで動かした場合，``On scroll``イベントの処理が重くなりました。

* ACI0099456 シングルサインオン（SSO）が有効にされている場合，一部の接続ユーザー名が管理ウィンドウのリストに表示されませんでした。

* ACI0099455 フォームオブジェクトのフォントがスタイルシートではなく，プロパティリストで設定されていた場合，v13からv17にアップグレードすると，フォントの指定が失われました。

* ACI0099453 Windows版のみ。有効なライセンスがない状況でアプリケーションを起動したときに表示されるアラート画面に警告アイコンがありませんでした。

* ACI0099451 コマンドでリストボックスにカラムを追加した場合，``LISTBOX SET PROPERTY``の``lk auto row height``（行の高さを自動的に調整）が働きませんでした。カラムをドラッグして位置を入れ替えれば，正しくリサイズされるようになります。

* ACI0099450 ODBCドライバーあるいは4Dプロダクトラインのインストーラーを起動したときにスプラッシュスクリーンが表示されず，すぐにライセンス規約の画面（２ページ目）が表示されました。

* ACI0099449 垂直ルーラーでWrite Proエリアのヘッダーの高さを減らし，本文の高さを増やした場合，レンダリングが崩れました。ヘッダーと本文のマージンが一致しない状態になります。4D Writeから変換されたドキュメントでなければ，問題は発生しません。また，コマンドでヘッダーや本文をリサイズすれば，問題は発生しません。

* ACI0099448 CEF版WebエリアでGoogleカレンダーなどのWebサービスにログインした後，アプリケーションを再起動して再度アクセスした場合，認証情報の再入力を求められました。32ビット版では問題ありません。

* ACI0099445 RESTプロセスを途中でアボートした場合，HTTPステータスコード``200``および``null``が返されました。また，以降のRESTリクエストが実行されなくなりました。

**注記**: 修正により，RESTプロセスがアボートされた場合，HTTPステータスコード``500``が返されるようになりました。また，``ON ERR CALL``でエラーハンドリングメソッドがインストールされていない場合，下記のようなレスポンスが返されるようになりました。

* ACI0099442 ``VP New document``または``VP Import from object``を実行した場合，コマンドがバッファに追加され，バッファをフラッシュするまでドキュメントが読み込まれませんでした。

* ACI0099441 リストボックスのプロパティ「階層リストボックス」と「カラム自動リサイズ」は最初からボールド体で表示され，``control``+クリック操作をしても，状態が解除できませんでした。

* ACI0099440 リストボックスを配列型からコレクション型に変更した場合，``lk row max height`` ``lk row min height``プロパティがJSONフォームから取り除かれませんでした。

* ACI0099437 ストラクチャモードからプロジェクトモードに変換した場合，リストボックスの「自動行高」プロパティの値が反転しました。

* ACI0099435 登録されたアカウント情報に拡張文字が使用されている場合，ライセンス番号のアクティベーションができませんでした。

* ACI0099434 アプリケーションモードのスプラッシュ画面に表示される画像が正しくありませんでした。アイコンに「DEV」という文字列が含まれていました。

* ACI0099431 64ビット版のみ。``CLOB``タイプのカラムに対して``OCILobGetLength``を実行した場合，``0``ではなく``-2``が返されました。
