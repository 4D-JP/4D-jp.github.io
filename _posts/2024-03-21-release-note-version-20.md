---
layout: fix
title: "4D 20 修正リスト"
date: 2024-03-02 08:00:00
categories: 修正リスト
tags: "20.3"
build: 101214
version: "20.3"
permalink: /2024/81/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0104438 複数のネットワークカードが存在する環境でWebサーバーの待ち受け固定IPアドレスにドメイン名を設定した場合，Webサーバーに`https:`で接続するとステータスコード`409`が返されました。`http:`であれば問題ありません。

* ACI0104473 Write Proドキュメントにアンカー画像とテキストボックスが存在する場合，ランゲージでテキストボックスを削除するとアンカー画像の選択が解除されました。

* ACI0104719 「格納場所」が「データファイルの外」かつ「内部ストレージの最大バイト」が`0`以外に設定されたピクチャ型フィールドに最大バイトを下回るサイズのデータを代入した場合，サイズが`0`バイトになりました。ジャーナルを確認するとデータは保存されているようですが，`4DPICT`フォーマットのピクチャとして認識されません。

* ACI0104702 *4D Helper Tool* がバックグランド項目にインストールされませんでした。ファイル名*com.4D.Helper* ではなく，*com.Helper* となっているためです。

* ACI0104689 Mac版のみ。システムまたはアプリの言語設定が日本語設定されていない場合，日本語名のフォームメソッドをApple Siliconターゲットに対してコンパイルすることができませんでした。

* ACI0104652 Windows版のみ。Webエリア上に表示したポップアップウィンドウの外をクリックしてもウィンドウが閉じられませんでした。

* ACI0104536 インデックスクエリを実行するとサーバーが突然に終了することがありました。

**注記**: DB4Dワーカーの内部的なリストを更新する仕組みが見直されました。内部的なリストが正しく管理されていないと，ワーカー数が理論的な上限である`32767`に達し，ある時点で新規の接続が使用済みのワーカーによって処理されるかもしれません。そのようなワーカーが，アイドル時間タイムアウトによるデータベースコンテキストの延期と再開を繰り返していると，やがて同一のデータベースコンテキストが同時に別々のクエリを実行してクラッシュを引き起こす可能性がありました。

* ACI0104406 テーブルに複合インデックスが設定されている場合，`QUIT 4D`の実行後にアプリケーションがフリーズすることがありました。「サーバー側で実行」メソッドで対象テーブルをクエリしたことがあると，現象が発生するようです。

* ACI0104632 サーバー管理画面プロセスが内部エラー（`MONI_PROCESS_SetInterface`メソッド）を返すことがありました。ACI0104516と同じ現象です。

* ACI0104562 メソッドエディターのコンテキストメニューを使用してローカル変数の名称を変更した場合，複数行にまたがる`#DECLARE`構文が更新されないことがありました。パラメーターと戻り値の間に改行を挿入した場合に問題があります。閉じる括弧の後に改行を挿入すれば問題ありません。たとえば，下記の例では`$Result_Data`の名称を変更できません。

```4d
#DECLARE($In1 : Integer; \
$In2 : Pointer; \
$In3 : Pointer\
)->$Result_Data : Text
```

* ACI0104675 再帰的なオブジェクト参照が含まれるコレクションに対して`Collection.equal()`を使用した場合，アプリケーションがクラッシュしました。

* ACI0104639 クイックレポートエディターで保存したファイルを削除した場合，レポートがメモリに残っているためにクイックレポートエディターで再表示することができますが，その後，エディターを閉じるときに表示されるプロンプトで「保存しない」ボタンをクリックした場合，エラー`-43`（ファイルがみつかりません）が返されました。

**注記**: 修正により，必要に応じてレポートファイルが復元されるようになりました。

* ACI0104628 クライアント/サーバー版のみ。データストアクラスのメンバー関数で`Current user`を使用した場合，カレントユーザーおよびエイリアスに*Designer* が返されました。

**注記**: サーバー側のDB4Dプロセスにカレントユーザーの概念はありません。

* ACI0104522 プロジェクトモードのみ。テーブル間にリレーションを設定し，ストラクチャエディターのリレーションインスペクターで「自動ワイルドカードサポート」を有効にした場合，「ワイルドカード」フィールドを設定することができますが，選択したフィールドがインスペクターの表示に反映されませんでした。カタログ自体は更新されています。