---
layout: fix
title: "4D v18r5 修正リスト"
date: 2020-10-17 08:00:00
categories: 修正リスト
tags: 18r5  
build: 257368
version: 18r5

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099483 一部のコマンドは，パラメーターを必要としないのにも関わらず，メソッドエディターの補完機能（``tab``キー）でコマンド名を入力した場合，自動的にカッコが追加されました。例：

* ACI0099073 ストラクチャエディターのインスペクターにリレーション名を入力した後，フォーカスアウトしないままウィンドウを閉じた場合，入力した名前が保存されませんでした。

* ACI0098523 ``MODIFY RECORD``で表示した詳細フォームに配置されたオブジェクトからフォーカスが移動しないようにAPI Packプラグインで設定した場合，標準アクションの「次レコード」または「前レコード」をクリックするとフォームが閉じられ，``OK``に`1`が代入されました。

* ACI0097765 ツールボックスの「フォーマットとフィルター」ページでテスト用のデータ型を「数値」以外に変更しても，すぐにコンボボックスが「数値」に戻り，値がクリアされました。

* ACI0099670 Mac 64ビット版のみ。``SET WINDOW RECT``でウィンドウをリサイズした場合，プラグインエリアが正しく再描画されませんでした。プラグインに渡されるクリッピング領域がコマンドの実行後に更新されないためです。

* ACI0100304 ``WEB SERVICE CALL``でhttpからhttpsのリダイレクトが返された場合，アプリケーションがフリーズしました。

* ACI0100306 Write Proウィジェットのツールでページのマージンを変更することができませんでした。

* ACI0100359 サブフォームに表示されたクイックレポートのカラムを移動しても，表示が更新されませんでした。レポートの内容自体は合っています。

* ACI0101287 変数にコレクションの要素を代入し，その同じ変数を``For each``ブロックの第１パラメーター（カレント要素），コレクションを第２パラメーターに渡してループ処理を実行した場合，メモリリークが発生しました。

* ACI0101276 プロジェクトモードのみ。テキスト入力ボジェクト（変数）に対して``OBJECT SET LIST BY NAME``が使用できませんでした。

* ACI0100737 Windows版のみ。システム言語が「英語」に設定されている場合，バックアップ設定の項目「n秒後に再試行」が保存されませんでした。``.4DSettings``ファイルには値が書き込まれていますが，設定画面には``0``と表示されました。

* ACI0101143 プロジェクトモードのみ。大量のオブジェクト（アイコンが設定されたボタン）がフォームに配置されている場合，フォームエディターの動作がとても重くなりました。バイナリモードでは問題ありません。

* ACI0100926 Windows版のみ。進行中のプログレスバーのキャンセルボタンをクリックした場合，コールバックメソッドの呼び出しでエラーが返されました。ローカルプロセスのスタックサイズが不足しているようです。

* ACI0100974 ``MAIL Convert from MIME``でメールの本文が取り出せないことがありました。特定の標準テキストメールで問題が再現します。マルチパートメールでは問題ありません。

* ACI0101298 背景色が設定されているテキスト入力エリアに対して``OBJECT SET RGB COLORS``を使用した場合，フォーカスアウトのタイミングで``On Data change``イベントが発生しました。背景色が「透過」に設定されているオブジェクトは問題ありません。

* ACI0101114 Mac版のみ。ポップアップ/ドロップダウンメニューに大文字/小文字の区別またはアクセント記号だけが違っている値が表示されている場合，カレント項目ではない行にチェックマークが表示されました。

* ACI0101061 プロジェクトモードのみ。新規作成したリストボックスには「行の移動可」プロパティがありませんでした。バイナリモードから変換されたリストボックスは問題ありません。プロパティが設定されていない場合，行のドラッグ＆ドロップができません。

* ACI0101294 ``VP Convert to picture``はシート番号を``0``ではなく``1``からカウントしました。

* ACI0101212 ``MAIL Convert from MIME``でメールオブジェクトを作成した場合，エンコードに問題があるために画像が表示されないことがありました。

* ACI0101209 エンティティセレクション型のリストボックスをサブフォーム内で使用した場合，「カレントの項目の位置」や「選択された項目」がデバッガに表示されませんでした。「カレントの項目」だけが表示されました。

* ACI0101135 プロジェクトモードのみ。``LISTBOX SET PROPERTY``と``lk named selection``の組み合わせでリストボックスの命名セレクションを設定することができませんでした。

* ACI0101067 ``MAIL Convert from MIME``で変換したメールオブジェクトは，送信日が正しく返されないことがありました。タイムゾーンが正しく計算されていないためです。たとえばMIMEのヘッダー値が``Mon, 3 Aug 2020 09:27:52 +0200``だった場合，``2020-08-03T09:27:52.000Z``のような日付に変換されました。

* ACI0101254 バイナリモードのみ。オブジェクトメソッドが設定されているオブジェクトを含むフォームを削除してごみ箱に空にした場合，MSCのアプリケーション検査を実行すると，どこにも使用されていない``CC4D``リソース（オーファンメソッド）が検出されました。

* ACI0100004 ノルウェー語とフランス語のスペルチェック辞書に同一のID番号が振られました。

**注記**: Mac版のシステムスペルチェックだけが修正され，番号ではなく``fr-FR``や``en-US``のような識別子が使用されるようになりました。Hunspell版のスペルチェックは，ライブラリが発行するIDをそのまま使用しています。

* ACI0101261 バイナリデータベースをプロジェクトに変換した場合，階層リストの「透過」プロパティがエクスポートされませんでした。

* ACI0101259 ``MAIL New attachment``で作成したメール添付オブジェクトを別プロセスに渡すことができませんでした。

* ACI0101240 ラベルエディターで連結したフィールドが正しく出力されませんでした。最初にオペランドだけが出力されました。

* ACI0101106 プロジェクトモードのみ。データソースに命名セレクションが設定されたリストボックスに``CUT NAMED SELECTION``または``COPY NAMED SELECTION``で作成したセレクションが表示されませんでした。

* ACI0101293 マルチコアのバーチャルマシンで``Get system info``を実行した場合，返されるコア数が正しくありませんでした。

* ACI0101288 Windows版のみ。統合CEF版Webエリアがマウスホイールのスクロール操作やポインターのホバリングイベントに反応しないことがありました。ACI100774が修正されたことによる副作用のようです。``On Load``イベントではなく，``SET TIMER(-1)``で誘発した``On Timer``イベントでHTMLをロードすれば問題ありません。

* ACI0101183 オフスクリーンモードのView Proエリアでは，``VP set allowed methods``で許可したメソッドが使用できませんでした。

* ACI0101182 巨大なWrite Proドキュメント（A4用紙で1100ページ以上）のテキストをすべて選択した状態でコンテキストメニューを表示するために右クリック操作をした場合，アプリケーションがフリーズしました。

* ACI0101181 ``.dbf``ファイルをインポートすることができませんでした。テキストは最初のワードだけがインポートされ，数値は常に``0``がインポートされました。

* ACI0101180 4D for iOSの同期では，１度に``100``件を超えるレコードが削除できませんでした。

* ACI0101179 クイックレポートのクロスタブモードでヘッダーを右クリックし，コンテキストメニューのサブメニュー項目を選択した場合，ランタイムエラーが返されました。リストモードとは列の数が同じではないことが考慮されていないようです。

* ACI0101177 トランザクション中に``SET QUERY AND LOCK``を実行し，インデックスが設定されていないオブジェクト型フィールドをクエリした場合，``VALIDATE TRANSACTION``の後もレコードのロックが解除されませんでした。ACI0101127が修正されたことによる副作用のようです。

* ACI0101176 iCloudサーバー（``imap.mail.me.com``）に対し，IMAPトランスポーターとApp用パスワードでPLAIN認証ができませんでした。

* ACI0101165 クイックレポートエディターのクロスタブモードでセルを編集することができませんでした。

* ACI0101163 Windows版のみ。名前にピリオドが含まれるフォルダーに``Select document``でファイルを保存しようとした場合，エラーが返されました。

* ACI0101161 クイックレポートエディターのクロスタブモードでフッターのコンテキストメニューからスペーシングのオプションを選択した場合，ランタイムエラーが返されました。

* ACI0101159 バイナリデータベースをプロジェクトに変換した場合，リレーションの「自動ワイルドカードサポート」が無効になりました。フィールドにワイルドカードで終わる値を入力してタブアウトした場合，候補値のリストが自動的に表示されませんでした。

* ACI0101156 エクスプローラーの「フォーム」ページの設定ボタン（歯車のアイコン）がクリックできませんでした。「ホーム」ページに切り替えてから「フォーム」ページに戻れば，ボタンが使用できるようになります。

* ACI0101152 ``BASE64 ENCODE``の第２パラメーター（テキスト型）に``$0``を指定した場合，コンパイルエラーになりました。R3では問題ありません。中間ローカル変数を使用すれば問題ありません。

* ACI0101151 垂直または水平のラインオブジェクトをグループ化した場合，グループの選択ハンドルが正しく描画されませんでした。図形の始点が右または下にあった場合，グループをリサイズすると，オブジェクトがグループからはみ出てしまいました。高さまたは幅が負の値であるオブジェクトの座標の計算が合っていないためです。

* ACI0101150 重複キーが検出された場合にRESTサーバーから返されるレスポンスに問題がありました。JSONの後に空のノード（``{}``）がありました。

* ACI0101141 トランザクション中にエンティティをロックし，ORDAの``entity.drop(dk force drop if stamp changed)``を実行した場合，エンティティは削除されていないのに，ステータスオブジェクトの``success``には``True``が返されました。

* ACI0101187 エクスプローラーでクラスを選択し，歯車アイコンのメニューから新規メソッドを作成しようとした場合，アプリケーションがクラッシュしました。

* ACI0101204 ビルドしたアプリケーションでは，``command``+``shift``+``F9``ショートカットでランタイムエクスプローラーを表示することができませんでした。

* ACI0101200 トランザクション中にレコードを削除してからトランザクションをキャンセルした場合，操作は取り消されますが，レコードがロックされたままになりました。

* ACI0101227 入力エリアに設定した指定リストおよび除外リストが適用されませんでした。ACI0099771が修正されたことによる副作用です。

* ACI0101224 4D Viewドキュメントのフォーミュラ名に小文字が使用されていた場合，フォーミュラ名の一部をハイライト選択してフォーミュラを書き換えることができませんでした。入力した文字列が間違った位置に挿入されました。

* ACI0101223 4D Viewドキュメントにピクチャが含まれる場合，PDFエクスポートが正しく出力されませんでした。ピクチャの代わりに``_pict_``という文字列が挿入されました。

* ACI0101211 PDFファイルが添付された``.eml``ファイルを``MIME Convert to mail``でメールオブジェクトに変換して送信した場合，受信クライアントに添付ファイルが表示されないことがありました。

* ACI0101086 Mac版のみ。昔のバージョンで作成したストラクチャから変換されたフォームは，拡大率が``1440%``に設定されていることがありました（Windows版では``100%``と表示されます）。そのようなフォームを印刷した場合，以後，アプリケーションを終了するまで，すべての印刷に異常な拡大率が適用されました。

* ACI0101083 4D for iOSの「公開」セクションでプッシュ通知を有効にしても，アプリの「通知」が有効になりませんでした。``.4Dmobileapp``ファイルの``pushNotification``は``true``にセットされ，``pushCertificate``にもファイルパスがセットされますが，生成されたXcodeプロジェクトの``.entitlements``ファイルが空でした。

* ACI0101079 プロパティリストの「配置」タブでフォームの垂直マージンを変更することができませんでした。「すべて」タブでは問題ありません。

* ACI0101077 プロジェクトモードのみ。入力フォームをサブフォームとして組み込んだ場合，オブジェクトの入力順が無視されました。

* ACI0101076 View Proエリアに対して``VP ADD RANGE NAME``を実行した場合，リボンバーの「名前マネージャー」が使用できなくなりました。

* ACI0101075 64ビット版の``RECEIVE PACKET``でストップ文字を指定した場合，32ビット版よりもずっと低速（およそ``75``倍）でした。バイトサイズを指定した場合，または``RECEIVE BUFFER``であれば問題ありません。シリアル/USB変換アダプター・プラットフォーム・接続デバイスに関係なく，問題が再現します。

* ACI0101071 エンティティセレクションから派生したクラスのメンバーメソッドの名称に数字が使用されていた場合（例：``method1``），そのメソッドを呼び出すと「無効なメンバーメソッド名」エラーが返されました。

* ACI0101070 クライアント/サーバー版のみ。エンティティセレクションから派生したクラスのメンバーメソッドの戻り値が正しくありませんでした。``$0``に代入した値ではなく "Dataclass" という文字列がクライアントに返されました。

* ACI0101069 ``vk workbook``スコープのレンジ名がセルに設定されている場合，``VP Get value``または``VP SET VALUES``の名前を指定してアクセスすることができませんでした。スコープがカレントワークシートであれば問題ありません。

* ACI0101068 4D View Proスプレッドシートのセルを``delete``キーで直接クリアした場合，``designer.actions.isFileModified``が``true``になりませんでした。セルを編集状態にして値を削除すれば問題ありません。

* ACI0101066 ``MAIL Convert from MIME``に渡されたMIMEデータに``CRLF``コードが含まれていない場合，アプリケーションがハングしました。ただし，空の文字列であれば問題ありません。

* ACI0101063 特定の文字（ "方" "油" "乳" など，Shift_JISエンコーディングで２バイト目が``0xFB``の漢字）がデータベースのパス名に含まれる場合，アプリケーションが起動直後にクラッシュしました。

* ACI0101059 おおきな4D Writeドキュメント（4で``1000``ページ超・``50000``行程度）をWrite Proに変換した場合，すぐに表示されませんでした。

* ACI0101137 ファイル名にドイツ語のアクセント記号が含まれる添付ファイルを``MAIL Convert from MIME``で送信することができませんでした。

* ACI0101134 クライアント/サーバー版のみ。``var``構文に記述した``cs``に対し，補完候補が表示されませんでした。``var``構文でなければ問題ありません。

* ACI0101131 Write Proドキュメントの冒頭にテーブル（表組み）を挿入した場合，そのテーブルの上に行を挿入することができませんでした。

* ACI0101128 ``WP Get formulas``に未定義のオブジェクトが渡された場合，アプリケーションがクラッシュしました。

* ACI0101127 スタンドアロン版のみ。トランザクション中にエンティティをロックし，``VALIDATE TRANSACTION``の後に``entity.lock(dk reload if stamp changed)``を実行した場合，そのエンティティはロックされますが，その後，別のプロセスも同じエンティティをロックすることができました。クライアント/サーバー版では問題ありません。

* ACI0101126 クロスタブ型クイックレポートのヘッダーをクリックした場合，エラーが返されました。

* ACI0101121 プロジェクトモードでは「リレートした１レコードがなければ通知」が機能しませんでした。

* ACI0101119 4D WriteからWrite Proに変換したドキュメントのテキストをコピー＆ペーストした場合，段落スタイルシートが複製されました。結果的に，段落とペーストしたテキストに別々のスタイルシートが設定されてしまいました。

* ACI0101117 Write Proでタブを含む段落の左マージンを設定した場合，左マージンの値がドキュメントに保存されませんでした。右マージンであれば問題ありません。

**注記**: 左マージンが正の値でテキストのインデントが負の場合に問題がありました。

* ACI0101116 プロジェクトモードで作成されたコンポーネントの名前に日本語が使用されている場合，コンパイルモードでホストを開始するとエラーが返されました。

* ACI0101115 保存モードが「データファイルの外」に設定されているピクチャフィールドに``500``バイト以下のSVG画像を保存した場合，アプリケーションがクラッシュしました。

* ACI0101113 ループ内で``READ PICTURE FILE``を使用して大量のピクチャを読み込んだ場合，メモリーリークが発生しました。Windows版ではアプリケーションがクラッシュまたはフリーズしました。Mac版では，アプリケーションの実行速度が大幅に低下しました。18.x，17.xでは問題ありません。

* ACI0101112 クライアント/サーバー版のみ。エンティティセレクションから派生したクラスのメンバーメソッド内では``This.length``が常に``0``を返しました。クライアント側で作成したエンティティセレクションであれば問題ありません。

* ACI0101104 Mac版のみ。矢印キーを使用してソフトハイフン記号を越えようとした場合，キャレットがテキストの冒頭に移動しました。

* ACI0101093 Mac版のみ。コンボボックスの幅が不足している場合，アイテムが完全に表示されませんでした。

