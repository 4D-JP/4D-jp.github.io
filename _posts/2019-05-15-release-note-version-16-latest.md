---
layout: fix
title: "4D v16 修正リスト"
date: 2019-07-12 17:55:00
categories: 修正リスト
tags: "16.6"
build: 239609
version: 16.6

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099682 配列型リストボックスのコントロール配列を明示的に宣言しなかった場合，行の高さ配列はテキスト型の変数，行の制御配列は未定義の変数になりました。そのままアプリケーションをコンパイルモードで実行すると，フォームの動作が非常に遅くなりました。リストボックスだけでなく，他のテキスト入力エリアも影響を受けます。

**注記**: 制御配列には，ブール型配列または倍長整数配列が設定できるため，コンパイラーが型を推定することはありません。プロセス変数を使用するのであれば，必ず，明示的に宣言するようにしてください。修正により，行の高さは，自動的に倍長整数配列として宣言されます。なお，プロパティリストには変数名を入力せず，``LISTBOX SET ARRAY``で動的に配列を設定することもできます（たとえばリストボックスの非表示カラム）。，

* ACI0099079 送信メールの設定を``SMTP_SetPrefs (0;2;0)``にセットした場合，MIMEに挿入される改行コード（``CR`` ``LF``）の数が正しくありませんでした。

**注記**: 4Dの内部的な改行コードは，``CR``です。4D Internet Commandに渡されたテキスト変数は，自動的に``CR`` ``LF``に置換されます。問題は，複数行のMIMEヘッダーを設定するために``CR``を含むテキストを設定した場合，``CR`` ``LF`` ``CR`` ``LF``（余分な改行コード）が挿入されることでした。

* ACI0099773 テキスト入力エリアのプロパティで自動ドラッグと自動ドロップを有効にした上で「ドラッグ可」と「ドロップ可」を無効にした場合，ドラッグ＆ドロップができませんでした。

**注記**: ドキュメントの説明にも問題がありました。ドラッグを有効にするためには，「自動ドラッグ」が有効がどうかに関係なく，「ドラッグ可」を有効にする必要があります。ドキュメントは，どちらか一方が有効であれば良いような記述でした。ACI0099359の修正により，本来の仕様（「ドラッグ可」は必須）になりましたが，今回の修正により，どちらか一方が有効であれば良い，という旧来の動作が復元されました。

* ACI0099637 ストラクチャエディターのインスペクターに日本語でテーブルまたはフィールドの名前を入力した後，``return``キーを``3``回（日本語入力の確定・テキスト入力の確定・次のオブジェクトにタブ移動）してからストラクチャエディターのウィンドウをクリックし，再度，インスペクターのウィンドウをクリックしてテーブルまたはフィールドの名前を入力しようとした場合，日本語入力ができませんでした。インスペクターのウィンドウを閉じてから再表示させると，日本語入力ができるようになります。

* ACI0099605 激しく壊れたデータファイルに対して「タグによる修復」を実行した場合，アプリケーションがクラッシュすることがありました。データファイルや``.match``ファイルがランサムウェアの標的にされた場合，ファイルは暗号化され，まったく修復不可能になりますが，そのような場合に問題が発生します。

* ACI0098413 ``SVG_SAVE_AS_PICTURE``は，ファイルまたはフォルダーの名前に複数の拡張子が存在する場合に画像が保存できませんでした。内部的に使用されている正規表現が間違っているためです。

* ACI0099524 サーバー管理画面のプロセスベージにプリエンプティブワーカーのプロセス名が正しく表示されませんでした。ローカライズされてない文字列リソース（``:xliff:MONI_PROCESS_Type39 - (process name)``）が表示されました。
