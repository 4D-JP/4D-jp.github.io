---
layout: fix
title: "4D 20r6 Hotfix 1 修正リスト"
date: 2024-11-25 08:00:00
categories: 修正リスト
tags: 20r6
build: 100312
version: "20r6"
permalink: /2024/304/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105222 バイナリモードのみ。実数型フィールドに表示フォーマットが設定されていない場合，時間のフォーマットで値が表示されました。

* ACI0105057 ツールボックスの「ユーザー＆グループ」ページを開いた状態でREST APIの認証メソッドを処理した場合，アプリケーションがクラッシュしました。	

* ACI0105214 セレクション型またはエンティティセレクション型のリストボックスで「セレクションハイライトを非表示」を有効にした場合，行をクリックしても*On Display Detail* イベントが発生せず，メタ情報式が評価されませんでした。リストボックスのヘッダーをクリックしたり，ウィンドウをリサイズしたりすれば再描画されます。ACI0105065が修正されたことによる副作用のようです。

* ACI0105212 `Open datastore'でリモートデータストアに接続した場合，*On REST Authentication* データベースメソッドでログインすればセッションタイムアウト（デフォルトは`1`時間）までライセンスが解放されずに保持されますが，*roles.json* と`ds.authentify()`でログインするとセッションのライセンスがすぐに解放されました。

* ACI0105193 `Try/Catch`の構文を入れ子にした場合，シンタックスエラーが返されました。

* ACI0105123 Mac版のみ。ループ処理中に`PDF Get Attachments`を実行した場合，アプリケーションがクラッシュしました。`800`回前後の繰り返しで現象が再現します。

**注記**: 作成したプロセス以外はコールバック関数を保持しないよう，`4D.SystemWorker`が修正されました。

* ACI0105203 `IMPORT DATA`による長文のインポートで文字化けが発生することがありました。UTF-8文字列の長さが割り切れない場合に問題が生じました。

**注記**: ACI0103521が修正されたことにより，これまで目立たなかった不具合が明らかになりました。ACI0103521の修正以前は，文字化けが生じない代わりに，長文のインポートでバッファサイズを超過するテキストが失われていました。

* ACI0105204 ラジオボタンまたはチェックボックスに日本語`1`文字だけのタイトルが設定されている場合，正しく文字が表示されませんでした。

* ACI0105183 Macクライアント/サーバー版のみ。サーバーがフリーズすることがありました。コオペラティブプロセスのスケジューラーがデッドロックに陥る条件があるようです。

* ACI0105136 Windows版のみ。プロジェクトを開いたことがない状態で環境設定にアクセスした場合，POSIXパスが無効であるというエラーが返されました。20r7ではクラッシュするかもしれません。

* ACI0105130 `TODO`コメントにセミコロン記号（`;`）を含めた場合，メソッドエディターのツールバー表示が乱れました。記号がポップアップメニューのメタ文字として処理されるためです。

* ACI0104443 セレクション型リストボックスセルの*On Before Keystroke* イベントで`FILTER KEYSTROKE("")`を実行した場合，セルの内容が消去されました。

* ACI0105179 トランザクション中に更新されたエンティティがメモリから解放されるタイミングでアプリケーションがクラッシュすることがありました。

* ACI0105052 Windows版のみ。サブモニター側に表示されたSDIモードのフォーム上で日付ピッカーを使用した場合，メインモニター側にピッカーが表示されました。

**注記**: [コンポーネント](https://github.com/4d/4D-Widgets/commit/020ab608b8158a2dfb61ad512cb072f648bc3e38)が修正されました。

* ACI0105021 プロジェクトモードのみ。*.lproj* フォルダー内に置かれた画像ファイルがリソースフォルダーに置かれた画像ファイルよりも優先されませんでした。

* ACI0105192 バイナリモードのみ。リストボックスの日付型カラムまたはフッターに表示フォーマットを設定した場合，日付の代わりに"todoicu"という文字列が表示されました。プロパティリストではなく`OBJECT SET FORMAT`を使用すれば問題ありません。

**注記**: 問題は修正されましたが，すでに"todoicu"という文字列がプロパティリストに登録されている場合，表示フォーマットを設定しなおす必要があります。

* ACI0105128 *OAuth2* トークンと`SMTPTransporter`で*Gmail* を送信した場合，受信者のメッセージにBccヘッダーが表示されました。ACI0104608が修正されたことによる副作用です。

**注記**: 本来，Bccヘッダーはメールサーバーが除去するべきですが，すべてのメールサーバーがそのように設計されているわけではないようです。修正により，JMAPメッセージオブジェクトから変換されたMIMEにはBccヘッダーが含まれない仕様に戻されました。*NetKit* のように，MIMEにBccヘッダーを含める必要がある場合，下記のようにオプションで指定することができます。

```4d
MAIL Convert to MIME($inMail; {includeBccHeaders: True})
```

`SMTPTransporter`もメッセージからBccヘッダーを取り除くように改良されました。

* ACI0105105 パラメーターのない`exposed`属性のシングルトン関数にREST APIでアクセスした場合，エラーが返されました。明示的に空のリスト`[“”]`をHTTPリクエストで送信すれば問題ありません。

* ACI0105064 SOAPサーバーがXML External Entity (XXE) 攻撃の標的になる可能性がありました。

* ACI0105011 フォームエディターで空のリストボックス列を選択して削除した場合，アプリケーションがクラッシュしました。

* ACI0104819 *Qodly Studio* のみ。新規プロジェクトを作成した場合，*Shared* フォルダーが自動的に作成されないため，コンポーネントをアップロードすることができませんでした。

* ACI0105065 コレクション/エンティティセレクション型リストボックスの「自動行高」および「セレクションハイライトを非表示」を有効にした場合，リストを下方向にスクロールした後，行をクリックすると，上方向にリストがスクロールしました。配列型リストボックスでは問題ありません。

* ACI0105132 特定のドキュメントをWrite Proの埋め込みモードに表示することができませんでした。埋め込みモードでは，水平スクロールが常に表示され，自動改行モードがオフになることが関係しています。

* ACI0105083 `orient`属性が`auto-start-reverse`に設定されたSVGを表示しようとした場合，アプリケーションがクラッシュしました。

**注記**: `auto-start-reverse`属性はサポートされていませんが，修正により，レンダリングエンジンがサポートしていないCSS属性は，エラーを返さないようになりました。

* ACI0105167 ラジオボタンまたはチェックボックスのタイトルが`1`文字の場合，タイトルの前にコロン記号（`:`）が追加されました。

* ACI0105163 抑制できるコンパイラー警告のリストに抑制できないエラーの番号も含まれていました。

* ACI0105161 ツールボックスの「ユーザー＆グループ」ページでグループ名をダブルクリックしてから項目を更新した場合，変更が反映されませんでした。コンテキストメニューを使用すれば問題ありません。

* ACI0105081 データモデルクラスのメンバー関数に「昇格」アクションを設定した場合，関数の実行中に`Session.hasPrivilege()`が一時的な権限の情報を返しませんでした。

* ACI0105074 フォルダー名に日本語やウムラウト記号のような拡張文字が含まれているWindowsの共有フォルダー（サブフォルダーではない）をSMBでMacでマウントした場合，エラーになりました。Windows同士，あるいはMacからWindowsの共有であれば問題ありません。ACI0104219が修正されたことによる副作用のようです。

* ACI0105172 Mac版のみ。WindowsのプロジェクトフォルダーをSMBまたはCIFSで共有し，Macから開発モードを有効にして開こうとした場合，アプリケーションがクラッシュしました。プロジェクトフォルダー自体ではなく，その親フォルダーを共有すれば問題ありません。
