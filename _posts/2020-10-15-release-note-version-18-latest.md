---
layout: fix
title: "4D v18 修正リスト"
date: 2020-10-23 08:00:00
categories: 修正リスト
tags: "18.3"
build: 257605
version: 18.3
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0101341 クライアント/サーバー版のみ。空のエンティティセレクションに対して``entitySelection.sum()``を使用した場合，メモリーリークが発生しました。

* ACI0101270 エクスプローラーのフォルダーに入れられているフォームまたはプロジェクトメソッドを複製した場合，新しいフォームまたはプロジェクトメソッドがオリジナルと同じフォルダーではなく，エクスプローラーのトップレベルに作成されました。

**注記**: 修正により，エクスプローラーの「ホーム」タブで複数のオブジェクトが選択されていた場合，すべてが複製されるようになりました。v17までは，最初のオブジェクトだけが複製されました。技術的な制約により，バイナリモードでは，選択中のオブジェクトが同一のフォルダーに入れられていなければ，すべてトップレベルに複製されます。プロジェクトモードでは，それぞれのフォルダーに新しいオブジェクトが作成されます。

* ACI0101266 クライアント/サーバー版のみ。保存オプションが「データファイルの外」に設定されているピクチャフィールドに対して``SELECTION TO ARRAY``を実行した場合，エラー``-10533``が返されました。

**注記**: サーバーとクライアントの両方が修正されました。両方のビルドをアップデートする必要があります。

* ACI0100945 ``OB SET``または``OB SET ARRAY``でオブジェクト型フィールドを更新してかた``SAVE RECORD ``で保存した場合，``Modified record``が``True``を返しました。フィールド自体にフィールドを代入すれば，``False``が返されるようになります。

* ACI0101280 4D ViewスプレッドシートをView Proに変換した場合，埋め込まれたフォーミュラの大部分が失われることがありました。

**注記**: View Proの限界を超える長さのフォーミュラが出力されることがありました。たとえば，データ型を文字列で統一するため，各パラメーターを関数でキャストしているようなフォーミュラを変換した場合，数式がさらに長くなりました。修正により，日付リテラルは文字列型リテラル，``String``関数はシンプルな関数名（``TEXT``）に変換されるようになりました。View Proの標準関数は，内部的にバリアント側を使用しているため，日付を文字列で渡すことができます。

* ACI0101315 ``entitySelection.query()``および``collection.query()``で``IN``比較演算子を使用した場合，条件に使用したコレクションがメモリーリークすることがありました。

* ACI0101305 リストボックスの「自動行の高さ」が有効にされている場合，``OBJECT GET SCROLL POSITION``から返される行番号が``0``から始まりました。通常のリストボックスであれば，行番号が``1``から始まります。

**注記**: 問題は修正されましたが，プロパティによってコマンドの振る舞いが違うことに留意してください。「自動行の高さ」が有効にされていない場合，階層リストやリストフォームと同じように，コマンドは完全に表示されている最初の行番号を返します。リストボックスの「自動行の高さ」が有効にされている場合，コマンドは部分的であっても表示されている最初の行番号を返します。

* ACI0101298 背景色が設定されているテキスト入力エリアに対して``OBJECT SET RGB COLORS``を使用した場合，フォーカスアウトのタイミングで``On Data change``イベントが発生しました。背景色が「透過」に設定されているオブジェクトは問題ありません。

* ACI0101061 プロジェクトモードのみ。新規作成したリストボックスには「行の移動可」プロパティがありませんでした。バイナリモードから変換されたリストボックスは問題ありません。プロパティが設定されていない場合，行のドラッグ＆ドロップができません。

* ACI0100977 プロジェクトモードのみ。図形オブジェクトの「角の丸み」プロパティが``0``以外の値に設定されていない場合，``OBJECT SET CORNER RADIUS``が使用できませんでした。

* ACI0101067 ``MAIL Convert from MIME``で変換したメールオブジェクトは，送信日が正しく返されないことがありました。タイムゾーンが正しく計算されていないためです。たとえばMIMEのヘッダー値が``Mon, 3 Aug 2020 09:27:52 +0200``だった場合，``2020-08-03T09:27:52.000Z``のような日付に変換されました。

* ACI0101212 ``MAIL Convert from MIME``でメールオブジェクトを作成した場合，エンコードに問題があるために画像が表示されないことがありました。

* ACI0101209 エンティティセレクション型のリストボックスをサブフォーム内で使用した場合，「カレントの項目の位置」や「選択された項目」がデバッガに表示されませんでした。「カレントの項目」だけが表示されました。

* ACI0101135 プロジェクトモードのみ。``LISTBOX SET PROPERTY``と``lk named selection``の組み合わせでリストボックスの命名セレクションを設定することができませんでした。

* ACI0101114 Mac版のみ。ポップアップ/ドロップダウンメニューに大文字/小文字の区別またはアクセント記号だけが違っている値が表示されている場合，カレント項目ではない行にチェックマークが表示されました。

* ACI0099364 Mac 64ビット版のみ。プラグインSDKの``PA_GetCarbonPageFormat``および``PA_GetCarbonPrintSettings``が``null``を返しました。

**注記**: 修正により，``PA_GetCarbonPrintSettings``および``PA_GetCarbonPageFormat``は4Dが内部的に使用しているプリント設定のコピーを返すようになりました。32ビット版（carbon）とは違い，コピーなので，変更は本来のプリント設定に反映されません。オブジェクトは4Dが保有しているため，開放はしないでください。同じように``PA_GetWindowsPRINTDLG``は``PRINTDLGW``のコピーを返すようになりました。

* ACI0101294 ``VP Convert to picture``はシート番号を``0``ではなく``1``からカウントしました。

* ACI0101254 バイナリモードのみ。オブジェクトメソッドが設定されているオブジェクトを含むフォームを削除してごみ箱に空にした場合，MSCのアプリケーション検査を実行すると，どこにも使用されていない``CC4D``リソース（オーファンメソッド）が検出されました。

* ACI0100870 ``ENCRYPT BLOB``の第３パラメーターに未定義の変数を渡した場合，アプリケーションがクラッシュしました。

* ACI0100004 ノルウェー語とフランス語のスペルチェック辞書に同一のID番号が振られました。

**注記**: Mac版のシステムスペルチェックだけが修正され，番号ではなく``fr-FR``や``en-US``のような識別子が使用されるようになりました。Hunspell版のスペルチェックは，ライブラリが発行するIDをそのまま使用しています。

* ACI0100922 アプリケーションが最前面ではなくなった初回のタイミングでは``On Application background move``システムイベントが発生しませんでした。
