---
layout: fix
title: "4D 21 修正リスト"
date: 2025-10-28 08:00:00
categories: 修正リスト
tags: "21.0"
build: 100160
version: "21.0"
permalink: /2025/279/:slug/
---

* ACI0105967 QUICネットワークレイヤー（`ngtcp2`）のみ。クライアント/サーバーのネットワーク接続が切り替わった後も`Session.info.IPAddress`は古いIPアドレスのままでした。

* ACI0105877 エクスプローラーで複製したクラスをごみ箱に移動してから再び複製した場合，複製したクラスとごみ箱にあったクラスの両方が「ホーム」タブに表示されました。

* ACI0105909 `Choose`に整数型のプロパティを渡した場合，コンパイルエラーになりました。

* ACI0105886 Mac版クライアント/サーバー版のみ。QUICネットワークレイヤーがクラッシュすることがありました。

* ACI0105975 「アプリケーションについて」画面のリンク（法的な情報・著作権・世界の4D）が間違っていました。ホームページではなく，[世界中の4D](https://jp.4d.com/4d-around-the-world)にジャンプするべきです。

* ACI0105765 コンパイルモードのみ。Webプロセスのコンテキストで`#DECLARE`で宣言されたプロジェクトメソッドのパラメーターに値を渡さず，そのパラメーターに値を代入しようとした場合，エラーが返されました。本来，[渡されなかった引数にアクセスすることは可能](https://blog.4d.com/ja/stop-press-accessing-parameters-not-being-passed-is-possible/)なはずです。

**注記**: メソッドの呼び出しから任意パラメーターの型を推定するコードでは，コンパイルの順序により，シンタックスチェックが任意パラメーターの存在を見落とすことがありました。問題は修正されましたが，再コンパイルが必要です。

* ACI0105864 リストボックスのセルを編集中にアプリケーションを背面に移動した場合，点滅カーソルのアニメーションが停止しませんでした。テキスト入力やコンボボックスは問題ありません。

* ACI0105762 `VP Get table range`から返されたレンジオブジェクトを`VP RESIZE TABLE`に渡すことができませんでした。

* ACI0105955 コンポーネントをビルドした場合，Appleの公証に必要な`CFBundlePackageType`キー（値: `BNDL`）が*Info.plist* ファイルに書き込まれませんでした。

**注記**: アプリケーション本体のビルドコマンドに加え，*Build4D* コンポーネントも[修正](https://github.com/4d/Build4D/commit/29d30e312e04302f2ba4c2141025f0778536bad2)されました。

* ACI0105950 Mac版のみ。フローティングウィンドウでランタイムエクスプローラーを開いた場合，プロセスページに情報が表示されませんでした。

* ACI0105928 *NetKit* コンポーネント`state`プロパティに拡張文字が含まれる場合，`NetKit.OAuth2Provider.getToken()`が`404`エラーを返ししました。

* ACI0105820 強制ログインモードを有効にした場合，4D Mobileを利用することができませんでした。

* ACI0105947 macOS 26 Tahoeのみ。ウィンドウのタイトルバーにLTSではなくフィーチャーリリースのアイコンが表示されました。

* ACI0105951 macOS 26 Tahoeのみ。「サーバーに接続」「シンタックスエラー」などのウィンドウに表示されるアイコンがバージョン`21`のものではありませんでした。

* ACI0105953 Windows版のみ。ODBCドライバーのインストーラーのアイコン画像がバージョン`21`のものではありあませんでした。

* ACI0105938 クライアント/サーバー版のみ。コンパイルモードでランタイムエクスプローラーを表示したままクライアントを終了しようとした場合，アプリケーションがフリーズしました。

* ACI0105936 アプリケーションビルド画面にライセンスを追加した場合，ビルド自体は成功しますが，追加したライセンスがリストに表示されませんでした。

* ACI0105882 タイムアウトを変えて`4D.HTTPRequest`の`wait()`メソッドを実行した場合，進行中のリクエストがアボートされました。

* ACI0105932 フォームオブジェクトの標準アクションをコンテキストメニューで変更し，他に何も変更しなかった場合，更新が保存されませんでした。

* ACI0105845 クライアント/サーバー版のみ。`entitySelection.orderByFormula()`でエンティティセレクションをフォーミュラに使用した場合（例: `This.indexOf(entitySelection)`），エラーが返されました。

**注記**: クライアント側のエンティティセレクションをクエリのフォーミュラに使用することはできません。修正により，エラーメッセージの内容が見直されました。

* ACI0105946 ASTインタープリターモードでは，コンパイル済みコンポーネントメソッドに対して`Call chain`を使用した場合，正しい呼び出し連鎖が返されないことがありました。

* ACI0105891 QUICネットワークレイヤー（`ngtcp2`）のみ。クライアント/サーバー版のみ。データベースパラメーターの`Remote connection sleep timeout (98)`を設定したクライアントのシステムがスリープモードに移行した場合，アプリケーションがクラッシュしました。QUICネットワークレイヤー（`lsquic`）では問題ありません。

* ACI0105944 ASTインタープリターモードでは，`Call chain`から`formula`プロパティが返されないことがありました。

* ACI0105850 メールに特定の文字が含まれる場合，[`MAIL Convert to MIME`](https://developer.4d.com/docs/ja/commands/mail-convert-to-mime)または[`MAIL Convert from MIME`](https://developer.4d.com/docs/ja/commands/mail-convert-from-mime)で本文を正しく変換できないことがありました。

* ACI0105891 QUICネットワークレイヤー（`ngtcp2`）のみ。クライアント/サーバー版のみ。データベースパラメーターの`Remote connection sleep timeout (98)`を設定したクライアントのシステムがスリープモードに移行した場合，アプリケーションがクラッシュしました。QUICネットワークレイヤー（`lsquic`）では問題ありません。

* ACI0105916 `JSON Validate`のコレクション型を渡すことができませんでした。

**注記**: コマンドのシンタックスが見直されました。

* ACI0105901 エクスプローラーでテーブルを選択した場合，すぐにプレビューが表示されませんでした。エクスプローラーのウィンドウを背面に移動してから再び最前面に移動すれば，プレビューが表示されます。

* ACI0105912 Windows版のみ。WinUIアピアランスのリストボックスが配置されたフォームを表示した場合，アプリケーションがクラッシュすることがありました。

* ACI0105908 `Choose`コマンドの引数としてクラスのプロパティを記述した場合，メソッドエディターのヘルプTipsに間違った型が表示されました。

* ACI0105911 同一セッションの複数プロセスから同時にユーザー＆グループにアクセスした場合，アプリケーションがクラッシュする恐れがありました。

* ACI0105921 コンポーネントがインストールされていない新規プロジェクトにGitHubコンポーネントを追加した場合，コンポーネントはダウンロードされますが，依存関係マネージャーの画面が閉じられませんでした。*lock.dependencies* が存在しない場合に問題が発生するようです。 

* ACI0105930 クライアント/サーバー版バイナリモードのみ。新規メソッドを作成しようとした場合，アプリケーションがクラッシュすることがありました。

* ACI0105923 クエリエディターを閉じてから再表示した場合，ランタイムエラーが返されました。

* ACI0105478 [`SET DATABASE PARAMETER`](https://developer.4d.com/docs/ja/commands/set-database-parameter)のセレクター`34`（デバッグログ）の「即時記録」モードを有効化した場合，二重にエントリーが記録されました。

**注記**: 遅延記録モードでコマンドのパラメーターが二重に出力される不具合が修正されました。
二重に記録されているようにみえること自体は不具合ではありません。即時記録モードは，クラッシュ等の原因を調査するために使用されることが想定されており，オペレーションの前後にコマンド名が記録されるように設計されています。一方，遅延記録モードはパフォーマンスの最適化を図るために使用されることが想定されており，オペレーションの回数を確認したり，ベンチマーク統計のために使用されることが想定されています。