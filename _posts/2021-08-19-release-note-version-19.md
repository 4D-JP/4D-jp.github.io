---
layout: fix
title: "4D v19.0 Hotfix 2 修正リスト"
date: 2021-10-11 08:00:00
categories: 修正リスト
tags: 19.0 hotfix
build: 271738
version: 19.0
permalink: /231/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0102355 Mac版のみ。`return`キーで明示的に変換候補を確定せずに続けて日本語をフォームオブジェクトに入力した場合，間違った位置に文字列が挿入されました。

* ACI0102350 Mac版のみ。`return`キーで明示的に変換候補を確定せずに続けて日本語をデザインモードのエクスプローラーに入力した場合，間違った位置に文字列が挿入されました。

* ACI0102322 Mac版のみ。リストボックスのセルに日本語を入力し，*tab*キーを使用した場合，候補リストのページが切り替わるべきですが，日本語入力が確定しました。

* ACI0102302 アプリケーションを再起動せずにプロジェクトまたはデータベースを再起動した場合，`Open form window`で`Toolbar form window`を開こうとすると，すでにツールバータイプのウィンドウが表示されているというエラー（`-10613`）が返されることがありました。タイミングの関係でデザインモードのツールバーと衝突しているようです。

* ACI0102293 デバッグログが記録されている状況で`_o_QUERY SUBRECORDS`を実行した場合，アプリケーションがクラッシュしました。
 
* ACI0102353 ランタイムエクスプローラーのウォッチ式にローカル変数が入力された状態で監視プロセスを切り替えた場合，そのプロセスがすでにアポートされているとアプリケーションがクラッシュしました。表示の更新周期を短いと問題が発生しやすくなります。

* ACI0102345 Mac版のみ。Xcodeのバージョンを変更した場合，Apple Siliconターゲットの再コンパイルが失敗することがありました。C++のプリコンパイルヘッダーファイル（`.PCH`）のフォーマットが合っていないためです。問題を解消するためにはXcodeのキャッシュファイルを削除する必要があります。

* ACI0102261 View Proエリアのピボットテーブルにフィールドをドラッグ＆ドロップすることができませんでした。

**注記**: 修正により，[*WA enable URL drop*](https://doc.4d.com/4Dv19/4D/19/WA-SET-PREFERENCE.301-5393011.ja.html)の振る舞いが見直されました。この設定は，ファイルパスをWebエリアをドロップし，表示中のページから離れてしまうことを防止するため，デフォルトで`False`に設定されていました。しかし，同時にページ内でのドラッグ＆ドロップも禁止されてしまうという弊害もあります。修正により，ファイルおよびURLのドロップだけがオプションで制御されるようになりました。

* ACI0102101 Windows版のみ。HTMLエディターの[TinyMCE](https://www.tiny.cloud)をCEF版のWebエリアに表示した場合，スペスチェックが使用できませんでした。

**注記**: Windows版のCEFは，[ネイティブスペルチェッカー](https://www.magpcss.org/ceforum/viewtopic.php?f=6&t=18269)への移行を進めています。修正により，*WinUseBrowserSpellChecker*は無効化されています。

* ACI0102300 デバイスにダウンロードされていないレコードの共有ユニバーサルリンクを開こうとした場合，まず同期が実行されるべきですが，すぐにリンクを開こうとするため，要求したレコードが表示されませんでした。	

* ACI0102285 ストラクチャ設定で「最新のバックアップのみ保存`n`バックアップファイル」を設定しても，*backupHistory.json*ファイルには過去のバックアップ履歴がすべて残されており，ファイルが際限なく肥大化しました。

* ACI0101359 Write Proドキュメントに`ST SET TEXT`でフォントを指定せずに`span`要素を挿入した場合，ドキュメントから継承されたフォントではなく，デフォルトフォントが文字列に適用されました。`p`要素であれば問題ありません。

* ACI0102273 Mac版プロジェクトモードおよびWindows版のみ。フォームエディターをズームした状態でスタティックテキストやボタンタイトルをインライン編集した場合，入力エリアがズーム率を考慮せずに標準サイズで描画されました。

* ACI0102257 IMAPのメールボックスに大量のメッセージ（例：`10,000`件以上）が溜まっている場合，`IMAP Transporter`の`searchMails()`メソッドがエラー`16`を返すことがありました。

* ACI0102305 フランス語版のみ。View Proエリアの「関数の挿入」メニューに表示される関数の分類で「検索と参照」の関数名がソートされていませんでした。英語版では，ADDRESS, AREAS, CHOOSE…ですが，フランス語版では，ADRESSE, ZONES, CHOISER…と表示されました。

* ACI0102269 4D for iOSアプリが起動していない状態で共有ユニバーサルリンクを開いた場合，詳細フォームではなく，リストフォームが表示されました。

* ACI0102209 プロジェクトモードのみ。ビルド版アプリケーションでユーザーが`command`+`shift`+`F9`のキーコンビネーションを入力してランタイムエクスプローラーが表示することを阻止する手段がありませんでした。カレントユーザーは常に*Designer*であるためです。

**注記**: 修正により，シングルユーザーのビルド版アプリケーションではキーコンビネーションでランタイムエクスプローラーが表示できないようになりました。表示するには新コマンド`OPEN RUNTIME EXPLORER`を使用してください。

* ACI0102303 オブジェクト型フィールドは「格納場所」のオプション「データファイルの外」がサポートされないことになりましたが，インスペクターには引き続きオプションが表示されました。

* ACI0102262 アプリケーションをプロジェクトモードにエクスポートした場合，ハイライトボタンは透明ボタンに変換されますが，同時に*On Mouse Move*イベントが有効に設定されました。

**注記**: 修正により，オブジェクトにヘルプTipsが設定されている場合を除き，イベントは処理されないようになりました。*On Mouse Move*イベントは，ヘルプTipsを表示するために必要です。

* ACI0102252 Mac版のみ。日本語変換（IME）を使用してメソッドエディターに入力中の文字列を`return`キーで確定した場合，余計な改行が挿入されました。

* ACI0102286 Windows版のみ。ゼロサイズの配列にバインドされたコンボボックスの下矢印ボタンをクリックした場合，アプリケーションがキー入力を受け付けなくなり，`enter`や`escape`でフォームを閉じることもできなくなりました。

* ACI0102304 デスクトップ版のみ。ローカルのHTTPサーバーを`HTTP Get`でコールし，HTTPSプロトコルを使用した場合，アプリケーションがフリーズしました。
 
* ACI0102299 スケーラブルWebセッションが有効にされたプロジェクトをデスクトップ版で起動した場合，Webサーバーは自動的にコオペラティブモードに切り替わりますが，そのままプロジェクトを閉じた場合，プリエンプティブモードに戻りませんでした。

* ACI0102289 クライアント/サーバー版のみ。保存オプションが「データファイルの外」に設定されたオブジェクト型フィールドにクライアント側でレコードを追加した場合，*ExternalData*フォルダーが作成されず，データがディスクに書き込まれませんでした。ACI0102188が修正されたことによる副作用のようです。テキスト型やピクチャ型のフィールドであれば問題ありません。

* ACI0102233 ラベルエディターでラベルに挿入した式（例：`[Table_1]Field_2+"bbb"`）やフォーマット付きのフィールド（例：`String:C10([Table_1]Field_3;"### ### ##0.000")`）が正しく出力されませんでした。フィールドの値だけが出力されました。

* ACI0101912 ラベルエディターにドラッグ＆ドロップ操作でフィールドを追加したり，フィールドにフィールドを連結したりすることはできますが，すでに挿入された式を編集した場合，確定した内容が保存されませんでした。

* ACI0101759 ラベルエディターでラベルに挿入したフィールドに`String`関数でフォーマットを適用した場合，印刷やプレビュー出力にフォーマットが反映されませんでした。

* ACI0102276 デスクトップ版のみ。ローカルのREST APIを`HTTP Request`でコールし，ピクチャ型のフィールドをリクエストした場合，アプリケーションがフリーズしました。ブラウザからコールすれば問題ありません。

* ACI0102258 `ELF`（Extended Log File）形式のWebログファイルが正しく出力されませんでした。ヘッダーと値の位置が揃っていません。またヘッダーに大文字が使用されているため，一部のツールで正しく表示されませんでした。

* ACI0102142 ``IMAP Transporter``の`getMail`コマンドで添付ファイル名が取得できないことがありました。

**注記**: サポートされていないエンコーディング（例：ベトナム語 *Windows-1258*）がMIMEヘッダーに使用されている場合に問題が発生しました。修正により，ヘッダーがデコードできない場合，強引に処理する代わりにエンコードされた文字列がそのまま返されるようになりました。

* ACI0102268 Mac版のみ。`SET ABOUT`を実行しても，「…について」メニューの項目名がカスタマイズされませんでした。

**注記**: 18r6で起動後にシーケンスが調整されたことが関係しています。修正により，*On Startup*よりも後にプロジェクトメソッドでコマンドを実行すれば，メニューが更新されるようになりました。

* ACI0102206 メソッドエディターでクラスではない一般的なオブジェクト型（`C_OBJECT`または`var : Object`）のドット記法をコード補完で入力しようとした場合，プロパティやメンバー関数の候補が表示されませんでした。`var : 4D.Object`であれば問題ありません。

* ACI0102201 Mac版のみ。IPアドレスを特定して`80`番ポートでWebサーバーを開始することができませんでした。ヘルパーツールのインストール画面も表示されません。IPアドレスが「すべて（`0.0.0.0`または`::`つまり`ANY_ADDR`）」であれば問題ありません。

**注記**: Appleでは，サーバーのTCPリスナーを特定のIPアドレスにバインドすることを例外的な処理とみなしているようです。macOS Mojave以降，iOSと仕様が統一され，`1024`未満のポート番号でサーバーを公開するのにヘルパーツールが不要となりました（非公式情報）。これに伴い4Dでも，ヘルパーツールの使用を中止しましたが，特定のIPアドレスにリスナーをバインドするためには，引き続きヘルパーツールが必要です。修正により，「すべて」以外のアドレスが指定された場合，以前と同じようにヘルパーツールが使用されるようになりました。

* ACI0102166 クライアント/サーバー版のみ。*Components*フォルダーに*Resources*フォルダーが存在し，以前のクライアント接続で作成されたアーカイブが残っている場合，コンポーネントを入れ替えた後の再起動でキャッシュが再生成されないため，クライアント側のリソースがアップデートされませんでした。

**注記**: 修正により，ホストの*Resources*フォルダーと同じロジックがコンポーネントにも適用されるようになりました。

* ACI0102288 クライアント側のツールバーに「管理」ボタンが表示されませんでした。

* ACI0102141 クライアント/サーバー版のみ。クライアント側で`entitySelection.fromCollection()`を実行した場合，日付ではなくISO文字列形式で日付が保存されました。

* ACI0101834 クライアント/サーバー版のみ。クライアント側でロックしたエンティティを再びロックした後，エンティティに`Null`を代入してオブジェクトをクリアした場合，ロックが解除できなくなりました。`Null`を代入した時点でエンティティh解放されるべきです。

* ACI0102216 ビルド版のサーバーアプリケーションの*Server Database*フォルダー内に`Resources`フォルダーが存在する場合，クライアントが接続するとフォルダー内に*cache.xml*や*.4darchive*ファイルを含む`Caches`フォルダーが作成されました。アプリケーション内のフォルダーがインストール後に書き換えられることは望ましくありません。

**注記**: 修正により，*Libraries*および*Resources*のキャッシュは*Components*および*Plugins*と同じように処理されるようになりました。

* ACI0102188 クライアント/サーバー版のみ。レコードにオブジェクト型のフィールドが含まれる場合，同サイズのBLOBと比較し，エンティティの取得にずっと長い時間を要しました。スタンドアロン版では再現しないので，オブジェクトの解析ではないはずです。ネットワークリクエストログを開くと，オブジェクト型の`exec_duration`は同サイズのBLOB型の`5`倍程度の時間であることが確認できます。

* ACI0102098 クライアント/サーバー版のみ。クライアント側でトランザクション中に保存したリレーション属性を再び保存しようとした場合，エンティティのスタンプがインクリメントされているために保存できないというエラーが返されました。

* ACI0102260 `collection.remove`の`howMany`パラメーターで指定した個数が`index`パラメーターで指定した開始位置からの残数よりも多かった場合，開始位置が無視され，飽くまで指定した個数が削除されました。

**注記**: v19 LTS以降が修正されました。v18は過去バージョンと同じ振る舞いとなります。

* ACI0101326 コンパイルモードのみ。ポインター型のプロジェクトメソッドのパラメーターに`Null`が渡された場合，アプリケーションがクラッシュしました。
 
* ACI0102224 旧式ネットワークレイヤーのみ。クライアント側でSOAPサーバーをプリエンプティブモードで公開した場合，アプリケーションがフリーズする可能性がありました。
