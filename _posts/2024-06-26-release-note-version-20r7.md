---
layout: fix
title: "4D 20r7 修正リスト"
date: 2024-10-20 08:00:00
categories: 修正リスト
tags: 20r7
build: 100091
version: "20r7"
permalink: /2024/274/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105143 バイナリモードのみ。20r6以降，フォームに配置したピクチャの表示フォーマットが*Scaled to fit prop centered (6)* から*Truncated non centered (1)* に変わってしまうことがありました。

**注記**: ピクチャの表示フォーマットは文字列の表示フォーマットと同じように指定しますが，フォームオブジェクトのタイプを途中で変更した場合，ピクチャには適用できないはずの値が残されている可能性がありました。修正により，表示フォーマットの値だけでなく，オブジェクトのタイプもチェックされるようになりました。

* ACI0105126 アプリケーションまたはコンポーネントをビルドした場合，*.4DZ* ファイルの中に*dependencies.json* ファイルが含まれていました。

**注記**: `BUILD APPLICATION`が修正されました。もっとも*.4DZ* ファイルの中に*dependencies.json* ファイルが含まれていたとしても動作に影響はありません。

* ACI0105140 Windows版のみ。Windows 24H2で印刷コマンドを実行してPDFを出力しようとした場合，`OPEN PRINTING JOB`からエラーが返されることがありました。

* ACI0105142 メソッドエディターのオートコンプリートが原因でアプリケーションがクラッシュすることがありました。バックスペースキーで`var`構文で宣言した変数に代入する初期値のローカル変数を削除した後，再び`$`記号を入力したタイミングで発生します。

* ACI0105119 バイナリモードのみ。エクスプローラーのごみ箱をクリックせず，マウスオーバーした状態でコンテキストメニューを表示した場合，「ごみ箱に移動する」ではなく「ごみ箱を空にする」というメニューが表示されました。

* ACI0105072 ネットワークに接続していない環境でライセンスのアクティベーションを試みた場合，エラーメッセージが英語で表示されました。

* ACI0105128 *OAuth2* トークンと`SMTPTransporter`で*Gmail* を送信した場合，受信者のメッセージにBccヘッダーが表示されました。ACI0104608が修正されたことによる副作用です。

**注記**: 本来，Bccヘッダーはメールサーバーが除去するべきですが，すべてのメールサーバーがそのように設計されているわけではないようです。修正により，JMAPメッセージオブジェクトから変換されたMIMEにはBccヘッダーが含まれない仕様に戻されました。*NetKit* のように，MIMEにBccヘッダーを含める必要がある場合，下記のようにオプションで指定することができます。

```4d
MAIL Convert to MIME($inMail; {includeBccHeaders: True})
```

`SMTPTransporter`もメッセージからBccヘッダーを取り除くように改良されました。

* ACI0105108 `Get monitored activity`から`message`プロパティを持たない（したがって調査の助けにならない）統計情報が返されることがありました。

* ACI0105130 `TODO`コメントにセミコロン記号（`;`）を含めた場合，メソッドエディターのツールバー表示が乱れました。記号がポップアップメニューのメタ文字として処理されるためです。

* ACI0105091 *Qodly* の標準アクションで強制ログインモードのセッションをログアウトした場合，権限がクリアされませんでした。`ds.logout()`でセッションをログアウトすれば問題ありません。

* ACI0105081 データモデルクラスのメンバー関数に「昇格」アクションを設定した場合，関数の実行中に`Session.hasPrivilege()`が一時的な権限の情報を返しませんでした。

* ACI0105121 ストラクチャファイルを20r6にアップグレードした後，起動時にストラクチャファイルをアップグレードするかどうかを尋ねるダイアログが表示されました。

* ACI0105137 順列ありエンティティセレクションに対して`entitySelection.clean()`を使用した場合，トランザクション中に削除されたエンティティがエンティティセレクションから除外されず，その位置に`Null`が返されました。

* ACI0105118 レコードアドレスが`32`ビットの範囲を超える場合，`entitySelection.clean()`が正しく動作しませんでした。

* ACI0105038 行高の管理配列が設定されたリストボックスのスクロール速度が列数に比例して低下しました。列数が`100`個以上の場合に問題が顕著です。行の高さが固定あるいは自動であれば問題ありません。