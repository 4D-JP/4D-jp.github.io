---
layout: fix
title: "4D v19 修正リスト"
date: 2021-05-18 08:00:00
categories: 修正リスト
tags: "19.0"
build: 265939
version: 19.0
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0101984 ダークモードのみ。フォームエディターの背景色にCSSプロパティの`media:dark`が反映されませんでした。
 
* ACI0101968 ピクチャを返すフォーミュラをJavaScriptでView Proエリアに表示しようとした場合，アプリケーションがフリーズしました。ピクチャが`1`枚であれば，問題ありません。ピクチャを返さないフォーミュラも問題ありません。

```
WA Evaluate JavaScript(*;"area";"Utils.spread.getActiveSheet().options.showFormulas = true;")
```

* ACI0101958 Windows版のみ。`HTTP Get`を実行するたびに，ハンドルが作成され，解放されませんでした。ハンドルの数は，Windows Resource Monitorで確認することができます。

**注記**: プロキシ設定をレジストリから読み出すコードにメモリーリークがありました。この修正の影響は，Webエリアおよびデザインモードのエクスプローラーにも及びます。

* ACI0101916 コンパイルされたコンポーネントから`ODBC Pro`プラグインを実行するとエラーが返されました。

**注記**: プラグインSDKに問題がありました。インタープリターモードのホストから渡されたポインター型のパラメーターをコンパイルされたコンポーネント内で参照する場合の処理が修正されました。

* ACI0101691 `MAIL Convert to MIME `で出力されるメ--ルの`Content-Type`ヘッダーに不要なアンダースコア記号（`_`）が挿入されることがありました。

* ACI0100355 View ProスプレッドシートをPDF形式でエクスポートした場合，フッターおよびヘッダーのフォントがドキュメントに埋め込まれませんでした。

* ACI0101944 View Proスプレッドシートのフォントリストをマウスオーバーしたときに表示されるヘルプTipsに完全なフォントファミリー名が表示されませんでした。

![fontname](https://user-images.githubusercontent.com/10509075/117739168-b20c5f00-b238-11eb-90f8-5b55a9b19b2a.png)

* ACI0101810 配列型リストボックスに表示されているブール型の列を高速でクリックし，ブール値を立て続けに更新した場合，すべての操作に対して`On Data Change`イベントが発生しませんでした。整数型の列であれば，イベントがスタックされます。

* ACI0101729 `shift`キーを押しながら上下矢印キーを入力してリストボックス行の選択範囲を拡大しようとした場合，範囲が移動するだけで，常に一定の行数が選択されました。

* ACI0101725 `LISTBOX SELECT ROW`と`lk remove from selection`でリストボックス行の選択を解除した後，`shift`キーを押しながらクリックまたは上下矢印キーの操作で選択範囲を変更しようとした場合，コマンドで選択を解除した行が選択の起点となりました。

* ACI0101408 `HTTP SET OPTION`の`HTTP timeout`オプションが`HTTP Get`の動作に反映されませんでした。つまり，サーバー接続に成功し，なかなか応答が返されず，切断もされない場合，いつまでもレスポンスを待ちました。
 
* ACI0101969 メールのエンコーティングが`us-ascii`だった場合，`CR` `.` `CR` という文字列（dot-stuffing）以降の本文が切り捨てられました。`quoted-printable`エンコーディングであれば，問題ありません。

* ACI0101908 標準テキストだけのメールを`MAIL Convert from MIME`に渡した場合，本文のないメールオブジェクトが返されました。`Content-Type`ヘッダーが存在しない場合に問題が発生します。[RFC 1342](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html)によれば，このヘッダーは省略しても良いことになっています。

* ACI0098367 クイックレポートエディターで選択したフィールドをドラッグ＆ドロップ操作で並び替えた場合，移動したフィールドがすべて同じフィールドになりました。回避するためには，フィールドを選択した後，画面を確定し，クイックレポートエディターを再表示してから並び替える必要がありました。

* ACI0101903 クライアント自動アップデートでv18からv19にアップグレードすることができませんでした。サーバーのプラットフォームがMacの場合，クライアントがサーバーに再接続しませんでした。クライアントをダブルクリックすると，アプリを開くための権限がない，というメッセージが表示されます。サーバーのプラットフォームがWindowsの場合，再起動後にクライアントがクラッシュしました。

* ACI0101839 `MSG_GetBody`から本文が返されませんでした。

**注記**: 問題は修正されましたが，できれば`MAIL convert from MIME`の使用を検討してください。

* ACI0101940 タブコントロールのデータソースにオブジェクト記法が使用されている場合，
更新の内容を画面上に反映させるためには，データソースのオブジェクト型を明示的に自己代入する必要がありました。

* ACI0101900 `application/pdf`形式のファイルが添付されたメールを`MAIL Convert from MIME`で処理した場合，添付ファイルが失われてました。

* ACI0101927 絞り込まれたエンティティセレクションに対して空のコレクションと`NOT IN`条件でクエリを実行した場合，データクラスの全エンティティが返されました。

* ACI0101744 4D WriteドキュメントをWrite Proに変換した場合，スタイルが正しく適用されないことがありました。

**注記**: 4D Writeでは段落ではなく文字のスタイルとして「標準（Normal）」スタイルが定義されていることがありました。Write Proでは，既定の段落スタイルとして「標準」スタイルが定義されています。修正により，インポートした`.4W7`ドキュメントの「標準」スタイルが文字に対して定義されていたとしても，段落に適用されるようになりました。

* ACI0101931 Mac版のみ。タブコントロールのデータソースにオブジェクト記法が使用されており，幅の関係でコントロールがポップアップメニューとして表示されている場合，項目を選択することができませんでした。

* ACI0101766 Windows版のみ。Write Proドキュメントから生成したマルチスタイルテキストに標準テキストを連結してテキスト入力エリアに表示した場合，アプリケーションがクラッシュすることがありました。

**注記**: 問題は修正されましたが，フォントファミリー名「Helvetica Neue LT Std 57 Condensed」はGDIの制限を超えているため，Windows版ではサポートされません。

* ACI0101910 カレントレコードがロードされていない状況でテキスト型フィールドをパラメーターとしてコンポーネントに渡した場合，ランタイムエラーが返されました。

* ACI0101909 `ORDER BY FORMULA`のソート条件に`Choose`を使用した場合，コンパイルエラーになることがありました。

* ACI0101883 Windows版のみ。4D for OCIプラグインがインストールされませんでした。

* ACI0101866 MSCの「修復」ページにアイコン画像が正しく表示されませんでした。

* ACI0101901 フランス語版のみ。View Proエリアの関数リストの内容が正しく表示されませんでした。

* ACI0101871 レコードが存在するテーブルにフィールドを追加した場合，既存フィールドは`null`となりますが，そのようなエンティティセレクションに対して`max()` `min()` `average()` を実行した場合，`undefined`が返されました。「ヌル値を空値にマップ」を有効にしてレコードを強制的に更新すれば，問題が解消されます。

* ACI0099336 クライアント/サーバー版のみ。`SET AUTOMATIC RELATION`の設定が`RELATE ONE SELECTION`に反映されませんでした。ORDAのリレーション属性は問題ありません。

* ACI0101901 フランス語版のみ。View Proエリアの関数リストの内容が正しく表示されませんでした。
 
* ACI0101876 フォームエディターにView Proエリアが表示されませんでした。

* ACI0101902 テキスト配列がデータソースに設定されたタブコントロールを`OBJECT DUPLICATE`で複製することができませんでした。

* ACI0101891 オブジェクト型のプロパティがデータソースに設定されたコンボボックスまたはタブコントロールを`OBJECT DUPLICATE`で複製することができませんでした。

* ACI0101845 フランス語版のみ。View Proエリアのインタフェースにローカライズされていない箇所がありました。

* ACI0101894 テキスト型のコンボボックスに表示フォーマットが設定されている場合，編集中のテキストにもフォーマットが適用されました。配列型のデータソースであれば問題ありません。

* ACI0101886 テキスト型の変数またはフィールドがデータソースに設定されたコンボボックスは，自動挿入が動作しませんでした。選択リストに存在しない値を入力した場合，値がリストに追加されませんでした。

* ACI0101884 リストボックスの倍長整数型カラムに`OBJECT SET FORMAT`で時間型のフォーマットを設定した場合，値が表示されませんでした。

* ACI0100769 Write Proウィジェットに`WP Insert table`を使用しているメソッドを入力してフォーミュラを評価した場合，アプリケーションがクラッシュしました。

**注記**: 問題は修正されましたが，Write Proドキュメントを更新するフォーミュラを同じWrite Proドキュメントに挿入することは勧められていません。

* ACI0101887 Windows版のみ。コンボボックスをクリックするたびに`On Activate`および`On Deactivate`イベントが発生しました。

* ACI0101851 Windows版のみ。`WP EXPORT DOCUMENT`を使用してWrite ProドキュメントをPDF形式でエクスポートした場合，ピクチャが出力されませんでした。

* ACI0101877 インポート＆エクスポートダイアログの上部にあるオブジェクトがダークモードに対応していませんでした。

* ACI0101880 プロジェクトモードのみ。コンボボックスのJSONスキーマ（`formsSchema.json`）が正しくありませんでした。`dataSourceTypeHint`は`integer`ではなく`text`であるべきです。

* ACI0101869 Web Adminが旧式セッション管理で動作している場合，ブラウザから管理画面にアクセスしてからWebサーバーを再起動し，再起動中にページをリフレッシュした場合，アプリケーションがクラッシュしました。REST認証のために作成されるコオペラティブスレッドがWebプロセスの初期化に干渉しているようです。

* ACI0101867 プロジェクトモードのみ。クライアント側からサーバーをコンパイルモードで再起動した場合，`.4DZ`ファイルが使用中なので開けないという内容のエラーメッセージが表示されました。

* ACI0101860 定数の`wk list font family`でWrite Proドキュメントの段落番号フォントをファミリー名で設定しようとした場合，エラー`205`（無効な定数）が返されました。

**注記**: 修正により，定数名は`_o_ wk list font family`に変更され，値が`listFont`（`wk list font`と同じ値）になりました。

* ACI0101787 時間・日付・ピクチャ型のリストボックス列を`OBJECT SET FORMAT`で操作することができませんでした。

* ACI0101263 Write Proドキュメントのテキスト全文（`500,000`文字程度）を選択してコンテキストメニューの「コピー」を選択した場合，アプリケーションがフリーズすることがありました。

**注記**: Write Proが内部的に使用しているXMLパーサーのxercesライブラリは，複雑なXHTMLドキュメントの解析およびシリアライズに最適化されていないことに加え，Write Proのコピーは4Dのマルチスタイルテキスト・HTML・RTF・Write Pro内部フォーマットのテキストデータをペーストボードに転写するため，一般的なHTMLエディターよりも多くの処理が必要です。修正により，極端な分量のテキストをペーストボードに転写しようとした場合，一部のデータタイプが省略されるようになりました。

* ACI0101846 フィールドの値にアクセント文字が含まれている場合，4D for iOSのカスタムフォーマッターでアイコン画像が表示されませんでした。

* ACI0101247 Windows版のみ。ヘッドレスモードでサーバーが実行されている場合，`RESTORE`コマンドでアプリケーションを復元することができませんでした。

* ACI0101855 システムの環境設定でアピアランスがダークモードに設定されている場合，4Dの環境設定でコードエディターのテーマを変更することができませんでした。

* ACI0101847 View Proスプレッドシートを`VP Convert to picture`でSVGに変換した場合，画像が出力されませんでした。

* ACI0101813 Windows版のみ。スタティックテキストの内容がオブジェクトのサイズに収まらない場合，フォームエディターではオブジェクトの下端で表示が切れますが，ランタイムのレンダリングでは，テキストが`1`行でフォントサイズに対してオブジェクトの高さが不足している場合，テキストが下揃えになり，オブジェクトの上端を超えて表示されました。

* ACI0101748 Windows版のみ。地域と言語の設定が「トルコ」に設定されている場合，プロパティリストを表示するとアプリケーションがクラッシュしました。

**注記**: 内部コンポーネントがバイナリモードからプロジェクトに変換されたことに伴う副作用でした。トルコ語の「アイ」（`İi`）は大文字に点がついており，ラテン文字のアイとは別の文字として扱われなければなりません。

* ACI0101647 Mac版のみ。`ZIP Create archive`でアーカイブしたアプリをFinderのアーカイブユーティリティで展開することができませんでした。シンボリックリンクが作成できないようです。4Dのコマンドであれば展開することができます。

* ACI0101861 `VP Convert to picture`に`0`よりも高いカラム番号から始まるレンジを渡した場合，エラーが返されました。

* ACI0099508 Windows版のみ。`GET PRINT OPTION`の第３パラメーターを省略して`Double sided option`を取得しようとすると，ランタイムエラーが返されました。「丁合い」は任意のパラメーターなので，省略しても問題ないはずです。

* ACI0101868 フィールドに表示フォーマットが設定されているストラクチャをプロジェクトに変換した場合，プロパティリストの値が赤い文字で表示されました。

* ACI0101865 プロジェクトフォームの継承フォームに使用されているテーブルを削除した場合，そのフォームをデザインモードで開こうとすると，アプリケーションが終了しました。

* ACI0101854 スケーラブルなセッション管理が有効にされている場合，セッションを開始した後，Webサーバーを再起動してから同じクライアントから接続すると，新しいセッションが作成されました。

* ACI0101853 ポップアップメニューのデータソースにリスト参照が使用されており，「選択項目の参照」または「選択項目の値」プロパティが存在する場合，項目を選択することができませんでした。

* ACI0101852 ポップアップメニューに変数または式が設定されている場合，標準アクションとデータソースの値が同期しませんでした。

* ACI0101840 ピクチャボタンのデータソースを変数からファイルパスに変換した後，ストラクチャをプロジェクトに変換した場合，データソース名がプロパティリストに赤い文字で表示されました。データソースの値が`"picture":"var:"`（変数名が空）および`"dataSource":"<>vPict"`（プロパティを変更する前のピクチャ変数名）のような値に変換されるためです。`"picture":"var:vPict"`のように出力されるべきです。

* ACI0101838 ストラクチャをプロジェクトに変換した場合，プロパティリストに継承フォーム名が赤い文字で表示され，値を選択することができませんでした。

* ACI0101837 `|format1`のようなカスタムフィルターがフィールドに設定されているストラクチャをプロジェクトに変換した場合，プロパティリストの値が赤い文字で表示されました。フィルターの値が`"numberFormat":{"$ref":"/SOURCES/filters.json#/format1"}`のように無効なJSONポインターに変換されるためです。`"numberFormat":"|format1"`のように出力されるべきです。

* ACI0101822 `New process`で新規プロセスを起動した場合，１回目はランタイムエクスプローラーでプロセスをアボートすることができますが，２回目はできませんでした。

* ACI0100164 Windows版のみ。`PRINT SELECTION`でフォームを印刷した場合，v15よりも時間がかかりました。`SET PRINT OPTION` で `Legacy printing layer option` オプションを有効にし，旧式プリントレイヤー（GDI）を使用すれば問題ありません。また，プリントマージンを変更しなければ問題ありません。

**注記**: `PRINT SELECTION`でフォームを印刷した場合，Direct2Dプリントレイヤーでは，３個のコマンドがプリンタードライバーに送信されますが，修正前はそれぞれのコマンドが`CT~~CD,~CC^~CT~`で始まっていたため，ZebraDesigner GK420dのようなドライバーはコマンド毎に用紙設定をリセットし，余計な時間がかかりました。GDIプリントレイヤーでは，`CT~~CD,~CC^~CT~`で始まるコマンドが１個だけ送信されるので，用紙設定がリセットされることはなく，それだけ速く印刷ができました。

* ACI0101850 オブジェクト型のプロパティに代入されたリスト参照番号を使用することができませんでした。

* ACI0101843 `U+FFFF` または `U+FFFE` のような制御文字を含むテキストをスタイル付きテキスト入力エリアにペーストすることができませんでした。外部HTMLソースには，制御文字が含まれていることがあります。

**注記**: Write Proエリア，`ST`コマンドおよびスタイルテキストエリアのデータソースに対する代入も修正されました。制御文字は無効なシンボルであることを示す文字で置換されます。

* ACI0101821 クライアント/サーバー版のみ。`dataClass.newSelection()`でエンティティセレクションを作成した場合，`entity.reload()`が使用できませんでした。

* ACI0101807 サーバー側にインストールされたプラグインを入れ替えた場合，新しいプラグインがクライアント側に転送されませんでした。

* ACI0101801 4D WriteドキュメントをWrite Proに変換した場合，FuturaフォントのcondensedスタイルがHelveticaフォントのregularスタイルで置換されました。

* ACI0101236 メソッドエディターに`Begin SQL` `end s` と入力した場合，自動コード補完を確定したタイミングでアプリケーションがクラッシュしました。

* ACI0101805 ヘッドレスモードで実行中のサーバーで`PRINT RECORD` または `PRINT LABEL` のアスタリスク（`*`）オプションを省略した場合，アプリケーションが無反応になりました。ヘッドレスモードの場合，印刷ダイアログを表示することはできないので，アスタリスク（`*`）オプションが省略された場合，コマンドは何もせず，`OK`には`0`が代入されるべきです。

* ACI0101665 Windows版のみ。サービス起動したサーバーで`PRINT SELECTION`を使用し，Microsoft Print to PDFドライバー経由でPDFを出力した場合，`0`バイトのファイルが作成されました。`Print form`であれば問題ありません。

* ACI0101809 アンダースコア記号で単語が連結されたテキストをダブルクリックした場合，テキスト全体ではなく，単語がハイライト選択されました。

**注記**: ICUライブラリの更新により，アンダースコア記号が文法記号とみなされるようになったことが関係しています。修正により，18r5以前の振る舞いが復元されましたが，フォームエディターのプロパティリストでは，ドット記法のフォーミュラ式をダブルクリックしたときに属性が選択されるよう，例外的にピリオド記号でハイライトが分割されるようになっています。

* ACI0101794 クライアント/サーバー版のみ。クライアント側のWebサーバーは，常にスケーラブルなセッション管理が有効でした。

* ACI0101832 Mac版のみ。macOS Big Surでは，サーモメーターのフォーマットを「バーバーショップ」に設定した場合，データソースに`0`以外の値をセットしても，プログレスバーがアニメーション表示されませんでした。Catalinaでは問題ありません。

* ACI0101842 `Open datastore`でデータベースにアクセスしてスケーラブルなセッションを開始した後，ブラウザでREST APIのURLを開いた場合，スケーラブルなセッションが`2`件になりますが，その状態でブラウザをリフレッシュすると，さらに`2`件のセッションが作成されました。また，すでにセッションを開始しているデータベースに対し，新規プロセスで`Open datastore`を再実行した場合，` On REST Authentication`がコールされ，セッションが追加されました。

* ACI0101655 Write Proドキュメントのサブセクション（先頭・偶数・奇数ページ）のカラム数が揃っていなかった場合，段落のレイアウトが崩れて表示されました。

* ACI0101634 データエクスプローラーのデータクラスタブに閉じるボタンが表示されませんでした。参照されているアイコン画像のファイル名が正しくないようです。

* ACI0101619 `MESSAGE`コマンドの実行でアプリケーションがハングしました。

* ACI0101526 プリエンプティブプロセスで`START ACTIVITY MONITORING`と`STOP MONITORING ACTIVITY`を使用し，リクエストログの開始と終了を繰り返した場合，アプリケーションがクラッシュしました。同じ理由で，分割されたログの書き込み処理にも問題があります。

* ACI0101229 クライアント側で`SET DATABASE PARAMETER`を使用してクライアント側WebサーバーのHTTP"ポート番号（`Client HTTPS port ID`）を変更した場合，設定したポート番号ではなく，スタンドアロン版のポート番号が使用されました。

* ACI0101058 Windows版のみ。HDMIケーブルで外部モニターが接続されている場合，フォームエディターのツールバーがクリックに正しく反応しませんでした。タスクバーのサイズだけ当たり判定がずれているようです。第２画面がメイン画面の上に配置され，フォームエディターが第２画面に表示されている場合に問題が発生します。
* ACI0101796 クライアント側でトランザクションを開始してから「サーバー側で実行メソッド」を実行した場合，すぐにはトランザクション状態がサーバー側のツインプロセスに反映されませんでした。`Find in field`のようなデータベースアクセスコマンドをクライアント側で実行すれば，トランザクション状態の同期が取られました。

* ACI0101793 起動時モードが「アプリケーション」に設定されている場合，SQLコマンドなどでストラクチャに加えた変更が保存されませんでした。

* ACI0101786 Mac版のみ。最前面ではないウィンドウの3Dボタンはタイトルテキストがグレーアウト表示されました。

* ACI0101782 Windows版のみ。MDIウィンドウ内でフォームのウィンドウを最大化してからMDIウィンドウをリサイズした場合，フォーム上のオブジェクトが正しくリサイズされません。オブジェクトが過剰に拡大され，元のサイズに戻すことができなくなりました。リサイズが「なし」に設定されているオブジェクトもMDIと一緒にリサイズされます。

* ACI0101769 Mac版のみ。macOS Big Surでは，コンボボックスをクリックしたときにテキストが少しだけ右に寄って表示されました。

* ACI0101762 Windows版のみ。`LAUNCH EXTERNAL PROCESS`で `curl`を実行した場合，環境変数`PATH`で最初にみつかるはずのバージョンではない`libcurl/7.55.1 WinSSL`が実行されました。

* ACI0101761 `112`文字を下回るテキストを`COMPRESS BLOB`で圧縮した場合，`EXPAND BLOB`で展開することができませんでした。圧縮ではなくgzipアルゴリズムの展開に問題があります。

* ACI0101739 クライアント/サーバー版のみ。クライアントキャッシュフォルダー内の`inuse.txt`ファイルが何らかの理由で削除されなかった場合，次回の接続で新しいクライアントキャッシュファイルが作成されました。`inuse.txt`ファイルに記録された番号のプロセスが存在しなければ，クライアントキャッシュフォルダーを再利用するべきです。

* ACI0101731 コンパイルモードのみ。`EXECUTE FORMULA`で変数を作成し，しばらくアプリケーションを使用していると，変数が未定義になり，シンタックスエラー（未知の変数に対するポインターあるいは不正なポインターの使用）が返されました。

* ACI0101724 プロジェクトモードのみ。ポップアップメニューの「レンダリングしない」プロパティを有効にした場合，「文字フォーマット」プロパティが非表示になりませんでした。

* ACI0101723 プロジェクトモードのみ。非表示のポップアップ/ドロップダウンメニューをプロジェクトに変換した場合，メニュー項目が正しく表示されませんでした。

* ACI0101721 Mac版のみ。`MAIL Convert from MIME`を実行した場合，アプリケーションがクラッシュすることがありました。

* ACI0101720 4D WriteドキュメントをWrite Proに変換した場合，名称に「Medium」という文字列が含まれるフォントのスタイルが無視されました。たとえば「Yu Gothic Medium」が「Yu Gothic Regular」になりました。

* ACI0101719 クライアント/サーバー版のみ。サーバーがリモートデータストアに接続した状態で，`ds`オブジェクトのメンバー関数をコールした場合，ローカルデータストアではなく，リモートデータストアの情報が返されましたs。

* ACI0101683 `METHOD SET CODE`でテーブルフォームのメソッドをセットした場合，定数の`On Load`が当該テーブルの１番フィールドの名前にトークナイズされました。テーブルフォームのメソッドでなければ，問題ありません。

* ACI0101681 View Proの`getCultureInfo()`が日付フォーマット`dd/mm/yy`を返すようなスプレッドシートであっても，セルに挿入した日付型が`mm/dd/yy`フォーマットで表示されました。

* ACI0101680 `Is picture file`のアスタリスク（`*`）オプションの振る舞いが仕様と逆でした。たとえばアスタリスク（`*`）オプションを省略し，`.png`拡張子が設定された非画像ファイルを処理した場合，拡張子だけで判定されて`True`が返されるべきですが，`False`が返されました。反対にアスタリスク（`*`）オプションを指定して`.txt`拡張子が設定された画像ファイルを処理した場合，内容に基づいて`True`が返されるべきですが，`False`が返されました。

* ACI0101676 `WP Get elements`はWrite Proドキュメントのアンカー画像をz-order順に返しませんでした。

* ACI0101675 4D WriteドキュメントをWrite Proに変換した場合，アンカー画像のサイズが固定されていたかどうかを判別することができませんでした。

* ACI0101686 `#declare`構文で宣言したクラス関数のパラメーターリストがメソッドエディターのステータスバーに正しく表示されませんでした。パラメーターの型だけが表示され，パラメーター名が表示されませんでした。

* ACI0101717 Windows版コンパイルモードのみ。オブジェクトのメンバーメソッドがプロジェクトメソッドの`Formula`であり，をパラメーターを渡してそのメンバーメソッドを`This`で呼び出した場合，アプリケーションがクラッシュしました。パラメーターを渡さなければ問題ありません。

* ACI0101716 ドロップダウンメニューまたはコンボボックスに文字フォーマットが適用されませんでした。

* ACI0101715 ドロップダウンメニューの表示フォーマットにユーロ記号が含まれている場合，ユーロ記号が正しく表示されませんでした。

* ACI0101708 ウィンドウの最大化を解除したときに振る舞いがv17以前のバージョンと違いました。ウィンドウを最大化した場合，フォームオブジェクトはプロパティに応じて移動またはリサイズされるので，結果的に元のウィンドウサイズに収まらないことがあります。v17の場合，最大化を解除したウィンドウは，そのようなオブジェクトが表示できる最小のサイズに調整されました。v18では，最大化前のサイズに戻るため，リサイズまたは移動したオブジェクトが描画領域の外に出てしまうことがありました。

* ACI0101706 `New process`で同じ名前のプロセスをほぼ同時に起動した場合，ランタイムエクスプローラーに表示されるプロセス番号が一緒になりました。

**注記**: 不具合は修正されましたが，紛らわしいので，同じ名前のプロセス名を同時に起動することは避けたほうが良いでしょう。

* ACI0101701 クライアント/サーバー版のコンパイルモードモードのみ。`entitySelection.orderByFormula()`を実行すると「スタックが一杯」エラーが返されることがありました。入力フォームで問題が再現します。単独でコードを実行した場合は問題ありません。

* ACI0101700 バーチャルストラクチャが設定されている場合，ユーザーモードの「ツール」メニューからクイックレポートを開こうとすると，シンタックスエラーが返されることがありました。

* ACI0101699 `VP Convert from 4D view`で4D Viewスプレッドシートが正しく変換されないことがありました。新規スプレッドシートも罫線のない白紙のドキュメントになります。値のないセルがうまく処理されないようです。

* ACI0101698 プロジェクトモードのみ。ストラクチャのコメントにXML 1.0で許可されていない文字が使用されている場合，バイナリデータベースから変換したプロジェクトを開くことができませんでした。

* ACI0101696 Windows版のみ。`Open form window`で`Controller form window`を表示した場合，`Plain form window`が表示されました。

* ACI0101690 コンパイルモードのみ。しばらくアプリケーションを使用していると，変数が未定義になり，シンタックスエラー（未知の変数に対するポインターあるいは不正なポインターの使用）が返されました。macOSではアプリケーションが終了し，Windowsではフリーズしました。ACI0100904に似ていますが，フォームオブジェクトではなく，コンパイルモードで作成したインタープリター変数で問題が発生します。

**注記**：`SQLWCHAR`は`1`文字に`2`バイトを使用します。端末のヌル文字を含めた場合，``10``文字は`22`バイトです。ACI0099846で文字数とバイト数が修正されましたが，副作用として文字列と同数の空白が追加されるようになりました。今回，修正されたのは，パディングの問題です。

* ACI0101630 ラベルが用紙の幅いっぱいに印刷されず，もう１枚印刷できそうな余白を残して改行されました。

* ACI0101629 `4D CSS`の`serveCss`および`4D Mobile App Server`の`MobileAppServer`メソッドの属性が「非表示」に設定されていませんでした。

* ACI0101628 階層リストのデータソース（変数または式）に`Form.var`のようなオブジェクト記法を入力することができませんでした。

* ACI0101626 チェコ語版の「ようこそ画面」でWebサイトのリンクをクリックした場合，"cz.4d.com"ではなく"us.4d.com"にジャンプしました。

* ACI0101625 `Content-Type`が`multipart/alternative `のメールを`MAIL CONVERT FROM MIME`で変換した場合，本文のエンコーディングが正しくありませんでした。

* ACI0101623 `sk diacritical`という用途の不明な定数が存在しました。

* ACI0101622  4D for iOSの「ラベル＆アイコン」セクションでフィールドにカスタムフォーマッターを設定し，「フォーム」セクションでフィールドをモデルにドラッグ＆ドロップした後，「ラベル＆アイコン」セクションでデフォルトのフォーマッターをフィールドに設定した場合，`project.4dmobileapp`ファイル内に不正なフォーマットが記述され，データの同期中にアプリがクラッシュしました。フィールドをモデルから削除し，再度，ドラッグ＆ドロップすれば問題ありません。

* ACI0101654 リボンインターフェースからスタイルを設定した場合，`VP SET CELL STYLE`に`Null`を渡しても`parentName`プロパティがクリアされず，スタイルをリセットすることができませんでした。

* ACI0101643 メソッドをコンパイルすると，「ローカル変数の合計サイズが32KBを超えています」というエラーが返されることがありました。ACI0101186が修正されたことによる副作用のようです。

* ACI0101642 Mac版のみ。`ON EVENT CALL`でイベントハンドラーメソッドをインストールした場合，リストボックスのヘッダーをタップをしても`On Header Click`イベントが発生しませんでした。クリックであれば問題ありません。

* ACI0101636 Write Proエリアを4Kまたは5Kディスプレイに表示した場合，ツールバーのアイコン画像がぼやて表示されました。ACI0101494が修正されたことによる副作用のようです。

* ACI0101635 コンポーネント内で`Compare strings`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101659 4D WriteドキュメントをWrite Proにインポートした場合，アプリケーションがクラッシュすることがありました。

* ACI0101656 18r5以前に作成されたバイナリデータベースのスケーラブルセッション管理はデフォルトで「旧式」のはずですが，`WEB Server`の`scalableSession`に`True`が返されました。データベース設定をトグルすれば正しい値になります。

* ACI0101667 Window版のみ。検証またはコンパイルを実行した場合，アプリケーションがクラッシュすることがありました。

* ACI0101664 `SHOW PROCESS`で表示したプロセスにウィンドウが最前面に移動しました。

* ACI0101617 Mac版のみ。`MSG_Extract`で特定のメールを解析した場合，アプリケーションがクラッシュすることがありました。

* ACI0101611 Windows版のみ。Citrixプラットフォームでタスクパーのウィンドウを閉じた場合，アプリケーションが正常に終了しませんでした。Citrixでタスクパーを右クリックしてウィンドウを閉じると`WM_SYSCOMMAND`の`SC_CLOSE`ではなく`WM_CLOSE`イベントが送信されますが，4DのMDIウィンドウがこのイベントを処理しないためにアプリケーションが終了せず，バックグランドで非常に高いCPU使用率のまま動き続けてしまうことが原因です。

* ACI0101610 `$name:=Field name(variable.prop)`および`$name:=Field name(variable.prop->)`のようなコードがコンパイルエラー（パラメーター不足）になりました。

* ACI0101609 インデックスが設定されていないフィールドに対して`QUERY`を実行した場合，アプリケーションがクラッシュしました。

**注記**: 開発中のデータエクスプローラー用に拡張されたクエリパスの仕組みが完全に実装されていなかったことが原因でした。

* ACI0101608 プロジェクトモードのみ。MSCでデータファイルの暗号化を設定した後にMSCの検証を実行した場合，「テーブルの暗号化が設定されていないのにレコードが暗号化されている」という趣旨のエラーが返されました。

* ACI0101606 View Proエリアのツールバーが使用されている場合，特定のスプレッドシート（`.4VP`ファイル）をインポートすると，`On After Edit`や`On Selection Change`のようなフォームイベントが発生しませんでした。リボンインターフェースでは問題ありません。

* ACI0101602 Write Proの定数`_o_wk recompute formula` `_o_wk do not recompute formulas`の名称が不適切です。`_o_`接頭辞を追加する代わりに`formula`が`expression`に変更すれば，既存のコードがトークナイズ変換され，そのまま使用することができるはずです。

* ACI0101601 Write Proドキュメントを`.docx`形式でエクスポートした場合，数式がフィールドとして書き出されませんでした。

* ACI0101600 ヌル終点エラー（ネットワーク切断）が突発的に発生しました。ネットワークリクエストログ（サーバー側）を解析すると，プロセスがアイドル接続タイムアウトから復帰するタイミングでネットワーク接続の例外が発生していることがわかります。

* ACI0101599 macOS Big Surのみ。4D Serverの管理画面にシステムバージョンが「macOS 10.16」と表示されました。

* ACI0101596 処理に時間を要するコマンドの監視を有効にした状態で`QUERY BY FORMULA`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101593 クエリエディターで条件に複数の「含む」条件を「または」連結で入力し，ファイルに保存した場合，クエリ条件が正しく再現されませんでした。クエリ条件をファイルから読み込むと，条件が「リスト内にある」に変換され，ペーストボードにコピーすると，条件文字列のワイルドカード文字が失われていることが確認できます。

* ACI0101592 サーバーアプリケーションの`Resources/Internal User Components`フォルダーにラベルエディターコンポーネント（`4D Labels.4dbase`）がインストールされていませんでした。そのため，サーバー側で`PRINT LABEL`を実行することができません。プロジェクトの`Components`に自分でコンポーネントのコピーをインストールする必要があります。

* ACI0101589 デバッガに`IMAP Transporter`オブジェクトを表示した場合，アプリケーションがクラッシュしました。

* ACI0101586 クライアント/サーバー版のみ。`SAVE RECORD`を続けて実行した後，`Modified record`が`True`を返しました。ACI0100945が修正されたことによる副作用のようです。

* ACI0101581 CEF版Webエリアに空のページを表示した状態で`WA OPEN WEB INSPECTOR`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101580 View ProスプレッドシートをPDF形式でエクスポートした場合，標準体で出力されるべきセルのテキストがボールド体で出力されることがありました。

* ACI0101579 フォーミュラのパラメーターに4D Viewエリアの参照変数が使用されているスプレッドシートをView Proに変換した場合，エリアの参照変数が消えました。

* ACI0101578 View Proエリアのフォーミュラ`COLUMNLETTER`のパラメーターを省略した場合，カレント列の文字が返されるはずですが，無効なフォーミュラであるというエラーが返されました。

* ACI0101575 プロジェクトモードのみ。オブジェクトメソッドが定義されているフォームオブジェクトをコピー＆ペーストした後，そのオブジェクトをコピーして別のフォームにコピー＆ペーストした場合，コピーされたオブジェクトおよびコピーからコピーされたオブジェクトのメソッドに制御コードが追加されました。元のオブジェクトは問題ありません。フォームオブジェクトのコピー＆ペーストで問題が発生し，オブジェクトの複製では発生しません。

* ACI0101572 クラスのソースコードにマルチラインコメント構文（`/*` `*/`）が使用されている場合，コメントブロックにローカル変数名を入力するとアプリケーションがクラッシュしました。

* ACI0101570 `DELETE SELECTION`でレコードを削除した場合，オブジェクト型フィールドのインデックスに問題が発生し，データファイルが破損しました。クラスターインデックスが削除されたレコードを参照しているというエラーであり，MSCによる修復が必要です。

* ACI0101569 View Proエリアで日付型のパラメーターを受け取るフォーミュラに日付型を渡さなかった場合，エリアが`1`分間ほどフリーズした状態になりました。`VP SET CUSTOM FUNCTIONS`と`VP SET ALLOWED METHODS`のどちらでも問題が再現します。

* ACI0101568 Windows版のみ。ツールバーからクイックレポートエディターを開き，エリア上をマウスポインターを置いた場合，`1920x1080`の巨大なヘルプTipsが表示されました。

* ACI0101566 [`VP SET CUSTOM FUNCTIONS`](https://doc.4d.com/4Dv18R5/4D/18-R5/VP-SET-CUSTOM-FUNCTIONS.301-5062623.ja.html)でプロジェクトメソッドをフォーミュラとして登録した場合，日付型の`value`プロパティを有するオブジェクト型ではなく，`year` `month` `day`のプロパティを有するオブジェクトが`$1`に渡されました。`VP SET ALLOWED METHODS`であれば問題ありません。

* ACI0101565 ストラクチャエディターにテーブル名やフィールド名を入力しようとした場合，日本語IMEが有効になりませんでした。プロパティリストを使用すれば問題ありません。

* ACI0101563 `VP Convert from 4D View`で4D Viewドキュメント（`.4PV`ファイル）を変換できないことがありました。

* ACI0101556 データの暗号化が有効にされたテーブルにレコードがまだ登録されていない場合，MSCの検証でエラー`5`（テーブルの暗号化が有効にされているのにデータが暗号化されていない）が返されました。

* ACI0101553 `LAUNCH EXTERNAL PROCESS`に４個未満のパラメーター（`cmd` `stdIn` `stdOut`）を渡し，エラーストリーム（`stdErr`）を省略した場合，CPU消費が異常に高くなり，ハングしたような状態になりました。

* ACI0101549 macOS Big Surのみ。エクスプローラーのプレビュー画面にドロップダウンリストが正しく表示されませんでした。フォームエディターでは問題ありません。

* ACI0101545 MSCのマニュアル操作でバックアップを復元した後，最初に選択したジャーナルァイルのオペレーションはデータベースに統合されますが，続けて選択したジャーナルファイルのオペレーションはデータベースに統合されませんでした。ファイル選択ダイアログに問題があるようです。

* ACI0101541 プロジェクトモードのみ。リストボックス列をブール型に設定した場合，表示形式はチェックボックスになりますが，プロパティリストの項目としてタイトルが表示されませんでした。ポップアップメニューで表示形式をチェックボックスに再設定すれば，タイトルが入力できるようになります。

* ACI0101540 クライアント側のMSCでデータファイルの検証を実行した場合，サーバーからダウンロードしたログファイルと一緒に`LogStyleSheet.css`が作成されないため，ログファイルを表示することができませんでした。プロジェクトモードでは`Verify_Logs.xml`もダウンロードするためのボタンをクリックすることもできません。

* ACI0101539 「Welcomeウィザード」の「起動時に表示しない」チェックボックスと「サーバーに接続」ダイアログの「このダイアログを次回起動時に表示」チェックボックスを有効にした場合，「サーバーに接続」ダイアログが次回起動時に表示されませんでした。`.4DPreferences`ファイルの`automatisms@startup_mode`属性が`3`ではなく`0`にセットされるためです。

* ACI0101517 オフスクリーンエリアのView Proエリアでは`Form event code`でイベントを処理することができませんでした。`Form event.code`であれば問題ありません。

* ACI0101513 データベース設定でスケーラブルセッションを有効にした後，Webサーバーを再起動した場合，`Session`オブジェクトが`Null`を返しました。

* ACI0101503 サーバー/クライアント版のみ。パッケージされたプロジェクト（`.4DZ`ファイル）やデータファイルを入れ替えた直後の起動中にサーバークラッシュすることがありました。何度か繰り返しているうちに起動できるようになります。圧縮ファイルの展開中に問題が発生しているようです。

* ACI0101494 バイナリモードのみ。リストボックスヘッダーの画像ソースプロパティを「ファイル」に設定した場合，アプリケーションがクラッシュしました。

* ACI0101491 配列を参照していないポインター配列の`0`番要素の逆参照に配列の要素番号を変数で渡した場合，エラーが返される代わりに配列の要素番号に使われた変数に値が代入されました。

* ACI0101487 Windows版のコンパイルモードのみ。`DIALOG`コマンドでアプリケーション全体がフリーズすることがありました。

* ACI0101486 `IMAP_SetPrefs`で指定したフォルダーパスに記号が含まれる場合，`IMAP_MsgLst`がエラー`-38`を返しました。

* ACI0101484 Webサービス（SOAP）でオブジェクト型を入力変数に使用した場合，サーバーがクラッシュしました。

**注記**: `SOAP DECLARATION`は`Is collection`や`Is object`をサポートしていません。修正により，エラーが返されるようになりました。

* ACI0101483 `POP3_SetPrefs`で指定したフォルダーパスに記号が含まれる場合，`POP3_MsgLst`がエラー`-38`を返しました。

* ACI0101468 フォーカス可で入力不可のオブジェクト（階層リスト・ルーラー・ステッパー・リストボックス）にフォーカスが移動した場合，日本語IMEが無効になりませんでした。ボタン・ラジオボタン・チェックボックスであれば問題ありません。そのようなオブジェクトにテキストをタイプ入力することはないので，日本語IMEは自動的に切られるべきです。

* ACI0101465 View Proエリアは`SET ALLOWED METHODS'`に対応しているはずですが，ワイルドカード文字（`@`）による一括指定ができませんでした。

* ACI0101538 オブジェクトメソッドが設定されているフォームオブジェクトの名称をフォームエディターのプロパティリストで変更した場合，大文字を小文字に変えただけであれば，オブジェクト名の重複とみなされ，新しいオブジェクト名に連番が付けられました。

* ACI0101535 Write ProのHunspellスペルチェッカーをオランダ語（`nl_NL`）に設定した場合，「t.a.v.」というアクロニムがワードとして認識されませんでした。

* ACI0101534 `MSG_Extract`で添付ファイルを保存した場合，ファイル名のアクセント文字が無視されました。ACI0098362が修正されたことによる副作用のようです。

* ACI0101460 `IMAP_MsgLst`でアクセント付き文字（`é` `ê` `ë` `â`）が正しく返されませんでした。

* ACI0101456 リストボックスに表示されたカレントセレクションをクエリで更新した直技に`shift`+クリックで行を選択した場合，１番目の行ではなく，最後にクリックした行から`shift`+クリックした行までが選択されました。ACI0101433が修正されたことによる副作用です。

* ACI0101446 macOS Big Surのみ。`command`+`.`（キャンセル）のキーボードショートカットを設定することも入力することもできませんでした。

* ACI0101444 `VP Convert from 4D View`でドキュメントを変換しようとした場合，エラー`-10713`が返されることがありました。

* ACI0101434 `SQLBindParameter`で送信されるODBCのパラメーターが正しくありませんでした。ACI0101084が修正されたことによる副作用を修正したACI0099846による副作用のようです。

* ACI0101433 `LISTBOX SELECT ROW`でリストボックスの行を選択した後，`shift`+クリックで別の行を選択した場合，正しい範囲の複数行が選択されませんでした。`LISTBOX SELECT ROW`で選択した行ではなく，１番目の行から`shift`+クリックした行までが選択されました，

* ACI0101432 `Field name`にオブジェクト型のプロパティを渡した場合，コンパイルエラーになりました。

* ACI0101427 Write Proウィジェットのタブを１個に限定し，単独のパネルとして使用した場合，シンタックスエラーが返されました。ウィジェット全体を使用すれば問題ありません。

* ACI0101406 バイナリモードのみ。リストボックスのフッターに`Form.property`のようなフォーミュラを入力することができました。ヘッダーやフッターのデータソースに設定できるのは変数だけです。オブジェクト記法が入力された場合，型宣言コンパイラーメソッドに無効な宣言コマンドが出力されました。

* ACI0101405 オブジェクト型フィールドにコレクションが含まれている場合，`OB Copy`でエンティティをコピーしただけでフィールドが`touched`になりました。

* ACI0101397 ラベルエディターでフォームを指定し，自動リサイズオプションを解除した場合，列数の設定が無視されました。

* ACI0101378 View Proエリアのリボンインターフェースで拡張子`.csv`以外の一般的なテキストファイルをインポートすることができませんでした。

* ACI0101285 4D Viewから変換されたView Proドキュメントに長いフォーミュラが挿入されている場合，スプレッドシートをロードするのに数分を要しました。長いフォーミュラとは，`25`個の`AVERAGE`を計算して合計を求めるような数式のことです。v17では問題ありませんでした。

* ACI0101029 Windows版のみ。CEF版のWebエリアで`WA SET PAGE CONTENT`を使用し，ページをリロードした場合，`$4d`オブジェクトでプロジェクトメソッドが呼び出せなくなることがありました。

* ACI0100986 Write Proドキュメントに挿入されたフォーミュラを`ST Get expressions`と`ST get content type`でループ処理した場合，アプリケーションが無反応になりました。

* ACI0100904 数週間にわたってストアドプロシージャを実行した場合，作成したローカル配列の最後の要素に対するアクセスが範囲チェックエラー`-20001`になることがありました。

* ACI0099816 リストボックスのシングルクリック編集が有効にされている場合，`control`または`shift`キーを押しながら入力不可カラムをクリックして複数の行を選択することができませんでした。クリックしたのが入力可カラムであれば問題ありません。

* ACI0098296 `HTTP Get`で [http://maps.googleapis.com](http://maps.googleapis.com) のAPIをコールした場合，ステータスコード`403`を返されました。

* ACI0097691 Mac版のみ。システム環境設定（キーボード＞ショートカット＞コントロール間のフォーカス移動をキーボードで操作）を有効にしても，タブ操作でポップアップメニューにフォーカスを移動することができませんでした。

* ACI0101830 データエクスプローラーの高度なデータベースクエリに条件をタイプ入力した場合，正しい結果は表示されますが，クエリプランにはシンタックスエラーの（未定義のプロパティ`type`を読むことができません）が表示されました。

* ACI0101833 Windows版のみ。フィールドに関連づけられたポップアップメニューから値を選択した後，他のフィールドに値が入力できなくなりました。

* ACI0101826 ユーザーモードでレコードのロードとアンロードを繰り返していると，アプリケーションがクラッシュしました。

* ACI0101732 View Proスプレッドシートのリボンインターフェースが表示されている場合，JavaScript（`spread.commandManager().execute()`）でコピー＆ペーストができませんでした。

* ACI0101806 `SET PRINT PREVIEW`を実行した場合，システム変数`OK`に`1`が代入されました。

* ACI0101798 `VP SET SELECTION`で選択した行または列のドラッグ＆ドロップが正しく動作しませんでした。

* ACI0101795 `WA Evaluate javascript`で評価したコードで問題が発生した場合，Webエリアのインスペクターにエラーが表示されませんでした。同じコードをWebエリアのコンソールに入力した場合のようにエラーが表示されるべきです。

* ACI0101768 データソースに配列またはコレクションが設定されたオブジェクトに対して`OBJECT SET LIST BY REFERENCE`を使用した場合，リストが更新されませんでした。

* ACI0101764 スプラッシュ画面に表示されるログのアスペクト比が保持されず，ウィンドウと一緒にリサイズされました。

* ACI0101756 フォームオブジェクトにピクチャ・日付・時間型のデータソースが設定されてい場合，`OBJECT SET FORMAT`が正しく動作しませんでした。

* ACI0101688 オブジェクトのデータソースにコレクションが使用できるようになりましたが，`OBJECT SET FORMAT`で時間フォーマット`System time long (11) ` または `MM SS (6)` を渡した場合，値が正しく表示されませんでした。

* ACI0101685 オブジェクトのデータソースにコレクションが使用できるようになりましたが，`OBJECT SET FORMAT`でタイムゾーンをサポートしている日付フォーマット`Date RFC 1123 (10) ` または `ISO Date GMT (9)` を渡した場合，値が正しく表示されませんでした。

* ACI0101673 コンパイルモードのみ。逆参照したポインター配列の要素がBLOB変数に対するポインターに対するポインターだった場合（例: `$size:=BLOB size(($ap{1}->)->)`），シンタックスエラーが返されました。テキスト・倍長整数型の変数に対するポインターであれば問題ありません。

* ACI0101751 `OBJECT SET FORMAT`で表示フォーマットを設定した場合，ユーロ記号が表示されませんでした。ACI0101685が修正されたことによる副作用のようです。

* ACI0101743 `For each/End for each`ブロック内に`ORDER BY FORMULA`を記述した場合，シンタックスチェック中にエラーが返されました。

* ACI0101736 `IMAP_transporter.delete()`でメールを削除した後，別のメールボックスを選択した場合，削除フラグの設定されたメールが削除されませんでした。`IMAP_transporter.expunge()`を明示的に実行する必要があります。 
 
* ACI0101730 数値型またはオブジェクト型のプロパティをコンボボックスのデータソースに設定した場合，「自動挿入」プロパティが動作しませんでした。テキスト型であれば問題ありません。

* ACI0101689 Mac版のみ。Webエリアに表示しようとしたページからリダイレクトされた場合，URL変数に新しい値が代入されませんでした。
