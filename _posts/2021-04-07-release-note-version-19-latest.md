---
layout: fix
title: "4D v19 修正リスト"
date: 2022-04-07 08:00:00
categories: 修正リスト
tags: "19.0"
build: 264210
version: 19.0
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0101805 ヘッドレスモードで実行中のサーバーで`PRINT RECORD` または `PRINT LABEL` のアスタリスク（`*`）オプションを省略した場合，アプリケーションが無反応になりました。ヘッドレスモードの場合，印刷ダイアログを表示することはできないので，アスタリスク（`*`）オプションが省略された場合，コマンドは何もせず，`OK`には`0`が代入されるべきです。

* ACI0101665 Windows版のみ。サービス起動したサーバーで`PRINT SELECTION`を使用し，Microsoft Print to PDFドライバー経由でPDFを出力した場合，`0`バイトのファイルが作成されました。`Print form`であれば問題ありません。

* ACI0101809 アンダースコア記号で単語が連結されたテキストをダブルクリックした場合，テキスト全体ではなく，単語がハイライト選択されました。

**注記**: ICUライブラリの更新により，アンダースコア記号が文法記号とみなされるようになったことが関係しています。修正により，18r5以前の振る舞いが復元されましたが，フォームエディターのプロパティリストでは，ドット記法のフォーミュラ式をダブルクリックしたときに属性が選択されるよう，例外的にピリオド記号でハイライトが分割されるようになっています。

* ACI0101794 クライアント/サーバー版のみ。クライアント側のWebサーバーは，常にスケーラブルなセッション管理が有効でした。

* ACI0101832 Mac版のみ。macOS Big Surでは，サーモメーターのフォーマットを「バーバーショップ」に設定した場合，データソースに`0`以外の値をセットしても，プログレスバーがアニメーション表示されませんでした。Catalinaでは問題ありません。

* ACI0101842 `Open datastore`でデータベースにアクセスしてスケーラブルなセッションを開始した後，ブラウザでREST APIのURLを開いた場合，スケーラブルなセッションが`2`件になりますが，その状態でブラウザをリフレッシュすると，さらに`2`件のセッションが作成されました。また，すでにセッションを開始しているデータベースに対し，新規プロセスで`Open datastore`を再実行した場合，` On REST Authentication`がコールされ，セッションが追加されました。

* ACI0101796 クライアント側でトランザクションを開始してから「サーバー側で実行メソッド」を実行した場合，すぐにはトランザクション状態がサーバー側のツインプロセスに反映されませんでした。`Find in field`のようなデータベースアクセスコマンドをクライアント側で実行すれば，トランザクション状態の同期が取られました。

* ACI0101793 起動時モードが「アプリケーション」に設定されている場合，SQLコマンドなどでストラクチャに加えた変更が保存されませんでした。

* ACI0101786 Mac版のみ。最前面ではないウィンドウの3Dボタンはタイトルテキストがグレーアウト表示されました。

* ACI0101782 Windows版のみ。MDIウィンドウ内でフォームのウィンドウを最大化してからMDIウィンドウをリサイズした場合，フォーム上のオブジェクトが正しくリサイズされません。オブジェクトが過剰に拡大され，元のサイズに戻すことができなくなりました。リサイズが「なし」に設定されているオブジェクトもMDIと一緒にリサイズされます。

* ACI0101769 Mac版のみ。macOS Big Surでは，コンボボックスをクリックしたときにテキストが少しだけ右に寄って表示されました。

* ACI0101762 Windows版のみ。`LAUNCH EXTERNAL PROCESS`で `curl`を実行した場合，環境変数`PATH`で最初にみつかるはずのバージョンではない`libcurl/7.55.1 WinSSL`が実行されました。

* ACI0101761 `112`文字を下回るテキストを`COMPRESS BLOB`で圧縮した場合，`EXPAND BLOB`で展開することができませんでした。圧縮ではなくgzipアルゴリズムの展開に問題があります。

* ACI0101739 クライアント/サーバー版のみ。クライアントキャッシュフォルダー内の`inuse.txt`ファイルが何らかの理由で削除されなかった場合，次回の接続で新しいクライアントキャッシュファイルが作成されました。`inuse.txt`ファイルに記録された番号のプロセスが存在しなければ，クライアントキャッシュフォルダーを再利用するべきです。

* ACI0101731 コンパイルモードのみ。`EXECUTE FORMULA`で変数を作成し，しばらくアプリケーションを使用していると，変数が未定義になり，シンタックスエラー（未知の変数に対するポインターあるいは不正なポインターの使用）が返されました。

* ACI0101724 プロジェクトモードのみ。ポップアップメニューの「レンダリングしない」プロパティを有効にした場合，「文字フォーマット」プロパティが非表示になりませんでした。

* ACI0101723 プロジェクトモードのみ。非表示のポップアップ/ドロップダウンメニューをプロジェクトに変換した場合，メニュー項目が正しく表示されませんでした。

* ACI0101721 Mac版のみ。`MAIL Convert from MIME`を実行した場合，アプリケーションがクラッシュすることがありました。

* ACI0101720 4D WriteドキュメントをWrite Proに変換した場合，名称に「Medium」という文字列が含まれるフォントのスタイルが無視されました。たとえば「Yu Gothic Medium」が「Yu Gothic Regular」になりました。

* ACI0101719 クライアント/サーバー版のみ。サーバーがリモートデータストアに接続した状態で，`ds`オブジェクトのメンバー関数をコールした場合，ローカルデータストアではなく，リモートデータストアの情報が返されましたs。

* ACI0101683 `METHOD SET CODE`でテーブルフォームのメソッドをセットした場合，定数の`On Load`が当該テーブルの１番フィールドの名前にトークナイズされました。テーブルフォームのメソッドでなければ，問題ありません。

* ACI0101681 View Proの`getCultureInfo()`が日付フォーマット`dd/mm/yy`を返すようなスプレッドシートであっても，セルに挿入した日付型が`mm/dd/yy`フォーマットで表示されました。

* ACI0101680 `Is picture file`のアスタリスク（`*`）オプションの振る舞いが仕様と逆でした。たとえばアスタリスク（`*`）オプションを省略し，`.png`拡張子が設定された非画像ファイルを処理した場合，拡張子だけで判定されて`True`が返されるべきですが，`False`が返されました。反対にアスタリスク（`*`）オプションを指定して`.txt`拡張子が設定された画像ファイルを処理した場合，内容に基づいて`True`が返されるべきですが，`False`が返されました。

* ACI0101676 `WP Get elements`はWrite Proドキュメントのアンカー画像をz-order順に返しませんでした。

* ACI0101675 4D WriteドキュメントをWrite Proに変換した場合，アンカー画像のサイズが固定されていたかどうかを判別することができませんでした。

* ACI0101686 `#declare`構文で宣言したクラス関数のパラメーターリストがメソッドエディターのステータスバーに正しく表示されませんでした。パラメーターの型だけが表示され，パラメーター名が表示されませんでした。

* ACI0101717 Windows版コンパイルモードのみ。オブジェクトのメンバーメソッドがプロジェクトメソッドの`Formula`であり，をパラメーターを渡してそのメンバーメソッドを`This`で呼び出した場合，アプリケーションがクラッシュしました。パラメーターを渡さなければ問題ありません。

* ACI0101716 ドロップダウンメニューまたはコンボボックスに文字フォーマットが適用されませんでした。

* ACI0101715 ドロップダウンメニューの表示フォーマットにユーロ記号が含まれている場合，ユーロ記号が正しく表示されませんでした。

* ACI0101708 ウィンドウの最大化を解除したときに振る舞いがv17以前のバージョンと違いました。ウィンドウを最大化した場合，フォームオブジェクトはプロパティに応じて移動またはリサイズされるので，結果的に元のウィンドウサイズに収まらないことがあります。v17の場合，最大化を解除したウィンドウは，そのようなオブジェクトが表示できる最小のサイズに調整されました。v18では，最大化前のサイズに戻るため，リサイズまたは移動したオブジェクトが描画領域の外に出てしまうことがありました。

* ACI0101706 `New process`で同じ名前のプロセスをほぼ同時に起動した場合，ランタイムエクスプローラーに表示されるプロセス番号が一緒になりました。

**注記**: 不具合は修正されましたが，紛らわしいので，同じ名前のプロセス名を同時に起動することは避けたほうが良いでしょう。

* ACI0101701 クライアント/サーバー版のコンパイルモードモードのみ。`entitySelection.orderByFormula()`を実行すると「スタックが一杯」エラーが返されることがありました。入力フォームで問題が再現します。単独でコードを実行した場合は問題ありません。

* ACI0101700 バーチャルストラクチャが設定されている場合，ユーザーモードの「ツール」メニューからクイックレポートを開こうとすると，シンタックスエラーが返されることがありました。

* ACI0101699 `VP Convert from 4D view`で4D Viewスプレッドシートが正しく変換されないことがありました。新規スプレッドシートも罫線のない白紙のドキュメントになります。値のないセルがうまく処理されないようです。

* ACI0101698 プロジェクトモードのみ。ストラクチャのコメントにXML 1.0で許可されていない文字が使用されている場合，バイナリデータベースから変換したプロジェクトを開くことができませんでした。

* ACI0101696 Windows版のみ。`Open form window`で`Controller form window`を表示した場合，`Plain form window`が表示されました。

* ACI0101690 コンパイルモードのみ。しばらくアプリケーションを使用していると，変数が未定義になり，シンタックスエラー（未知の変数に対するポインターあるいは不正なポインターの使用）が返されました。macOSではアプリケーションが終了し，Windowsではフリーズしました。ACI0100904に似ていますが，フォームオブジェクトではなく，コンパイルモードで作成したインタープリター変数で問題が発生します。

**注記**：`SQLWCHAR`は`1`文字に`2`バイトを使用します。端末のヌル文字を含めた場合，``10``文字は`22`バイトです。ACI0099846で文字数とバイト数が修正されましたが，副作用として文字列と同数の空白が追加されるようになりました。今回，修正されたのは，パディングの問題です。

