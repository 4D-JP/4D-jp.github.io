---
layout: fix
title: "4D v16 修正リスト"
date: 2019-01-29 17:39:31
categories: 修正リスト
tags: 16.4 hotfix
build: 232715
version: 16.x

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099091 テンプレート（レンジオブジェクト）に挿入された式を評価し，新規Write Pro文書に組み込んだ場合，式に設定されたフォントサイズが失われ，前後のフォントサイズが評価された式のテキストに適用されました。

* ACI0097687 サーバー管理ウィンドウのプロセスリストに表示されている「プリエンプティブワーカー」の表示がローカライズされていませんでした。`` :xliff:MONI_PROCESS_Type39``と表示されました。

* ACI0098805 macOS 10.14 Mojaveのみ。4D Writeまたは4D Viewドキュメントをディスクに保存することができませんでした。

* ACI0098168 行の高さが``0``に設定されているリストボックスを印刷しようとした場合，アプリケーションがクラッシュしました。

* ACI0098598 アプリケーションを数週間にわたって連続運用した場合，``DELAY PROCESS``で遅延したプロセスが再開しないことがありました。

* ACI0098770 日本語が入力できないようにフィルターが設定されたリストボックスのセルを編集しているときに，他のアプリケーションやデスクトップにフォーカスを移動し，4Dに復帰した場合，日本語入力モードが有効になりました。Windows版の場合，この状態でテキストを入力すると，独立したIMEウィンドウ上で文字列が編集されました。期待されるのは，日本語入力がオフになることです。

* ACI0098405 ``Open Window``あるいは``Open form window``で開いたウィンドウに表示された文字列を``MESSAGE``コマンドで更新することができませんでした。

* ACI0098651 4D Mobileプロセスが再利用されることにより，散発的にアプリケーションがクラッシュしました。サーバーが4D Mobileリクエストを受信すると，データベース実行コンテキストが作成され，そのためのWebプロセスも作成されます。リクエストを処理した後，Webプロセスは再利用できる状態になります。そこで4D MobileではないWebリクエストをサーバーが受信すると，Webプロセスが再利用されます。そのプロセスを処理している間，最初に処理した4D Mobileリクエストの続きを受信すると，当初のプロセスが別のWebプロセスに再利用されているため，新規Webプロセスがそのデータベース実行コンテキストのために作成されます。その後，4D MobileではないWebリクエストの処理が完了し，しばらく使用されていないと，関連付けられたデータベース実行コンテキストが破棄されます。その後，最初に処理した4D Mobileリクエストの続きを受信すると，4D MobileではないWebリクエストを処理したプロセスが使用され，そのデータベース実行コンテキストがすでに破棄されてしまっているため，アプリケーションがクラッシュします。端的に言えば，4D Mobileを処理したWebプロセスは再利用されるべきではありません。

* ACI0098522 標準アクションを使用してカレントレコードを移動すると，別ページに配置されたプラグインエリアに対してもレコードがロードされたというイベントが配信されました。カレントページのアクティブなエリアだけがイベントを受け取るべきです。

* ACI0098645 ``OBJECT Get style sheet``は，オブジェクトに設定されたスタイルシートではなく，スタイルシート0番を常に返しました。

* ACI0098497 4D Serverのデータベース設定ダイアログに``2048 MB``以上のキャッシュサイズを入力して『適用』ボタンをクリックした場合，キャッシュサイズが正しく設定されませんでした。``SET CACHE SIZE``であれば問題ありません。

* ACI0098490 プラグインSDKの``PA_AcceptDeselect``でプラグインエリアのフォーカスを拒否できないことがありました。一度目は成功しますが，二度目はエリアにフォーカスが移動します。

* ACI0098753 印刷設定ダイアログを表示している間，1個のCPUが完全に占有されました。バーチャルマシン，あるいはターミナルサーバーやCitrixサーバーなどで4Dを運用している場合，同時に印刷設定ダイアログを表示させているユーザーの数だけCPUが占有されました。

* ACI0098674 カレントセレクションが空のテーブルに対して``LONGINT ARRAY FROM SELECTION``を使用した場合，空の配列が返されませんでした。

* ACI0098590 [アプリケーション配布のための新アーキテクチャー](http://doc.4d.com/4Dv17/4D/17/Compatibility-page.300-3743489.ja.html)が無効に設定されており，旧式ネットワークレイヤーを使用している状態で``enginedserver.4dlink``で指定されたサーバーに接続できないと『サーバーに接続』ダイアログが表示されますが，『利用可能なサーバー』ページには新ネットワークレイヤーで公開されているサーバーの名前だけが表示されました。``Alt/option``キーを押しながらアプリケーションを起動してダイアログを呼び出せば，旧式ネットワークレイヤーで公開されているサーバーも表示されます。また，カスタムタブにアドレスを入力すれば，旧式ネットワークレイヤーで公開されているサーバーに接続することができます。

* ACI0098384 配列型リストボックスの列に行の背景色配列が含まれている場合，``LISTBOX DELETE ROWS``コマンドで（最終行ではない）行を削除しようとすると，指定した行だけでなく，最終行も削除されました。

* ACI0098507 64ビット版のみ。サーバー側で``MSG_Charset``および``MSG_GetBody``を使用した場合，特定の組み合わせ（``1;1``, ``0;1``）でアプリケーションがクラッシュしました。``MSG_Charset``を使用しなければ問題ありません。

* ACI0098390 ``IMPORT TEXT``またはインポートダイアログを使用して実数またはFloat型フィールドにテキストデータを読み込んだ場合，スペース記号など，数字ではない文字がデータの前後に存在すると，``0``がインポートされました。整数・倍長整数・64ビット整数では問題ありません。

* ACI0087085 外部アプリケーションから``tab``コードが含まれる文字列をメソッドエディターにドラッグ＆ドロップあるいはコピー＆ペーストすると，``tab``文字が無視されました。

* ACI0098578 ``SMTP_SetPrefs (0;2;0)``のように改行コード挿入設定に``0``とした場合，MIMEに``CRLF``コードが重ねて出力され，一部のメールクライアントではHTMLが表示される代わりにBASE64のエンコードデータがそのまま表示されました。

* ACI0098609 64ビット版のみ。クイックレポートエディターのページ設定画面で用紙の向きを変更した場合，設定が保存されませんでした。アプリケーションを再起動すると，用紙の向きが縦（デフォルト）に戻りました。

* ACI0098531 17日以上前に起動したマシンで，プラグインSDKのイベント処理をすると，マウスダウンよおびマウスアップイベントの発生時間が正しく返されませんでした。キーダウンイベントは問題ありません。

* ACI0098879 macOS 10.14 Mojaveのみ。4D Serverの管理画面の表示が崩れていました。CPU使用率のポップアップメニューに不要な白い垂直線が表示されました。

* ACI0098799 macOS 10.14 Mojaveのみ。4D Serverの管理画面の表示が崩れていました。ページ切り替え用のタブに不要な白い垂直線が表示されました。

* ACI0098969 64ビット版のみ。ユーザー認証ダイアログに表示される画像を``LoginImage.png``でカスタマイズした場合，右にある「ユーザー認証」の文字が画像によって隠されませんでした。期待されるのは，32ビット版と同じように，このテキストが表示されないことです。

* ACI0098537 Mac 64ビット版のみ。システム環境設定でSpotlightのショートカット（``command``+``space``）を無効にした状態で，``ON EVENT CALL``を使用した場合，``command``+``space``や``command``+``à``（フランス語配列キーボード）のような操作をしたときに，ハンドラーメソッド内でシステム変数``KEYCODE``が``0``を返しました。

* ACI0098997 ローレベルなネットワークエラーが発生した場合，サーバーのアプリケーションマネージャープロセスがブロックされて新規クライアント接続ができなくなることがありました。

* ACI0098783 同時に大量（400ユーザー/2000プロセス）のクライアントが接続されているサーバーを運用していると，9時間から48時間が経過した後，徐々に処理速度が低下することがありました。SQL（ODBCによる外部リクエストおよびBegin SQL/End SQLによる内部リクエスト）の接続と切断が頻繁に発生している状況で起きるようです。

* ACI0098141 macOS 10.13 High Sierraのみ。フォームエディターで階層リストまたはリストボックスオブジェクトを選択した場合，プロパティリストの『アピアランス』ページにあるスクロールバー設定のポップアップメニューの内容が間違っていました。「自動・あり・なし」ではなく，「自動・自動シーケンス番号・インデックス」が表示されました。ただし，使用しているうちに内容が正しくなることもあります。

**注記**: フランス語版特有の問題です。ローカライズのミスが原因でした。

* ACI0098806 ``HTTP Request``の実行中，アプリケーションの速度が大幅に低下しました。

* ACI0098747 ``HTTP Get``をサーバー側で実行した場合，リクエスト処理中がサーバーのメインプロセスの80%程度を占有し，アプリケーションの速度が大幅に低下しました。クライアント側でコマンドを実行した場合は問題が発生しません。新旧どちらのネットワークレイヤーでも再現します。また，新規プロセスでコマンドを実行した場合も問題が発生します。
