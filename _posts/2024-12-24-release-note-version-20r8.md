---
layout: fix
title: "4D 20r8 修正リスト"
date: 2025-01-05 08:00:00
categories: 修正リスト
tags: 20r8
build: 100051
version: "20r8"
permalink: /2024/360/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105307 AST（抽象構文木）インタープリターのみ。 `Character code` `Substring` `Length`などのパラメーターを省略した場合，アプリケーションがクラッシュしました。

* ACI0105259 AST（抽象構文木）インタープリターのみ。[`Time`](https://developer.4d.com/docs/ja/commands/time)関数に時間型を渡した場合，エラーが返されました。

**注記**: ドキュメントに記載されているとおり，`Time`に渡すことができるのは，文字列と整数だけです。加えて`Time`はタイプキャスト関数（[`String`](https://developer.4d.com/docs/ja/commands/string) [`Num`](https://developer.4d.com/docs/ja/commands/num) `Date` `Time` [`Bool`](https://developer.4d.com/docs/ja/commands/bool)）のひとつでもあるので，*undefined* を渡すこともできます。しかしながら，他のタイプキャスト関数とは違い，`Time`だけは，キャストするデータ型をそのまま返す`NOOP`実装がありませんでした。修正により，`Time`のパラメーターリストに時間型が追加され，`NOOP`のタイプキャストが実装されました。なお，過去バージョンのコンパイラーは，暗黙的に時間型を整数型にキャストしていたため，`Time`に時間型を渡すことができました。ただし，歴史的な仕様として，時間型はドキュメント参照でもあるため，コマンドやコンパイラーによる時間型から整数型（そしてその逆の）暗黙的なキャストは安全ではありません。ランゲージの仕様として，時間型↔︎整数の暗黙的なキャストは変数の初期化および代入時に限られることになりました。

* ACI0105322 Windows版のみ。CEF版Webエリアのコンテキストメニューから「要素の検査」を実行した場合，別ウィンドウではなく，Webエリアの内部にインスペクターが表示され，*F12* キーを使用しない限り，インスペクターを閉じることができませんでした。

* ACI0105321 Windows版のみ。CEF版Webエリアのコンテキストメニューに「更新」「要素の検査」が二重に表示され，上に表示される項目を選択するとフォーム終了時にアプリケーションがクラッシュしました。

* ACI0105317 *Visual Studio Code* のデバッグコンソールにフォーミュラを記述した場合，`2`回コードが実行されました。

* ACI0104972 クラス関数のコンストラクターまたはメンバー関数に`#DECLARE`を記述した場合，メソッドエディターには警告が表示されず，エクスプローラーのプレビューエリアにだけ警告が表示されました。

**注記**: 修正により，クラス関数に`#DECLARE`構文を記述した場合，シンタックスチェックおよびコンパイル時にエラーが返されるようになりました。

* ACI0105230 目的の値よりも前に`null`が出現する場合，コレクション型プロパティに対するクエリがエンティティを返しませんでした。つまり，コレクション型プロパティの値が`["Value";Null]`であれば，`attr.col[] in :1`クエリでエンティティをクエリできますが，`[Null;"Value"]`では，クエリできませんでした。

**注記**: 修正に伴い，ブール型フィールドに対するシーケンシャルクエリの不具合も是正されました。ブール型フィールドの値が`Null`の場合，`NOT(boolField IS NOT True)`がヒットするようになりました。

* ACI0104609 クライアント/サーバー版のみ。プロジェクトメソッドまたはクラス関数を文字列で渡した場合，`entitySelection.orderByFormula()`がエラーを返しました。`Formula from string`で文字列をフォーミュラに変換すれば問題ありません。

* ACI0104489 メソッドエディターでクラス名をダブルクリックしてハイライト選択した場合，メニューの「定義に移動」が動作しませんでした。マウスやキーボードを使用してクラス名をハイライト選択した場合，あるいはクラス名をハイライト選択せずにキャレットをクラス名に置いた場合は問題ありません。