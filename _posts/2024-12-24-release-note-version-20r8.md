---
layout: fix
title: "4D 20r8 修正リスト"
date: 2025-01-09 08:00:00
categories: 修正リスト
tags: 20r8
build: 100083
version: "20r8"
permalink: /2024/360/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105325 トルコ語のシステムでコンパイラーが起動できませんでした。

* ACI0104816 Write Proドキュメントのテーブルの後に改行コードが存在する場合，`WP Get elements`と`wk type table`で取得したテキストに余計な改行コードが含まれました。

**注記**: `WP Get elements`ではなく`WP INSERT DOCUMENT`が修正されました。

* ACI0105320 *Visual Studio Code* で複数のプロセスをデバッグ中に「続行」アクションを実行した場合，そのプロセスは再開されますが，残りのプロセスは終了しました。

* ACI0105319 ビルド版サーバーアプリケーションの「ウィンドウ」メニューに「プロジェクト依存関係」が表示されました。*Info.plist* ファイルに`com.4D.HidePackageManagerMenuItem`を追加すれば，回避することができます。

* ACI0105318 [`VP CREATE TABLE`](https://developer.4d.com/docs/ja/ViewPro/commands/vp-create-table)を実行した場合，`cs.TableColumns`は未知のクラスであるというエラーが返されました。

**注記**: ドキュメントの例題も[修正](https://github.com/doc4d/docs/commit/977aa62ee9e75d8876a13cf8161430337a89350e)されました。20r8ではクラス名が`TableColumns`ではなく`TableColumn`となります。20r7以前では，クラスを使わずに`New object`でオプションを渡してください。

* ACI0105312 AST（抽象構文木）インタープリターのみ。パラメーターに互換性のないデータ型を渡して関数やメソッドを実行した場合，エラーメッセージが正しく表示されませんでした。

* ACI0105309 スケーラブルWebセッションと強制ログインモードが有効化されたアプリケーションの`/4DACTION/`リクエストから呼び出されたWebセッションで`Session.setPrivileges()`を使用した場合，セッションの権限が設定されませんでした。

* ACI0105295 クライアント/サーバー版のみ。サーバー側で特定のキーボードショートカットを設定することができませんでした。`escape` `tab` `backspace` `return` `space` および矢印キーが認識されません。

**注記**: リソースのXLIFFファイル（*ToolBox__.xlf* ）に問題がありました。

* ACI0103009 ピクチャ型フィールドのORDAクエリでキーワード演算子（`%`）とプレースホルダーを使用することができませんでした。

* ACI0105329 `VP PRINT`に定数の`vk workbook`または`-2`を渡してスプレッドシートを印刷することができませんでした。*SpreadJS* のアップデートが影響しているようです。

* ACI0105197 Windows版のみ。CEF版Webエリアに表示されたダウンロードリンクをクリックした場合，ファイルダウンロード画面が表示されますが，そのままフォームを閉じた場合，一緒にファイルダウンロード画面が閉じられませんでした。

**注記**: 問題を回避するためにCEFのダウンロードツールは無効化されました。CEFの設定はキャッシュされるため，過去バージョンのCEF版Webエリアにも反映されます。過去バージョンのファイルダウンロード画面を復活させるためには，*CEF_Cache* を削除する必要があります。

* ACI0105324 Windows版のみ。`control`ボタンを押しながらマウスホイールを操作してCEF版Webエリアに表示されたページをズームしようとした場合，アプリケーションがクラッシュしました。CEFのアップデートが影響しているようです。

**注記**: 問題を回避するためにCEFのズームツールは無効化されました。

* ACI0105344 Mac版のみ。アプリケーションを起動すると，システムキャッシュフォルダー（*/private/var/folders/* ）に*com.4D.4D.code_sign_clone* または*com.4D.4DServer.code_sign_clone* という名称のコピーが作成されました。[CEFのアップデート](https://issues.chromium.org/issues/379125944)が影響しているようです。*4DCEFParameters.json* に`"disable-features" : "MacAppCodeSignClone"`を追加することで回避できます。

* ACI0105339 Windows版のみ。*On Web Authentication* データベースメソッドでデバッガを起動した場合，アプリケーションがフリーズしました。

* ACI0105223 Mac版のみ。管理画面の「メンテナンス」タブのボタンタイトルがドイツ語とポルトガル語では正しく表示されませんでした。

* ACI0104913 インタープリターモードのみ。`Last errors()`がエラーを返しました。`Last errors`であれば問題ありません。

**注記**: 以下のコマンドは`()`をつけて呼び出すことができます。

	* `Current process name`
	* `Call chain`
	* `WEB Server list`
	* `Get group access`
	* `Form Get color scheme`
	* `Web progress`
	* `Last errors`
	* `Web event`
	* `Web form`
	
	以下のコマンドは`()`をつけて呼び出すことができません。
	
	* `True`
	* `False`

* ACI0104592 コンパイラーパスを「すべて定義させる」に設定し，三項演算の三項に文字列同士の比較演算（`<` `<=` `>` `>=` `=` `#`）を記述した場合，コンパイルエラーになりました。

```4d
$b:=False ? False : "cat"#"cat"`
```

* ACI0105293 サーバーに接続した場合，ツールバーの「MSC」ボタンが「管理画面」ボタンに変化しますが，ボタンタイトルが途切れて表示されました。ACI0105245が修正されたことによる副作用です。

* ACI0105307 AST（抽象構文木）インタープリターのみ。 `Character code` `Substring` `Length`などのパラメーターを省略した場合，アプリケーションがクラッシュしました。

* ACI0105259 AST（抽象構文木）インタープリターのみ。[`Time`](https://developer.4d.com/docs/ja/commands/time)関数に時間型を渡した場合，エラーが返されました。

**注記**: ドキュメントに記載されているとおり，`Time`に渡すことができるのは，文字列と整数だけです。加えて`Time`はタイプキャスト関数（[`String`](https://developer.4d.com/docs/ja/commands/string) [`Num`](https://developer.4d.com/docs/ja/commands/num) [`Date`](https://developer.4d.com/docs/ja/commands/date) `Time` [`Bool`](https://developer.4d.com/docs/ja/commands/bool)）のひとつでもあるので，*undefined* を渡すこともできます。しかしながら，他のタイプキャスト関数とは違い，`Time`だけは，キャストするデータ型をそのまま返す`NOOP`実装がありませんでした。修正により，`Time`のパラメーターリストに時間型が追加され，`NOOP`のタイプキャストが実装されました。なお，過去バージョンのコンパイラーは，暗黙的に時間型を整数型にキャストしていたため，`Time`に時間型を渡すことができました。ただし，歴史的な仕様として，時間型はドキュメント参照でもあるため，コマンドやコンパイラーによる時間型から整数型（そしてその逆の）暗黙的なキャストは安全ではありません。ランゲージの仕様として，時間型↔︎整数の暗黙的なキャストは変数の初期化および代入時に限られることになりました。

* ACI0105322 Windows版のみ。CEF版Webエリアのコンテキストメニューから「要素の検査」を実行した場合，別ウィンドウではなく，Webエリアの内部にインスペクターが表示され，*F12* キーを使用しない限り，インスペクターを閉じることができませんでした。

* ACI0105321 Windows版のみ。CEF版Webエリアのコンテキストメニューに「更新」「要素の検査」が二重に表示され，上に表示される項目を選択するとフォーム終了時にアプリケーションがクラッシュしました。

* ACI0105317 *Visual Studio Code* のデバッグコンソールにフォーミュラを記述した場合，`2`回コードが実行されました。

* ACI0104972 クラス関数のコンストラクターまたはメンバー関数に`#DECLARE`を記述した場合，メソッドエディターには警告が表示されず，エクスプローラーのプレビューエリアにだけ警告が表示されました。

**注記**: 修正により，クラス関数に`#DECLARE`構文を記述した場合，シンタックスチェックおよびコンパイル時にエラーが返されるようになりました。

* ACI0105230 目的の値よりも前に`null`が出現する場合，コレクション型プロパティに対するクエリがエンティティを返しませんでした。つまり，コレクション型プロパティの値が`["Value";Null]`であれば，`attr.col[] in :1`クエリでエンティティをクエリできますが，`[Null;"Value"]`では，クエリできませんでした。

**注記**: 修正に伴い，ブール型フィールドに対するシーケンシャルクエリの不具合も是正されました。ブール型フィールドの値が`Null`の場合，`NOT(boolField IS NOT True)`がヒットするようになりました。

* ACI0104609 クライアント/サーバー版のみ。プロジェクトメソッドまたはクラス関数を文字列で渡した場合，`entitySelection.orderByFormula()`がエラーを返しました。`Formula from string`で文字列をフォーミュラに変換すれば問題ありません。

* ACI0104489 メソッドエディターでクラス名をダブルクリックしてハイライト選択した場合，メニューの「定義に移動」が動作しませんでした。マウスやキーボードを使用してクラス名をハイライト選択した場合，あるいはクラス名をハイライト選択せずにキャレットをクラス名に置いた場合は問題ありません。