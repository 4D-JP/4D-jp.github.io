---
layout: fix
title: "4D v19r7 修正リスト"
date: 2022-11-05 08:00:00
categories: 修正リスト
tags: 19r7
build: 100114
version: 19r7
permalink: /283/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0103438 Mac版のみ。文字列定数に`U+02DC`（`˜`）が使用されている場合，Apple Siliconターゲットのコンパイルがエラーを返しました。

* ACI0103389 [QR REPORT](https://doc.4d.com/4Dv19R6/4D/19-R6/QR-REPORT.301-5910983.ja.html)の*methodName* パラメーターにコールバックメソッド名を渡した場合，シンタックスエラーが返されました。

* ACI0103456 4D Go Mobileのデータセクションでプロダクションサーバーのデータファイルを選択した場合，テーブル名のフィルターを確定することができませんでした。フィルターを確定してからプロダクションサーバーのデータファイルを選択すれば問題ありません。

* ACI0103395 `WP SET ATTRIBUTES`の定数`wk page orientation`の後にセレクターとは無関係の定数`wk section index`が候補として表示されました。

* ACI0103345 `WP INSERT DOCUMENT` `WP New` `WP Import document` コピー/ペースト操作でテキストのレンジが崩れてしまうことがありました。

* ACI0103176 スプレッドシートを4D View Proにインポートした場合，`96,07887`のよう値が`96,07887000000001'`に変換されました。

**注記**: SpreadJSの不具合です。ライブラリが修正されるまで，パッチが適用されることになりました。

* ACI0103242 Windows版のみ。ドロップダウンメニューのアイコンが正しく表示されませんでした。

* ACI0102974 Windows版のみ。スタンドアロン版で`_O_Gestalt`を実行した場合，アプリケーションがクラッシュしました。
 
* ACI0103430 大量のRESTリクエストを処理するとサーバーがクラッシュすることがありました。
 
* ACI0103392 Windows版のみ。高解像ディスプレイのSDIモードでは`DRAG WINDOW`が正しく動作しませんでした。ドラッグしているウィンドウがマウスポインターの位置に表示されません。
 
* ACI0103239 Mac版のみ。*clang* を使用したApple Siliconターゲットのコンパイル速度が遅くなりました。

* ACI0103433 カレントモバイルプロジェクトを開くことができないことがありました。

* ACI0103355 複数の4D ServerでSQLサーバーを公開した場合，SQLパススルー（ODBCを介さない直接的なSQLアクセス）の処理速度が低下しました。
 
* ACI0103236 *IMAP Transporter* の`.getMails()`で大量のメールを受信した場合，エラー`200`（ストリームの末端を超えた読み込み）が返されました。

* ACI0103384 ピクチャ演算子の`*`を使用してPNG画像をリサイズした場合，末端のピクセルが失われることがありました。

**注記**: たとえば`17x17`のアイコンを作成しようとして係数を掛けた場合，内部的に浮動小数点の座標系が使用されているため，`16.9x16.9`のような画像サイズになることがあります。問題は`1616`のように端数を切り捨てられてPNGファイルのヘッダーにサイズが書き込まれることでした。

* ACI0103219 ストラクチャエディターの検索エリアでフィールドを検索することができませんでした。入力した文字列の`2`文字目以降が考慮されませんでした。
 
* ACI0103427 ORDAで日付型のシーケンシャル検索を実行した場合，クラシックなクエリよりも時間がかかりました。

* ACI0103417 すでに接続が確立されているメールボックスを更新した後，`IMAPTransporter.checkconnection()`を実行した場合，*success* に`false`が返されました。

* ACI0103410 4D Go Mobileでテーブルをスコープとした「URLを開く」アクションがテーブルに設定されている場合，ビルドしたAndroidアプリのアクションリストに「ソート」アクションが表示されました。

* ACI0103408 すでにトークンが設定されている`OAuth2Provider`オブジェクトで`getToken()`を実行した場合，エラーが返されました。

* ACI0103215 クライアント側でタイムアウトを設定してサーバーを再起動しようとした後，他のクライアントで`Current time(*)`のようなサーバー側処理を実行した場合，エラーが返されて接続が切断されました。サーバー側でタイムアウトを設定してサーバーを再起動した場合は問題ありません。
 
* ACI0103388 4D Go Mobileアプリの詳細フォームで編集アクションを実行した場合，サーバー側のデータは更新されますが，モバイル側の表示が更新されませんでした。

* ACI0103400 メソッドエディターで*alt* キーを押しながらトークンをクリックした場合，プロジェクトメソッドにはジャンプできますが，メンバー関数や変数に定義にはジャンプできませんでした。

* ACI0103190 データコンテクストが設定されたレンジに対し，`showFooter`オプションを指定して`VP Create table`を実行した場合，エラーが返されました。
 
* ACI0103227 REST APIの`$compute=$all`をコールした場合，テキスト/文字列型・日付型のプロパティ値が正しく返されませんでした。テキスト/文字列型は`min` `max`に`0`が返され，日付型は`count`以外が実数で返されました。

**注記**: 修正により，テキスト/文字列型・日付型のプロパティ`min` `max`はそれぞれのデータ値で返されるようになりました。`sum` `average`には，`0`が返されます。

* ACI0103418 `CALL WORKER`の第２パラメーターに渡したフォーミュラにローカル変数をパラメーターとして渡した場合，オブジェクト型のパラメーターが関数内関数のパラメーターとしてキャプチャされませんでした。

* ACI0103414 ストラクチャエディターを操作中にランタイムエラーが発生することがありました。エクスプローラーでテーブル名をダブルクリックし，ストラクチャエディターにジャンプした後，検索バーに文字列を入力してテーブル内を検索し，ストラクチャエディターを閉じてから同じ操作を繰り返した場合，問題が再現します。

* ACI0103369 Mac版のみ。角の丸いべべルボタンを高さを`20`ポイントに設定した場合，ダークモードでオブジェクトが正しくレンダリングされませんでした。ボタンの内部に薄いグレーのラインが表示されます。

* ACI0103382 リクエストログファイルにはレコードを保存したテーブルの番号が記録されませんでした。`SAVE RECORD`がコオペラティブプロセスで実行される箇所を特定する上で，この情報は有用です。インデックスの再構築は非同期で実行されるため，ジャーナルとタイムスタンプを突き合わせるだけでは，問題のテーブルを特定することができません。

**注記**: 修正により，`extra`という項目が追加されました。テーブルを指定することができるDB4Dリクエスト全般でテーブル番号が記録されます。

* ACI0103381 複数のクライアントから開発モードでサーバーにアクセスした場合，ロックされたフォームにオブジェクトをドラッグ＆ドロップで追加することができました。リストボックスビルダーやオブジェクトライブラリでオブジェクトを追加することができました。

**注記**: 修正により，フォームがロックされている場合は入力順の変更・ボタンやスタティックテキストのタイトル編集・ドラッグ＆ドロップ全般が使用できないようになりました。

* ACI0103244 文字列フィールドの最大文字数にサロゲート文字がかかってしまい，片側だけ（例: `Char(55356)`）がレコードに保存された場合，`LOG FILE TO JSON`のようにフィールド値をダンプするコマンドで二重引用符（`"`）が制御文字に飲み込まれてしまい，JSONを解析することができませんでした。半端なサロゲート文字は切り捨てられるべきです。

**注記**: 修正により，半端なサロゲート文字は切り捨てられるようになりました。

* ACI0103226 Windows版のみ。Write Proドキュメントのスプール名がプリントジョブのキューに表示されませんでした。

**注記**: *wk title* 属性の値が表示されるようになりました。

* ACI0103377 プロジェクトモードのみ。プロジェクトを共有ドライブに置き，複数のクライアントから開発モードでサーバーにアクセスし，別のユーザーが編集しているためにロックされているフォームを開いた場合，そのユーザーがフォームを保存した後に他方のユーザーがフォームをリロードするとロック表示が解除されました。

* ACI0103367 4D Serverに組み込まれている4D View Proコンポーネントに*SpreadJS* フォルダーがありませんでした。

* ACI0103245 エクスプローラーのプレビュー画面にサブフォームのスタイルシート設定が反映されませんでした。

* ACI0103216 データベース設定画面をクライアント/サーバーページに切り替えてIPアドレス設定リストの最初の列をクリックすると，画面のOKボタンがクリックできるようになりました。
 
* ACI0103346 リストボックス自体にスタイルシートが設定されておらず，個別のヘッダー・フッター・列にスタイルシートが設定されている場合，フォームをプロジェクトモードに変換すると，対応するCSSは作成されますが，個別のヘッダー・フッター・列にクラスプロパティが設定されませんでした。

* ACI0103238 プロジェクトモードでWebフォルダーの場所を設定した場合，データべース設定画面にはフォルダーが存在しないという意味の赤い文字でWebフォルダーの場所が表示されました。ポップアップメニューをクリックすると，チェックしているフォルダーの階層が間違っていることが確認できます。

* ACI0102894 標準アクションの「終了」がフォームオブジェクトに設定されている場合，まずオブジェクトメソッドが実行され。その後に標準アクションが実行されました。*deleteRecord* アクションと同じように，標準アクションが先に実行されるべきです。

> フォームオブジェクトあるいはメニューコマンドには，標準アクションとメソッドの両方を割り当てることができます。この場合，標準アクションは常にメソッドの後に実行されます（ただし*deleteRecord* アクションを除く）

<i class="fa fa-external-link" aria-hidden="true"></i> [doc.4d.com](https://doc.4d.com/4Dv19/4D/19/Standard-actions.300-5416773.ja.html)

* ACI0103336 IMAPトランスポーターの`getBox List()`でメールボックス名に含まれるプラス（`+`）記号が正しくデコードされないため，メールボックスが存在しないというエラーが返されました。

* ACI0103335 `MAIL convert to MIME`でアプリケーションがフリーズすることがありました。
 
* ACI0103207 4D Go Mobileのアクションタブに表示されるフィールド名がXLIFF参照のようにローカライズ処理されました。

* ACI0103363 4D Go MobileでビルドしたAndroidアプリでHTTPSサーバーに接続することができませんでした。

* ACI0103241 Application Support (Mac) またはApp Data/Roaming (Windows) に作成される*dataCollection.json* ファイルにデータベースの`databases`コレクションの内容が正しくありませんでした。

* ACI0103354 クライアント/サーバー版のみ。データベースフォルダーではなく，プロジェクトフォルダーだけを共有した場合，開発モードでサーバーに接続するとクライアントがクラッシュしました。

* ACI0103243 Internet Commandsのメール送受信コマンドがエラーを返すことがありました。

* ACI0103344 Windows版のみ。システムワーカーのインスタンスが解放されても，システムハンドルが解放されませんでした。`LAUNCH EXTERNAL PROCESS`を使用すれば問題ありません。

* ACI0103343 クライアント/サーバー版のみ。「データベースが壊れていたら最新のバックアップから復元する」が有効にされており，起動時に自動復元が作動した場合，ジャーナルの復元中にサーバーがクラッシュしました。
