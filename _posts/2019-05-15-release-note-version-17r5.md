---
layout: fix
title: "4D v17r5 修正リスト"
date: 2019-07-18 -08:00:00
categories: 修正リスト
tags: 17r5
build: 239769
version: 17r5
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099824 ``Current user``を実行するとシステム変数``OK``に``1``が代入されました。

**注記**: 新コマンド``SET USER ALIAS``が追加されたことに伴い，``Current user``にパラメーターが渡せるようになりました。開発中は，パラメーターに問題がなければ``OK``に``1``が代入されるという仕様でしたが，過去の振る舞いとの互換性を維持するため，どんな場合にも``OK``は更新されないことになりました。

* ACI0099817 クライアント/サーバー版のみ。ストアドプロシージャで``Current user``を実行した場合，空の文字列が返されました。「サーバー上で実行」メソッドでは問題ありません。

* ACI0099803 フォームエディターでページを削除したときに繰り上がって表示されるページにリストボックスが存在する場合，アプリケーションがクラッシュしました。

* ACI0099794 アプリケーションパッケージ内に``%``記号から名前が始まる画像ファイルがあるためにWiseでインストーラーを作成することができませんでした。

* ACI0099773 テキスト入力エリアのプロパティで自動ドラッグと自動ドロップを有効にした上で「ドラッグ可」と「ドロップ可」を無効にした場合，ドラッグ＆ドロップができませんでした。

* ACI0099594 リストボックスのヘッダー・列・フッターに設定されるデフォルトのオブジェクト名が正しくありませんでした。

**注記**: 修正により，日本語版ではデフォルトのオブジェクト名がローカライズされないようになりました。

* ACI0099777 互換性のデータベース設定「アプリケーション配布に新しいアーキテクチャーを使用する」が無効にしてサーバーアプリケーションをビルドした場合，最後に開いたデータファイルのパスが使用されず，毎回，「データファイルを作成または選択」ダイアログが表示されました。

* ACI0099761 プロセス数がデータベースの設定された上限値（デフォルトは``5``）に達している状況で``PHP Execute``を実行した場合，プロセスがハングしました。

* ACI0099606 ``PRINT LABEL``のパラメーターを省略した場合，シンタックスエラーが返されました。具体的には``PRINT LABEL (aTable)``および``PRINT LABEL (aTable;*)``の構文が使用できませんでした。

* ACI0099719 クライアント/サーバー版のみ。エンティティに対応するレコードを従来のランゲージで更新した場合，``entity.reload()``を実行してもエンティティが最新の値に更新されませんでした。

* ACI0099718 クライアント/サーバー版のみ。エンティティのリレーション属性を更新して``entity.save()``を実行した場合，値が``undefined``になってしまい，``entity.reload()``でもエンティティのリレーション属性をリロードすることができませんでした。

* ACI0099700 クライアント/サーバー版のみ。エンティティセレクションに対し，``For each``ブロック内で各エンティティのリレーション属性に対するクエリを``entitySelection.query()``で実行した場合，返されるエンティティセレクションが正しくありませんでした。途中で``entitySelection.toCollection()``など，明示的にエンティティセレクションをフェッチするようなコードを実行すれば問題ありません。17R5で実施されたORDAの最適化に問題がありました。

* ACI0099681 クライアント/サーバー版のみ。エンティティセレクション型のリストボックスの行をダブルクリックした場合，初回だけ一部の属性が``null``でした。

* ACI0099453 Windows版のみ。有効なライセンスがない状況でアプリケーションを起動したときに表示されるアラート画面に警告アイコンがありませんでした。

* ACI0099642 スタイルシートが設定された4D Viewドキュメントを4D View Proに変換した場合，必要以上に時間がかかりました。デフォルトのスプレッドシートサイズが``100``×``1000``に設定されているためです。

**注記**: 修正により，変換されたスプレッドシートのデフォルトサイズは，新規ドキュメントと同じ``20``×``200``に変更されました。
 
* ACI0099641 4D Viewドキュメントを4D View Proに変換した場合，``###0 jours``のような表示フォーマットが正しく変換されませんでした。``#``記号の部分ではなく，文字定数の部分に数字が表示されました。

* ACI0099634 4D Viewドキュメントを4D View Proに変換した場合，水平グリッドラインと垂直グリッドラインの設定が逆にインポートされました。

* ACI0099505 4D Viewドキュメントを4D View Proに変換した場合，リボンインタフェースの「タブストリップ（TabStrip）」のチェックボックスを有効にすることができませんでした。

* ACI0099409 破損した4D Viewドキュメントを``VP Convert from 4D View``で処理した場合，アプリケーションがフリーズする恐れがありました。

* ACI0099722 Mac版のみ。アプリケーション自動アップグレードが完了した後，エラーメッセージが表示されました。

* ACI0099693 クライアント/サーバー版のみ。空のエンティティセレクションの１対Nリレーション属性（当然，空）のN対１リレーション属性にアクセスしようとした場合，アプリケーションがクラッシュしました。

* ACI0099675 64ビット版のみ。クイックレポートエディターで計算カラム（例：``[Table_1]price*[Table_1]quantity``）にフォーマット（例：``###0``）を設定した場合，カラムのフォーミュラがクリアされました。

* ACI0099585 64ビット版のみ。MSCでレコードヘッダーによる修復を実行した場合，インデックスの再構築が必要になりますが，この処理にデータベース設定のキャッシュサイズが使用されないため，レコード数が多い場合（例：データファイル``200``GB），非常に時間がかかりました。また，キャッシュにレコードがロードされていない状態でインデックスの構築が実行されると，ゼロ除算により，アプリケーションがクラッシュする恐れがありました。

**注記**: MSCでレコードヘッダーによる修復を実行した場合のキャッシュサイズは，これまで固定値の``800``MBに設定されていました。修正により，物理メモリの``75``%が割り当てられるようになりました（レコードヘッダーによる修復中は，データベース設定の値が取得できないため）。

* ACI0099544 64ビット版のみ。表示フォーマットが設定された実数フィールド（例：``String([TEST]Prix;"##0.00€;-##0.00€")``）がラベルに挿入されていた場合，最初の1枚でラベルの出力が終了しました。

* ACI0099551 Welcome ウィザードが表示された直後にアプリケーションを終了した場合，アプリケーションがクラッシュすることがありました。

* ACI0099689 macOS 10.15 Catalinaでアプリケーションを起動すると，すぐにクラッシュしました。

**注記**: ファイルシステムの「データ領域」に対応し，メニュー項目のキーボードショートカットによる入力処理が修正されました。

* ACI0099683 SVGコンポーネントの``SVG_ABOUT``および``SVG_Get_version``から返されるバージョン情報が正しくありませんでした。``17R5.92``ではなく``0.92``のような値が返されました。

* ACI0099664 フォームエディターに入れ子にされたサブフォームの内容が表示されませんでした。

* ACI0099661 プロジェクトモードでフォームエディターを開いた場合，サブフォームオブジェクトのプロパティリストに共有が許可されたコンポーネントのフォーム名が表示されませんでした。

* ACI0099404 インデックスを再構築した後，一部のインデックスページがまだフラッシュツリーに残されている状態でインデックスを削除した場合，アプリケーションがクラッシュすることがありました。

* ACI0099676 クライアント/サーバー版のみ。ループ処理の中でORDAの``entitySelection.query()``をリレーション属性に対して実行した場合，初回した正しい結果が返されませんでした。ORDAの過剰なネットワーク最適化により，ループ処理の中でリレーション属性のエンティティがリロードされていないようです。

* ACI0099657 データ言語が「日本語」に設定されており，「テキスト検索用の文字列比較を使用する」が有効されている場合，オブジェクト型のフィールドに対する``IN``クエリを実行すると，条件に合致しないレコードが返されることがありました。

* ACI0099644 JSONフォームをフォームエディターで開いた場合，フォームオブジェクトの入力順を示すバッジ（シールド）の再描画に問題がありました。入力順ツールを選択して複数のオブジェクトを範囲選択した場合，一部のバッジが消えました。

* ACI0099626 JSONフォームをフォームエディターで開いた場合，名称は同じでも，関連付けられたリストが違うプロパティ（例：ボタンスタイル・ピクチャフォーマット・変数タイプ・テキスト揃え・標準アクション・フォント名など）が設定できる複数のオブジェクトを選択したときのプロパティリスト表示に問題がありました。選択されたオブジェクトすべてに共通の設定を一括して適用できないのであれば，プロパティの値（リスト）は表示されるべきではありません。

* ACI0099648 リストボックスあるいはWrite Proオブジェクトを作成した後，フォームを``0``ページから``1``ページに切り替えると，アプリケーションがクラッシュすることがありました。

* ACI0099638 トランスポーターでメールを送信した場合，長い件名がそのまま送信されないことがありました。

* ACI0099636 トランスポーターでメールを送信した場合，``67``文字のブロックに件名が分割され，間に制御文字が挿入されることがありました。

* ACI0099659 MSCで「レコードヘッダーによる修復」を実行した場合，修復後のインデックス作成中にサーバーがクラッシュすることがありました。

* ACI0099620 旧式ネットワークレイヤーが有効に設定されている場合，スタンドアロン版であっても，コンパイルモードでプリエンプティブプロセスを開始することができませんでした。4D Remoteではないので，プリエンプティブプロセスを開始するために新ネットワークレイヤーは必要ないはずです。

* ACI0099618 エンティティセレクション型のリストボックスに対して``LISTBOX SELECT ROW``を``lk add to selection``オプションで続けて使用した場合，正しい行が選択されませんでした。ACI0099498が修正されたことの副作用です。
	
* ACI0099568 クライアント/サーバー版のみ。``For each``のようなコードブロック内でプロジェクションとリレーションを併用した場合，２回目に返される結果が正しくありませんでした。``context``を使用したブロックコードの最適化がうまく働いていないようです。

* ACI0099623 プロジェクトモードでフォームを開いた場合，ボタンまたはポップアップ/ドロップダウンメニューの「描画しない」プロパティを有効に設定にしても，デザインモードでオブジェクトがレンダリングされました。

* ACI0099622 プロジェクトモードのプロパティリストは，サブフォームオブジェクトのプロパティ「垂直スクロールバー」と「水平スクロールバー」が逆に表示されました。

* ACI0099520 4D View ProドキュメントをPDF形式でエクスポートできないケースがありました。

* ACI0099379 非表示セルが含まれる4D Viewドキュメントを4D View Proに変換した場合，セルのプロパティ``visible``が``false``に設定されましたが，これはSpreadJSがサポートしていないプロパティであり，セルが非表示になることもありません。4D View Proでは，4D Viewのようにセルを非表示に設定することはできません。

* ACI0099590 サーバー側でランタイムエクスプローラーを表示することができませんでした。

* ACI0099597 フランス語のフォント名「Courier Gras」をプロパティリストで選択すると，表示が「Courier Bold」に変わりました。

* ACI0099589 アプリケーションをプロジェクトモードに変換した場合，``.jpg``形式のスタティックピクチャの「透過」プロパティが``False``から``True``になりました。

* ACI0099442 ``VP New document``または``VP Import from object``を実行した場合，コマンドがバッファに追加され，バッファをフラッシュするまでドキュメントが読み込まれませんでした。

* ACI0099584 フォームオブジェクトを作成した直後はコピー＆ペースト操作ができませんでした。

* ACI0099557 Windows版のみ。``.css``ファイルを参照する``link``タグが記述されたHTMLをWebサーバーに対して繰り返しリクエストした場合，アプリケーションがクラッシュしたりフリーズしたりすることがありました。TLS ``1.3``を無効にすれば，問題ありません。

* ACI0099535 クライアント/サーバー版のみ。エンティティのリレート属性を``If``構文の中で評価した場合，``Null``と評価されることがありました。ORDAの最適化により，一部の属性が遅延ロードされることが原因です。``If``構文の外でリレート属性を参照すれば，``If``構文の中で評価しても問題ありません。

* ACI0099476 右から左に向かって読む言語（アラビア語など）のWrite Proテキストを揃えた場合，右ではなく，左揃えになりました。

* ACI0099572 Windows版のみ。POSIXパスで``File``オブジェクト	を作成することができませんでした。

* ACI0099565 旧式ネットワークレイヤーでサーバーに接続しようとした場合，``uuid.txt``ファイルを開くことができない，というエラーが返されました。

* ACI0099527 Write Proドキュメントを``.docx``形式でエクスポートした場合，青色の不要な罫線が出力されることがありました。

* ACI0099524 サーバー管理画面のプロセスベージにプリエンプティブワーカーのプロセス名が正しく表示されませんでした。ローカライズされてない文字列リソース（``:xliff:MONI_PROCESS_Type39 - (process name)``）が表示されました。

* ACI0099498 「選択された項目」が設定されているコレクション型のリストボックスに対して``LISTBOX SELECT ROW``に``lk add to selection``オプションを渡して実行した場合，選択行が即座に更新されませんでした。たとえば``3000``行のハイライトに約``16``秒を要しました。

* ACI0099477 プロジェクトモードでは，MSCの情報ページに「ストラクチャ」タブが表示されませんでした。

* ACI0099548 ``If``文などのコードブロック内でシンタックスエラーが検出された場合，``If``および``End if``もシンタックスエラーとして計上されました。

* ACI0099536 64ビット版のクイックレポートエディターは，``Tab``以外のセパレーター記号を設定することができませんでした。

**注記**: ``QR AREA``は，デフォルトでシステム変数の``FldDelimit``と``RecDelimit``を使用しますが，これは``QR SET PROPERTY``でオーバーライドすることができます。修正により，``QR SET DESTINATION``の前に``QR SET PROPERTY``を使用すれば，``FldDelimit``と``RecDelimit``がオーバーライドできるようになりました。

* ACI0099534 クライアント/サーバー版のみ。トランザクション中に時間型または日付型の属性に対して``collection.sort()``メソッドを実行した場合，結果が正しくありませんでした。

* ACI0099393 4D WriteドキュメントをWrite Proに変換した場合，先頭ページを除くすべてのページに表示されるピクチャが先頭ページにも表示されました。

* ACI0099497 ``Designer``グループに属する``User``権限（``Administrator``が作成したユーザー）でログインした場合，ランタイムエクスプローラーを開くことができませんでした。逆に``Designer``グループに属さない``Developer``権限（``Designer``が作成したユーザー）でログインした場合，ランタイムエクスプローラーを開くことができてしまいました。期待されるのは，``Designer``グループに属するユーザー権限でログインであれば，``Designer``や``Administrator``でなくても，ランタイムエクスプローラーを開くことができること（17r5の新しい仕様）です。

* ACI0099228 クロスタブ形式のクイックレポートは，時間型フィールドの``Sum``が正しくありませんでした。32ビット版では，空のレポートが出力されます。64ビット版では，``1``時間が約``3.57``秒として計算されました。

* ACI0099431 64ビット版のみ。``CLOB``タイプのカラムに対して``OCILobGetLength``を実行した場合，``0``ではなく``-2``が返されました。

* ACI0099547 Mac版のみ。プロジェクトモードでストラクチャファイルの内部リソースにアクセスするようなプラグインコマンドを実行するとアプリケーションがクラッシュしました。

* ACI0099513 Mac版のみ。View Proエリアのユーザーインタフェースを（ツールバー・リボンではなく）「なし」に設定した状態でオブジェクトの幅や高さを変更してフォームを実行した場合，新しいサイズが反映されませんでした。

* ACI0099501 ``APPEND MENU ITEM``の第１引数に無効なメニューバー参照が渡された場合，アプリケーションがクラッシュしました。

* ACI0099449 垂直ルーラーでWrite Proエリアのヘッダーの高さを減らし，本文の高さを増やした場合，レンダリングが崩れました。ヘッダーと本文のマージンが一致しない状態になります。4D Writeから変換されたドキュメントでなければ，問題は発生しません。また，コマンドでヘッダーや本文をリサイズすれば，問題は発生しません。

* ACI0099403 サーバー管理画面を表示した状態でクライアントの接続を解除し，画面を「ユーザー」ページに切り替えた場合，接続ユーザー数が減算されていないために配列の範囲チェックエラーが返されました。

* ACI0099494 空のフォームと空のメソッドだけで構成される単純なストラクチャをMSCで修復しようとすると，アプリケーションがクラッシュしました。

* ACI0099485 クライアント/サーバー版のみ。エンティティを代入文の右オペランドに使用したただけで``entity.touched()``が``True``を返しました。

* ACI0099441 リストボックスのプロパティ「階層リストボックス」と「カラム自動リサイズ」は最初からボールド体で表示され，``control``+クリック操作をしても，状態が解除できませんでした。

* ACI0099309 64ビット版のみ。``DBF``形式で文字列またはテキスト型のフィールドをエクスポートした場合，データが``15``文字でトランケートされました。32ビット版では，``80``文字までエクスポートできました。

* ACI0099415 テキスト入力の背景が明るい色（たとえば黄色）に設定されている場合，キャレットが良く見えませんでした。

**注記**: キャレットの色は，背景の輝度によって決められていました。修正により，背景のグレースケールの輝度によって決められるようになりました。

* ACI0099394 ようこそ画面には，最後に開いたプロジェクトの名前（拡張子``.4DProject``を除く）ではなく，そのフォルダー名が表示されました。

* ACI0099236 ``512``よりも短いキーの長さが渡された場合，``GENERATE ENCRYPTION KEYPAIR``から返された暗号鍵ペアでBLOBを復号することができませんでした。

**注記**: OpenSSLのアップデートにより，最小キー長が``386``から``512``に引き上げられています。修正により，``512``よりも短いキーの長さが渡された場合には``512``で鍵が生成されるようになりました。

* ACI0099450 ODBCドライバーあるいは4Dプロダクトラインのインストーラーを起動したときにスプラッシュスクリーンが表示されず，すぐにライセンス規約の画面（２ページ目）が表示されました。

**注記**: Inno Setupのバージョンが``5.5.5``から``5.6.1``にアップデートされ，一部オプションのデフォルト値が変更されたためでした。

* ACI0099440 リストボックスを配列型からコレクション型に変更した場合，``lk row max height`` ``lk row min height``プロパティがJSONフォームから取り除かれませんでした。

* ACI0099437 ストラクチャモードからプロジェクトモードに変換した場合，リストボックスの「自動行高」プロパティの値が反転しました。

* ACI0099435 登録されたアカウント情報に拡張文字が使用されている場合，ライセンス番号のアクティベーションができませんでした。

* ACI0097749 Windows版のみ。地域と言語が「ニューカレドニア（フランス語）」に設定されたシステムでは，アプリケーションを起動することができませんでした。

* ACI0097687 サーバー管理ウィンドウのプロセスリストに表示されている「プリエンプティブワーカー」の表示がローカライズされていませんでした。`` :xliff:MONI_PROCESS_Type39``と表示されました。

* ACI0097617 データベース設定の「クライアント/サーバー」ページの「サービスプリンシパル名」の入力エリアを指定したときに表示されるヘルプTipsの内容が設定されていませんでした。``:xliff:csTipsServicePrincipalName``というXLIFFラベルがそのまま表示されました。

* ACI0098168 行の高さが``0``に設定されているリストボックスを印刷しようとした場合，アプリケーションがクラッシュしました。

* ACI0098160 ``Get system info``から返されるオペレーションシステム名（Windows Professional, Windows Professionnelなど）は，プラットフォームの言語に左右され，Mac版では"build", "version"などのワードを含む形式で返されました。また，Windows 10のバージョンを区別することができませんでした。

* ACI0098697 Mac 64ビット版のみ。エクスプローラーの「拡大」アイコンをクリックすると，ウィンドウが過剰にリサイズされ，復帰できなくなりました。

* ACI0098693 Mac版のみ。4D Progressコンポーネントを使用しているとシンタックスエラーが表示されることがありました。

**注記**: コンポーネントがv16でコンパイルされており，廃止予定コマンドの``_o_PLATFORM PROPERTIES``を内部的にコールしていたことが原因でした。
* ACI0098621 インデックスが設定されたフィールドに対して``QUERY WITH ARRAY``あるいはORDAの``query()``を実行した場合，正しい結果が返されないことがありました。データが日本語であり，データベース設定で「テキスト検索用の文字列比較を使用する」オプションが有効にされている場合に問題が発生します。

* ACI0098505 Windows版のみ。4D Serverを管理者アカウントで実行されるサービスとして登録すれば，ユーザーがサーバーにログインしていなくてもサービスが起動されるようになりますが，その場合，自動アップグレードの実行後に一時フォルダーが削除されませんでした。

* ACI0098493 クエリ・統計・ソート・変換等のORDAオペレーションに時間に要している場合（３秒以上），プログレスバーが表示されませんでした。

* ACI0098765 Mac版のみ。（プロパティリストではなく）ストラクチャエディター上でフィールド名を編集し，日本語変換を確定した場合，日本語変換プログラムのウィンドウが閉じられませんでした。

* ACI0098813 64ビット版のみ。クリックレポートのカラムにフィールドを追加した後，右上にあるメニューで「フィールド」を選択した場合，選択したフィールドが正しく表示されませんでした。

* ACI0098862 クライアント/サーバー版のみ。ソートされたカレントセレクション（レコード数は「1件」）が表示されているリスト型のサブフォームに対して新規レコードを追加した場合，クリック操作でその新規レコードを選択することができませんでした。サブフォーム自体はフォーカスされますが，選択したレコードは消えてしまい，フィールドがフォーカスされません。続けてもう一度レコードを追加すると，うまくゆきます。カレントセレクションがソートされていない場合，あるいはカレントセレクションが2件以上のレコードで構成される場合は問題ありません。

* ACI0099370 入れ子構造に設置されたサブフォームオブジェクトのデータソースに``FORM``という変数名を設定した場合，コンパイルモードでサブフォームのオブジェクトメソッドが実行されませんでした。

* ACI0099359 テキスト入力オブジェクトの「自動ドラッグ」「自動ドロップ」を無効にし，「入力可」「ドラッグ可」「ドロップ可」プロパティを有効にした場合，テキストの範囲を選択しようとすると，``On Begin Drag Over``イベントが発生しました。Write Proエリアでも同じ問題が発生します。キーボード操作であれば，テキストを選択することができます。

* ACI0099339 １ページ目のフッターに挿入された``$wp_pageCount``フォーミュラの値が正しくありませんでした。ページ総数に関係なく，常に``1``が挿入されました。以降のページでは問題ありません。

* ACI0099329 ``C_BLOB``で型宣言していない未定義の変数を``GENERATE CERTIFICATE REQUEST``に渡した場合，アプリケーションがクラッシュしました。

* ACI0099320 Mac版のみ。高さが１行のテキスト入力エリアオブジェクトをv16で作成し，「ヒラギノ」フォントを設定して，v17に変換した場合，テキストのベースラインが高くなって「ぶら下がり（デセント）」が表示される代わりに上部（アセント）のピクセルが不足しました。

* ACI0099312 リストボックスの行を別のリストボックスの上にドラッグした場合，ドラッグ先のリストボックスの``On Drag Over``でドロップ操作が禁止したときはマウスポインターが「進入禁止」アイコンに変化しましたが，禁止しなかったときはマウスポインターが「追加」アイコンに変化しませんでした。ドラッグ元のリストボックスの「行の移動可」プロパティを無効にすれば，ドラッグの開始と同時にポインターが変化します。

* ACI0099291 Mac版のみ。システム版Webエリアに対して`` WA Evaluate Javascript``を使用した場合，``\r``と``\n``がリテラル文字列として処理され，JavaScriptコードが正しく実行されませんでした。

* ACI0099283 クライアント/サーバー版のみ。多数のプロセスウィンドウを立て続けに閉じた場合，クライアントがクラッシュすることがありました。

* ACI0099273 テキストまたは階層リストから4D Write Proエリアのヘッダーまたはフッターにテキストをドラッグ＆ドロップすることができませんでした。

* ACI0099265 Windows 64ビット版のみ。データベース設定で「スプラッシュスクリーン」が非表示に設定されている場合，SDIモードでアプリケーションを起動中に一瞬，画面の左上にスプラッシュスクリーンが表示されました。

* ACI0099264 Windows SDIモードのみ。アプリケーションのウィンドウが最前面ではない場合，まずウィンドウをクリックして最前面に移動してから，改めてドラッグする必要がありました。期待されるのは，最初のクリックでそのままウィンドウがドラッグできることです。

* ACI0099262 キーボードショートカットのスウェーデン語の文字（``Å`` ``Ä``など）を設定することができませんでした。

* ACI0099253 クイックレポートの出力中，「レポート生成中」という進捗ダイアログがモーダルウィンドウで表示され，処理が完了するまでアプリケーションを操作することができませんでした。

* ACI0099246 64ビット版のみ。``GRAPH``で作成されたタイプ``2`` ``3`` ``7``のグラフは，SVGのIDが正しくありませんでした。

* ACI0099229 ネットワーク接続が利用できない状態でアプリケーションを起動し，その後，ネットワークが利用できるようにして``HTTP Get``を実行した場合，エラー``30``が返されました。以前のバージョンでは，ネットワーク接続後，数秒を置けば，コマンドが使用できました。

* ACI0099217 v16以前に4D Mobileでタッチされたレコードをv17で更新しようとした場合，スタンプの不一致により，``400``エラーが返されることがありました。

* ACI0099187 Windows版のみ。特定のプラグインの組み合わせがインストールされている場合，コンパイル処理を実行するとアプリケーションがクラッシュしました。

* ACI0099164 Windows版のみ。``Popup form window``タイプのウィンドウ上では，マウスボタンが押されていない限り，``On Mouse Move``イベントが発生しませんでした。

* ACI0099114 定数``TIFF JBIGB&W``は，無効な文字（アンパーサンド）が含まれているため，コンパイルエラーになりました。

* ACI0099112 ``ALERT`` ``CONFIRM``などのモーダルウィンドウが表示された状態で``SET MENU BAR``にオプション（``*``）を渡して実行した場合，メニュー項目が選択不可になりました。

* ACI0099110 ``SET CHANNEL``で``3600``を下回るボーレートを指定した場合，エラー``-28``が返されました。

* ACI0099107 インタプリターモードのみ。選択リストが設定された変数のデータ型は，デフォルトで``18``（テキスト配列）に設定されました。期待されるのは，選択リストが設定されてない変数のように``5``（未定義）になることです。フォームロード時にデータ型がテキスト配列になってしまうため，文字列の代入文がシンタックスエラーになってしまいます。変数をテキスト型（``2``）で宣言してコンパイルすれば問題ありません。

* ACI0099105 ``QUERY``など，値を返さない式が4D Write Proドキュメントに埋め込まれている場合，からの文字列ではなく，エラー文字列がドキュメントに挿入されました。

* ACI0099091 テンプレート（レンジオブジェクト）に挿入された式を評価し，新規Write Pro文書に組み込んだ場合，式に設定されたフォントサイズが失われ，前後のフォントサイズが評価された式のテキストに適用されました。

* ACI0099090 17R3で追加された``On Mobile App Authentication``データベースメソッドにコードを記述した後，下記の17.xで開いたストラクチャをコンパイルしようとすると，アプリケーションがクラッシュしました。トラクチャを修復すれば問題は解消されますが，その後，17R3で``On Mobile App Authentication``データベースメソッドを開こうとすると，エラー``-5``が返されました。

* ACI0099069 クライアント/サーバー版のみ。クラシックランゲージの``SAVE RECORD``でレコードを更新した直後にORDAの``get()``メソッドで同じレコードをエンティティとしてロードした場合，最新の値がリロードされないことがありました。ORDAの``query()``メソッドでは問題ありません。数秒の間を置けば，最新の値がリロードされます。

* ACI0099065 64ビット版のみ。``PRINT LABEL``で用紙またはラベルの枠外にオブジェクトが印刷されることがありました。

* ACI0099018 Mac版のみ。境界線スタイル「標準」のオブジェクトは，Retinaディスプレイで左と下のボーダーラインがそれぞれ1ピクセルずれて表示されました。

* ACI0099009 Windows クライアント/サーバー版のみ。4D Writeドキュメント（``.4W7``）を``WP PRINT``を使用してサービスとして実行中のサーバー側でPDF出力した場合，空のPDFが作成されることがありました。

* ACI0099003 Mac 64ビット版のみ。リストフォームの``On Display Detail``イベントで非表示に設定された入力エリアを``On Load Record``イベントで再表示した場合，オブジェクトのボーダーだけが表示され，内容は表示されませんでした。

* ACI0098951 詳細フォームが設定されていないリスト型サブフォームをダブルクリックした場合，予期しないエラーが返されました。期待されるのは，そのテーブルのデフォルト入力フォームが使用されることです。

* ACI0098939 Mac 64ビット版のみ。CEF版Webエリアは``WA Evaluate javascript``の実行が低速でした。システム版と比較しておよそ500倍の時間を要します。Webエリア上でマウスポインターを移動すると，幾らか速度が改善されますが，それでもかなり低速でした。

* ACI0098925 バックアップ設定の「指定時間経過後に再試行」オプションは設定ファイルに保存されませんでした。Windowsでは常に``0``秒となり，macOSでは常に``60``分となりました。

* ACI0099295 アプリケーションの起動時モードが「アプリケーション」に設定されており，スプラッシュウィンドウが非表示に設定されている場合，デザインモードに移動するためには，標準アクションの「デザインモードに移動」を２回実行する必要がありました。

* ACI0099160 Windows版のみ。``Pop up menu``の第２引数（デフォルト項目の指定）が無視されました。

* ACI0099153 macOS 10.14 Mojaveのみ。外部ディスプレイが接続されている場合，``Open form window``で表示されたウィンドウに対して``SET WINDOW RECT``を実行すると，ウィンドウが消えてしまうことがありました。 

* ACI0099144 `` OBJECT DUPLICATE``でラジオボタンを既存のグループに所属させることができませんでした。

* ACI0099135 テキスト型の変数を使用してBOM（バイトオーダーマーク）付きのUTF-8を``HTTP Get``で受信した場合，冒頭BOM（``0xFEFF``）がそのままテキストに代入されました。BLOBで受信してから``Convert to text``でテキストに変換した場合は問題ありません。

* ACI009938 Mac版のみ。Write Proドキュメントにアンダーラインまたは取り消し線がセットされたスタイルシートをレンジに設定した場合，アンダーラインまたは取り消し線の属性がレンジに適用されませんでした。

* ACI0099349 Windows版のみ。プロパティリストが表示されている状態でフォームエディターではないウィンドウを最前面に移動した場合，プロパティリストが非表示になりませんでした。

* ACI0099338 Windows版のみ。ビルドしたSDIアプリケーションのウィンドウにメニューバーが表示されませんでした。

* ACI0099326 Write Proドキュメントのハイパーリンクが設定されたテキストのフォントスタイルにアンダーラインを適用した場合，テキストのハイパーリンクが取り除かれました。

* ACI0099322 ``On Load``イベントでコレクション型のリストボックスに要素を追加された場合，暗黙的にフォームが再描画されませんでした。つまり，``Form.data:=Form.data``のようなコードを明示的に実行する必要がありました。

* ACI0098325 １回の``WP SET ATTRIBUTES``コールで同時に設定できないWrite Pro属性がありました。

* ACI0098299 ピクチャを返すメソッドを参照する4D ViewドキュメントをView Proに変換した場合，背景色がホワイトのピクチャが表示されませんでした。

* ACI0097958 4D SVGコンポーネントのヘルプメニューを選択すると，v12のドキュメントページが表示されました。

* ACI0097177 Mac 64ビット版のみ。4D Serverでプリントジョブを開始した後に``WP PRINT``をコールした場合に返されるエラーメッセージに一貫性がありませんでした。32ビット版では，プリントジョブを開始した後にこのコマンドを使用することはできない，という内容のメッセージが返されますが，64ビット版では，``WP PAGE SETUP``と``WP PRINT``をサポートしているのは（サーバー版を除く）64ビット版だけである，という内容のメッセージが返されました。

* ACI0098999 メソッドから返されたオブジェクト型のプロパティにフォーミュラオブジェクトが含まれている場合，``Method.formula()``と記述すればそのフォーミュラを実行することはできますが，``Method().formula()``のように記述するとそのフォーミュラは実行されませんでした。

* ACI0098996 Mac 64ビット版のみ。CEF版のWebエリアに表示されたHTMLフォームに含まれる``<select>``要素を編集しようとするとアプリケーションがクラッシュしました。

**注記**: CEFの[バグ](https://bitbucket.org/chromiumembedded/cef/issues/2495/cefclient-external-message-pump-crash-when)が原因でした。17r5ではCEFのバージョンが``3626``に引き上げられています。

* ACI0098961 Mac 64ビット版のみ。CEF版のWebエリアに表示されたHTMLフォームに含まれる``<select>``要素をクリックするとアプリケーションがクラッシュしました。

* ACI0098843 Mac版のみ。Finderの「情報を見る（``command``+``I``）」画面にコピーライト情報が表示されませんでした。

* ACI0098807 ``#4DIF``タグで未定義の変数を``PROCESS 4D TAGS``で評価した場合，エラーメッセージに表示される未定義の変数名の前に余分な空白文字が出力されました。

```
C_TEXT($script;$resp)

$script:="<!--#4DIF $var31 =\"test\"-->"
$script:=$script+"<!--#4DENDIF-->"

PROCESS 4D TAGS($script;$resp) 
```

* ACI0099198 ``If``条件に余分な閉じカッコが存在する場合，大量のシンタックスエラーが連鎖的に返されました。

* ACI0099181 SQLの``COUNT``に``DISTINCT``オプションを指定した場合，正しい結果が返されませんでした。

* ACI0099179 Write Proドキュメントに空の文字列を返すフォーミュラの後にテキストを返すフォーミュラが「中央揃え」で記述されている場合，空のフォーミュラが左側に存在するためにテキストが実際の中央よりも右側に表示されました。

* ACI0099167 ``METHOD SET CODE``でコードがクリアされたメソッドから``METHOD GET CODE``で取り出した場合，コメント行の最後にあるべき改行コード（``\r``）が返されませんでした。

* ACI0099148 4D for iOSの「データ」ページで「プロダクションサーバーデータファイル」が選択されており，「ビルドするごとにデータを再生成しない」オプションが有効にされている場合，「再生成する」ボタンをクリックすれば，project.dataSet > Resources > Assets.xcassets にカタログとデータが書き出されるはずですが，Webサーバーが起動していないと，書き出されませんでした。

* ACI0099145 Mac版のみ。リストボックスのヘッダーはフォントカラーがブラックに固定されていました。

* ACI0099293  フランス語版の4Dで公開されたWSDLからWebサービスウィザードでプロキシメソッドを作成した場合，``If`` ``Else`` ``End if`` 代わりにフランス語版のキーワードが出力されました。

* ACI0099286 ``Request``に渡されたテキストが長すぎると，入力エリアが表示されなかったり，間違った位置に表示されたりしました。

* ACI0099285 Write Proドキュメントに２個以上のセクションを追加した場合，``WP Get Sections``から返される数が正しくありませんでした。

* ACI0099284 無効なホスト名が指定された場合，``transporter.checkConnection()``は``status``に``False``を返しますが，``transporter.send()``は``True``を返しました。

* ACI0099268 Write Proに``\n``文字が含まれるテキストを``WP SET TEXT``で挿入した場合，改行が挿入される代わりに重ねてテキストが表示されました。

* ACI0099258 ``VERIFY CURRENT DATA FILE``に無効なファイルパスを渡した場合，アプリケーションがクラッシュしました。

* ACI0099248 プロジェクトモードのメニューエディターでメニューアイテムを追加しようとすると，アプリケーションがクラッシュすることがありました。比較的，小さなメニューでは問題ありません。

* ACI0099233 Mac版のみ。リストにバインドされたタブコントールのタブを``SET LIST ITEM PROPERTY``で``disabled``状態に設定した場合，タブの表示が``enabled``状態と変わりませんでした。

* ACI0099223 4D ViewドキュメントをView Proに変換した場合，時間を返す関数が正しく変換されませんでした。

**注記**: ``Current time``は，日付と時間を返す``NOW()``ではなく``RUNTIME_CURRENT_TIME``に変換されるようになりました。

* ACI0099139 クライアント/サーバー版のみ。Write Proドキュメント（バイナリ形式の特殊なオブジェクト型）はORDAの``save()``メソッドで保存できませんでした。

**注記**: 17.xクライアント/サーバー版の``entity.save()``は，バイナリ形式のオブジェクト型フィールドに対応していません。これは仕様です。

<i class="fa fa-external-link" aria-hidden="true"></i> [entity.save()](https://livedoc.4d.com/--17-R2.1720/ORDA/entitysave.305-3857761.ja.html)

* ACI0099311 ``On Header Click``イベントで``LISTBOX GET CELL POSITION``を使用した場合，正しい列番号が返されませんでした。

* ACI0099308 Windows版のみ。インタープリターモードで``New process``に``32*1024``以下のスタックサイズを指定した場合，スタック不足エラーが返されました。

**注記**: ドキュメントに記述されているように，デフォルト値（``0``）を渡さない場合，スタックサイズは少なくとも``64*1024``に設定することが推奨されています。

<i class="fa fa-external-link" aria-hidden="true"></i> [New process](https://doc.4d.com/4Dv17/4D/17.1/New-process.301-4179077.ja.html)

* ACI0099094 ランタイムエクスプローラーに表示されるWebプロセスのアイコンは，プリエンプティブモードとコオペラティブモードで違いがありませんでした。

* ACI0099086 インターネットに接続されていない環境で4D Serverを起動した場合，アプリケーションがクラッシュしました。

* ACI0099082 クライアント側のWebサーバーでは，Webプロセスがプリエンプティブモードで実行されませんでした。

* ACI0099071 Mac版のみ。リストボックスヘッダーの高さをデフォルト（``1``行）以外に設定した場合，ヘッダーの色が明るいグレーに変化しました。

* ACI0099307 ``Position``で１文字の位置をサーチした場合の速度は，２文字以上の位置をサーチした場合の速度よりもずっと低速でした。

**注記**: ICUのアップデートでアルゴリズムが変更されたことが原因でした。修正により``ucol_setText``の``fast``パラメーターが``true``に設定されました。

* ACI0099305 トランスポーターで送信した添付ファイル名（アクセント文字）が正しくエンコードされないことがありました。

* ACI0099303 トランスポーターで送信した添付ファイル名（日本語）が正しくエンコードされないことがありました。

* ACI0099267 Windows版のみ。実行ファイルと同じ場所，またはデータベースフォルダーに ``blob_storage`` という名前のフォルダーが作成されました。

**注記**: 現バージョンのCEFでは ``GPUCache`` フォルダーが作成されることは抑制できません。

* ACI0099260 日本語版のようこそ画面に表示されるバナー画像をクリックした場合，英語（米国）のWebサイトにジャンプしました。

* ACI0099138 Mac版のみ。4D for iOSの「データ」ページで「プロダクションサーバーデータファイル」を選択して，サーバーのURLを入力した場合，MobileApps > Key.mobileapp フォルダーに``key.mobilekey``ファイルが作成されませんでした。プロダクションサーバーを使用する場合，リモートサーバーの``/mobileapp/$catalog``にアクセスしてカタログとデータをダンプするために``key.mobilekey``ファイルを作成する必要があります。

* ACI0099050 ラベルエディターを閉じてから，再び開いた場合，最後に使用したラベル設定ファイルがロードされた状態でダイアログが表示されませんでした。

* ACI0099006 Windows 64ビット版のみ。SDIウィンドウのタイトルバーをダブルクリックした場合，下端がタスクバーに埋もれる格好でウィンドウがリサイズされました。

**注記**: オペレーションシステムのバグですが，4D側でウィンドウの高さに制限を加えることで回避しています。

* ACI0098802 Windows 64ビット版のみ。ビルドしたアプリケーションでクイックレポートを保存することができませんでした。ディレクトリのパスが無効なためにエラーが返されました。

* ACI0098732 64ビット版のみ。フォームエディターでセレクション型のリストボックスに表示されたオブジェクト型のフィールドを選択した場合，アプリケーションがクラッシュしました。

* ACI0098426 MySQL ODBC Driver ``8.0.11``（64ビット版）をインストールしてODBC経由でMySQLにログインした場合，２回目の``SQL LOGIN``でログインでアプリケーションがクラッシュしました。MySql ODBC Driver ``5.3``では問題ありません。

* ACI0099131 Write Proドキュメントのテキストと一緒にインライン画像をコピー＆ペーストした場合，テキストだけがペーストされ，画像はペーストされませんでした。

**注記**: 実際にはインライン画像もペーストされていたのですが，すぐにレンダリングされていませんでした。

* ACI0099130 Mac版のみ。View Proエリアのセルをクリックしてからテキスト編集モードのキャレットが表示されるまでに時間がかかりました。

* ACI0099127 すべて大文字のメールアドレスを設定した場合，``MAIL Convert to MIME``からエラーが返されました。

* ACI0099099 Write Proドキュメントのヘッダーに画像または表組を挿入した場合，マウスポインターをWrite Proエリア上で動かしたり，スクロール操作をするまで，エリアが再描画されませんでした。

* ACI0099117 オブジェクト型フィールドにインデックスが設定されたテーブルを暗号化した後，MSCでデータファイルを検査すると，インデックスの長さが無効であるというエラーが返されました。

* ACI0099108 4D ViewドキュメントをView Proに変換した場合，データ型が違う値を連結するようなフォーミュラが正しく変換されませんでした。

* ACI0099106 ``VP New Document ``を使用した場合，View Proエリアのタブストリップバーが消えました。

* ACI0099299 トランスポーターの``headerCharset``を``mail mode ISO2022JP``に設定した場合，ヘッダーが正しくエンコードされませんでした。

* ACI0099116 Write Proエリアに対して``OBJECT GET RGB COLORS``を使用した場合，``altBackgrndColor``に正しい値が返されませんでした。

* ACI0099480 プロジェクトモードでコンボボックスのデフォルト値を設定した後，その　内容を変更することができませんでした。Mac版では，アプリケーションがクラッシュしました。

* ACI0099479 プロジェクトモードでテキスト入力オブジェクトにフィルターを設定した場合，フィルター名にパイプ記号（``|``）が挿入されませんでした。

* ACI0099468 プロジェクトモードでリストボックスを複製した場合，ヘッダー・カラム・フッターのオブジェクト名がそのまま複製されました。

* ACI0099298 トランスポーターで送信した件名（日本語）が正しくエンコードされないことがありました。ヘッダーが``78``バイトを超える場合，UTF-8 quoted-printableの``3``バイトシーケンス（``9``文字）が分割されてしまうことがあるためです。
