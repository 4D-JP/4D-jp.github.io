---
layout: fix
title: "4D v17.4 Hotfix 1 修正リスト"
date: 2020-04-23 08:00:00
categories: 修正リスト
tags: 17.4 hotfix  
build: 251873
version: 17.4 Hotfix 1
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100540 長期間，サーバーを運用していると，管理画面の「新規接続を許可」が「拒否」に替わり，クライアントの新規接続ができなくなりました。この状態で「新規接続を拒否」ボタンをクリックした場合，アプリケーションがクラッシュします。

* ACI0100471 Windows版のみ。ビルド版のクライアントでビルド版のサーバーに接続した場合，リソースが同期されている間，デザインモードのメニューが表示されました。メニュー項目を実行することができませんが，いずれにしても，デザインモードのメニューは表示されるべきではありません。

* ACI0100171 Mac版のみ。``OCIEnvCreate``は，環境ハンドルの作成に失敗し，常にエラー``2``を返しました。

**注記**: ディスクイメージ版インストーラーに問題がありました。Oracleインスタントクライアントのダイナミックライブラリ``libclntsh.dylib``のパスが正しくありませんでした。

* ACI0099846 MySQL 8データベースをUnicode版のODBCドライバー経由で更新した場合，文字列の最後の１文字が記録されませんでした。

* ACI0099724 64ビット版のみ。ラベルの幅が用紙の幅を超過する場合，エディターを表示せずにラベル印刷を開始すると，「ゼロ除算」エラーが返されました。

**注記**: エディターを表示せずにフォームをラベル印刷した場合，32ビット版のラベルエディターが水平タブでラベルの幅を決定するのに対し，64ビット版のラベルエディターは用紙の幅に基づいてラベルの幅を決定します。

* ACI0099542 Windows 64ビット版のみ。「終了」メニューに標準アクションの「終了」が使用されておらず，代わりにプロジェクトメソッドが設定されている場合，MDIウィンドウを閉じようとしても，そのメソッドが実行されず，アプリケーションを終了することができませんでした。

* ACI0099378 クエリエディターを何度も繰り返し使用しているうちに，エディターからクエリの実行ボタンやクエリ条件の入力エリアが消えてしまうことがありました。

* ACI0098948 フランス語版のみ。フォームエディターのブレークを``Alt``クリックしてにブレークを追加した場合，正しくないブレーク番号が振られました。常に``0``番ブレークが追加されました。

* ACI0100551 ローカライズがポルトガル語またはスペイン語に設定されている場合，「4Dについて」ダイアログの内容が正しく表示されませんでした。
	
**注記**: 統合されているCEF版Webエリアは，ポルトガル語またはスペイン語のローカライズを正しく処理できないようです。問題を回避するため，両言語の文字列は「英語」ローカライズを経由して表示されるようになりました。

* ACI0100201 日本語に設定されていない環境で``SMTP_Attachment``または``Transporter``オブジェクトを使用し，日本語のファイル名をメールに添付した場合，エラー``-43``（無効なパス）が返されました。

* ACI0099771 テキスト入力エリアなどのフォームオブジェクトに関連づけられた選択リストまたは指定りストに項目を追加した場合，新しい値は表示されますが，実際に選択すると「許可されない値です」というエラーが返されました。

* ACI0098508 Mac 64ビット版のみ。出力フォームに大量（``300``個以上）の列が存在する場合，クライアント/サーバー版でレコードを選択するだけで，アプリケーションがビジー状態になりました。

* ACI0100580 Mac版のみ。リストフォームの詳細エリアに配置されたオブジェクトの「選択時に表示（非表示）」プロパティが正しく動作しませんでした。ACI0098508が修正されたことによる副作用のようです。

* ACI0100375 特定のストラクチャでは，デザインモードで表示したウィンドウの位置やサイズが再起動後に復元されませんでした。

**注記**: 問題が発生するのは，かなり古いバージョンで作成されたストラクチャです。そのようなストラクチャは，「デザインモードのウィンドウを復元しない」という設定が有効にされていることがあります。現バージョンの「データベース設定」には，この項目が存在しないため，ユーザーはこれを解除することができませんでした。

* ACI0100598 Windows版のみ。リストフォームの詳細エリアに配置されたスプリッターが表示されませんでした。ヘッダーエリアには表示されます。ACI098508が修正されたことによる副作用のようです。

* ACI0100570 フォントが指定されたスタイルがボールドとイタリックのどちらもサポートしていない場合（例：Elephant），SVGレンダリングエンジンおよび4D Write Proエリアは，デフォルトのフォント（例：Times New Roman）を使用しました。期待されるのは，ブラウザやWebエリアと同じように指定したフォントが表示されることです。

* ACI0099587 カレントセレクション型のリストボックスをクリックして行を選択した後，ヘッダーをクリックし，その後，上下矢印キーを使用した場合，間違った行が選択されました。

* ACI0100617 Windows版のみ。サーバー管理画面の「モニター」ページを表示していると，アプリケーションがクラッシュすることがありました。管理画面を閉じるか，最小化すれば，問題は発生しません。

* ACI0099964 ``DatePicker Display Dialog``の``defaultDate``パラメーターで指定した日付がデフォルトでウィジェットに表示されませんでした。

* ACI0099768 クイックレポートのマスターテーブルに削除されたフィールドが存在する場合，間違ったフィールドが挿入され，無効なフィールド番号が表示されました。

* ACI0100566 コンパイルモードでは，オブジェクト型フィールドのコレクション型プロパティをORDAで更新した場合，明示的にフィールド自体を更新（自己代入）しない限り，更新した内容が保存されませんでした。

* ACI0100549 64ビット版のみ。``SET MENU ITEM SHORTCUT``でメニューアイテムのショートカットの値を``0``に設定した場合，ショートカットの設定はクリアされますが，メニューには「Ctrl+」のように無効な情報が表示されました。

* ACI0100543 SQLステートメントの構文エラーが引き金となって，エラー処理メソッドがコールされた場合，トランザクションレベルがロールバックされました。

**注記**: ``UPDATE``や``INSERT``コマンドの実行中に返された通常のエラーであれば，問題は発生しません。``EXECUTE IMMEDIATE``のリクエストを解析中に発生したエラーでも，トランザクションがロールバックされました。

* ACI0100334 Mac版のみ。CEF版のWebエリアが表示したポップアップメニューをクリックした場合，アプリケーションがクラッシュしました。

**注記**: 問題を回避するため，v17のCEFは，Mac版に限り，バージョン``3497``にアップデートされました。通常，長期サポート版（LTS，いわゆるドットリリース）のサードパーティ製ライブラリがライフサイクルの途中で変更されることはありません。今回の修正は，例外的な措置です。

* ACI0100633 Mac版のみ。リスト型のサブフォームからダイアログを表示した場合，裏に隠れたサブフォームの行が選択された行以外は表示から消えました。

**注記**: 「リスト編集可」モードのリストフォーム全般の問題でした。

* ACI0100524 共有コレクションに対して``collection.clear()``を実行した場合，内部的に``Use`` ``End use`` のロック機構が使用されませんでした。そのため，別のプロセスがロックしているコレクションがクリアできてしまいました。

* ACI0099780 コンポーネントで作成したセマフォをクリアせずにプロセスを終了した場合，コンポーネントで作成したセマフォがクリアされませんでした。ホストで作成したセマフォは問題ありません。

* ACI0100676 4D Write Proドキュメントのコンテキストメニュー「ドキュメント＞参照を表示する」を連続して実行した場合，アプリケーションがクラッシュしました。

* ACI0100542 Windows版のみ。リストボックスのセルが編集されている最中に，リストボックスの列を非表示にするなど，オブジェクトの構造を変更した場合，アプリケーションがクラッシュしました。

* ACI0100693 ``Get system info``から返されるオブジェクトの``uptime``プロパティは，``MAXLONG/512`` （``4194304``）の倍数に達するたびにリセットされて``0``に戻りました。つまり，``Tickcount/60 ``がそのまま返されています。コンピューターの稼働時間を約``49``日までしか計測することができません。

**注記**: ``Tickcount``は，ティック数を``32``ビットで返します。修正により，``uptime``プロパティは別の手段でコンピューターの稼働時間を返すようになりました。一般的に，Windowsでは``GetTickCount64``，Macでは``sysctl``と``CTL_KERN`` ``KERN_BOOTTIME``，Linuxでは``clock_gettime``と``CLOCK_MONOTONIC`` ``timespec``が使用できます。

* ACI0100501 ``Get license info``から最新の情報を取得するためには，ライセンスのリフレッシュを実行する必要がありました。

* ACI0100620 日本語ではないシステム言語設定で日本語のファイル名を添付して``SMTP_Send``を実行した場合，エラー``-43``が返されました。

* ACI0100695 Windows版のみ，``SMTP_Attachment``で添付ファイルに追加したファイルがロックされたままになりました。アプリケーションを終了するまで，ファイルを削除することができません。

* ACI0100736 デザインモードからコマンドのオンラインドキュメントにジャンプすることができませんでした。ドキュメントのURL設定が間違っているためです。正しいURLは

```
http://doc.4d.com/4dv17.4/help/command/ja/
```

ではなく

```
http://doc.4d.com/4dv17/help/command/ja/
```

です。

* ACI0100556 Windows版のみ。CEF版Webエリアのテキスト入力にユーロ通過記号（``€``）を入力することができませんでした。代わりに「トーフ」が入力されます。32ビット版では問題ありません。ペースト操作であれば入力することができます。``Alt``キーを使用した特殊文字の入力全般の問題です。
