---
layout: fix
title: "4D 19 Hoftix 3 修正リスト"
date: 2024-03-26 08:00:00
categories: 修正リスト
tags: 19.7 hotfix
build: 291331
version: "19.7"
permalink: /2024/44/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0104290 ビット`4` (`16`) を指定せずに *Current process debug log* を有効化した場合，プラグインコマンドの呼び出しでアプリケーションがクラッシュしました。さきに全プロセスのデバッグログを有効化していれば問題ありません。

* ACI0104536 インデックスクエリを実行するとサーバーが突然に終了することがありました。

**注記**: DB4Dワーカーの内部的なリストを更新する仕組みが見直されました。内部的なリストが正しく管理されていないと，ワーカー数が理論的な上限である`32767`に達し，ある時点で新規の接続が使用済みのワーカーによって処理されるかもしれません。そのようなワーカーが，アイドル時間タイムアウトによるデータベースコンテキストの延期と再開を繰り返していると，やがて同一のデータベースコンテキストが同時に別々のクエリを実行してクラッシュを引き起こす可能性がありました。

* ACI0104406 テーブルに複合インデックスが設定されている場合，`QUIT 4D`の実行後にアプリケーションがフリーズすることがありました。「サーバー側で実行」メソッドで対象テーブルをクエリしたことがあると，現象が発生するようです。

* ACI0104582 フィールドの「重複不可」属性が無効に設定されたストラクチャファイルでフィールドの「重複不可」属性が有効に設定されていたデータファイルとインデックスファイルを開いた場合，データファイルの設定でストラクチャファイルが上書きされ，既存のレコードと値が重複するフィールドを保存することができなくなりました。

* ACI0104561 Windows版のみ。*Adobe Acrobat Pro* をカレントプリンターに設定して印刷した場合，アプリケーションがクラッシュしました。

**注記**: プリントドライバー側の問題です。印刷ジョブ名が設定されていないために`PSCRIPT5.DLL`がスタックオーバーランを起こしています。`OPEN PRINTING JOB`で明示的にプリントジョブを管理すれば，印刷セッション名が設定されるので，クラッシュは発生しません。あるいは，`SET PRINT OPTION`の*Spooler document name option* でPDFファイル名を明示的に設定することもできます（ファイル名がデフォルトの印刷セッション名になるため）。不具合は修正されましたが，印刷コマンドでPDFファイルを出力する場合は常にスプーラードキュメント名を設定することが勧められています。

* ACI0104549 新ネットワークレイヤーで「ドメインサーバーによるユーザーの認証」を有効にした場合，メモリーリークが発生し，クライアントがフリーズすることがありました。ACI0103215が修正されたことによる副作用です。

* ACI0104341 ORDAの`entity.clone()`を実行した場合，エンティティがロックされました。

* ACI0104550 `MIME-Version`や`Date`など，既定のヘッダーをメールオブジェクトで設定して`SMTP New transporter`で送信した場合，両方のヘッダーがMIMEに含まれました。一部のメールクライアントはヘッダーの重複に対応していないため，表示に問題がありました。いずれにしても，カスタムヘッダー値だけが送信されるべきです。
