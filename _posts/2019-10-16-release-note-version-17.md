---
layout: fix
title: "4D v17.3 Hotfix 1 修正リスト"
date: 2019-10-16 08:00:00
categories: 修正リスト
tags: 17.3 hotfix 
build: 242902
version: 17.3

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100047 Mac版のみ。macOS 10.15 Catalinaの4Dまたは4D Serverをインストールする際，個別のアプリではなく，「4D v17.3」フォルダーをそのままマウントされたディスクイメージからドラッグ＆ドロップした場合，インストールしたアプリが起動後すぐにクラッシュしました。ブラウザを使用してダウンロードしたファイルでなければ，問題はありません。システムをCatalinaにアップデートする前にインストールされたアプリであれば，やはり問題はありません。

**注記**: システムのGateKeeperがアプリの安全性を確認できないため，トランスローケション（隔離）された状態でアプリが起動されることにより，問題が発生します。クラッシュログに下記の情報が出力されている場合，アプリは隔離されています。

```
Path: /private/var/folders/*/4D.app/Contents/MacOS/4D
Notes: Translocated Process
```

修正により，フォルダーをドラッグ＆ドロップしても，アプリは隔離されないようになりました。ただし，v17.xおよび17r6バージョンの4Dアプリケーションは，コード署名が施されていますが，ノタリゼーション（公証）は省略されているので，システムをCatalinaにアップデートした後にインストールした場合，初回は``control``キーを押しながら起動する必要があるかもしれません。4Dで開発したMac版のアプリケーションにコード署名や公証を実施するかどうかは，デベロッパー各自が判断するべきことです。

* ACI0100059 Mac版のみ。macOS 10.15 Catalinaでクライアント/サーバー版アプリケーションの自動アップグレード（サーバーはWindows）を実行した場合，アップグレード処理中のダウンロードが完了したところでエラー``652``が返されました。

**注記**: 自動アップグレードを実行するUpdaterアプリは，必要に応じ，``~/Application Support/{appName}/4D/``にインストールされるようになっています。問題は，このバージョンが17.2や17r5など，Catalinaに対応していないバージョンだった場合に発生します。Updaterアプリは，ダウンロードしたばかりの新しいクライアントではなく，アップデートを開始した古いほうのクライアントからコピーされることに注意してください。つまり，ビルドした入れ替え用のアプリがCatalinaに対応していたとしても，クライアント側のアプリがCatalinaに対応していなければ，自動アップグレードは失敗することになります。これを避けるため，**システムをCatalinaにアップデートする前にクライアント/サーバー版アプリケーションの自動アップグレードを実行する**ことが勧められています。その場合，入れ替え用のアプリはCatalina対応版（17.3 242902以降）でビルドすることが重要です。すでにクライアント側のシステムがCatalinaにアップデートされている場合，前述した理由により，自動アップグレードは使用できないので，クライアントアプリをマニュアル操作でインストールする必要があります。

* ACI0100056 Mac版のみ。macOS 10.15 Catalinaで``Convert path POSIX to system``を実行し，相対パス（例：``/foo/../bar/``）を変換した場合，ドット文字がそのまま含まれた文字列が返されました。以前のバージョンでも，無効なパスが渡された場合にはそのような文字列が返されましたが，Catalinaでは，どのような相対パスでもドット文字がそのまま返されるようになりました。

* ACI0096906 クライアント/サーバー通信が暗号化されている場合，スリープ解除時にセッションを再開することができませんでした。

**注記**: v16以前のバージョンでは，暗号化されているクライアント/サーバー通信のスリープ検出はサポートされていません。

* ACI0099988 Windows版のみ。ビルドしたSDIアプリケーションのログイン画面をキャンセルした場合，非表示のタスクが残ってしまい，タスクマネージャーで強制的にタスクを終了するまで，アプリケーションを起動することができなくなりました。

* ACI0099197 Mac 64ビット版のみ。シートウィンドウを表示した場合，``On Activate`` ``On Deactivate``フォームイベントが発生しませんでした。

* ACI0100025 32ビット版のみ。テーブルが１個しか存在しないデータベースで，サブフォームオブジェクトの「ソース」プロパティを変更した場合，アプリケーションを再起動すると，プロパティリストの「ソース」が入力不可になりました。項目１個のポップアップメニューが表示されているためです。別のプロパティ項目をクリックした後であれば，通常の入力エリアに変化し，ロックされた状態が解除されます。ACI0100000が修正されたことによって引き起こされた副作用です。

* ACI0099962 トランザクション中に``SET QUERY AND LOCK``を使用し，``RELATE ONE SELECTION``を実行した場合，レコードがロックされているというエラーが返されました。``SET QUERY AND LOCK``は，ドキュメントに列挙されているクエリコマンド以外には影響がないはずです。

* ACI0100000 64ビット版のみ。サブフォームの「ソース」が「なし」に設定されているフォームを64ビット版で開いた場合，テーブルの第１フィールドがサブフォームの「ソース」になりました。

* ACI0098009 「フッターを表示」および「カラム自動リサイズ」が有効にされているリストボックスの列を水平方向にリサイズした場合，リストボックスの垂直スクロールバーが表示されませんでした。

* ACI0099746 Write Proエリアのスモールキャピタル（小文字と同じ高さの大文字）テキストにアンダーラインまたは取り消し線を適用した場合，一貫した位置にラインが描画されませんでした。

* ACI0098990 スタイル付きテキストを印刷コマンドでPDFに出力した場合，``span``タグの``text-align``スタイルプロパティがレンダリングに反映されませんでした。ACI0095913が印刷コンテキストでは修正されていませんでした。

* ACI0099875 デバッガで式をハイライト選択しただけでコマンドが実行され，フレームポインターが移動してしまうことがありました。

**注記**: 16r6以降，ヘルプTipsに情報を表示するため，デバッガでハイライトされた文字列は，特別なコンテキスト内で評価されるようになりました。そのため，``ALERT``や``QUIT 4D``のような命令文を完全にハイライトするようなことは避ける必要がありました。修正により，``4+8-2``や``False | True``のような単純な数式だけが評価され，``Semaphore``のように実行コンテキストに影響を与える関数は，評価されないようになりました。いずれにしても，ヘルプTipsの表示により，フレームポインターは移動しないようになりました。

* ACI0099239 ``QUERY BY ATTRIBUTE``およびORDAでは，オブジェクトフィールド内の属性に対して「リンク」したクエリを記述することができますが，日付型の属性では，これが正しく動作しませんでした。

例：

```
QUERY BY ATTRIBUTE([People];[People]OB_Field;"locations[a].city";=;"paris";*)
QUERY BY ATTRIBUTE([People];[People]OB_Field;"locations[a].creation_date";=;!2019-02-15!)
```

**注記**: v17で日付型がオブジェクト内に保存できるようになったことの副作用でした。``;String type without time zone ``（文字列）モードであれば，問題ありません。

* ACI0099874 プレースホルダーが設定されたフォームオブジェクトを``OBJECT DUPLICATE``で複製した場合，フォームの終了と同時にアプリケーションがクラッシュしました。

* ACI0099876 リストボックス ヘッダーの端をダブルクリックすると，内容に合わせてカラムの幅が自動的にリサイズされますが，画面上に表示されたリストボックスの行に非表示の行が含まれる場合，最小幅になりました。

* ACI0099730 リストボックスの「カラム自動リサイズ」および「スクロールしない列」を併用した場合，カラムのリサイズが不自然になりました。ウィンドウのリサイズあるいはヘッダーセパレーターのドラッグ＆ドロップで問題が発生します。

* ACI0099666 フォームのページ``0``にオブジェクトが配置されている場合，そのオブジェクトがフォーカス不可であったとしても，標準アクションのレコードナビゲーションを実行するたびにフォームオブジェクトのフォーカスが失われました。期待されるのは，タブ移動が有効に設定されている最初のフォーカス可オブジェクトにフォーカスが留まることです。

* ACI0099805 Mac版のみ。テキスト入力エリア間でドラッグ＆ドロップした場合，文字列が移動する代わりにコピーされました。コピーは「``option``キーを押しながらドラッグ＆ドロップ」操作のはずです。

* ACI0099908 クライアント/サーバー版のみ。日付のような形式の文字列，たとえば商品コード『1234-56-78』を文字列フィールドにORDAでアクセスした場合，``0000-00-00``が返されました。誤ってデータが日付型と判断されているためです。

* ACI0099586 カレントセレクション型のリストボックスがフォーカスされた状態で下矢印キーを入力した場合，最初の行がハイライトされます。この状態でクエリを実行し，レコードの並び順を変更してから，再び下矢印キーを入力した場合，最初の行ではなく，それまでハイライトされていた行（１行目）の下にある行が選択されました。期待されるのは，クエリの実行でハイライトがリセットされることです。

* ACI0099862 フッターの高さが１ページ目と２ページ目以降で違う4D Write文書をWrite Proに変換した場合，２ページ目以降の本文フレームが正しく変換されませんでした。

* ACI0099512 テキスト入力中に``home``キーを使用した場合，キャレットが行の先頭ではなく，段落の先頭に移動しました。``end``キーでも同様のことが起きます。

**注記**: Microsoft Wordの振る舞いに倣い，仕様が見直されました。

* ACI0098479 Windows版のみ。小さなWrite Proエリア上で右クリック操作をした場合，アプリケーションがクラッシュしました。

* ACI0095371 Mac版のみ。AppleScriptで4D Serverを終了した場合，エラー``-128``が返されました。

* ACI0099647 Windows 32ビット版のみ。クライアント側でウィンドウの開閉を繰り返していると，アプリケーションがクラッシュすることがありました。メニューバーの管理が関係しているようです。
