---
layout: fix
title: "4D v18 修正リスト"
date: 2019-11-19 08:00:00
categories: 修正リスト
tags: "18.0"  
build: 244577
version: 18.0

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099736 クライアント/サーバー版のみ。ORDAの``entity.drop()``が``dk force drop if stamp changed``モードで成功しなかった場合，返されるステータスオブジェクトの``success``に``True``が返されました。

* ACI0099730 リストボックスの「カラム自動リサイズ」および「スクロールしない列」を併用した場合，カラムのリサイズが不自然になりました。ウィンドウのリサイズあるいはヘッダーセパレーターのドラッグ＆ドロップで問題が発生します。

* ACI0099725 プロジェクトモードでフォームを開いた場合，「オブジェクト名」「タイトル」「メソッド」プロパティの入力中に``delete``キーを入力すると，入力がキャンセルされてキャレットが消えました。

* ACI0099723 Mac日本語版のみ。選択されたテキスト範囲の日本語フォントがWrite Proツールバーに認識されませんでした。英語フォント，あるいはシステム環境設定で言語が英語に設定されたMacであれば問題ありません。

* ACI0099719 クライアント/サーバー版のみ。エンティティに対応するレコードを従来のランゲージで更新した場合，``entity.reload()``を実行してもエンティティが最新の値に更新されませんでした。

* ACI0099718 クライアント/サーバー版のみ。エンティティのリレーション属性を更新して``entity.save()``を実行した場合，値が``undefined``になってしまい，``entity.reload()``でもエンティティのリレーション属性をリロードすることができませんでした。

* ACI0099711 4D Serverに大量のWebリクエストを送信し，300から400個のWebプロセスが常に実行中のとき，メニューまたは管理画面からWebサーバーを停止しようとした場合，アプリケーションがクラッシュしました。

* ACI0099692 プロパティリストにXLIFFシンタックスで入力したヘルプTipsがプ正しく登録されませんでした。

* ACI0099682 配列型リストボックスのコントロール配列を明示的に宣言しなかった場合，行の高さ配列はテキスト型の変数，行の制御配列は未定義の変数になりました。そのままアプリケーションをコンパイルモードで実行すると，フォームの動作が非常に遅くなりました。リストボックスだけでなく，他のテキスト入力エリアも影響を受けます。

* ACI0099824 ``Current user``を実行するとシステム変数``OK``に``1``が代入されました。

* ACI0099817 クライアント/サーバー版のみ。ストアドプロシージャで``Current user``を実行した場合，空の文字列が返されました。「サーバー上で実行」メソッドでは問題ありません。

* ACI0099810 Mac クライアント/サーバー版のみ。起動した直後に4D Serverが最前面アプリケーションになりませんでした。Dockのアイコンをクリックするまで，メニューバーが切り替わりません。

* ACI0099806 オブジェクトメソッドまたはフォームメソッドをプロジェクトモードに変換した場合，テーブル名が省略されたフィールドの参照が正しくトークナイズされずシンタックスエラーになりました。

* ACI0099805 Mac版のみ。テキスト入力エリア間でドラッグ＆ドロップした場合，文字列が移動する代わりにコピーされました。コピーは「``option``キーを押しながらドラッグ＆ドロップ」操作のはずです。

* ACI0099803 フォームエディターでページを削除したときに繰り上がって表示されるページにリストボックスが存在する場合，アプリケーションがクラッシュしました。

* ACI0099800 ``MAIL Convert to MIME``に``Null``が渡された場合，アプリケーションがクラッシュしました。

* ACI0099797 リストボックスに表示されたエンティティセレクションのカレント項目オブジェクトに対して``entity.next()``または``entity.previous()``を使用した場合，エンティティセレクションの最適化コンテキストではなく，カレント項目オブジェクトのバーチャルコンテキストのほうが使用されるべきですが，実際にはエンティティセレクションの最適化コンテキストが使用されてしまうため，フォームに表示されたリレーション属性のクエリにより，エンティティセレクションの最適化コンテキストに不要な属性が追加されてしまいました。

* ACI0099796 Mac版のみ。プロジェクトモードでリストボックスの「フォーカスの四角を隠す」プロパティを有効にしても，フォーカスの四角が表示されました。

* ACI0099795 プロジェクトモードで入力不可の階層リストに表示された項目を上下矢印キーや英字キーで選択することができませんでした。

* ACI0099794 アプリケーションパッケージ内に``%``記号から名前が始まる画像ファイルがあるためにWiseでインストーラーを作成することができませんでした。

* ACI0099789 Windows 64ビット版のみ。旧式プリントレイヤー（GDIモード）では，プリントプレビューで用紙の向きが無視され，横向き（landscape）に出力することができませんでした。

* ACI0099787 プロジェクトモードでフォームエディターを開いた場合，プロパティリストからプラグインエリアのカスタムプロパティ設定にアクセスできませんでした。ACI0099778と同じ問題です。	

* ACI0099784 Mac版のみ。多数のプロセスで同時に``Semaphore``でグローバルセマフォにアクセスした場合，プロセスが終了した後もシステムスレッドが残存し，やがてアプリケーションがクラッシュする恐れがありました。ローカルセマフォでは問題ありません。

* ACI0099783 Windows 64ビット版のみ。クイックレポートのページ設定ダイアログでページ余白を変更した場合，設定が保存されませんでした。

**注記**: 修正により，設定が保存されるようになりましたが，余白に指定が印刷に反映されない，という別の問題がありました（ACI0099994）。

* ACI0099777 互換性のデータベース設定「アプリケーション配布に新しいアーキテクチャーを使用する」が無効にしてサーバーアプリケーションをビルドした場合，最後に開いたデータファイルのパスが使用されず，毎回，「データファイルを作成または選択」ダイアログが表示されました。

* ACI0099776 フォームエディターとランタイムではデフォルトボタンの外観が違いました。

* ACI0099773 テキスト入力エリアのプロパティで自動ドラッグと自動ドロップを有効にした上で「ドラッグ可」と「ドロップ可」を無効にした場合，ドラッグ＆ドロップができませんでした。

* ACI0099764 互換性のデータベース設定「新しいコンテキスト参照モードを使用しない」「Webフォーム変数の自動代入」を外し，「未知のURLから``/``を取り除く」は残したままプロジェクトモードにエクスポートした場合，変換ログファイルには，すでに外されている前者を無効にしたというメッセージが出力され，強制的に外された後者の情報が出力されませんでした。

* ACI0099759 クライアント/サーバー版のみ。ORDAとクラシックランゲージの「橋渡し」コマンドを続けて実行した場合，エラー ``1303``が返されることがありました。たとえば，同じエンティティセレクションに対して``USE ENTITY SELECTION``を続けて使用した場合，１回目のコールで作成されたカレントセレクションのIDが解放されてから，２回目のコールで新しいカレントセレクションが作成されるべきですが，コマンドを続けて使用した場合，解放される前に新しいカレントセレクションが作成されてしまい，結果的にコンテキストIDが無効になってしまいました。

* ACI0099758 クライアント/サーバー版のみ。ORDAの``dataClass.query()``のクエリ文字列に``order by``指示を含めた場合，返されるエンティティセレクションがソートされていませんでした。

* ACI0099757 クライアント/サーバー版のみ。ORDAの``entitySelection.orderByFormula()``のフォーミュラをリテラル文字列で渡した場合，メモリ割り当てエラーが返されました。

* ACI0099746 Write Proエリアのスモールキャピタル（小文字と同じ高さの大文字）テキストにアンダーラインまたは取り消し線を適用した場合，一貫した位置にラインが描画されませんでした。

* ACI0099744 クイックレポートエディターの列をリサイズした場合，カラムに設定された``String([Table_1]Field_1)``のような数式が``C1``になりました。

* ACI0099742 クライアント/サーバー版のみ。``entitySelection.drop()``を実行した場合，ロックされているために削除できなかったエンティティの数が返されませんでした。

* ACI0099741 クライアント/サーバー版のみ。エンティティが参照しているレコードがすでに削除されている場合，あるいはスタンプが更新されている場合，あるいは重複するプライマリーキーが存在する場合，ORDAの``entity.save()``は失敗するはずですが，クライアント/サーバー版ではステータスオブジェクトの``success``プロパティに``true``が返されました。

* ACI0099740 クライアント/サーバー版のみ。保存オプションが「レコードの外」または「データファイルの外」に設定された属性が存在する場合，``dk auto merge``モードで実行したORDAの``entity.save()``は失敗するはずですが，クライアント/サーバー版ではステータスオブジェクトの``success``プロパティに``true``が返されました。

* ACI0099738 ``entity.lock()``が``dk reload if stamp changed ``モードで失敗した場合，スタンドアロン版では``ON ERR CALL``でエラーを処理することができませんでした。また，クライアント/サーバー版ではステータスオブジェクトにエラー情報（``status`` ``statusText`` ``wasReloaded``）が含まれていませんでした。


* ACI0099681 クライアント/サーバー版のみ。エンティティセレクション型のリストボックスの行をダブルクリックした場合，初回だけ一部の属性が``null``でした。

* ACI0099679 Windows版のみ。``SGV_ABOUT``メソッドを実行した場合，エラー``-9996``（スタック不足）が返されました。

* ACI0099676 クライアント/サーバー版のみ。ループ処理の中でORDAの``entitySelection.query()``をリレーション属性に対して実行した場合，初回した正しい結果が返されませんでした。ORDAの過剰なネットワーク最適化により，ループ処理の中でリレーション属性のエンティティがリロードされていないようです。

* ACI0099666 フォームのページ``0``にオブジェクトが配置されている場合，そのオブジェクトがフォーカス不可であったとしても，標準アクションのレコードナビゲーションを実行するたびにフォームオブジェクトのフォーカスが失われました。期待されるのは，タブ移動が有効に設定されている最初のフォーカス可オブジェクトにフォーカスが留まることです。

* ACI0099656 単一行のテキスト入力エリアで``page up`` ``page down``キーを入力した場合，``On After Keystroke``イベントが発生しませんでした。

* ACI0099647 Windows 32ビット版のみ。クライアント側でウィンドウの開閉を繰り返していると，アプリケーションがクラッシュすることがありました。メニューバーの管理が関係しているようです。

* ACI0099637 ストラクチャエディターのインスペクターに日本語でテーブルまたはフィールドの名前を入力した後，``return``キーを``3``回（日本語入力の確定・テキスト入力の確定・次のオブジェクトにタブ移動）してからストラクチャエディターのウィンドウをクリックし，再度，インスペクターのウィンドウをクリックしてテーブルまたはフィールドの名前を入力しようとした場合，日本語入力ができませんでした。インスペクターのウィンドウを閉じてから再表示させると，日本語入力ができるようになります。

* ACI0099619 64ビット版のみ。FTPコマンドでファイルがダウンロードできないことがありました。``FTP_GetDirList``は``MDTM``コマンドを送信しますが，サーバーがこのコマンドをサポートしていない場合，``FTP_Receive``でエラーが返されました。

* ACI0099616 メソッドエディターで``command``/``control``+``L``のキーボードショートカットを入力しても，「行番号に移動」ダイアログが表示されませんでした。

* ACI0099609 プラグインSDKのエントリーポイント``PA_GetVariable``で名前にアクセント文字が含まれている変数にアクセスした場合，変数が未定義とみなされました。

* ACI0099606 ``PRINT LABEL``のパラメーターを省略した場合，シンタックスエラーが返されました。具体的には``PRINT LABEL (aTable)``および``PRINT LABEL (aTable;*)``の構文が使用できませんでした。

* ACI0099594 リストボックスのヘッダー・列・フッターに設定されるデフォルトのオブジェクト名が正しくありませんでした。

**注記**: 修正により，日本語版ではデフォルトのオブジェクト名がローカライズされないようになりました。

* ACI0099586 カレントセレクション型のリストボックスがフォーカスされた状態で下矢印キーを入力した場合，最初の行がハイライトされます。この状態でクエリを実行し，レコードの並び順を変更してから，再び下矢印キーを入力した場合，最初の行ではなく，それまでハイライトされていた行（１行目）の下にある行が選択されました。期待されるのは，クエリの実行でハイライトがリセットされることです。

* ACI0099581 パラメーターを省略して``ds.startRequestLog()``を実行した場合，以前のコールで渡された数値（バッファサイズ）が継承されますが，初回のコールでパラメーターを省略した場合，関係のないエラーメッセージが返されました。

* ACI0099534 クライアント/サーバー版のみ。トランザクション中に時間型または日付型の属性に対して``collection.sort()``メソッドを実行した場合，結果が正しくありませんでした。

* ACI0099512 テキスト入力中に``home``キーを使用した場合，キャレットが行の先頭ではなく，段落の先頭に移動しました。``end``キーでも同様のことが起きます。

* ACI0099254 リストボックスやリストフォームをダブルクリックして詳細フォームに遷移した場合，ナビゲーション用の標準アクションボタンをクリックしてロックされているレコードから別のレコードに移動すると，ロックされていないレコードもロックされているように表示されました。

* ACI0099239 ``QUERY BY ATTRIBUTE``およびORDAでは，オブジェクトフィールド内の属性に対して「リンク」したクエリを記述することができますが，日付型の属性では，これが正しく動作しませんでした。

* ACI0099197 Mac 64ビット版のみ。シートウィンドウを表示した場合，``On Activate`` ``On Deactivate``フォームイベントが発生しませんでした。

* ACI0099079 送信メールの設定を``SMTP_SetPrefs (0;2;0)``にセットした場合，MIMEに挿入される改行コード（``CR`` ``LF``）の数が正しくありませんでした。

* ACI0099050 ラベルエディターを閉じてから，再び開いた場合，最後に使用したラベル設定ファイルがロードされた状態でダイアログが表示されませんでした。

* ACI0098990 スタイル付きテキストを印刷コマンドでPDFに出力した場合，``span``タグの``text-align``スタイルプロパティがレンダリングに反映されませんでした。ACI0095913が印刷コンテキストでは修正されていませんでした。

* ACI0098479 Windows版のみ。小さなWrite Proエリア上で右クリック操作をした場合，アプリケーションがクラッシュしました。

* ACI0098412 クイックリポートエディターでレポートを新規作成した場合，メニューに表示されるカラムの情報がリセットされませんでした。

* ACI0098009 「フッターを表示」および「カラム自動リサイズ」が有効にされているリストボックスの列を水平方向にリサイズした場合，リストボックスの垂直スクロールバーが表示されませんでした。

* ACI0096405 マウスポインターがサブフォーム内の入力可オブジェクトを指している場合，マウスのロールボタンでサブフォームをスクロールすることができませんでした。

* ACI0095371 Mac版のみ。AppleScriptで4D Serverを終了した場合，エラー``-128``が返されました。

* ACI0099901 インデックスが設定されたオブジェクト型エンティティに対し，複数のプロセスが同時にアクセスした場合，アプリケーションがデッドロック状態に陥ることがありました。

* ACI0099897 XLIFFシンタックスのヘルプTipsがプ正しく表示されませんでした。

* ACI0099895 Mac版のみ。4D WriteドキュメントをWrite Proに変換した場合，ヘッダーに余計な水平線が追加されました。

* ACI0099894 特定のタイムゾーン（例：パリ）では，4D View Proのセルに``=DATE(2019,11,1)`という日付を入力することができませんでした。

* ACI0099893 Write ProをHTML形式でエクスポートした場合，段落全体に適用されたアンダーラインが表示されませんでした。``<p>``タグのCSSクラス（``text-decoration: underline``）が``style``属性（``text-decoration: none``）にオーバーライドされています。

* ACI0099891 ORDAのネットワーク最適化が有効にされた状態で，テーブル間のＮ対１リレーションにアクセスした場合，１テーブル側のエンティティが正しくロードされないことがありました。

* ACI0099890 ``VP Convert from 4D View``でドキュメントを変換するたびにメモリーリークが発生しました。

* ACI0099889 Write Proドキュメントのテキストをすべて選択し，フォントのサイズ・カラー・スタイルを変更した場合，文末の空行には変更が適用されませんでした。

* ACI0099885 プロジェクトモードで``SET USER ALIAS``を使用し，ツールボックスのフィルターとフォーマットのページに移動した場合，シンタックスエラーが表示されました。

* ACI0099879 ``ALERT``で大量（``80000``文字以上）のテキストを表示した場合，Windowsでは，アプリケーションがフリーズし，Macでは空のメッセージボックスが表示されました。

* ACI0099876 リストボックス ヘッダーの端をダブルクリックすると，内容に合わせてカラムの幅が自動的にリサイズされますが，画面上に表示されたリストボックスの行に非表示の行が含まれる場合，最小幅になりました。

* ACI0099875 デバッガで式をハイライト選択しただけでコマンドが実行され，フレームポインターが移動してしまうことがありました。

**注記**: 16r6以降，ヘルプTipsに情報を表示するため，デバッガでハイライトされた文字列は，特別なコンテキスト内で評価されるようになりました。そのため，``ALERT``や``QUIT 4D``のような命令文を完全にハイライトするようなことは避ける必要がありました。修正により，``4+8-2``や``False | True``のような単純な数式だけが評価され，``Semaphore``のように実行コンテキストに影響を与える関数は，評価されないようになりました。いずれにしても，ヘルプTipsの表示により，フレームポインターは移動しないようになりました。

* ACI0099874 プレースホルダーが設定されたフォームオブジェクトを``OBJECT DUPLICATE``で複製した場合，フォームの終了と同時にアプリケーションがクラッシュしました。

* ACI0099873 ブール型エンティティをコレクション型リストボックスに表示させた場合，チェックボックスではなく，空のポップアップメニューが表示されました。アプリケーションを再起動した後は，問題ありません。初回だけの現象です。

* ACI0099871 スタンドアロン版のみ。``QUIT 4D``を実行すると，アプリケーションがハングすることがありました。ツールバーをフローティングウィンドウで表示するタイミングが関係しており，開発途上バージョン特有の一時的な不具合です。

* ACI0099869 ``On Web Close Process``データベースイベントで``WEB CLOSE SESSION``を実行しても。アクティブなWebセッションが閉じられませんでした。

* ACI0099868 Windows版のみ。SDIモードでアプリケーションを実行した場合，ボールド体またはイタリック体のようなスタイルが設定された項目が含まれるメニューのテキストはすべて空になりました。

* ACI0099862 フッターの高さが１ページ目と２ページ目以降で違う4D Write文書をWrite Proに変換した場合，２ページ目以降の本文フレームが正しく変換されませんでした。

* ACI0099860 Mac 旧式ネットワークレイヤーのみ。サーバー管理画面の「アプリケーションサーバー」ページから「プロセス」ページに切り替えたタイミングでアプリケーションがクラッシュすることがありました。

* ACI0099859 Mac版のみ。ビルド版のクライアント/サーバーアプリケーションの自動アップデート画面にカスタムアイコンが表示されませんでした。

* ACI0099853 クライアント/サーバー版のみ。プロジェクトモードでツールボックスを開き，グループのプラグインアクセス権を変更した場合，設定した内容が保存されませんでした。	

* ACI0099849 View Proドキュメントのセルの背景をファイル名だけで指定した場合，画像が表示されませんでした。4D View Proコンポーネントと同じ階層でファイルが探されているためです。	

**注記**: 修正により，リソースフォルダー，あるいはストラクチャまたはプロジェクトと同階層の画像ファイルが指定できるようになりました。

* ACI0099844 クライアント/サーバー版のみ。ループ処理でエンティティのリレーション属性にアクセスした場合，２巡目以降の処理で第２階層以降の値が返されませんでした。17r5で実施されたORDA最適化の副作用です。

* ACI0099840 エンティティセレクションに対し，``entitySelection.attribute``のようなコードで存在しない属性名を参照した場合，``entitySelection.first()``が返されました。期待されるのは，``ON ERROR CALL``で捕捉できるエラーが発生し，``Null``が返されることです。

* ACI0099834 プロジェクトモードでは，ボタンタイトルが空のオブジェクトに対して``OBJECT SET TITLE``を使用することができませんでした。

* ACI0099970 大規模なデータベースアプリケーションでは，デバッガのウィンドウが使用中に消えたり現れたりし，未保存のフォーミュラ式が前の内容に戻りました。小さなストラクチャでは，問題ありません。

* ACI0099967 システムスリープから復帰するタイミングで，アプリケーションがフリーズすることがありました。

* ACI0099962 トランザクション中に``SET QUERY AND LOCK``を使用し，``RELATE ONE SELECTION``を実行した場合，レコードがロックされているというエラーが返されました。``SET QUERY AND LOCK``は，ドキュメントに列挙されているクエリコマンド以外には影響がないはずです。

* ACI0099957 ``SET DATABASE PARAMETER``でデバッグログの出力を中止した後，``Get 4D file(Debug log file)``または``File(Debug log file)``でそのパスを参照した場合，アプリケーションがクラッシュしました。 

* ACI0099939 クライアント/サーバー版のみ。リストボックスにエンティティセレクションが表示されたフォーム上で，``entitySelection.next()`` ``entitySelection.previous()`` を実行した場合，リストボックスに表示されるべき属性をリフレッシュするためのリクエストがサーバーに送信されませんでした。

* ACI0099931 iPhoneのカメラで撮影した写真を4D for iOSのアクションメソッドに送った場合，画像の向きが正しくありませんでした。

* ACI0099924 Windows版のみ。「データベース設定 > データベース > テンポラリフォルダーの場所 > 次回起動時」が「システム」に設定されている場合，``C:\Users\{name}\AppData\Local\Temp\``に「4D」フォルダーが作成され，そこがテンポラリフォルダーのルートとなります。``entitySelection.orderByFormula()``のようなオペレーションを実行した場合，ストラクチャ毎のテンポラリフォルダーが必要に応じてテンポラリフォルダーのルートに作成されますが，ストラクチャ毎のテンポラリフォルダー作成はルートフォルダー内に作成されることが前提になっているため，アプリケーションの実行中にWindowsがTempフォルダーを自動的に削除した場合，ストラクチャ毎のテンポラリフォルダーを作成することができず，「シーケンシャルソートが完了できません」などのエラーが返されました。

* ACI0099911 すでに削除されたレコードをSQLクエリでロードしようとした場合，アプリケーションがクラッシュする恐れがありました。

* ACI0099909 ビューリストが表示された状態で，ピクチャまたはテキストをフォーム間でドラッグ＆ドロップした場合，エラー``-9996``（スタック不足）が返されました。

* ACI0099908 クライアント/サーバー版のみ。日付のような形式の文字列，たとえば商品コード『1234-56-78』を文字列フィールドにORDAでアクセスした場合，``0000-00-00``が返されました。誤ってデータが日付型と判断されているためです。

* ACI0099907 SQLの``ORDER BY``でカラムをフィールド名ではなく順序で指定した場合，アプリケーションがクラッシュすることがありました。

* ACI0099906 SQLサーバーを起動時に開始した場合，データベースサーバーが開始する前に外部SQLリクエストが処理され，アプリケーションがクラッシュすることがありました。``On Server Startup``データベースイベントで``START SQL SERVER``を実行し，コマンドでSQLサーバーを起動すれば，問題ありません。

* ACI0100033 クライアント/サーバー版のみ。リストボックスにエンティティセレクションを表示した場合，表示にとても時間がかかったり（``600``レコードに``40``ないし``50``秒程度），「リクエストをサーバーに送信できませんでした」というエラーが返されてクライアントが切断され，最終的にはクライアントがクラッシュすることがありました。テーブルにバイナリ形式のオブジェクト型フィールド（例：4D Write Pro）が存在する場合，ORDAの最適化メカニズムが正しく機能せず，``2GiB``を超えるHTTPリクエストが送信される可能性がありました。

* ACI0100027 エクスプローラーで項目を右クリックした場合，コンテキストメニューから新規メソッドを作成できるようになりましたが，コンポーネントメソッドまたはデータベースメソッドを選択してこのアクションを実行した場合，アプリケーションがクラッシュしました。

* ACI0100010 数値（リスト）型のタブコントロールオブジェクトをプロジェクトモードでエクスポートした場合，テキスト配列になりました。

* ACI0099997 ズーム率が設定されていない4D ViewドキュメントをView Proに変換した場合，ズーム率が``25%``の文書が出力されました。

* ACI0099989 バックアップを実行しても，``On Backup Startup``データベースメソッドが実行されませんでした。

* ACI0099988 Windows版のみ。ビルドしたSDIアプリケーションのログイン画面をキャンセルした場合，非表示のタスクが残ってしまい，タスクマネージャーで強制的にタスクを終了するまで，アプリケーションを起動することができなくなりました。

* ACI0099977 プロジェクトモードで階層リストを表示した場合，初期状態ですべてのアイテムが畳まれていました。

**注記**: JSONフォームのスキーマに``collapse``というプロパティが追加されていますが，このデフォルト値が``false``から``true``に変更されました。

* ACI0099984 4D WriteドキュメントをWrite Proに変換した場合，表組が正確にコンバートされないことがありました。垂直ライン（タブ）のカラーがブラックからやホワイトになったり，段落テキストと罫線の距離が狭くなったり，水平ラインが消滅したりしました。

* ACI0099899 64ビット版のみ。古いバージョンのラベルエディターで作成したラベル定義ファイル（``.4LB``）が読み込めないことがありました。

* ACI0099839 ``ST FREEZE EXPRESSIONS``を実行した場合，Write Proフッターに挿入されたページ数が「0ページ中の1ページ目」のように評価されました。

* ACI0100001 4D ViewドキュメントをView Proに変換した場合，数値フォーマットのカンマ（``,``）がピリオド（``.``）に置換されてしまいました。

* ACI0100067 Mac版のみ。macOS 10.15 Catalinaで``Convert path POSIX to system``を実行し，フォルダー区切り文字（POSIXでは``/``）が重複するパスを変換した場合，返される文字列が正しくありませんでした。POSIXでは，重複するフォルダー区切り文字が統合されて１個になるはずですが，重複するフォルダー区切り文字（システムでは``:``）がそのまま返されました。

* ACI0100017 Windows版のみ。コンピューターがオフラインの状態でブラウザにホスト名``localhost``を指定し，4DのWebサーバーにアクセスした場合，「一部のポート番号がすでに使用されています」というランタイムエラーが返されました。

* ACI0100056 Mac版のみ。macOS 10.15 Catalinaで``Convert path POSIX to system``を実行し，相対パス（例：``/foo/../bar/``）を変換した場合，ドット文字がそのまま含まれた文字列が返されました。以前のバージョンでも，無効なパスが渡された場合にはそのような文字列が返されましたが，Catalinaでは，どのような相対パスでもドット文字がそのまま返されるようになりました。

* ACI0100043 4D ViewをView Proに変換した場合，時間型の値が登録されたセルが正しく表示されないことがありました。値は存在するのですが，フォーマットが反映されていないようです。

* ACI0100045 ``HTTP Request``また``HTTP Get``でGoogleのAPIをコールした場合，ステータスコードには``200``が返されますが，レスポンスは空でした。17r5では問題ありません。

* ACI0100076 コンポーネントメソッドからWebサービス（SOAP）リクエストを実行することができませんでした。

* ACI0099462 CEF版またはWindows版のWebエリアでGoogleのようなサイトにアクセスした場合，システム言語がイタリア語に設定されていても，ページがイタリア語で表示されませんでした。

* ACI0099972 Mac版のみ。``IMAP_Login``または``POP3_Login``コマンドを実行すると，エラー`` -10089``（``SLI.DLL``がロードされていません）が返されました。

* ACI0099971 チェックボックス・グループボックス・スタティックテキストのラベルをフォームエディターのインライン入力で編集した後，「取り消す」アクションを実行した場合，アプリケーションがクラッシュすることがありました。``command``+``Z``を何度か入力すると問題が発生します。

* ACI0099966 Mac版のみ。macOS Mojave以降，ポップアップメニューのアイテムが以前のバージョンよりも少し高い位置に表示されました。

* ACI0099961 ボタンに標準アクションとオブジェクトメソッドの両方が設定されている場合，標準アクションの前にオブジェクトメソッドが実行されました。

**注記**: ボタンに標準アクションとオブジェクトメソッドの両方が設定されている場合の実行順序は，仕様としてこれまで明記されていませんでした。修正により，動作が統一され， 原則的に標準アクションのほうが**後に**実行されるようになりました。ただし，「レコード削除」アクションだけは，確認ダイアログが自動的に表示されるため，例外的に標準アクションのほうが先に実行されます。

<i class="fa fa-external-link" aria-hidden="true"></i> [標準アクション ](https://doc.4d.com/4Dv17/4D/17.3/Standard-actions.300-4639882.ja.html)

* ACI0099946 Windows版のみ。デザインモードを開いたタイミングでフォームエディターのウィンドウが最前面だった場合，メニューバーに「フォーム」「オブジェクト」などのメニューが表示されませんでした。

* ACI0099943 ``C_VARIANT``型の変数を``For``ループ処理のカウンターに使用した場合，内部エラーが返されました。

**注記**: 修正により，エラーメッセージの内容が具体的になりましたが，コンパイルエラーであることには変わりません。

* ACI0099936 クライアント/サーバー版のみ。日付フィールドに対してORDAの``entitySelection.max()``または``entitySelection.min()``を実行した場合，文字列で値が返されました。ACI0099908が修正されたことによる副作用のようです。

* ACI0099935 4D Viewから変換されたドキュメントを``VP convert to SVG``でコンバートすることができませんでした。

* ACI0099915 宣言コマンドの後，改行コードが含まれるブロック形式のコメントを記述した場合，ヘルプTipsにはコメントの内容（変数の注釈）が１行に連結されて表示されました。

* ACI0099912 英語版のみ。"occurred"の綴りが間違っている箇所がありました。

* ACI0099905 サーバー側のアクティベーション画面に編集メニューが存在せず，アカウント名やパスワードをペーストすることができませんでした。

* ACI0099881 Mac版のみ。ネットワークドライブ・マウントされたディスク・接続中のボリューム上に新規データベースを作成しようとした場合，エラーが返されました。

* ACI0099867 [データファイル用のユーザー設定](https://doc.4d.com/4Dv17/4D/17.3/User-settings.300-4639715.ja.html)を指定（``User settings for data``）して``OPEN SETTINGS WINDOW``をクライアント側で実行した場合，アプリケーションがクラッシュしました。

* ACI0099842 日本語版のみ。変換されたデータベースをコンパイルした場合，空のシンボルファイルが出力されることがありました。

* ACI0099830 バイナリ形式のストラクチャをファイルメニューからプロジェクト形式に変換した場合，「Settings」という名前のフォルダーが作成されました。中には「directory.json」というファイルがあります。

* ACI0099829 ODBC ドライバー（ビルド``239748``）でSQLサーバーに接続した場合，タイムアウトエラーが返されました。

* ACI0099791 プロパティ``lk auto row height``が``lk yes``に設定されている配列型リストボックスのカラムを動的に複製した後，``LISTBOX DELETE COLUMN``で削除した場合，クライアントがクラッシュしました。行の高さが自動に設定されていなければ，問題ありません。

* ACI0099778 プロジェクトモードのみ。フォームエディターのプロパティリストにプラグインエリアのタイプが表示されませんでした。

* ACI0100044 ``MAIL New attachment``にBLOBを渡すことができませんでした。

* ACI0100035 プロジェクトモードWindows版のみ。``listForm``プロパティに値がセットされたサブフォームが組み込まれたフォームを表示した場合，サブフォームが表示されませんでした。``listForm``プロパティが空であれば問題ありません。

* ACI0100034 ビルド``242387``以降，カレントレコードがロックされている状態で``READ ONLY``を実行すると，``Locked``が``False``に変化しました。

* ACI0100031 ツールバーインタフェースが表示された状態でView Proエリアに``.xlsx``ドキュメントをインポートすることができませんでした。リボンインタフェースであれば問題ありません。

* ACI0100015 ビルド``242129``以降，クライアントをサーバーに接続することができませんでした。

* ACI0099998 ``WP EXPORT DOCUMENT``でエクスポートした``.docx``形式のWrite ProドキュメントをMicrosoft Wordで開いた場合，エラーが返されることがありました。

* ACI0099995 プロジェクトモードのみ。フィールドや変数のプロパティリストに「デフォルト値」および「関連付け」プロパティが表示されませんでした。

**注記**: 修正により，「デフォルト値」が表示されるようになりました。フィールドや変数の「関連付け」は，プロジェクトモードに対応していません。

* ACI0099987 ``VP SET PRINT INFO``でView Proドキュメントの用紙サイズ（``paperSize``）を寸法ではなく，名称（``kind``）で設定した場合，正常なPDFが出力されませんでした。

* ACI0099982 ``SET ALLOWED METHODS``で有効にしたパラメーター有りのメソッドをView Proのフォーミュラでコールした場合，エラーが返されました。

* ACI0099975 Windows版のみ。フォームエディター上で複数のオブジェクトを選択して，整列ツールで位置を揃えることができませんでした。

* ACI0099973 外部データファイルにBLOB配列をクライアント側から追加した場合，サーバーがクラッシュしました。

* ACI0100086 プロジェクトモードのみ。コレクション型のリストボックスの「座標とサイズ」「行の高さ」プロパティが表示されませんでした。

* ACI0100068 フォーミュラオブジェクトに渡されるべきパラメーターを省略した場合，エラーが返されました。

* ACI0100055 Windows版のみ。Default dataのメカニズムを使用している場合，``On Startup``の前にビルド版のサーバーアプリケーションがクラッシュする可能性がありました。

* ACI0100054 角の丸い四角形が含まれるラベル定義ファイル（``.4lbp``）をラベルエディターで開こうとした場合，エラーが返されました。

* ACI0100012 カスタムコンテキストメニューのアイテムから標準アクションの``spell/suggestion?index=``を実行することができませんでした。一度でも標準のコンテキストメニューからスペルチェックを実行すれば，問題ありません。ライブラリの初期化ができていないようです。

* ACI0100007 ボタンのクリックイベントでWrite Proドキュメントのアンカー画像に対して標準アクションの``mage/width?value=``を使用した場合，画像の選択が解除されてしまい，幅を変更することができませんでした。インライン画像であれば問題ありません。

**注記**: 修正により，「選択を常に表示」プロパティが有効にされていれば，エリアのフォーカスが失われても，画像の選択は保持されるようになりました。

* ACI0099941 ``C_VARIANT``型の変数を``Execute on server``に渡した場合，コンパイルエラーが返されました。

* ACI0099812 4D WriteドキュメントをWrite Proに変換した場合，アンカー画像のフィールド参照が正しく表示されませんでした。新規Write Proドキュメントでは問題ありません。

* ACI0099921 ``WP Get style sheets``から返されるコレクションに対して``collection.concat()``を実行した場合，Write Proドキュメントが破損しました。

* ACI0100061 プロジェクトモードのみ。フォームに追加したボタンオブジェクトの「レンダリングしない」プロパティがデフォルトで有効に設定されていました。

* ACI0100070 プロジェクトモードMac版のみ。高さ``20``のポップアップ/ドロップダウンメニューをバイナリモードで作成し，プロジェクトモードに変換した場合，フォームエディター上でオブジェクトが途切れて表示されました。

* ACI0100042 ビルド``242456``以降，``WP New``にBLOBを渡すことができませんでした。

* ACI0100040 プロジェクトモードのみ。ペーストボード画像をフォームエディターにペーストしても，スタティックピクチャが追加されませんでした。

* ACI0100021 リストボックスの空行に項目をドロップした場合，``Drop position``が``-1``を返しませんでした。行の高さが自動設定でなければ問題ありません。

* ACI0099969 Mac 64ビット版のみ。``SET PRINT OPTION``で``Spooler document name option``を設定した場合，プリントダイアログの「PDFとして保存」または「Postscriptとして保存」のデフォルトファイル名には設定が反映されませんでした。

* ACI0099821 64ビット版のみ。``SMTP_SetPrefs``で改行コードの挿入モードを``1``（デフォルト値）に設定しても，メール本文の改行コードが``CR`` ``LF``に置換されませんでした。
 
* ACI0100105 ``EXECUTE METHOD``に３個以上のパラメーターを渡した場合，シンタックスエラーが返されました。

* ACI0100097 ``SVG_New``の速度が以前のバージョンよりも遅くなりました。ループ処理でSVGを作成すると，特に問題が顕著です。

**注記**: 内部的に``Get System info``が実行されていることが原因でした。

* ACI0100092 ``Open datastore``で接続したリモートデータストアのエンティティを``entity.drop()``で削除した場合，レコード削除時トリガからスレッドアンセーフなメソッドが実行されると，アプリケーションがクラッシュしました。

* ACI0100083 ``Open datastore``で接続したリモートデータストアのエンティティを``entity.locked()``でロックした後，そのエンティティに``Null``を代入した場合，デッドロック状態に陥りました。

* ACI0099932 Mac 64ビット版のみ。``SET FILE TO PASTEBOARD``で複数のファイルパスをペーストボードにセットすることができませんでした。

* ACI0099884 ``EXPORT DATA``に渡されたプロジェクトがエクスポートに反映されませんでした。

* ACI0099882 64ビット版のみ。印刷したラベルのレイアウトが32ビット版と違いました。32ビット版では``3``列``14``行のラベル設定が，64ビット版では，同一のフォーム・ページ設定・プリント設定なのに``4``列``11``行になりました。

* ACI0099775 4D for iOSのセクションタイプのフィールドには，日付あるいは時間型のデータフォーマッターが適用されませんでした。

* ACI0099748 セルにメソッドのコールバックが設定されたView Proドキュメントに表示に時間がかかりました。

* ACI0099737 クライアント/サーバー版のみ。``ORDER BY ATTRIBUTE``でテーブルを跨いだソートを実行した場合，２回目のコールでエラーが返されました。

* ACI0099704 クライアント/サーバー版のみ。トリガをWindowsでトレースすることができませんでした。空のデバッガが表示されました。

**注記**: 4D Serverが新しいスレッドモデルに移行したことが関係していました。新しいスレッドモデルは，4D Server.exeの隣に``noThreadedFibers.prm``という名前のファイルを置くことにより，無効にすることができます。

* ACI0099414 4D View Proのスウェーデン語日付フォーマット（``vk pattern full date time`` ``vk pattern long date``）が正しくありませんでした。

* ACI0100101 クライアント/サーバー版のみ。``entitySelection.add()``で追加したエンティティが``USE ENTITY SELECTION``で作成したカレントセレクションに含まれませんでした。

* ACI0100098 ``Cache info``を実行した場合，クライアント/サーバー版ではヌル終点エラーが返され，シングルユーザー版ではアプリケーションがクラッシュしました。

* ACI0100093 プロジェクトモードのみ。カレントセレクション型または命名セレクション型のリストボックス のプロパティリストに「座標とサイズ」「行の高さ」が表示されませんでした。

* ACI0100028 「デザインモード検索」でリストボックスの列を特定した後，フォームエディターにジャンプしてコンテキストメニューから列を削除した場合，指定した列の左隣にある列が削除されました。エクスプローラーからフォームにジャンプした場合は問題ありません。

* ACI0100145 プロジェクトモードのみ。``shift``+クリック操作で複数のフォームオブジェクトを選択した場合，アプリケーションがクラッシュしました。

* ACI0100135 プロジェクトモードのみ。フォームエディターに配置されたピクチャ変数の高さがバイナリモードと同じではありませんでした。

* ACI0100112 4D View ProをSVGに変換した場合，セルの数式``=date(2019,12,12)``が正しく表示されませんでした。日付ではなく，数値が出力されました。

* ACI0100111 トランスポーターで送信したメールの件名が正しくエンコードされていませんでした。``quoted-printable``のテキストがiOS版のメールアプリにそのまま表示されることがありました。

* ACI0100107 4D ViewドキュメントをView Proに変換した場合，アプリケーションがフリーズする場合がありました。

* ACI0100080 プロジェクトモードのみ。メソッドエディターのコードを編集したり，プロパティを変更したりするたびに改行コードが変化してしまうため，効率的にバージョン管理システム（差分の表示）が利用できませんでした。

**注記**: メソッドファイル（拡張子``.4dm``）は，コードを編集するとバイトオーダーマーク（BOM）付きのUTF-8エンコーディング，改行コードは``CR`` ``LF``でエクスポートされ，プロパティを変更すると，改行コードは``LF``でエクスポートされました。修正により，改行コードは``LF``に統一されました。

* ACI0099938 トランスポーターで送信したメールの添付PDFファイルがiOS版のメールアプリに表示されない場合がありました。画像とPDFの両方を添付した場合に問題があります。PDF単体では問題ありません。Androidデバイスでは問題ありません。

* ACI0100130 ランタイムが``TRACE``コマンドに遭遇すると，デザインアクセス権がないログインユーザーでもデバッガが表示されました。

* ACI0100122 ``ZIP Create archive``で巨大なファイルを処理した場合，アプリケーションがフリーズしました。

* ACI0100115 Write Proツールバーのテーブルツールにアイコンがありませんでした。

* ACI0100106 Windows版のみ。実行メニューでコンパイルモードに移行し，``On Startup``データベースメソッドで``ALERT``を表示し，ダイアログを閉じた場合，実行メニューが表示されないため，コンパイルモードからインタープリターモードに復帰することができませんでした。

* ACI0099782 フォームに組み込んだクイックレポートの出力先をコンテキストメニューで選択した場合，エラー``9850``が返されました。

* ACI0100013 4D ViewドキュメントをView Proに変換した場合，セル内のテキスト改行コードが失われました。

**注記**: 変換されたスプレッドシートは，デフォルトで``multiline``オプションが有効にされていませんでした。4D Viewの場合，``multiline``は常に``True``であり，``wordwrap``は任意でした。View Proの場合，``wordwrap``を有効にしない限り，``multiline``を有効にすることはできません。修正により，``multiline``は``True``にセットされますが，4D View で``wordwrap``が無効にされている場合，テキストをセル内で折り返して表示させるためには，View Proに変換した後，``wordwrap``を有効にする必要があります。

* ACI0100108 ``VP convert to picture``にレンジを渡した場合，指定したレンジの値が正しく変換されない場合がありました。

**注記**: ``VP combine range``で作成した複合的なレンジをコマンドに渡した場合，最初のレンジだけが処理され，残りは無視されます。これは仕様です。

* ACI0100094 表組の左上セルに外部からコピーしたデータをペーストした場合，値が表組の外に挿入されました。

* ACI0100152 Windows版のみ。``HIDE TOOL BAR`` をバックグランドで実行すると，``On application foreground move``データベースイベントが発生しました。最前面アプリケーションが入れ替わったタイミングでツールバーの表示・非表示を切り替えたいのに，ツールバーが点滅するだけで，アプリケーションが最前面から移動できない状態になりました。

* ACI0100009 RESTサービスで公開中のデータストアのエンティティが``entity.lock()``でロックされた状態で，Webサーバーを再起動した場合，エンティティはアンロックされますが，アプリケーションがフリーズしました。

* ACI0100003 RESTサービスで公開中のデータストアのエンティティが``entity.lock()``でロックされた状態で，``remoteDatastore.releaseSession()``を実行してセッションを閉じた場合，エンティティがアンロックされませんでした。

* ACI0100143 Mac版のみ。macOS MojaveあるいはCatalinaでは，4D for OCIプラグインがロードされませんでした。

* ACI0100142 プロジェクトモードのみ。線オブジェクトをグループに含めることができませんでした。

* ACI0100131 プロジェクトモードのみ。四角形オブジェクトのボーダーが綺麗に描画されませんでした。

* ACI0100128 Mac版のみ。4D WriteのBLOBデータを``WP New``に渡した場合，アプリケーションがクラッシュすることがありました。

* ACI0100126 プロジェクトモードのみ。ボタンオブジェクトのバインド変数をプロパティリストで削除することができませんでした。

* ACI0100147 プロジェクトモードのみ。フォームエディターで選択中のオブジェクトを``shift``+クリックで選択解除することができませんでした。

* ACI0100114 エクスプローラーのコマンドテーマ表示に間違いがありました。「配列」「4D環境」の代わりにエラーメッセージが表示されました。

* ACI0100141 トランスポーターでメールを送信した場合，件名の``?``文字が正しくエンコードされませんでした。

* ACI0100144 特定のフォミュラが埋め込まれた4D ViewドキュメントをView Proに変換しようとした場合，「4D Viewドキュメントが壊れています」というエラーが表示されることがありました。

* ACI0100174 タイムアウトにより，リモートデータストアのセッションが解放された場合，クライアント側のエンティティがロックされたままになることがありました。

* ACI0100132 プロジェクトモードのみ。四角・楕円・線オブジェクトのラインカラーをプロパティリストの``control``+クリックでリセットすることができませんでした。

* ACI0100120 Mac版のみ。変換されたデータベースで「メソッドをUnicodeで保存」が有効にされていない場合，ブロックコマンドを入力したメソッドを閉じてから開くと，従来のラインコメントに変換されました。インラインコマンドの場合，コメント以降のコードがすべてコメントになってしまいました。

**注記**: 修正により，「メソッドをUnicodeで保存」が有効にされていないデータベースは，ブロックコメントが入力できないようになりました。

* ACI0100051 「評価期間が終了しました」というメッセージがいつまでも表示されました。

* ACI0100118 クライアント/サーバー通信が暗号化されている場合，クライアント/サーバー接続のタイムアウトが経過しても，接続を解除したクライアントがいつまでもサーバー側のユーザーリストに残されました。

* ACI0100026 View Proエリアのセル値を``VP SET TEXT VALUE``で変更した場合，値がフォーミュラバーに反映されませんでした。別のセルをクリックしてから対象のセルをクリックしたり，対象のセルをダブルクリックすると，値がアップデートされます。

* ACI0099959 UTF-8エンコーディングのCSVファイルを「ファイルからデータを読み込み」メニューのインポートダイアログで読み込もうとした場合，アラビア文字が正しくプレビューエリアに表示されませんでした。

* ACI0100160 ``ST FREEZE EXPRESSIONS``で評価したWrite Proドキュメントのフォーミュラが空の文字列（``""``）だった場合，スペース（``" "``）がテキストに挿入されました。

* ACI0100163 Mac版のみ。``On REST Authentication``データベースメソッドの第``4``パラメーターに渡されるIPv4アドレスに``::ffff:``というプリフィックスが付けられていました。

* ACI0100155 v18にデータベースを変換した場合，バックアップファイルのカウンターがリセットされました。

* ACI0099937 ``USE ENTITY SELECTION``でエンティティセレクションを作成した後，``DUPLICATE RECORD``と``SAVE RECORD``を実行した場合，カレントレコードではなく，複製したレコードがエンティティセレクションに追加されました。

* ACI0100204 ``VP convert to SVG``コンポーネントメソッドでSVGに変換したView Proドキュメントの指定したレンジの右下のセルに値が存在する場合，範囲エラーが返されました。

* ACI0100189 View Proドキュメントのセルに名前を設定することができませんした。

* ACI0100159 ``Open datastore``コマンドでサーバーに接続したスタンドアロン版を終了した場合，非セキュアなセッションは閉じられますが，TLSセッションは閉じられませんでした。

* ACI0100156 View Proエリアにドキュメントが完全にロードされていない状態で``VP EXPORT DOCUMENT``を実行した場合，アプリケーションがクラッシュしました。

* ACI0100057 ORDAの``IN``クエリにコレクションで渡された文字列の最後にワイルドカード（``@``）が使用されていた場合，正しい結果が返されませんでした。

* ACI0100218 インデックスが設定されたオブジェクト型フィールドに対し，ORDAの``IN``クエリを実行した場合，アプリケーションがクラッシュしました。

* ACI0100140 プロジェクトモードのみ。ボタンのアイコンがオブジェクトの枠外に描画されることがありました。

**注記**: ボタンタイトル内の改行により，オブジェクトの高さが自動的に補正されることが問題でした。修正により，標準ボタン以外は，高さが調整されないようになりました。

* ACI0100134 バイナリデータベースをプロジェクトモードにエクスポートした場合，フォーム上の格子オブジェクトが正しく変換されませんでした。

**注記**: バイナリデータベースのプロパティリストに問題がありました。ボーダーのスタイルが「なし」に設定されている場合，罫線のカラーが記録されないからです。修正により，格子オブジェクトをSVGに変換する処理で罫線のカラーが設定されるようになりました。

* ACI0100011 ``Open datastore``でリモートデータストアに接続した後，そのサーバーが停止した状態で``entity.save()``を実行した場合，エラーが返されませんでした。``entity.drop()``では問題ありません。

* ACI0099081 エンティティセレクションの無効なプロパティ名（存在しない属性名）にアクセスした場合，エラーにはならず，エンティティが返されました。``Null``が返され，``ON ERR CALL``でキャッチできるエラーが発生するべきです。
