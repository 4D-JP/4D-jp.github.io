---
layout: fix
title: "4D v17 修正リスト"
date: 2019-04-24 17:10:00
categories: 修正リスト
tags: "17.1" 
build: 236733
version: 17.1

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099428 リストボックスの列に対するポインターを``Form``のプロパティに代入し，オブジェクト記法とポインターの逆参照を併用して行の値を代入した場合，右オペランドではエラー``56``が返され，左オペランドでは配列が更新されませんでした。オブジェクト記法をカッコで括れば問題ありません。

```
(Form.column)->{$index}:=(Form.column)->{$index}*10
```

* ACI0099485 クライアント/サーバー版のみ。エンティティを代入文の右オペランドに使用したただけで``entity.touched()``が``True``を返しました。

* ACI0099470 インデックス作成中に表示される進捗バーのメッセージにレコード数が表示されませんでした。

* ACI0099407 Windows版のみ。``LISTBOX SELECT ROW``に``lk remove from selection``を渡した場合，数秒後にアプリケーションがクラッシュしました。

* ACI0099457 表組で終わるWrite Proドキュメントの終わりにページ・カラム・セクションブレークを挿入した場合，ページブレークが正しい位置に挿入されませんでした。

* ACI0099358 ラテンシーが高い（つまり転送が遅い）ネットワークに接続された別々のプラットフォームでクライアントとサーバーを起動し，新ネットワークレイヤーでクエリを実行した場合，旧式ネットワークレイヤーよりも時間がかかりました。

* ACI0099415 テキスト入力の背景が明るい色（たとえば黄色）に設定されている場合，キャレットが良く見えませんでした。

**注記**: キャレットの色は，背景の輝度によって決められていました。修正により，背景のグレースケールの輝度によって決められるようになりました。

* ACI0099393 4D WriteドキュメントをWrite Proに変換した場合，先頭ページを除くすべてのページに表示されるピクチャが先頭ページにも表示されました。

* ACI0098482 Windows版のみ。地域と言語の設定を「英語（オーストリア）」に設定した場合，アプリケーションが起動しませんでした。

* ACI0099445 RESTプロセスを途中でアボートした場合，HTTPステータスコード``200``および``null``が返されました。また，以降のRESTリクエストが実行されなくなりました。

**注記**: 修正により，RESTプロセスがアボートされた場合，HTTPステータスコード``500``が返されるようになりました。また，``ON ERR CALL``でエラーハンドリングメソッドがインストールされていない場合，下記のようなレスポンスが返されるようになりました。

```json
 "__ERROR": [
        {
            "message": "Error code: 53 (4DRT)\nインデックス範囲を越えています。\ncomponent: '4DRT'\ntask -6, name: 'REST'\n",
            "componentSignature": "4DRT",
            "errCode": 53
        }
    ]
```

* ACI0098029 SQLの``LEFT OUTER JOIN``から返される結果が正しくありませんでした。LEFTテーブルに合致するレコードがRIGHTテーブルに存在しないとしても，LEFTテーブルの行はすべて返され，合致するレコードが存在しないRIGHTテーブルの行には``Null``が返されるべきですが，そのような行は返されませんでした。

* ACI0099400 Windows版のみ。``DISPLAY SELECTION``または``MODIFY SELECTION``でリストフォームを表示しているウィンドウが最前面ではない状態で``CLOSE WINDOW``を実行してウィンドウを閉じようとすると，アプリケーションがクラッシュすることがありました。

* ACI0098693 Mac版のみ。4D Progressコンポーネントを使用しているとシンタックスエラーが表示されることがありました。

**注記**: コンポーネントがv16でコンパイルされており，廃止予定コマンドの``_o_PLATFORM PROPERTIES``を内部的にコールしていたことが原因でした。

* ACI0099309 64ビット版のみ。``DBF``形式で文字列またはテキスト型のフィールドをエクスポートした場合，データが``15``文字でトランケートされました。32ビット版では，``80``文字までエクスポートできました。

* ACI0097749 Windows版のみ。地域と言語が「ニューカレドニア（フランス語）」に設定されたシステムでは，アプリケーションを起動することができませんでした。

* ACI0099283 クライアント/サーバー版のみ。多数のプロセスウィンドウを立て続けに閉じた場合，クライアントがクラッシュすることがありました。

* ACI0099264 Windows SDIモードのみ。アプリケーションのウィンドウが最前面ではない場合，まずウィンドウをクリックして最前面に移動してから，改めてドラッグする必要がありました。期待されるのは，最初のクリックでそのままウィンドウがドラッグできることです。
	
* ACI0099329 ``C_BLOB``で型宣言していない未定義の変数を``GENERATE CERTIFICATE REQUEST``に渡した場合，アプリケーションがクラッシュしました。

* ACI0099118 64ビット版のみ。クイックレポートの出力形式にカスタムHTLMテンプレートを指定した場合，常にデフォルトのテンプレートが使用されました。

* ACI0099385 エクスプローラーでフォームを複製した場合，オブジェクトメソッドに大量の改行コード（``\``）が挿入されることがありました。すべてのオブジェクトで発生するわけではありません。ストラクチャ間のドラッグ＆ドロップでも同じ問題が発生します。

**注記**: オブジェクトメソッドの内部バージョンコードが``0``であり，メソッドコードの隙間を埋める文字（非常に古いバージョンの4Dでは使用されていませんでした）におかしなコードが含まれている場合に発生するようです。つまり，長い間，ずっと編集されていなかったオブジェクトメソッドで問題が発生する傾向があります。メソッドエディターでスクリプトを開いて再保存すれば，問題は自然に解消します。

* ACI0099359 テキスト入力オブジェクトの「自動ドラッグ」「自動ドロップ」を無効にし，「入力可」「ドラッグ可」「ドロップ可」プロパティを有効にした場合，テキストの範囲を選択しようとすると，``On Begin Drag Over``イベントが発生しました。Write Proエリアでも同じ問題が発生します。キーボード操作であれば，テキストを選択することができます。

* ACI0099320 Mac版のみ。高さが１行のテキスト入力エリアオブジェクトをv16で作成し，「ヒラギノ」フォントを設定して，v17に変換した場合，テキストのベースラインが高くなって「ぶら下がり（デセント）」が表示される代わりに上部（アセント）のピクセルが不足しました。

**注記**: スタイル無しの標準テキスト入力エリアが修正されました。スタイル付きテキストやWrite Proエリアのレンダリングはこれまでどおりです。

* ACI0099384 再帰的な参照が含まれるオブジェクト型に対して``Entity.toObject()``を実行した場合，アプリケーションがクラッシュしました。

* ACI0099370 入れ子構造に設置されたサブフォームオブジェクトのデータソースに``FORM``という変数名を設定した場合，コンパイルモードでサブフォームのオブジェクトメソッドが実行されませんでした。

* ACI0099312 リストボックスの行を別のリストボックスの上にドラッグした場合，ドラッグ先のリストボックスの``On Drag Over``でドロップ操作が禁止したときはマウスポインターが「進入禁止」アイコンに変化しましたが，禁止しなかったときはマウスポインターが「追加」アイコンに変化しませんでした。ドラッグ元のリストボックスの「行の移動可」プロパティを無効にすれば，ドラッグの開始と同時にポインターが変化します。

**注記**: 修正により，ドラッグ元の「行の移動可」プロパティが有効に設定されていても，ドラッグ＆ドロップ操作で「コピー」と「移動」の両アクションがセットされるようになりました。

* ACI0099296 4D Mobile（Wakanda）の``lock()``APIで実行したレコードのロックを``unlock()``で解除することができませんでした。 

* ACI0099112 ``ALERT`` ``CONFIRM``などのモーダルウィンドウが表示された状態で``SET MENU BAR``にオプション（``*``）を渡して実行した場合，メニュー項目が選択不可になりました。

* ACI0099348 ボタンに設定された標準アクションの「デザインモードに移動」でデザインモードに移動することができませんでした。

* ACI0099339 １ページ目のフッターに挿入された``$wp_pageCount``フォーミュラの値が正しくありませんでした。ページ総数に関係なく，常に``1``が挿入されました。以降のページでは問題ありません。

* ACI0099295 アプリケーションの起動時モードが「アプリケーション」に設定されており，スプラッシュウィンドウが非表示に設定されている場合，デザインモードに移動するためには，標準アクションの「デザインモードに移動」を２回実行する必要がありました。

* ACI0099273 テキストまたは階層リストから4D Write Proエリアのヘッダーまたはフッターにテキストをドラッグ＆ドロップすることができませんでした。

* ACI0099262 キーボードショートカットのスウェーデン語の文字（``Å`` ``Ä``など）を設定することができませんでした。

* ACI0098505 Windows版のみ。4D Serverを管理者アカウントで実行されるサービスとして登録すれば，ユーザーがサーバーにログインしていなくてもサービスが起動されるようになりますが，その場合，自動アップグレードの実行後に一時フォルダーが削除されませんでした。

**注記**: 修正により，一時フォルダーをごみ箱に移動できない場合，そのままフォルダーが削除されるようになりました。

* ACI0098160 ``Get system info``から返されるオペレーションシステム名（Windows Professional, Windows Professionnelなど）は，プラットフォームの言語に左右され，Mac版では"build", "version"などのワードを含む形式で返されました。また，Windows 10のバージョンを区別することができませんでした。

**注記**: 修正により，プラットフォームや言語に左右されない統一の形式で情報が返されるようになりました。

  * macOS 10.14.2 (18C54)
  * Windows 10 Enterprise 1809 (17763.107)
  * Windows 10 Pro 1809 (17763.107)

* ACI0099332 Windows 32ビット版のみ。同時の大量のSOAPリクエストを実行すると，アプリケーションがクラッシュすることがありました。

**注記**: Webプロセスのスタックサイズを決定する``4STK``リソースにプリエンプティブスレッドからアクセスした場合に問題が発生しました。

* ACI0099294 メソッド内に``Begin SQL/End SQL``コードブロックが存在する場合，コンパイラーに間違った行番号が表示されました。

* ACI0098621 インデックスが設定されたフィールドに対して``QUERY WITH ARRAY``あるいはORDAの``query()``を実行した場合，正しい結果が返されないことがありました。データが日本語であり，データベース設定で「テキスト検索用の文字列比較を使用する」オプションが有効にされている場合に問題が発生します。
