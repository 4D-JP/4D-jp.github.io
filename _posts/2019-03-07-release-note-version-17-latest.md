---
layout: fix
title: "4D v17 修正リスト"
date: 2019-03-27 15:34:00
categories: 修正リスト
tags: "17.1" 
build: 235296
version: 17.1

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099385 エクスプローラーでフォームを複製した場合，オブジェクトメソッドに大量の改行コード（``\``）が挿入されることがありました。すべてのオブジェクトで発生するわけではありません。ストラクチャ間のドラッグ＆ドロップでも同じ問題が発生します。

**注記**: オブジェクトメソッドの内部バージョンコードが``0``であり，メソッドコードの隙間を埋める文字（非常に古いバージョンの4Dでは使用されていませんでした）におかしなコードが含まれている場合に発生するようです。つまり，長い間，ずっと編集されていなかったオブジェクトメソッドで問題が発生する傾向があります。メソッドエディターでスクリプトを開いて再保存すれば，問題は自然に解消します。

* ACI0099359 テキスト入力オブジェクトの「自動ドラッグ」「自動ドロップ」を無効にし，「入力可」「ドラッグ可」「ドロップ可」プロパティを有効にした場合，テキストの範囲を選択しようとすると，``On Begin Drag Over``イベントが発生しました。Write Proエリアでも同じ問題が発生します。キーボード操作であれば，テキストを選択することができます。

* ACI0099320 Mac版のみ。高さが１行のテキスト入力エリアオブジェクトをv16で作成し，「ヒラギノ」フォントを設定して，v17に変換した場合，テキストのベースラインが高くなって「ぶら下がり（デセント）」が表示される代わりに上部（アセント）のピクセルが不足しました。

**注記**: スタイル無しの標準テキスト入力エリアが修正されました。スタイル付きテキストやWrite Proエリアのレンダリングはこれまでどおりです。

* ACI0099384 再帰的な参照が含まれるオブジェクト型に対して``Entity.toObject()``を実行した場合，アプリケーションがクラッシュしました。

* ACI0099370 入れ子構造に設置されたサブフォームオブジェクトのデータソースに``FORM``という変数名を設定した場合，コンパイルモードでサブフォームのオブジェクトメソッドが実行されませんでした。

* ACI0099312 リストボックスの行を別のリストボックスの上にドラッグした場合，ドラッグ先のリストボックスの``On Drag Over``でドロップ操作が禁止したときはマウスポインターが「進入禁止」アイコンに変化しましたが，禁止しなかったときはマウスポインターが「追加」アイコンに変化しませんでした。ドラッグ元のリストボックスの「行の移動可」プロパティを無効にすれば，ドラッグの開始と同時にポインターが変化します。

**注記**: 修正により，ドラッグ元の「行の移動可」プロパティが有効に設定されていても，ドラッグ＆ドロップ操作で「コピー」と「移動」の両アクションがセットされるようになりました。

* ACI0099296 4D Mobile（Wakanda）の``lock()``APIで実行したレコードのロックを``unlock()``で解除することができませんでした。 

* ACI0099112 ``ALERT`` ``CONFIRM``などのモーダルウィンドウが表示された状態で``SET MENU BAR``にオプション（``*``）を渡して実行した場合，メニュー項目が選択不可になりました。

* ACI0099348 ボタンに設定された標準アクションの「デザインモードに移動」でデザインモードに移動することができませんでした。

* ACI0099339 １ページ目のフッターに挿入された``$wp_pageCount``フォーミュラの値が正しくありませんでした。ページ総数に関係なく，常に``1``が挿入されました。以降のページでは問題ありません。

* ACI0099295 アプリケーションの起動時モードが「アプリケーション」に設定されており，スプラッシュ
ウィンドウが非表示に設定されている場合，デザインモードに移動するためには，標準アクションの「デザインモードに移動」を２回実行する必要がありました。

* ACI0099273 テキストまたは階層リストから4D Write Proエリアのヘッダーまたはフッターにテキストをドラッグ＆ドロップすることができませんでした。

* ACI0099262 キーボードショートカットのスウェーデン語の文字（``Å`` ``Ä``など）を設定することができませんでした。

* ACI0098505 Windows版のみ。4D Serverを管理者アカウントで実行されるサービスとして登録すれば，ユーザーがサーバーにログインしていなくてもサービスが起動されるようになりますが，その場合，自動アップグレードの実行後に一時フォルダーが削除されませんでした。

**注記**: 修正により，一時フォルダーをごみ箱に移動できない場合，そのままフォルダーが削除されるようになりました。

* ACI0098160 ``Get system info``から返されるオペレーションシステム名（Windows Professional, Windows Professionnelなど）は，プラットフォームの言語に左右され，Mac版では"build", "version"などのワードを含む形式で返されました。また，Windows 10のバージョンを区別することができませんでした。

**注記**: 修正により，プラットフォームや言語に左右されない統一の形式で情報が返されるようになりました。

  * macOS 10.14.2 (18C54)
  * Windows 10 Enterprise 1809 (17763.107)
  * Windows 10 Pro 1809 (17763.107)

* ACI0099332 Windows 32ビット版のみ。同時の大量のSOAPリクエストを実行すると，アプリケーションがクラッシュすることがありました。

**注記**: Webプロセスのスタックサイズを決定する``4STK``リソースにプリエンプティブスレッドからアクセスした場合に問題が発生しました。

* ACI0099294 メソッド内に``Begin SQL/End SQL``コードブロックが存在する場合，コンパイラーに間違った行番号が表示されました。

* ACI0098621 インデックスが設定されたフィールドに対して``QUERY WITH ARRAY``あるいはORDAの``query()``を実行した場合，正しい結果が返されないことがありました。データが日本語であり，データベース設定で「テキスト検索用の文字列比較を使用する」オプションが有効にされている場合に問題が発生します。
