---
layout: fix
title: "4D v20 修正リスト"
date: 2023-08-07 08:00:00
categories: 修正リスト
tags: v20 
build: 100645
version: "20"
permalink: /2023/191/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0103999 Windows版プロジェクトモードのみ。ボタンスタイルが通常またはフラットに設定された3Dボタンにフォーカスを移動した場合，*Enter* キーを入力してもデフォルトボタンが反応しませんでした。

**注記**: プロジェクトモードでは3Dボタンにフォーカスを移動することができますが，Windowsでツールバー・Office XP・サークルボタン（Windows）にフォーカスを移動してもボタンの外観は変化しない点に留意してください。これは仕様です。どのボタンがフォーカスされていたとしても，*Enter* キーが入力された場合はデフォルトボタンが反応します。

* ACI0104093 Write Proドキュメントに挿入されたフォーミュラをシングルクリックした場合，ツールバーにフォーミュラが表示される，編集することもできませんでした。ダブルクリックした場合は問題ありませんでした。

**注記**: 仕様が明確にされました。フォーミュラは選択テキストが空ではなく，フォーミュラが含まれている場合に表示されます。フォーミュラの手前にカーソルを移動しただけでは表示されません。

* ACI0104120 Apple Siliconターゲットのみ。存在しないメソッドパラメーターにアクセスした場合，終了時にアプリケーションがクラッシュしました。

* ACI0104115 バイナリモードのみ。3Dボタンがローカライズされず，XLIFF識別子がそのまま表示されました。

* ACI0104098 Write Proドキュメントに挿入したピクチャ型のフォーミュラが値として表示されませんでした。19r7以前に作成したドキュメントは問題ありません。

* ACI0104038 *VS Code* のLSPとして使用した場合，*tool4d* のCPU占有率がほぼ`100`%に達しました。

* ACI0104002 リテラル表記のオブジェクトをトークナイズした場合，プロパティ名とコロン記号（`:`）の間に入力された余計なスペースが取り除かれませんでした。

* ACI0104106 バイナリモードのみ。クライアントで新規プロジェクトメソッドを作成し，トップレベル以外のフォルダーを指定した場合，デザインモードでエクスプローラーを開いていない他のクライアントがクラッシュしました。

* ACI0104105 `@`記号で区切られたテキストを`GET TEXT KEYWORDS`で単語に分解できませんでした。

**注記**: ICU 72.1の不具合でした。問題はICU 73.2で修正されています。ライブラリのアップデート前にインデックスを作成した場合，自動的にインデックスが再構築されます。

* ACI0104107 日付型フィールドに対するポインターを括弧で括らずに比較演算の右オペランドとして記述した場合，シンタックスエラーが返されました。

* ACI0104081 Windows版のみ。アクセスできないネットワークドライブが存在する場合，`Get system info`がすぐに情報を返さず，アプリケーションがフリーズしたようになりました。

* ACI0104077 フォームのページ移動と同時にリストボックスの列を再作成し，`LISTBOX SET PROPERTY(*; …; lk auto row height; lk yes)`と`LISTBOX SET AUTO ROW HEIGHT`を実行した場合，アプリケーションがクラッシュしました。空のリストボックスに列を追加した場合，あるいはリストボックスの自動行高プロパティが最初から有効であれば，問題ありません。

* ACI0103947 Windows版のみ。進捗インジケーターのデータソース値が`0`の場合，わずかな幅のインジケーター値が表示されました。

* ACI0104101 Mac版のみ。角の丸いベベルボタンのタイトルが描画されませんでした。

* ACI0104097 複数のプリエンプティブプロセスから同時に`Get monitored activity`を実行した場合，アプリケーションがクラッシュしました。

* ACI0104085 ORDAクエリに複数の`IN`比較演算子を`OR`条件で記述し，パラメーターのコレクションが空だった場合，アプリケーションがクラッシュすることがありました。

* ACI0104104 `GET PRINTABLE AREA`から返される高さがv19と違いました。

**注記**: 問題は修正されましたが，印刷前に`SET PRINTABLE MARGIN (-1;-1;-1;-1)`を実行することで回避策することができます。

* ACI0104060 多数（`10`個）のプリエンプティブプロセスから大量（`100,000`個）JSONオブジェクトを同時に作成した場合，平行処理に期待されるパフォーマンス向上が得られませんでした。

**注記**: 共有オブジェクトである`4D.Object`クラスとは違い，`4D.Object`インスタンスは共有オブジェクトでありません。用途に応じ，`4D.Object`クラスのミューテックス活用を最小限にとどめることにより，パフォーマンスの最適化が図られました。

* ACI0104054 プロジェクトモードのみ。フォームエディターのコンテキストメニュー項目「自動サイズ」をラジオボタンまたはチェックボックスに対して使用した場合，サイズ計算が正しくありませんでした。

* ACI0101819 「未使用のローカル変数を検索」でクラスのメンバー関数が解析されませんでした。

* ACI0103660 `IMPORT DATA`で読み込みダイアログを開いた場合，テーブルを選択することができませんでした。ファイルメニューからダイアログを起動した場合は問題ありません。

* ACI0104090 *Alt* （Mac版は *control* ）キーを押しながらコメント行に記述されたテーブル名またはフィールド名にマウスポインターを重ねた場合，トークンがハイパーリンクに変化せず，「定義に移動」コンテキストメニューも表示されませんでした。

* ACI0104092 ユーザーモードのメニューからクイックレポートエディターを起動した場合，プリントプレビューが実行できませんでした。Macではプリンターにジョブが送信され，Windowsではファイル保存ダイアログが表示されます。コマンドでクイックレポートエディターを起動した場合は問題ありません。

* ACI0104075 Mac版のみ。チェックボックスのタイトルを`OBJECT SET TITLE`で変更した後に`OBJECT GET BEST SIZE`を実行した場合，幅に`0`が返されました。

* ACI0104089 コンパイルモード版のみ。`Formula`から返されたリテラル表記のオブジェクトを使用した場合，エラーが返されました。

* ACI0104080 Windows版のみ。VS Code Extensionの[4D-Analyzer](https://marketplace.visualstudio.com/items?itemName=4D.4d-analyzer)で4Dまたは4D ServerをLSPにすることができませんでした。

* ACI0104079 Mac版のみ。エンティティ属性にマウスポインターを重ねた時に表示されるヘルプTipsに余計な空行が表示されました。

* ACI0104078 `SVG_Export_to_picture`などのコンポーネントメソッドにマウスポインターを重ねた時に表示されるヘルプTipsが正しく表示されませんでした。スタイル付きテキストのタグがそのまま表示されます。

* ACI0104059 後続のサブセクションと水平マージンが異なるサブセクションにテーブルを挿入した場合，同時にページブレークも挿入されました。

* ACI0104087 `False ? [1;2] : 3`のようにリテラル表記のコレクションを３項演算子の戻り値に使用した場合，シンタックスエラーが返されました。

* ACI0104074 メソッドエディターのタイプアヘッドで`entitySelection.length`が入力できませんでした。

* ACI0104072 Mac版のみ。ボタンをクリックしている間の背景色が正しくありませんでした。デフォルトボタン以外は背景色がアクセントカラーではなく，グレーで表示されるべきです。

* ACI0104071 Mac版のみ。角の丸いベベルチェックボックスのタイトルのフォントカラーに問題がありました。フォントカラーが自動に設定されている場合，タイトルはホワイトで表示されるべきです。

* ACI0103964`Open form window`で指定したフォームにフォーミュラをデータソースとするオブジェクトが配置されている場合，そのフォーミュラが実行されました。

* ACI0103926 プロジェクトモードのみ。オブジェクト名シンタックスでボタンのタイトルをローカライズすることができませんでした。XLIFFシンタックスまたはSTR#シンタックスであれば問題ありません。また，ラジオボタンやチェックボックスなどのフォームオブジェクトでも問題ありません。

* ACI0104083 QUICネットワークレイヤーのみ。ビルド版のv19 R8クライアントをビルド版のv20サーバーに接続し，クライアント自動アップグレードを実行した場合，エラー`-10091`が返されました。

* ACI0104014 Write Proツールバーの「継続したセクションブレークを挿入」のヘルプTipsが正しくありませんでした。「継続した改ページを挿入」と表示されます。XLIFFリソース名は`insertContinuousPageBreak`ですが，[標準アクション名](https://doc.4d.com/4Dv20/4D/20/Using-4D-Write-Pro-standard-actions.200-6229456.ja.html)は`insertContinuousSectionBreak`です。

* ACI0103989 Mac版プロジェクトモードのみ。テキストまたは入力オブジェクトの「横揃え（`textAlign`）」プロパティを「両端揃え（`justify`）」に設定した場合，ランタイムモードでは設定が無視され，「左（デフォルト）」横揃えになりました。

* ACI0104062 MSCのストラクチャ修復で浮上したオーファンフォームを削除することができませんでした。

* ACI0104026 エクスプローラーのごみ箱にテーブルが残っている状態でごみ箱を空にした場合，アプリケーションがクラッシュしました。

* ACI0103819 ポップアップメニューが設定されているボタンを`OBJECT GET BEST SIZE`でリサイズした場合，ポップアップメニュー（リンクまたは分離）のアイコンがボタンタイトルの上に表示されました。

* ACI0104064 フランス語版のみ。ランゲージをフランス語に切り替えた場合，定数の *ck count values* がトークナイズされませんでした。

* ACI0104070 バイナリモードのみ。クライアント側からリモートデバッガを有効化した場合，サーバーがクラッシュしました。

* ACI0104061 Windows版のみ。Write ProドキュメントをPDF形式でエクスポートした場合，*Artdeco MN* フォントの文字が重ねて表示されました。Microsoft Print to PDFを使用すれば問題ありません。

**注記**: Write Proが内部的に使用している[PDF-Writer](https://github.com/galkahana/PDF-Writer)のローレベル処理（カーニング）に問題がありました。回避策として，*Artdeco MN* フォントファミリーは，DirectWriteのAPIでフォントのオフセット位置を計算するようになりました。

* ACI0104017 `$pTable:=->`にようにポインターの逆参照に続けてテーブル名をタイプアヘッドで入力した場合，ブラケット記号が省略されました。

* ACI0103975 Mac版のみ。キーボードを長押しして拡張文字の候補を表示し，数字キーで選択した場合，アクセント付きの文字とそうでない文字の両方が入力されました。矢印キーやクリック操作で拡張文字を入力すれば問題ありません。

* ACI0104031 クラスの`property`宣言でコンポーネントのクラスをデータ型として参照した場合，シンタックスチェックでオブジェクトは未定義のクラスであるという警告が返され，プロパティ入力のタイプアヘッドでもクラスのメンバー関数やプロパティが候補として列挙されませんでした。

* ACI0104029 クラスのプロパティを *Integer* 型で宣言し，そのプロパティを`-This.prop`のように符号を反転して参照した場合，コンパイラーがエラーを返しました。

* ACI0104013 4D Viewスプレッドシートのセルに埋め込まれた`Substring`がView Proのフォーミュラに正しく変換されませんでした。

* ACI0104013 4D Viewスプレッドシートのセルに埋め込まれた`Substring`がView Proのフォーミュラに正しく変換されませんでした。

* ACI0104058 Write Proドキュメントに新しく挿入したフォーミュラの表示を値に切り替えることができず，常に参照が表示されました。

* ACI0104049 `OR`または`IN`演算子を使用してリレーション計算属性をクエリした場合，正しい結果が返されませんでした。
