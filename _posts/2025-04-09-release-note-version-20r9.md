---
layout: fix
title: "4D 20r9 修正リスト"
date: 2025-06-01 08:00:00
categories: 修正リスト
tags: 20r9
build: 100112
version: "20r9"
permalink: /2025/99/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105589 ユーザーモードの並び替えエディターでフィールドをダブルクリックしたり，フィールドを選択するための矢印ボタンをクリックしても，並び替えフィールドを追加することができませんでした。並び替えエディターだけでなく，階層リスト全般のリファクタリングが関係しているようです。

* ACI0105647 ASTインタープリターモードでは，`Formula`および`Formula from string`から返されたテキストまたはオブジェクトまたはコレクション型がメモリーリークになりました。

**注記**: ASTインタープリターモードの設定は，*settings.4DSettings* ファイルに記述されています。

```xml
<misc use_ast_interpreter="true"/>
```

* ACI0105598 ASTインタープリターモードでは，`eval`キーワードを含むORDAクエリがメモリーリークになりました。

* ACI0105628 `OBJECT SET SCROLLBAR`でテキスト入力オブジェクトのスクロールバーを表示した後，`OBJECT DUPLICATE(`でオブジェクトを複製した場合，作成されたオブジェクトのスクロールバー・フォーカス・境界が正常に描画されませんでした。

* ACI0105618 データクラスにリードオンリーの計算属性が存在する場合，属性値を参照しただけで`entity.touchedAttributes()`に属性が追加され，`entity.touched()`が`True`を返るようになりました。

ACI0105677 プロジェクト名に`=`や`;`のような文字あるいはスペースが含まれている場合，クッキー名が途切れてしまうため，セッション管理が正しく動作しませんでした。

* ACI0105640 `entity.getKey()`がテキストまたは整数ではなく，実数を返しました。

* ACI0105653 複数行のクエリが定義された`.4QF`ファイル（JSON形式）をクエリエディターで読み込んだ場合，範囲チェックエラー`53`が返されました。

* ACI0105549 Windows版のみ。MDIウィンドウの最大化を解除した場合，フォームウィンドウの最大化も解除されますが，移動またはリサイズされたオブジェクト群が元の位置に戻りませんでした。ACI0105507の修正にMDIウィンドウの最大化が解除されたときの処理が含まれていませんでした。

* ACI0105658 Mac版のみ。メニューおよびサブメニューのアイコンがRetinaディスプレイの高解像度やダークモードに対応していませんでした。

**注記**: アイコンファイル名の[スケール係数](https://developer.4d.com/docs/ja/FormEditor/pictures.html#スケール係数)（例: `@2x`）や[ダークモード](https://developer.4d.com/docs/ja/FormEditor/pictures.html#ダークモード-macos-のみ)（例: `_dark@2x`）指定が正しく反映されるようになりました。

* ACI0105635 `Request`ダイアログのデフォルト値そのまま「OK」ボタンで確定することができませんでした。

* ACI0105508 入力オブジェクトのデータソースとしてエンティティの計算属性が使用されており，そのオブジェクトの`Function get`が同じエンティティの別の属性が参照されている場合，参照されているほうの属性をフォーム上で更新したタイミングでは計算属性が再評価されませんでした。

**注記**: 計算属性は，エンティティと共通の内部スタンプで管理されるようになりました。

* ACI0105650 バイナリモードのみ。フォームエディターで「フィールド」オブジェクトを選択した場合，プロパティリストの「ソース」にテーブル名が表示されませんでした。

* ACI0103920 Mac版のみ。*Modal form dialog box* に表示されたマルチスタイル入力オブジェクトのコンテキストメニューで「カラー」または「背景色」の「その他…」を選択してカラーピッカーを使用した場合，フォントカラーや背景色を変更することができませんでした。ウィンドウがモーダルダイアログでなければ問題ありません。

* ACI0105657 クラスのシンタックスエラーを修正してから再コンパイルを実行した場合，前回のコンパイルと同じ箇所にエラーのアイコンが表示されました。ACI0105580が修正されたことによる副作用のようです。

* ACI0105645 Windows版のみ。デバッガー画面に表示されているカレントメソッド名のフォントサイズが小さすぎました。

* ACI0105620 アプリケーションビルド画面のライセンスリストを空にせずにシングルユーザー版のアプリケーションまたは評価版のアプリケーションをビルドした場合，起動時に*4D Volume Desktop* ライセンス番号がみつからないというエラーメッセージが表示されました。

* ACI0105606 Intelアーキテクチャーのみ。ASTインタープリターが有効にされたアプリケーションで`Random%0`を実行した場合，アプリケーションがクラッシュしました。

**注記**: ゼロ除算およびモジューロの演算は，数値のデータ型（整数・実数・時間），演算子の種類（`\` `/` `%`），除数の種類（ヌル・空値），CPUのアーキテクチャー（ARM・X86）で`108`
とおりの可能性があります。そのうちクラッシュする`18`のパターン（すべてIntel）が修正されました。

* ACI0105550 Windowsクライアント/サーバー版のみ。`local Function set`がクライアント側ではなく，サーバー側で実行されることがありました。

* ACI0105487 リストボックス[カラムの自動リサイズ](https://developer.4d.com/docs/ja/20-R8/FormObjects/propertiesResizingOptions#カラム自動リサイズ)が設定されている場合，リストボックスのリサイズに伴って垂直スクロールバーが表示されると，スクロールバーの幅だけカラムの内容が隠れることがありました。

* ACI0104113 `4D.ZipArchive`オブジェクトの中からフォルダーを`copyTo()`で展開した場合，フォルダー名の拡張子が失われました。全体を展開した場合は問題ありません。`copyTo()`の第２パラメーターに`folder.fullName`を渡せば回避できます。

* ACI0105636 フォームクラスが設定されたフォームをサブフォームとして表示した場合，フォームクラスがインスタンス化されませんでした。

* ACI0105612 `Try`ブロックのコールチェーンで`deferred`モードの`throw`が使用された場合，`Catch`ブロックが実行されませんでした。`Try`ブロックの最上位レベルだけでなく，メンバーメソッドの中からでもエラーを`throw`できるべきです。

* ACI0105597 アプリケーション名とは別の公開名を設定して*Build4D* コンポーネントでクライアント/サーバーアプリケーションをビルドした場合，ビルド版クライアントからサーバーに接続することができませんでした。*EnginedServer.4DLink* ファイルの`server_database_name`に公開名ではなくアプリケーション名がセットされているためです。

* ACI0105512 ストラクチャーエディターに回帰的なリレーション設定が描画されないことがありました。線がテーブルの背後に描画されているようです。

![relation_line](https://github.com/user-attachments/assets/d982abf1-32bc-49bb-bd46-78b07df83e92)

* ACI0105596 旧式の型宣言コマンドをオブジェクトメソッドに記述した場合，警告が表示されませんでした。

* ACI0105613 インターネット接続がない状態で評価ライセンスが組み込まれたビルド版アプリケーションを起動した場合，エラーメッセージに続いてライセンス登録画面が表示されました。

**注記**: 評価ライセンスの有効期間を確認できない場合，あるいは評価期間がすでに終了している場合，ライセンス登録画面は表示されず，アプリケーションは終了します。

* ACI0105444 `PRINT RECORD`を実行した場合，`WP COMPUTE FORMULAS`にデータコンテキストが反映されませんでした。

* ACI0105614 AIKitコンポーネントのドキュメンテーションを開いたい場合，デザインモードの反応がとても悪くなりました。

**注記**: ドキュメンテーションにインラインコードが含まれている場合，*highlight.js* がCEFのレンダラープロセスの処理待ちをするようです。回避策として，コードのハイライトはブロックに限定され，インラインは除外されることになりました。

* ACI0105610 `SQL LOGIN`でODBCデータソースに接続した場合，エラー`9901`が返されました。システム変数`OK`には`1`が代入されますが，SQLを実行することができません。

* ACI0105608 `Qodly Server* のデバッガーにはローカル変数の値が未定義として表示されました。

* ACI0105604 20r5でコンパイルしたプロジェクトを20r7以降で開いた場合，`SVG_Define_solidColor`がエラーを返しました。

* ACI0105548 `--dataless`モードでプロジェクトを開いた場合，ユーザー設定フォルダーではなく，データフォルダーの*Logs* フォルダーに診断ログが記録されました。

* ACI0105600 ライセンスが組み込まれていないシングルユーザー版のビルドアプリケーションを起動した場合，有効なライセンスがインストールされていないというアラート画面が表示されました。

* ACI0105588 バイナリモードのみ。メンテナンスモードでストラクチャファイルを開いてアプリケーション検証を実行した場合，アプリケーションがクラッシュしました。MSCで検証を実行すれば問題ありません。

* ACI0105583 エクスプローラーにフォームメソッドのプレビューがすぐに表示されませんでした。

* ACI0105581 パラメーターのデータ型を再定義した場合，コンパイルエラーが返されますが，コンパイラー画面のメッセージには，接頭辞`$`を除くパラメーター名が表示されました。

* ACI0105573 エクスプローラーでテーブルを選択した場合，ドキュメンテーションを「作成する」というボタンが間違って表示されました。

* ACI0105569 ポインターの逆参照と`var`シンタックスの宣言と初期化を併用した場合（`var vtest:=->`）アプリケーションがクラッシュしました。

* ACI0105560 シングルユーザー版のビルドアプリケーションでは，コマンドラインインターフェースの`--dataless`引数が無視されました。

**注記**: `--dataless`は，*Default Data/Default.4DD* よりも優先されます。

* ACI0105465 Mac版IntelアーキテクチャまたはRosettaモードのみ。複数のプリエンプティブプロセスでデバッグログを有効にした場合，アプリケーションがクラッシュすることがありました。

* ACI0105599 Windows版バイナリモードのみ。クライアントのログイン画面でPOSIXパスが無効であるというランタイムエラーが発生しました。

* ACI0105580 直接型指定モードを有効にしてコンパイルを実行した場合，メソッドエディターのエラー発生行にアイコンが表示されませんでした。

* ACI0105574 ツールボックスのタブ（メニュー・ヘルプTips・リスト・スタイルシート・フィルター・リソース）をクリックした場合，タブ名のフォントやフォントサイズが変化しました。

* ACI0105586 Windows版のみ。フォームオブジェクトのスクロールバーを非表示に設定した場合，最初のスクロール以降は*On Scroll* イベントが発生しませんでした。また，移動の限界に到達した後もスクロール操作を続けると*On Scroll* イベントが溜まり，後のスクロール操作でまとめて発生しました。ACI0105565が修正されたことによる副作用のようです。

* ACI0105585 スクロールできるサブフォーム内にピクチャやリストボックスのようなオブジェクトが配置されている場合，移動の限界までスクロールしてからサブフォームにスクロールが引き継がれるはずですが，スクロールバーが表示されていなければ正しく動作しませんでした。ACI0105565が修正されたことによる副作用のようです。オーバースクロールは，スクロールバーの表示状態に関係なく，動作するべきです。

* ACI0105582 クライアント/サーバー版のみ。4D Serverで*Qodly Studio* を使用した場合，`$shared`フォルダーのリソースにアクセスすることができませんでした。ACI0105551が修正されたことによる副作用のようです。

* ACI0105565 リストボックスの垂直スクロールバーが非表示に設定されている場合，マウスのスクロールボタンを操作しても*On Scroll* イベントが発生しませんでした。位置や移動量の計算は，スクローバーから得られる情報に依存するべきではありません。

* ACI0105564 設定の「メソッド」ページでテーマを複製した場合，余計なスペース記号（` `）がテーマ名に追加されました。

* ACI0105563 エクスプローラーで名称がハイフン記号（`-`）から始まるフォルダーにテーブルを移動した場合，当該フォルダーがストラクチャエディターのフォルダーリストには表示されませんでした。

* ACI0105557 特定のWebサービスに対し，`HTTP Get`でアクセスした場合，「ソケットストリームが終了しました」というエラーが返されました。

* ACI0105551 Webサーバーを停止した場合，*Qodly Studio* から送信された`/$shared`リクエストに対し，`404`エラーが返されるようになりました。ACI0104786が修正されたことによる副作用のようです。

* ACI0105522 トランザクション中に保存したレコードをトランザクション停止中に再び保存しようとした場合，アプリケーションがフリーズしました。

**注記**: データベースエンジンエラー`2016`「トランザクション中に保存したレコードをトランザクション停止中に再び保存することはできません」が追加されました。

* ACI0105543 アップデートしたコンポーネントの動作条件に環境が満たなくても「非アクティブ」ではなく「アップデート済」というラベルが「依存関係」画面に表示されました。

* ACI0105520 View Proスプレッドシートのセルの背景色がリボンツールで「なし」に設定されている場合，`VP Convert to picture`で出力した画像にセルの正しい背景色が反映されませんでした。ACI0105481に似ています。セルだけでなく，行や列の背景色にも同じ問題があります。

* ACI0105490 「ライセンス管理」画面でライセンスを更新した場合，表示中のライセンス情報がすぐに更新されませんでした。一旦，画面を閉じる必要があります。

* ACI0105489 「ようこそ画面」にログインしていない状態で「ライセンス更新」または「自動アクティベート」画面を使用した場合，ライセンスは更新されますが，サインイン画面が邪魔をしてライセンス更新の画面を閉じることができなくなりました。

* ACI0105524 直接型指定を有効にした場合，すでに値が代入されている変数に改めて`var`構文で未定義を代入してもオブジェクトが`Null`にリセットされませんでした。

**注記**: ループ処理のように何度も実行される行に`var`構文を記述することは想定されていません。しかしながら，問題は修正され，既存の変数に`var`構文で未定義を代入することができるようになりました。

* ACI0105554 メソッドエディターで`Alt/option`キーを抑えながらエンティティまたはエンティティセレクション型クラスのメンバー関数をクリックしても，定義にジャンプすることができませんでした。ACI0105468が修正されたことによる副作用のようです。

* ACI0105552 *WebAdmin* サーバーがすでに動いている状態でプロジェクトを開いた場合，*WebAdmin* サーバーが停止しました。ACI0105471が修正されたことによる副作用のようです。

* ACI0105503 ファイルシステムパス（`/RESOURCES/images/icon.png`）ではなく相対POSIXパス（`file:images/icon.png`）でベベルボタンの画像を指定した場合，
デザインモードではアイコンが表示されますが，アプリケーションモードではアイコンが表示されませんでした。

* ACI0105499 `VP Convert to Picture`でView Proスプレッドシートをピクチャーに変換した場合，計算式が設定されたセルの値が画面上の値とは違うことがありました。SpreadJSの`toJSON()`は，JavaScriptの浮動小数点演算を内部的に実行しているため，`40.5895-40.5889`が`0.0006`ではなく`0.000599...`となることが原因です。

* ACI0104034 Windows版のみ。`WA OPEN URL`で空のページを設定した非表示の統合Webエリアが存在するページからフォームのページを切り替えた場合，入力エリアにテキストをタイプ入力することができなくなりました。別のウィンドウをアクティブにしてからフォームに復帰すれば，再びタイプ入力できるようになります。

* ACI0103694 クライアント/サーバー版のみ。4D Serverの*On SQL Authentication* データベースメソッドを`TRACE`でデバッグすることができませんでした。

* ACI0105545 Mac版のみ。角の丸いベベルボタンに表示した画像が端まで完全に表示されませんでした。

* ACI0105526 View Proスプレッドシートのセルフォーマットを日付タイプに設定することができませんでした。`en`以外の`culture`オブジェクトに必要なプロパティがないようです。

* ACI0105530 Mac版のみ。プロジェクトに画像やドキュメントといったサポートファイルが大量に含まれている場合，それらのファイルも再帰的なコード署名の対象となるため，コンポーネントのビルドに時間がかかりました。
