---
layout: fix
title: "4D 20 修正リスト"
date: 2024-10-17 08:00:00
categories: 修正リスト
tags: "20.5"
build: 101497
version: "20.5"
permalink: /2024/276/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105153 Mac版のみ。パレットタイプのウィンドウ（*Controller form window* *Pop up form window* *Toolbar form window* *Palette form window*）をフォーカスした場合，フォーカスされていないウィンドウのデフォルトボタンのタイトルがボタンと同色になりました。ダークモードでは問題ありません。

* ACI0105128 *OAuth2* トークンと`SMTPTransporter`で*Gmail* を送信した場合，受信者のメッセージにBccヘッダーが表示されました。ACI0104608が修正されたことによる副作用です。

**注記**: 本来，Bccヘッダーはメールサーバーが除去するべきですが，すべてのメールサーバーがそのように設計されているわけではないようです。修正により，JMAPメッセージオブジェクトから変換されたMIMEにはBccヘッダーが含まれない仕様に戻されました。*NetKit* のように，MIMEにBccヘッダーを含める必要がある場合，下記のようにオプションで指定することができます。

```4d
MAIL Convert to MIME($inMail; {includeBccHeaders: True})
```

`SMTPTransporter`もメッセージからBccヘッダーを取り除くように改良されました。

* ACI0105100 リレーション属性が関係するORDAクエリが間違っていることがありました。ACI0104799が修正されたことによる副作用のようです。

```4d
ds.One.all().drop()
ds.Many.all().drop()
$One:=ds.One.new()
$One.Id:=1
$One.save()
$Many:=ds.Many.new()
$Many.Id:=1
$Many.OneId:=1
$Many.save()
$Query:="One.Id#0 & ((Id#0 & (Id=0 | One.Id=0)) | (Id#0 & (Id=0 | One.Id=0)))"
ALERT($Query+"\r\rExpected: 0\rResult: "+String(ds.Many.query($Query).length))
```

* ACI0105024 カタログファイルのインデックス名とデータファイルのインデックス名が異なる場合，カタログファイルがデータファイルのインデックス名で更新されました。たとえ再インデックスが必要になるとしても，開いたデータファイルの内容でカタログファイルが更新されるべきではありません。

* ACI0105027 フォームエディターのコンテキストメニューで「同じ種類のオブジェクトを選択」した場合，ツールバーの整列/均等配置ボタンがアクティブ化されませんでした。

* ACI0105116 Mac版のみ。サーバー管理画面のメンテナンスページがダークモードに対応していませんでした。

* ACI0105097 Mac版のみ，スクリーンの横に*Dock* が表示されている場合，ツールバーが正しく表示されませんでした。左に*Dock* があれば，ツールバーの右が画面の外に出てしまい，右に*Dock* があれば，ツールバーの右に隙間が生まれました。

* ACI0103752 4D ViewスプレッドシートをView Proに変換した場合，パーセンテージのフォーマットが正しく適用されませんでした。

* ACI0105052 Windows版のみ。サブモニター側に表示されたSDIモードのフォーム上で日付ピッカーを使用した場合，メインモニター側にピッカーが表示されました。

**注記**: [コンポーネント](https://github.com/4d/4D-Widgets/commit/020ab608b8158a2dfb61ad512cb072f648bc3e38)が修正されました。

* ACI0105021 プロジェクトモードのみ。*.lproj* フォルダー内に置かれた画像ファイルがリソースフォルダーに置かれた画像ファイルよりも優先されませんでした。

* ACI0105011 フォームエディターで空のリストボックス列を選択して削除した場合，アプリケーションがクラッシュしました。

* ACI0105140 Windows版のみ。Windows 24H2で印刷コマンドを実行してPDFを出力しようとした場合，`OPEN PRINTING JOB`からエラーが返されることがありました。

* ACI0105080 リストボックスのヘッダーアイコンを`OBJECT SET FORMAT`と`"path:/RESOURCES/"`形式で変更することができませんでした。`#Images/`形式であれば問題ありません。

* ACI0105072 ネットワークに接続していない環境でライセンスのアクティベーションを試みた場合，エラーメッセージが英語で表示されました。