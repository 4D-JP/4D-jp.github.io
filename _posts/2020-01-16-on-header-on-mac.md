---
layout: post
title: "Mac 64ビット版のグラフィック最適化"
date: 2020-01-16 12:00:00
categories: 仕様 
tags: 17.x mac userinterface
version: 17.x
---

Mac 64ビット版では，出力フォームをスクロールすると，``On Header``イベントが１度ではなく，何度かコールされることがあります。これは仕様です。Mac 64ビット版（Cocoa）のグラフィック描画は最適化されており，フォームは部分的に再描画されないようになっています。

**参考**: v16でACI0098508が修正されるまで，300個のオブジェクトが配置されたリストフォームのスクロールおよび行の選択の反応は堪えられないほどに遅いものでした。更新のたびにフォーム全体が更新されないよう，グラフィック描画が最適化されたことにより，そのようなデザインのリストフォームでも軽快に動作するようになりました。

リストフォームが更新されると，``On Header``イベントが発生します。イベントが発生したことにより，再度，リストが更新された場合，再度，``On Header``イベントが発生しますが，今度はリストが更新されないかもしれず，そうであれば，そのタイミングでは``On Header``イベントが発生しません。リストフォームをスクロールした場合，スクロールした行数と``On Header``イベントの回数は対応しないことがあります。言い換えるならば，``On Header``イベントが余分に発生しているのではなく，フォームが再描画される回数が減っているため，スクロール中はイベントがまとめて発生したり，逆に発生しなかったりするようになった，ということです。
