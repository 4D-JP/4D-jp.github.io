---
layout: fix
title: "4D v17r5 修正リスト"
date: 2000-04-11 00:00:00
categories: 修正リスト
tags: 17r5
build: ------
version: 17r5
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099394 ようこそ画面には，最後に開いたプロジェクトの名前（拡張子``.4DProject``を除く）ではなく，そのフォルダー名が表示されました。

* ACI0099236 ``512``よりも短いキーの長さが渡された場合，``GENERATE ENCRYPTION KEYPAIR``から返された暗号鍵ペアでBLOBを復号することができませんでした。

**注記**: OpenSSLのアップデートにより，最小キー長が``386``から``512``に引き上げられています。修正により，``512``よりも短いキーの長さが渡された場合には``512``で鍵が生成されるようになりました。

* ACI0099450 ODBCドライバーあるいは4Dプロダクトラインのインストーラーを起動したときにスプラッシュスクリーンが表示されず，すぐにライセンス規約の画面（２ページ目）が表示されました。

**注記**: Inno Setupのバージョンが``5.5.5``から``5.6.1``にアップデートされ，一部オプションのデフォルト値が変更されたためでした。

* ACI0099440 リストボックスを配列型からコレクション型に変更した場合，``lk row max height`` ``lk row min height``プロパティがJSONフォームから取り除かれませんでした。

* ACI0099437 ストラクチャモードからプロジェクトモードに変換した場合，リストボックスの「自動行高」プロパティの値が反転しました。

* ACI0099435 登録されたアカウント情報に拡張文字が使用されている場合，ライセンス番号のアクティベーションができませんでした。

* ACI0097749 Windows版のみ。地域と言語が「ニューカレドニア（フランス語）」に設定されたシステムでは，アプリケーションを起動することができませんでした。

* ACI0097687 サーバー管理ウィンドウのプロセスリストに表示されている「プリエンプティブワーカー」の表示がローカライズされていませんでした。`` :xliff:MONI_PROCESS_Type39``と表示されました。

* ACI0097617 データベース設定の「クライアント/サーバー」ページの「サービスプリンシパル名」の入力エリアを指定したときに表示されるヘルプTipsの内容が設定されていませんでした。``:xliff:csTipsServicePrincipalName``というXLIFFラベルがそのまま表示されました。

* ACI0098168 行の高さが``0``に設定されているリストボックスを印刷しようとした場合，アプリケーションがクラッシュしました。

* ACI0098160 ``Get system info``から返されるオペレーションシステム名（Windows Professional, Windows Professionnelなど）は，プラットフォームの言語に左右され，Mac版では"build", "version"などのワードを含む形式で返されました。また，Windows 10のバージョンを区別することができませんでした。

* ACI0098697 Mac 64ビット版のみ。エクスプローラーの「拡大」アイコンをクリックすると，ウィンドウが過剰にリサイズされ，復帰できなくなりました。

* ACI0098693 Mac版のみ。4D Progressコンポーネントを使用しているとシンタックスエラーが表示されることがありました。

**注記**: コンポーネントがv16でコンパイルされており，廃止予定コマンドの``_o_PLATFORM PROPERTIES``を内部的にコールしていたことが原因でした。
* ACI0098621 インデックスが設定されたフィールドに対して``QUERY WITH ARRAY``あるいはORDAの``query()``を実行した場合，正しい結果が返されないことがありました。データが日本語であり，データベース設定で「テキスト検索用の文字列比較を使用する」オプションが有効にされている場合に問題が発生します。

* ACI0098505 Windows版のみ。4D Serverを管理者アカウントで実行されるサービスとして登録すれば，ユーザーがサーバーにログインしていなくてもサービスが起動されるようになりますが，その場合，自動アップグレードの実行後に一時フォルダーが削除されませんでした。

* ACI0098493 クエリ・統計・ソート・変換等のORDAオペレーションに時間に要している場合（３秒以上），プログレスバーが表示されませんでした。

* ACI0098765 Mac版のみ。（プロパティリストではなく）ストラクチャエディター上でフィールド名を編集し，日本語変換を確定した場合，日本語変換プログラムのウィンドウが閉じられませんでした。

* ACI0098813 64ビット版のみ。クリックレポートのカラムにフィールドを追加した後，右上にあるメニューで「フィールド」を選択した場合，選択したフィールドが正しく表示されませんでした。

* ACI0098862 クライアント/サーバー版のみ。ソートされたカレントセレクション（レコード数は「1件」）が表示されているリスト型のサブフォームに対して新規レコードを追加した場合，クリック操作でその新規レコードを選択することができませんでした。サブフォーム自体はフォーカスされますが，選択したレコードは消えてしまい，フィールドがフォーカスされません。続けてもう一度レコードを追加すると，うまくゆきます。カレントセレクションがソートされていない場合，あるいはカレントセレクションが2件以上のレコードで構成される場合は問題ありません。

* ACI0099370 入れ子構造に設置されたサブフォームオブジェクトのデータソースに``FORM``という変数名を設定した場合，コンパイルモードでサブフォームのオブジェクトメソッドが実行されませんでした。

* ACI0099359 テキスト入力オブジェクトの「自動ドラッグ」「自動ドロップ」を無効にし，「入力可」「ドラッグ可」「ドロップ可」プロパティを有効にした場合，テキストの範囲を選択しようとすると，``On Begin Drag Over``イベントが発生しました。Write Proエリアでも同じ問題が発生します。キーボード操作であれば，テキストを選択することができます。

* ACI0099339 １ページ目のフッターに挿入された``$wp_pageCount``フォーミュラの値が正しくありませんでした。ページ総数に関係なく，常に``1``が挿入されました。以降のページでは問題ありません。

* ACI0099329 ``C_BLOB``で型宣言していない未定義の変数を``GENERATE CERTIFICATE REQUEST``に渡した場合，アプリケーションがクラッシュしました。

* ACI0099320 Mac版のみ。高さが１行のテキスト入力エリアオブジェクトをv16で作成し，「ヒラギノ」フォントを設定して，v17に変換した場合，テキストのベースラインが高くなって「ぶら下がり（デセント）」が表示される代わりに上部（アセント）のピクセルが不足しました。

* ACI0099312 リストボックスの行を別のリストボックスの上にドラッグした場合，ドラッグ先のリストボックスの``On Drag Over``でドロップ操作が禁止したときはマウスポインターが「進入禁止」アイコンに変化しましたが，禁止しなかったときはマウスポインターが「追加」アイコンに変化しませんでした。ドラッグ元のリストボックスの「行の移動可」プロパティを無効にすれば，ドラッグの開始と同時にポインターが変化します。

* ACI0099291 Mac版のみ。システム版Webエリアに対して`` WA Evaluate Javascript``を使用した場合，``\r``と``\n``がリテラル文字列として処理され，JavaScriptコードが正しく実行されませんでした。

* ACI0099283 クライアント/サーバー版のみ。多数のプロセスウィンドウを立て続けに閉じた場合，クライアントがクラッシュすることがありました。

* ACI0099273 テキストまたは階層リストから4D Write Proエリアのヘッダーまたはフッターにテキストをドラッグ＆ドロップすることができませんでした。

* ACI0099265 Windows 64ビット版のみ。データベース設定で「スプラッシュスクリーン」が非表示に設定されている場合，SDIモードでアプリケーションを起動中に一瞬，画面の左上にスプラッシュスクリーンが表示されました。

* ACI0099264 Windows SDIモードのみ。アプリケーションのウィンドウが最前面ではない場合，まずウィンドウをクリックして最前面に移動してから，改めてドラッグする必要がありました。期待されるのは，最初のクリックでそのままウィンドウがドラッグできることです。

* ACI0099262 キーボードショートカットのスウェーデン語の文字（``Å`` ``Ä``など）を設定することができませんでした。

* ACI0099253 クイックレポートの出力中，「レポート生成中」という進捗ダイアログがモーダルウィンドウで表示され，処理が完了するまでアプリケーションを操作することができませんでした。

* ACI0099246 64ビット版のみ。``GRAPH``で作成されたタイプ``2`` ``3`` ``7``のグラフは，SVGのIDが正しくありませんでした。

* ACI0099229 ネットワーク接続が利用できない状態でアプリケーションを起動し，その後，ネットワークが利用できるようにして``HTTP Get``を実行した場合，エラー``30``が返されました。以前のバージョンでは，ネットワーク接続後，数秒を置けば，コマンドが使用できました。

* ACI0099217 v16以前に4D Mobileでタッチされたレコードをv17で更新しようとした場合，スタンプの不一致により，``400``エラーが返されることがありました。

* ACI0099187 Windows版のみ。特定のプラグインの組み合わせがインストールされている場合，コンパイル処理を実行するとアプリケーションがクラッシュしました。

* ACI0099164 Windows版のみ。``Popup form window``タイプのウィンドウ上では，マウスボタンが押されていない限り，``On Mouse Move``イベントが発生しませんでした。

* ACI0099114 定数``TIFF JBIGB&W``は，無効な文字（アンパーサンド）が含まれているため，コンパイルエラーになりました。

* ACI0099112 ``ALERT`` ``CONFIRM``などのモーダルウィンドウが表示された状態で``SET MENU BAR``にオプション（``*``）を渡して実行した場合，メニュー項目が選択不可になりました。

* ACI0099110 ``SET CHANNEL``で``3600``を下回るボーレートを指定した場合，エラー``-28``が返されました。

* ACI0099107 インタプリターモードのみ。選択リストが設定された変数のデータ型は，デフォルトで``18``（テキスト配列）に設定されました。期待されるのは，選択リストが設定されてない変数のように``5``（未定義）になることです。フォームロード時にデータ型がテキスト配列になってしまうため，文字列の代入文がシンタックスエラーになってしまいます。変数をテキスト型（``2``）で宣言してコンパイルすれば問題ありません。

* ACI0099105 ``QUERY``など，値を返さない式が4D Write Proドキュメントに埋め込まれている場合，からの文字列ではなく，エラー文字列がドキュメントに挿入されました。

* ACI0099091 テンプレート（レンジオブジェクト）に挿入された式を評価し，新規Write Pro文書に組み込んだ場合，式に設定されたフォントサイズが失われ，前後のフォントサイズが評価された式のテキストに適用されました。

* ACI0099090 17R3で追加された``On Mobile App Authentication``データベースメソッドにコードを記述した後，下記の17.xで開いたストラクチャをコンパイルしようとすると，アプリケーションがクラッシュしました。トラクチャを修復すれば問題は解消されますが，その後，17R3で``On Mobile App Authentication``データベースメソッドを開こうとすると，エラー``-5``が返されました。

* ACI0099069 クライアント/サーバー版のみ。クラシックランゲージの``SAVE RECORD``でレコードを更新した直後にORDAの``get()``メソッドで同じレコードをエンティティとしてロードした場合，最新の値がリロードされないことがありました。ORDAの``query()``メソッドでは問題ありません。数秒の間を置けば，最新の値がリロードされます。

* ACI0099065 64ビット版のみ。``PRINT LABEL``で用紙またはラベルの枠外にオブジェクトが印刷されることがありました。

* ACI0099018 Mac版のみ。境界線スタイル「標準」のオブジェクトは，Retinaディスプレイで左と下のボーダーラインがそれぞれ1ピクセルずれて表示されました。

* ACI0099009 Windows クライアント/サーバー版のみ。4D Writeドキュメント（``.4W7``）を``WP PRINT``を使用してサービスとして実行中のサーバー側でPDF出力した場合，空のPDFが作成されることがありました。

* ACI0099003 Mac 64ビット版のみ。リストフォームの``On Display Detail``イベントで非表示に設定された入力エリアを``On Load Record``イベントで再表示した場合，オブジェクトのボーダーだけが表示され，内容は表示されませんでした。

* ACI0098951 詳細フォームが設定されていないリスト型サブフォームをダブルクリックした場合，予期しないエラーが返されました。期待されるのは，そのテーブルのデフォルト入力フォームが使用されることです。

* ACI0098939 Mac 64ビット版のみ。CEF版Webエリアは``WA Evaluate javascript``の実行が低速でした。システム版と比較しておよそ500倍の時間を要します。Webエリア上でマウスポインターを移動すると，幾らか速度が改善されますが，それでもかなり低速でした。

* ACI0098925 バックアップ設定の「指定時間経過後に再試行」オプションは設定ファイルに保存されませんでした。Windowsでは常に``0``秒となり，macOSでは常に``60``分となりました。

* ACI0099295 アプリケーションの起動時モードが「アプリケーション」に設定されており，スプラッシュウィンドウが非表示に設定されている場合，デザインモードに移動するためには，標準アクションの「デザインモードに移動」を２回実行する必要がありました。

* ACI0099160 Windows版のみ。``Pop up menu``の第２引数（デフォルト項目の指定）が無視されました。

* ACI0099153 macOS 10.14 Mojaveのみ。外部ディスプレイが接続されている場合，``Open form window``で表示されたウィンドウに対して``SET WINDOW RECT``を実行すると，ウィンドウが消えてしまうことがありました。 

* ACI0099144 `` OBJECT DUPLICATE``でラジオボタンを既存のグループに所属させることができませんでした。

* ACI0099135 テキスト型の変数を使用してBOM（バイトオーダーマーク）付きのUTF-8を``HTTP Get``で受信した場合，冒頭BOM（``0xFEFF``）がそのままテキストに代入されました。BLOBで受信してから``Convert to text``でテキストに変換した場合は問題ありません。

* ACI009938 Mac版のみ。Write Proドキュメントにアンダーラインまたは取り消し線がセットされたスタイルシートをレンジに設定した場合，アンダーラインまたは取り消し線の属性がレンジに適用されませんでした。

* ACI0099349 Windows版のみ。プロパティリストが表示されている状態でフォームエディターではないウィンドウを最前面に移動した場合，プロパティリストが非表示になりませんでした。

* ACI0099338 Windows版のみ。ビルドしたSDIアプリケーションのウィンドウにメニューバーが表示されませんでした。

* ACI0099326 Write Proドキュメントのハイパーリンクが設定されたテキストのフォントスタイルにアンダーラインを適用した場合，テキストのハイパーリンクが取り除かれました。

* ACI0099322 ``On Load``イベントでコレクション型のリストボックスに要素を追加された場合，暗黙的にフォームが再描画されませんでした。つまり，``Form.data:=Form.data``のようなコードを明示的に実行する必要がありました。

* ACI0098325 １回の``WP SET ATTRIBUTES``コールで同時に設定できないWrite Pro属性がありました。

* ACI0098299 ピクチャを返すメソッドを参照する4D ViewドキュメントをView Proに変換した場合，背景色がホワイトのピクチャが表示されませんでした。

* ACI0097958 4D SVGコンポーネントのヘルプメニューを選択すると，v12のドキュメントページが表示されました。

* ACI0097177 Mac 64ビット版のみ。4D Serverでプリントジョブを開始した後に``WP PRINT``をコールした場合に返されるエラーメッセージに一貫性がありませんでした。32ビット版では，プリントジョブを開始した後にこのコマンドを使用することはできない，という内容のメッセージが返されますが，64ビット版では，``WP PAGE SETUP``と``WP PRINT``をサポートしているのは（サーバー版を除く）64ビット版だけである，という内容のメッセージが返されました。

* ACI0098999 メソッドから返されたオブジェクト型のプロパティにフォーミュラオブジェクトが含まれている場合，``Method.formula()``と記述すればそのフォーミュラを実行することはできますが，``Method().formula()``のように記述するとそのフォーミュラは実行されませんでした。

* ACI0098996 Mac 64ビット版のみ。CEF版のWebエリアに表示されたHTMLフォームに含まれる``<select>``要素を編集しようとするとアプリケーションがクラッシュしました。

**注記**: CEFの[バグ](https://bitbucket.org/chromiumembedded/cef/issues/2495/cefclient-external-message-pump-crash-when)が原因でした。17r5ではCEFのバージョンが``3626``に引き上げられています。

* ACI0098961 Mac 64ビット版のみ。CEF版のWebエリアに表示されたHTMLフォームに含まれる``<select>``要素をクリックするとアプリケーションがクラッシュしました。

* ACI0098843 Mac版のみ。Finderの「情報を見る（``command``+``I``）」画面にコピーライト情報が表示されませんでした。

* ACI0098807 ``#4DIF``タグで未定義の変数を``PROCESS 4D TAGS``で評価した場合，エラーメッセージに表示される未定義の変数名の前に余分な空白文字が出力されました。

```
C_TEXT($script;$resp)

$script:="<!--#4DIF $var31 =\"test\"-->"
$script:=$script+"<!--#4DENDIF-->"

PROCESS 4D TAGS($script;$resp) 
```

* ACI0099198 ``If``条件に余分な閉じカッコが存在する場合，大量のシンタックスエラーが連鎖的に返されました。

* ACI0099181 SQLの``COUNT``に``DISTINCT``オプションを指定した場合，正しい結果が返されませんでした。

* ACI0099179 Write Proドキュメントに空の文字列を返すフォーミュラの後にテキストを返すフォーミュラが「中央揃え」で記述されている場合，空のフォーミュラが左側に存在するためにテキストが実際の中央よりも右側に表示されました。

* ACI0099167 ``METHOD SET CODE``でコードがクリアされたメソッドから``METHOD GET CODE``で取り出した場合，コメント行の最後にあるべき改行コード（``\r``）が返されませんでした。

* ACI0099148 4D for iOSの「データ」ページで「プロダクションサーバーデータファイル」が選択されており，「ビルドするごとにデータを再生成しない」オプションが有効にされている場合，「再生成する」ボタンをクリックすれば，project.dataSet > Resources > Assets.xcassets にカタログとデータが書き出されるはずですが，Webサーバーが起動していないと，書き出されませんでした。

* ACI0099145 Mac版のみ。リストボックスのヘッダーはフォントカラーがブラックに固定されていました。

* ACI0099293  フランス語版の4Dで公開されたWSDLからWebサービスウィザードでプロキシメソッドを作成した場合，``If`` ``Else`` ``End if`` 代わりにフランス語版のキーワードが出力されました。

* ACI0099286 ``Request``に渡されたテキストが長すぎると，入力エリアが表示されなかったり，間違った位置に表示されたりしました。

* ACI0099285 Write Proドキュメントに２個以上のセクションを追加した場合，``WP Get Sections``から返される数が正しくありませんでした。

* ACI0099284 無効なホスト名が指定された場合，``transporter.checkConnection()``は``status``に``False``を返しますが，``transporter.send()``は``True``を返しました。

* ACI0099268 Write Proに``\n``文字が含まれるテキストを``WP SET TEXT``で挿入した場合，改行が挿入される代わりに重ねてテキストが表示されました。

* ACI0099258 ``VERIFY CURRENT DATA FILE``に無効なファイルパスを渡した場合，アプリケーションがクラッシュしました。

* ACI0099248 プロジェクトモードのメニューエディターでメニューアイテムを追加しようとすると，アプリケーションがクラッシュすることがありました。比較的，小さなメニューでは問題ありません。

* ACI0099233 Mac版のみ。リストにバインドされたタブコントールのタブを``SET LIST ITEM PROPERTY``で``disabled``状態に設定した場合，タブの表示が``enabled``状態と変わりませんでした。

* ACI0099223 4D ViewドキュメントをView Proに変換した場合，時間を返す関数が正しく変換されませんでした。

**注記**: ``Current time``は，日付と時間を返す``NOW()``ではなく``RUNTIME_CURRENT_TIME``に変換されるようになりました。

* ACI0099139 クライアント/サーバー版のみ。Write Proドキュメント（バイナリ形式の特殊なオブジェクト型）はORDAの``save()``メソッドで保存できませんでした。

**注記**: 17.xクライアント/サーバー版の``entity.save()``は，バイナリ形式のオブジェクト型フィールドに対応していません。これは仕様です。

<i class="fa fa-external-link" aria-hidden="true"></i> [entity.save()](https://livedoc.4d.com/--17-R2.1720/ORDA/entitysave.305-3857761.ja.html)

* ACI0099311 ``On Header Click``イベントで``LISTBOX GET CELL POSITION``を使用した場合，正しい列番号が返されませんでした。

* ACI0099308 Windows版のみ。インタープリターモードで``New process``に``32*1024``以下のスタックサイズを指定した場合，スタック不足エラーが返されました。

**注記**: ドキュメントに記述されているように，デフォルト値（``0``）を渡さない場合，スタックサイズは少なくとも``64*1024``を確保することが推奨されています。

<i class="fa fa-external-link" aria-hidden="true"></i> [New process](https://doc.4d.com/4Dv17/4D/17.1/New-process.301-4179077.ja.html)
