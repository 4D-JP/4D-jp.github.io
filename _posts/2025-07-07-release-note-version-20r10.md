---
layout: fix
title: "4D 20r10 修正リスト"
date: 2025-09-29 08:00:00
categories: 修正リスト
tags: 20r10
build: 100252
version: "20r10"
permalink: /2025/188/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0105907 クライアント自動アップデート画面の背後にプロジェクトをロード中であるという余計な進捗ダイアログが表示されました。

* ACI0105797 明示的に型宣言されていない変数を`BASE64 ENCODE`の第`2`パラメーターに渡した場合，インタープリターモードではテキスト型，コンパイルモードではBLOB型が返されました。

* ACI0105892 AIKitの`OpenAIChatCompletionsAPI`コンストラクターに`onResponse` `onTerminate` `onError`コールバック関数を[パラメーター](https://developer.4d.com/docs/ja/aikit/Classes/openaichatcompletionsparameters)として渡した場合，`onTerminate`が`onData`の代わりにコールされました。

* ACI0105890 Write Proドキュメント内で画像をドラッグし，ヘッダーまたはフッターを超えてページにドロップした場合，移動ではなくコピーが実行されました。

* ACI0105887 Windows版のみ。`SHOW ON DISK`に渡したフォルダー内で最初に表示されるファイルが別のフォルダーに対するショートカットだった場合，そのショートカットが開かれてしまい，コマンドに渡したパスではなく，ショートカットのターゲットがエクスプローラーに表示されました。

* ACI0105878 `FORM LOAD`の第`2`引数を省略してフォームをロードした場合，`Form`オブジェクトのプロパティ値を`OBJECT SET VALUE`で入力オブジェクトに`設定することができませんでした。`FORM LOAD`の第`2`引数にオブジェクト型を渡した場合は問題ありません。

* ACI0105741 Write Proドキュメントのアンカー画像フォーミュラやテーブル埋め込みフォーミュラにエスケープ文字が含まれている場合，BLOBやファイルからドキュメントを正しくデコードすることができませんでした。インラインフォーミュラであれば問題ありません。

* ACI0104577 コレクションの値を直接デバッガで編集した場合，`[""]`（空の文字列）が削除され，`["2"]`や`["null"]`（文字列）が`[2]`（数値）や`[null]`に変わりしました。

**注記**: 入力を容易にするため，できるときには表示されたリテラル値から引用符を取り除いていましたが，修正により，空の文字列は特殊なケースとして扱われるようになりました。その他のケースは将来のバージョンで修正される予定です。

* ACI0103921 `OPEN PRINTING JOB`で開始した印刷ジョブでView Proでオフスクリーンエリアを印刷した場合，アプリケーションが終了する恐れがありました。画面上のView Proエリアであれば，問題ありません。

**注記**: 問題は修正されましたが，オフスクリーンエリアを印刷する場合，印刷ジョブを開始する前に`SET CURRENT PRINTER`と`SET PRINT OPTION`を忘れずに実行してください。パス名を指定せずに印刷コマンドを実行した場合，ファイル選択画面が表示されるのは仕様です。オフスクリーンWebエリアのコンテキストで画面を表示しようとした場合の動作は未定義です。

* ACI0105889 `VP SET FORMULA`で無効なフォーミュラを設定した場合，セルに`#NAME?`という文字列が表示されませんでした。

**注記**: 修正により，ワークブック設定の`allowInvalidFormula`がデフォルトで`true`になりました。`VP SET WORKBOOK OPTIONS`で変更することもできます。

* ACI0105760 `For`ループ内の`If`条件文で`&&`演算子の後に改行するためのバックスラッシュ記号（`\`）を挿入した場合，「トレーラーがありません」というシンタックスエラーが返されました。

* ACI0105893 AIKitコンポーネントの`chat.completions.create()`にクラスのインスタンスを渡した場合，`onData`などのコールバック関数が呼ばれませんでした。内部的に`OB Keys`が使用されているため，メンバー関数が見過ごされているようです。

* ACI0105880 ログイン画面（ユーザーリスト）の背後にプロジェクトをロード中であるという余計な進捗ダイアログが表示されました。

* ACI0105873 メソッドエディターでコマンド（例: `QUERY`）に続けてドット（`.`）を入力した場合，無効なプロパティ名がコード補完の候補リストに表示されました。

* ACI0105881 Windows版GDIモードのみ。ヘッダーのないコレクションまたはエンティティセレクション型リストボックスをフォームに表示した場合，スクロールするたびにリストボックスのGDIオブジェクトの数が増えてゆき，およそ`10000`個に達すると，リストボックスに何も表示されなくなりました。

**注記**: 問題は修正されましたが，フォーム定義オブジェクトをコードで構築したり，*.4DForm* ファイルを外部エディターで作成したりしない限り，ヘッダーのないコレクションまたはエンティティセレクション型リストボックスがフォームに表示されることはないはずです。

* ACI0105863 幅に収まらないテキストを単一行の入力オブジェクトに代入した場合，テキストの先頭ではなく末尾が表示されました。マルチスタイルが有効であれば，過去バージョンと同じようにテキストの先頭が表示されます。ACI0105769が修正されたことによる副作用のようです。

* ACI0105857 コンパイルモードのみ。`METHOD Get Path`コマンドにテーブルに対するポインターの逆参照を渡した場合，エラーが返されました。

* ACI0105879 同時に複数のコンポーネントをダウンロードした場合，`tool4d`がクラッシュする恐れがありました。4Dや4D Serverであれば問題ありません。

* ACI0105854 *manifest.json* に列挙されている最後のプラグインコマンドは，メソッドエディターのコード補完に表示されませんでした。

* ACI0105853 `Begin SQL`/`End SQL`ブロック内では，メソッドエディターのコード補完にローカル変数が表示されませんでした。

* ACI0105578 Windows版のみ。サーバーアプリケーション終了時に表示される通知メッセージのタイトルが英語で表示されました。

* ACI0105858 v13のストラクチャーファイルを開こうとした場合，変換ダイアログをキャンセルしても，内部DB4Dバージョンが更新されてしまい，過去バージョンではストラクチャーファイルが開けなくなりました。MSCでストラクチャーを修復すれば，再び開くことができるようになります。

ACI0105849 `4D.Vector`オブジェクトを`JSOM Stringify`で文字列に変換した場合，無効なJSONが返されました。`"[object Vector]"``という文字列が返されるべきです。

* ACI0105820 強制ログインモードを有効にした場合，4D Mobileを利用することができませんでした。

* ACI0105759 時間型の入力オブジェクトの負の値を入力した場合，マイナス記号が取り除かれ，正の値に変換されました。`Time("-1:00:00")`も同様です。負の整数を代入した場合は問題ありません。

* ACI0105843 Windows版のみ。「最近使用したプロジェクト」のパスがネットワークボリュームを指している場合，そのプロジェクトを開こうとするとアプリケーションがクラッシュしました。

* ACI0105844 Windows版のみ。`VP SET COLUMN COUNT`にエリア名をテキスト型で渡した場合，整数に変換できないというエラーが返されました。*syntaxJA.json* ファイルのシンタックス定義が正しくないようです。

* ACI0105831 セレクション型またはエンティティセレクション型のリストボックス列をフォームエディターのコンテキストメニューで複製した場合，トークン値が「変数または式」プロパティに設定されました。

* ACI0105811 GitHubのアセットがHTTPでダウンロードできないことがありました。リダイレクトで到達できないサーバーがあるようです。

**注記**: [RFC 9110](https://www.rfc-editor.org/rfc/rfc9110.html#name-redirection-3xx)によると，`3xx`リダイレクトでメソッドが`GET`または`HEAD`に変更された場合，コンテンツ特有のヘッダー（例: `Content-Encoding` `Content-Language` `Content-Location` `Content-Type` `Content-Length` `Digest` `Last-Modified`）は取り除かれるべきです。また，セキュリティに関わるもので，自動的に追加されないもの（例: `Authorization` `Cookie`）も取り除かれるべきです。

* ACI0105711 `WP Paragraph range` `WP Selection range` `WP Bookmark range` `WP Picture range` `WP Text range`など，一部のWrite ProコマンドのヘルプTipsが正しくありませんでした。

* ACI0105668 4D Volume Desktopのパスを指定せずにクライアントアプリケーションをビルドしても，エラーが返されませんでした。

* ACI0105837 直接型指定を有効にした場合，数値型を返すコマンドの引数に整数型の変数を渡すコードがコンパイルエラー（実数から倍長整数への再定義）になりました。

```4d
var splitter : Integer
var y1 : Integer  // エラー : 変数の再定義
OBJECT GET COORDINATES(splitter; $x1; y1; $x2; $y2)
```

* ACI0105810 ビルドキーの`DatabaseToEmbedInClientMacFolder`または`DatabaseToEmbedInClientWinFolder`を使用してクライアントアプリケーションをビルドした場合，`RESTART 4D`で再起動した後にシングルユーザー版のライセンス入力画面が表示されました。ビルド版のクライアントアプリケーションを使用するためにライセンスは必要ないはずです。

* ACI0105788 プロジェクトフォームのフォームメソッドのドキュメンテーションがエクスプローラーに表示されませんでした。

* ACI0105832 Windows版のみ。同時に複数のスレッドで同一の共有オブジェクトが開放されることにより，アプリケーションがクラッシュする恐れがありました。

* ACI0105826 日本語版のみ。一部のプロジェクトメソッドがトークナイズされず，プロセス変数として認識されました。

* ACI0105815 アンダースコア記号（`_`）を含むMIMEヘッダーが正しくエンコーディングされませんでした。

* ACI0105791 すでにヘッダーが存在するWrite Proセクションに`WP New header`でヘッダーを挿入しようとした場合，未知のエラー`101`が返されました。

**注記**: ヘッダー/フッターがすでに存在するという具体的なエラーメッセージが追加されました。

* ACI0105809 Windows版のみ。ビルドしたアプリケーションのMDIウィンドウタイトルバーにアプリケーション名が「app - app」と二重に表示されました。

* ACI0105789 Windows版のみ。Welcomeウィザードの「ローカルアプリケーションプロジェクトを開く」アイコンが途切れて表示されました。

* ACI0105814 コンポーネントフォルダーに無効なハードリンクが存在する場合，依存関係マネージャーがエラーを返しました。

* ACI0105822 Windows版のみ。ダイアログを表示していないプロセスで印刷ダイアログを呼び出した場合，印刷ダイアログがモーダルではなくなり，別のウィンドウをクリックしただけで閉じられました。

* ACI0105829 クライアント/サーバー版の開発モードでは，オブジェクト型フィールドのクラスを設定することができませんでした。

* ACI0105824 デスクトップ版からWeb管理にアクセスした場合，アプリケーションがクラッシュしました。サーバー版のWeb管理にログインを試みた場合，HTTPエラー`500`が返されました。ホストプロジェクトのタスクで接続ハンドラーが実行されているようです。

* ACI0105823 メソッドエディターを閉じてから再表示した場合，ウィンドウサイズが再現されないことがありました。

**注記**: ウィンドウ幅`964`以下あるいは高さ`399`以下までリサイズした場合，ウィンドウサイズが正しく保存されませんでした。

* ACI0105767 サブフォームオブジェクトのプロパティリストに「フォーカスの四角を隠す」が存在しました。

* ACI0105825 リソースフォルダーに`LoginImage.png`が存在する場合，カスタム版のユーザーログイン画面が表示されるはずですが，デフォルトのアイコンとメッセージが非表示になりませんでした。

* ACI0105806 ASTインタープリターモードでは，呼び出し連鎖の途中で遅延モードのエラーが返された場合，関数の実行が中断されず，続けてエラーが返された場合には`Last errors`が上書きされました。

* ACI0105769 テキスト入力からタブ移動した場合，水平スクロールバーが初期位置に戻りました。

* ACI0105742 クライアント/サーバー版のみ。オブジェクト型の`Null`ではないエンティティ属性にアクセスした場合，`touchedAttributes()`が`True`を返しました。

* ACI0105800 リモートデータストアのエンティティのオブジェクト型属性にアクセスした場合，非共有オブジェクトがリモートキャッシュに置かれ，複数のスレッドからアクセスされてしまう恐れがありました。

* ACI0105751 サーバー管理画面のメンテナンスページのヘルプTipsとボタンタイトルの内容が一致していませんでした。

* ACI0105813 メソッドメニューの「エクスプローラーに表示…」を実行した場合，エクスプローラーのメソッド画面ではなく，ホーム画面に移動しました。

* ACI0105623 [`JSON Validate`](https://developer.4d.com/docs/ja/commands/json-validate)で検証したオブジェクトがJSONスキーマの`array`型プロパティの`items`キーワードのサブスキーマに違反した場合，評価ステータスに`{success:true}`が返されますが，同時にエラーも返されました。

**注記**: `items`キーワードのサブスキーマ評価の不具合が修正されました。`items`に単一のサブスキーマが定義されている場合，コレクションの全要素がそのサブスキーマに対して評価されます。`items`に複数のサブスキーマが定義されている場合，コレクションの各要素が対応する位置のサブスキーマに対して評価されます。`additionalItems`のサポートは部分的であることに留意してください。ブール値はサポートされていますが，サブスキーマはサポートされていません。

* ACI0105768 バイナリモードのみ。テーブルフォームをウィザードで作成することができませんでした。

* ACI0105799 階層リストオブジェクトのプロパティリストにドラッグ＆ドロップの選択肢「自動」が含まれていました。

* ACI0105778 コンボボックスオブジェクトのプロパティリストにドラッグ＆ドロップの選択肢「自動」が含まれていました。

* ACI0105795 ASTインタープリターモードのみ。`SET ASSERT ENABLED(False)`を実行しても，アサーションが常に有効でした。

* ACI0105716 4D NetKitの`OAuth2ProviderObject.getToken()`で取得したトークンが失効した場合，リフレッシュトークンを使用して自動的にトークンが更新されますが，今度はリフレッシュトークンが返されないため，次回，トークンが失効したときには，自動的にトークンが更新されませんでした。

* ACI0105792 Windows版のみ。カレントプリンターのプリンター名が`30`文字を超える場合，印刷コマンドからエラーが返されました。

* ACI0105790 ASTインタープリターモードのみ。文字列の範囲外の位置を指した[文字参照記号](https://developer.4d.com/docs/ja/Concepts/string#文字参照記号)を評価した場合，アプリケーションがクラッシュしました。

* ACI0105787 「デザインモードを検索」画面を展開する`⌄`ボタンを右クリックした場合，画面のレイアウトが崩れました。

* ACI0105785 「Webサービスウィザード」画面を展開する`⌄`ボタンを右クリックした場合，画面のレイアウトが崩れました。

* ACI0105763 Windows版のみ。MSCで開いたプロジェクトのデータファイルがみつからなかった場合，「開く…」ボタンが不自然な位置に表示されました。

* ACI0105749 リストボックスのセル編集中に`OBJECT SET ENTERABLE`を使用した場合，アプリケーションがクラッシュしました。

**注記**: 問題は修正されましたが，セルの入力中にキースストロークイベントで入力可プロパティを変更することは勧められていません。キーストロークイベントではなく，*On After Edit* を使用するべきです。

* ACI0105761 カレントのライセンスではないDeveloper ProfessionalおよびUnlimited Desktopライセンスをビルドに使用した場合，スタンドアロン版アプリケーションのビルドに失敗しました。

* ACI0105726 Windows版のみ。クライアントモードからシングルユーザーモードに切り替えた後に設定またはWeb管理ダイアログを表示した場合，エラーが表示されました。

* ACI0105777 ASTインタープリターモードのみ。`If`条件に未定義の変数が記述されていた場合，エラーが返されました。

* ACI0105651 *roles.json* で設定した`promote`アクションが適用されませんでした。

* ACI0105501 エクスプローラーでフィールドのドキュメンテーションを表示してクリックした場合，カタログファイルが更新されました。

* ACI0105773 ストラクチャエディターのインスペクターのフォントリストが空でした。 

* ACI0105758 `OBJECT SET RGB COLORS`でグループボックスのフォントカラーを設定することができませんでした。

* ACI0105756 Windows版のみ。ピクチャ入力オブジェクトのフォーカス表示が境界線スタイルに影響されました。

* ACI0105555 Write Proエリアの背景色をリセットすることができませんでした。

* ACI0105772 Windows版のみ。サーバー側で*Qodly Studio* を起動した場合，LSPの反応待ちとなり，メソッドやクラスが表示されませんでした。

* ACI0105750 フランス語版のみ。サーバー管理画面にスペルミス（"Supprimmer"）がありました。

* ACI0105698 テーブルフォームに配置した特定のテキスト型フィールドが正しく表示されませんでした。値の代わりにコロン記号（`:`）が表示されます。

* ACI0105770 バイナリモードでフォームをエクスプローラーのタブにドラッグ＆ドロップした場合，アプリケーションがクラッシュしました。

* ACI0105540 クライアント/サーバー版のみ。クライアント側では`DataClass.getInfo().exposed`が常に`True`を返しました。

* ACI0105754 Windows版のみ。フォームオブジェクトの「変数または式」にピリオド記号（`.`）が含まれている場合，MSCのアプリケーション検証でエラーが返されることがありました。

* ACI0105670 オブジェクト型フィールドに保存されたコレクション型のプロパティを`[]`シンタックスと`eval`でクエリした場合，正しい結果が返されませんでした。インデックスが設定されていなければ問題ありません。

* ACI0105725 ビルド版クライアントアプリケーションのみ。接続ダイアログのカスタムページのチェックボックスが正しい位置に表示されませんでした。

* ACI0105776 Windows版のみ。Windows server 2025 24H2で印刷を実行した場合，エラーが返されることがありました。23H2では問題ありません。
