---
layout: fix
title: "4D v18r4 修正リスト"
date: 2020-07-04 08:00:00
categories: 修正リスト
tags: 18r4  
build: 253814
version: 18r4

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100649 Mac 64ビット版のみ。プラグインSDKのエントリーポイント``PA_GetKey``は，``option``キーの補助を利用して入力したアクセント文字を返しませんでした。U.S.キーボード配列の場合，``option``キーを押しながら``u`` ``e`` ``i`` のようなキーを押すことにより，結合用のアクセント記号を入力することができますが，``PA_GetKey``は，そのような文字に対して``0``を返し，続けて入力されたキーをアクセント記号がない文字のコードを返しました。

* ACI0100632 4D Write Proエリアをズームするたびに``On Data Change``イベントが発生しました。

* ACI0100631 4D Write Proエリアに数式を挿入した場合，``On Data Change``イベントが発生しませんでした。

* ACI0100630 4D Write Proエリアのスクロールバーを操作した場合，``On Data Change``イベントが発生しました。

* ACI0100629 トランスポーターで送信したメールの件名に含まれるスペース記号が``_``文字にエンコードされず，そのまま送信されました。

* ACI0100622 クライアント/サーバー版のみ。``dataClass.get()``のプライマリーキーに空の文字列を渡した場合，スタンドアロン版では``null``が返されましたが，クライアント/サーバー版ではそれぞれの属性が``null``にセットされたエンティティが返されました。

* ACI0100620 日本語ではないシステム言語設定で日本語のファイル名を添付して``SMTP_Send``を実行した場合，エラー``-43``が返されました。

* ACI0100593 コンポーネントがコンパイルモードで実行されている場合，コンポーネントメソッドのパラメーターがデバッグログ（モード``2``または``6``）に記録されませんでした。

* ACI0100571 メールサーバーがExchangeまたはdovecotの場合，``POP3 Transporter``がフリーズしました。GMailでは問題ありません。

* ACI0100564 ``dataStore.canceTtransaction()``メソッドを実行した場合，トランザクション中に削除されたエンティティのロックが解除されませんでした。

* ACI0100556 Windows版のみ。CEF版Webエリアのテキスト入力にユーロ通過記号（``€``）を入力することができませんでした。代わりに「トーフ」が入力されます。32ビット版では問題ありません。ペースト操作であれば入力することができます。``Alt``キーを使用した特殊文字の入力全般の問題です。

* ACI0100487 ツールボックスのメニューエディターでピクチャライブラリから選んだ画像をスプラッシュ画面の背景イメージにすることができませんでした。

* ACI0100442 Webサービス（SOAP）メソッドからテキスト配列を返した場合，クライアント側（``WEB SERVICE GET RESULT``）でアプリケーションがクラッシュしました。サーバーから返されるXMLが正しくないためです。

* ACI0099944 ``Execute on server``のようなコマンドに渡されたパラメーターが明示的に型宣言されていない場合，コンパイルに失敗しました。期待されるのは，デフォルトでバリアント型になることです。

* ACI0099052 ``FTP_Receive``および``FTP_Delete``はデンマーク語の文字（``æøå``）に対応していませんでした。エラー``10060``が返されました。

* ACI0100854 同名のXML要素を``DOM Create XML element``で続けて追加した場合，呼び出しとは逆の順に要素が作成されました。つまり，既存の要素の直前に新しい要素が挿入されました。互換性オプションの「[標準XPathを使用する](https://doc.4d.com/4Dv18R3/4D/18-R3/Compatibility-page.300-4919546.ja.html)」が有効にされていなれば，問題ありません。

* ACI0100857 クラスのメンバーメソッドでクラスオブジェクト``This``をパラメーターとして``DIALOG``に渡した場合，呼び出し後に別のオブジェクトが返されました。フォームに表示したリストボックスのコードが使用している``This``に影響されているようです。

* ACI0100861 ``4DACTION``で呼び出されたメソッドから``WEB SEND TEXT``を使用した場合，メモリーリークが発生しました。コンポーネントの``WEB Server``で``4DINCLUDE``タグが使用できなかった問題（ACI0100832）が修正されたことによる副作用のようです。

* ACI0100868 Mac版のみ。4D for iOSの「プロダクションサーバーデータファイル」を有効にし，「公開」セクションにサーバーのIPアドレスとポート番号を入力した後，サーバー側の``mobileapps``から``key.mobileapp``をファイルをクライアント側にコピーし，「データ」セクションでローカルのキーファイルを選択しても，「サーバーはオンラインです」のメッセージが表示されませんでした。

* ACI0100891 プロジェクトモードのみ。フォームエディターからフォームを実行し，ウィンドウを移動またはリサイズして閉じた場合，次回の実行で配置が再現されませんでした。``geometryStamp``プロパティが更新されていないためです。

* ACI0100879 Windows版のみ。SDIモードアプリを実行し，外部モニターに表示したWrite Proインタフェースで新規スタイルシートを作成しようとした場合，保存ダイアログがメイン画面に表示されました。

* ACI0100877 Mac版のみ。iPadのシステム環境設定で4D for iOSアプリの「Send feedback」を有効にした場合，アプリからフィードバックが送信できるようになりますが，実際にはフィードバックメニューを操作することができませんでした。

* ACI0100875 バイナリデータベースをプロジェクトにエクスポートした場合，そのプロジェクトが開けないことがありました。書き出されたXMLにエラーがあるためです。

* ACI0100872 ``PICTURE PROPERTIES``の第１パラメーターにオブジェクトのピクチャ型プロパティを渡した場合，コンパイルモードでエラーが返されました。代わりにピクチャ型のローカル変数を使用すれば問題ありません。

* ACI0100853 サーバー管理画面の「ユーザー」あるいは「プロセス」ページを切り替えている最中に``Get process activity``を実行した場合，アプリケーションがクラッシュしました。

* ACI0100851 クライアント/サーバー版のみ。サーバーがWindows版の場合，１対Ｎリレーションが存在するテーブルに対して``dataClass.fromCollection()``メソッドを実行するとエラーが返されました。

* ACI0100847 64ビット版のみ。``SET CURRENT PRINTER("")``でカレントプリンターをデフォルトプリンターにリセットすることができませんでした。

* ACI0100846 Windows版のみ。地域と言語が英語（シンガポール）に設定されている場合，日付フォーマット（``System Date abbrievated``）が正しくありませんでした。``DD/MM/YY``ではなく``MM/DD/YY``で表示されました。

* ACI0100845 メールオブジェクトの``messageId``プロパティに空の文字列を設定してトランスポーターでメールを送信した場合，MIMEメッセージの``Message-ID``ヘッダーが中途半端（``<>``）な状態で出力され，メールがスパム扱いになる恐れがありました。``messageId``プロパティが未定義であれば，自動的に値が設定されるので，問題ありません。

* ACI0100844 Windows版のみ。MDIモードで最大化されたウィンドウを表示しているプロセスが新規ウィンドウを表示した場合，新しいウィンドウは最大化されていない状態で表示されますが，そのウィンドウをマウス操作でリサイズしようとすると，アプリケーションがクラッシュしました。

* ACI0100842 Mac版のみ。ZIP圧縮したアプリを``ZIP Read archive``で展開した場合，内部のシンボリックリンクがオリジナルのアイテムよりも先に展開されるため，アプリが起動できませんでした。

* ACI0100836 入力不可・フォーカス可のオブジェクトにフォーカスを移動した場合，テキストをコピーすることができますが，編集メニューの「コピー」はdisabled状態のままでした。

* ACI0100835 メソッドエディターでプロジェクトメソッド名を選択して「定義に移動」した場合，エディターでそのメソッドが開きませんでした。

* ACI0100832 ``WEB Server``コンポーネント内では``4DINCLUDE``タグが動作しませんでした。

* ACI0100831 ``WEB SEND FILE``をコンポーネント内で使用し，文字セットが特定できないファイルを送信した場合，アプリケーションがクラッシュしました。

* ACI0100826 Kerioのメールサーバーに対して``POP3 Transporter``の``getMail()``メソッドを使用した場合，``5``分間，アプリケーションがフリーズしたようになりました。``getMailInfoList()``から返されるバイト数と，最終的にダウンロードされるBLOBデータのサイズが一致しないことが関係しているようです。

* ACI0100825 SQLの``IN``句をインデックスフィールドに対して使用した場合，``IN``のリストが降順にソートされていないと，正しい結果が返されませんでした。

* ACI0100822 ``Open form window``コマンドにパラメーターとして渡されているテーブルフォーム名を範囲選択して「定義に移動」した場合，フォームエディターではなく，ストラクチャエディターのテーブルプロパティにジャンプしました。

* ACI0100821 ストラクチャをプロジェクトにエクスポートした場合，出力フォームに配置されたブール型フィールドが正しく変換されませんでした。

* ACI0100809 クライアント/サーバー版のみ。IPアドレスの「許可/拒否リスト」のエントリーにクライアントの「拒否」アドレスと「すべて許可」を組み合わせた設定を入力した場合，拒否」に設定されているアドレスからクライアントを接続することができました。たとえば

* ACI0100803 Write Proの表組に極太のボーダーを設定した場合，ラインに細い隙間が描画されました。

**注記**: 問題は修正されましたが，デフォルトの背景[クリッピングボックス](https://doc.4d.com/4Dv17/4D/17/Using-4D-Write-Pro-standard-actions.200-3726284.ja.html)が「段落」に設定されているため，アンチエイリアス処理により，背景カラーがボーダーにオーバーフローすることがあります。これが問題であれば，クリッピングボックスを「``padding-box``」に変更することができます。

* ACI0100801 Webサーバーのホームページが設定されていない場合，``Get 4D folder(HTML Root folder)``および``Folder(fk web root folder)``は絶対パスではなく，相対パスを返しました。

* ACI0100799 ``1``行 ``1``列にコマ割り設定されたピクチャボタンをクリックすると，アイコン画像が消えました。再度，クリックすると，ピクチャが再表示されます。

* ACI0100928 Mac版のみ。デザインモードのエクスプローラーで「ホーム」タブのフォルダーに収容されているクラスをメソッドエディターで開いた後，``command``+``W``または``command``+``S``を入力した場合，クラスが「ホーム」タブから消えることがありました。アプリケーションを再起動すると，「ホーム」タブのトップレベルにクラスが移動していることが確認できます。

* ACI0100923 新しいXPathシンタックスを有効にした場合，``DOM Create XML element``の速度が以前よりもずっと遅くなりました。

* ACI0100916 ``OBJECT SET SCROLLBAR``でピクチャオブジェクトのスクロールバーを表示した場合，フォームのページを切り替えると，スクロールバーが非表示に戻りました。

* ACI0100915 Mac版のみ。4D for iOSの同期処理中にアプリがクラッシュすることがありました。

* ACI0100908 ``FTP_Receive``のパラメーターにファイル名を渡した場合，相対パスとして処理されず，エラー``-48``が返されました。

* ACI0100902 コレクション型リストボックスの``On Data Change``イベントでは``This``が使用できませんでした。

* ACI0100898 ``VP SET FORMULA``でフォーミュラを設定したセルに対して``VP COLUMN AUTOFIT``を使用した場合，``autoFit``が適用されませんでした。

* ACI0100897 非常に長い件名のメールをトランスポーターで送信した場合，空白文字が挿入されました。ヘッダーエンコーディング``mail mode UTF8 in base64``で問題が発生します。

* ACI0100896 プロジェクトモードのみ。マークダウン形式のコメント内に記述したコード（言語は未指定）が4Dコードブロックとして表示されました。

* ACI0100894 エンティティセレクション型リストボックスのデータソースをクエリし，エンティティセレクションのサイズを減らした場合，``LISTBOX SELECT ROWS ``が正しく動作しませんでした。

* ACI0100893 「外部ファイルのユーザー設定」が有効にされている場合，サーバー側の管理画面でクライアントをドロップすることができませんでした。
