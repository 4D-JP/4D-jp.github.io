---
layout: fix
title: "4D v18 修正リスト"
date: 2020-06-17 08:00:00
categories: 修正リスト
tags: "18.2"
build: 252958
version: 18.2

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100756 ``OB Is empty``にフォーミュラオブジェクトを渡した場合，``True``が返されました。

* ACI0100622 クライアント/サーバー版のみ。``dataClass.get()``のプライマリーキーに空の文字列を渡した場合，スタンドアロン版では``null``が返されましたが，クライアント/サーバー版ではそれぞれの属性が``null``にセットされたエンティティが返されました。

* ACI0100564 ``dataStore.canceTtransaction()``メソッドを実行した場合，トランザクション中に削除されたエンティティのロックが解除されませんでした。

* ACI0100845 メールオブジェクトの``messageId``プロパティに空の文字列を設定してトランスポーターでメールを送信した場合，MIMEメッセージの``Message-ID``ヘッダーが中途半端（``<>``）な状態で出力され，メールがスパム扱いになる恐れがありました。``messageId``プロパティが未定義であれば，自動的に値が設定されるので，問題ありません。

* ACI0100821 ストラクチャをプロジェクトにエクスポートした場合，出力フォームに配置されたブール型フィールドが正しく変換されませんでした。

* ACI0100797 WebサーバーにHTTPの``PATCH``メソッドを送信した場合，HTTPヘッダーの``X-METHOD``フィールドに値がセットされませんでした。

**注記**: ``PATCH``メソッドは，``PUT``に代わり，2010年ごろからリソースを更新する手段として使用されるようになりました。``PUT``はリソース全体を置き換えるのに対し，``PATCH``はリソースの一部（たとえばJSONの属性など）を変更するために使用することができます。

* ACI0100727 v16からv17に変換されたストラクチャの場合，フォームエディターのプロパティリストでチェックボックスの標準アクションを``accept``に設定することができました。

* ACI0100698 macOS 10.14のみ。３Ｄチェックボックスの「開示ボタン」をクリックした場合，``Form event code``コマンドが正しいイベントを返しませんでした。10.15では問題ありません。

* ACI0100687 Mac版のみ。4D for iOSの「プロダクションサーバーデータファイル」を有効に設定した場合，``Mobileapps``フォルダーに``key.mobileapp``ファイルが作成されませんでした。ACI0100704（修正済み）と関連のある問題です。

* ACI0100858 ``folder.getIcon()``メソッドがエラーを返しました。

* ACI0100828 フォームの２ページ目以降にWrite Proドキュメントを表示した場合，上部ツールバーに選択テキストに対応するカレントスタイルシートが表示されませんでした。

* ACI0100803 Write Proの表組に極太のボーダーを設定した場合，ラインに細い隙間が描画されました。

**注記**: 問題は修正されましたが，デフォルトの背景[クリッピングボックス](https://doc.4d.com/4Dv17/4D/17/Using-4D-Write-Pro-standard-actions.200-3726284.ja.html)が「段落」に設定されているため，アンチエイリアス処理により，背景カラーがボーダーにオーバーフローすることがあります。これが問題であれば，クリッピングボックスを「``padding-box``」に変更することができます。

* ACI0100649 Mac 64ビット版のみ。プラグインSDKのエントリーポイント``PA_GetKey``は，``option``キーの補助を利用して入力したアクセント文字を返しませんでした。U.S.キーボード配列の場合，``option``キーを押しながら``u`` ``e`` ``i`` のようなキーを押すことにより，結合用のアクセント記号を入力することができますが，``PA_GetKey``は，そのような文字に対して``0``を返し，続けて入力されたキーをアクセント記号がない文字のコードを返しました。

* ACI0100890 32ビット版で作成されたラベル定義ファイルをラベルエディターでロードしようとした場合，エラー``-9930``が返されました（``Editor_ON_DATA_CHANGE``コンポーネントメソッドの``286``行目）。ACI0096880が修正されたことによる副作用のようです。
 
* ACI0100851 クライアント/サーバー版のみ。サーバーがWindows版の場合，１対Ｎリレーションが存在するテーブルに対して``dataClass.fromCollection()``メソッドを実行するとエラーが返されました。

**注記**: コレクション中に属性が作成される順序が原因でした。リレーション属性がコレクションの最後にある場合に問題が再現しました。

* ACI0100842 Mac版のみ。ZIP圧縮したアプリを``ZIP Read archive``で展開した場合，内部のシンボリックリンクがオリジナルのアイテムよりも先に展開されるため，アプリが起動できませんでした。

* ACI0100781 ``MSG_Extract``で取り出した添付ファイル名のアポストロフィ記号がデルタ（``∆``）記号になりました。

* ACI0100891 プロジェクトモードのみ。フォームエディターからフォームを実行し，ウィンドウを移動またはリサイズして閉じた場合，次回の実行で配置が再現されませんでした。``geometryStamp``プロパティが更新されていないためです。

* ACI0100868 Mac版のみ。4D for iOSの「プロダクションサーバーデータファイル」を有効にし，「公開」セクションにサーバーのIPアドレスとポート番号を入力した後，サーバー側の``mobileapps``から``key.mobileapp``をファイルをクライアント側にコピーし，「データ」セクションでローカルのキーファイルを選択しても，「サーバーはオンラインです」のメッセージが表示されませんでした。

* ACI0100790 プロジェクトモード。フォームのプロパティを変更した場合など，特的の条件では，ドキュメントが更新されたことを示すアイコン（Macでは閉じるボタンのスポット，Windowsではアスタリスク記号）が表示されませんでした。プロパティリストを操作した後，フォームエディターをクリックすれば，アイコンが表示されます。

* ACI0100897 非常に長い件名のメールをトランスポーターで送信した場合，空白文字が挿入されました。ヘッダーエンコーディング``mail mode UTF8 in base64``で問題が発生します。

* ACI0100872 ``PICTURE PROPERTIES``の第１パラメーターにオブジェクトのピクチャ型プロパティを渡した場合，コンパイルモードでエラーが返されました。代わりにピクチャ型のローカル変数を使用すれば問題ありません。

**注記**: 問題は修正されましたが，アプリケーションを再コンパイルする必要があります。修正されたのは``PICTURE PROPERTIES``コマンドだけです。

* ACI0100760 4D View Proエリアを表示した直後のタイプ入力に対し，``On After Edit``イベントが発生しませんでした。Macの場合，アプリケーションを再起動した後は問題が発生しません。Windowsの場合，最初に入力したのが数字であれば，問題は発生しません。いずれのプラットフォームでも，最初の文字をフォーミュラバーから入力したのであれば，問題は発生しません。また，セルをダブルクリックsて入力モードに移行したのであれば，問題は発生しません。セルを選択した状態から直接タイプ入力を開始した場合に問題が発生します。

* ACI0099052 ``FTP_Receive``および``FTP_Delete``はデンマーク語の文字（``æøå``）に対応していませんでした。エラー``10060``が返されました。

* ACI0100809 クライアント/サーバー版のみ。IPアドレスの「許可/拒否リスト」のエントリーにクライアントの「拒否」アドレスと「すべて許可」を組み合わせた設定を入力した場合，拒否」に設定されているアドレスからクライアントを接続することができました。たとえば

```
拒否 "192.168.2.2"
拒否 "192.168.2.8"
許可 *
```

から``1``行目（サーバーのローカルIPアドレス）を削除した場合，``1``行目に繰り上がった「拒否」アドレス（クライアントのIPアドレス）から接続することができました。

**注記**: 「すべて許可」の前に拒否アドレスが指定されていれば，そのアドレスは許可の例外となります。拒否アドレスの前に「すべて許可」が指定されていれば，拒否アドレスの指定は無効となります。これが本来の仕様です。修正前，常にサーバーのローカルIPアドレスが「許可/拒否リスト」のIPアドレスと照合されていました。

* ACI0100779 テーブルの暗号化を有効にした時点で該当するテーブルにレコードが存在しなかった場合，そのテーブルにレコードを追加することができませんでした。

* ACI0100722 [``File``](https://doc.4d.com/4Dv18/4D/18/File.301-4506034.ja.html)に定数（例：``Build application log file``）を渡し，そのファイルが存在しなかった場合，「引数番号1が無効です」というエラーが返されました。ファイルが存在しないだけであり，パラメーターが間違っているわけではないので，このようなエラーが返されるべきではありません。

**注記**; 修正により，``Get 4D file``もエラーではなく，理論上のファイルパスを返すようになりました。例外は``Backup log file``および``Last backup file``です。実際にバックアップを実行するまでパスは未定なので``Null``が返されます。

* ACI0100696 Windows版のみ。画面の下方で日本語を入力した場合，変換プログラムの候補リストが入力中の文字列を覆い隠してしまいました。ポップアップがテキスト入力エリアの（上端ではなく）下端から上に向かって描画されるためです。

* ACI0100846 Windows版のみ。地域と言語が英語（シンガポール）に設定されている場合，日付フォーマット（``System Date abbrievated``）が正しくありませんでした。``DD/MM/YY``ではなく``MM/DD/YY``で表示されました。

* ACI0100774 Windows版のみ。統合CEF版Webエリアに画像ファイルを表示した場合，リストボックスからWebエリアにフォーカスが移動しました。リストボックスに表示された画像ファイルのパスを矢印キーで操作するようなインタフェースが正しく機能しません。システムWebエリアであれば，問題ありません。

* ACI0100442 Webサービス（SOAP）メソッドからテキスト配列を返した場合，クライアント側（``WEB SERVICE GET RESULT``）でアプリケーションがクラッシュしました。サーバーから返されるXMLが正しくないためです。

```
ARRAY TEXT(arrText;0)
SOAP DECLARATION(arrText;Text array;SOAP output;"arrText")
```
