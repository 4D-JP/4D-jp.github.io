---
layout: post
title: "チェックボックスの直接クリックは行を選択しない"
date: 2022-09-20 08:00:00
categories: 仕様
tags: 19.x userinterface listbox orda
---

コレクション/エンティティセレクション型リストボックスのカレントの項目/カレントの項目位置プロパティは，ユーザーによるクリック操作や矢印キーの入力に応じて自動的に更新されるようになっています。

リストボックスに表示されたブール値のチェックボックスを直接クリックした場合，**リストボックスのハイライト状態は変化しません**。この点は，配列型を含むすべてのリストボックスに共通です。コレクション/エンティティセレクション型リストボックスの場合，項目をクリックしたことにより，チェックボックスの表示された行がカレントの項目になります。選択された項目プロパティは，リストボックスのハイライト状態と対応しており，チェックボックスの直接クリックによって変化しません。これは仕様です。

<i class="fa fa-external-link" aria-hidden="true"></i> [カレントの項目](https://developer.4d.com/docs/ja/FormObjects/propertiesDataSource.html#カレントの項目)

> （カレントの項目は）ユーザーによって選択されたコレクション要素/エンティティが割り当てられる変数あるいは式を指定します。

不自然に感じるかもしれませんが，チェックボックスを直接クリックした場合，値が代入されるのはクリックした行であり，その行は選択されないので，カレントの項目が選択された項目に含まれない，という特殊な状況が生じ得ます。シングルクリック編集やドロップダウンメニューが設定されたセルを直接クリックした場合も同様です。

矢印キーは，カレント項目ではなく，最後に選択した行を起点としているため，上述した特殊な状況で矢印キーを使用すると，カレント項目から離れた行が選択されて新しいカレント項目になるかもしれません。これも仕様です。もし，これが望ましい動作でなければ，チェックボックス・ドロップダウンメニュー・シングルクリック編集と同時に行も選択するようにコーディングすることができます。
