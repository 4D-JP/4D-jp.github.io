---
layout: fix
title: "4D v17 修正リスト"
date: 2019-05-20 21:09:00
categories: 修正リスト
tags: "17.1"  
build: 237666
version: 17.1

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0099455 フォームオブジェクトのフォントがスタイルシートではなく，プロパティリストで設定されていた場合，v13からv17にアップグレードすると，フォントの指定が失われました。

**注記**: スタイルシートを使用せずにプロパティリストで直接フォントを設定した場合，QuickDraw ID（フォント番号）が保存されるため，別プラットフォームでアプリケーションを開くと，違うフォントが使用されます。これは仕様であり，この問題を避けるためにスタイルシートが存在します。v17以降，たとえ同じプラットフォームであっても，スタイルシートを使用せずに設定したフォントを再現することが技術的にできなくなりました。QuickDraw IDをフォント名に変換するAPIは，mac OS Mojave以降には存在せず，Windowsの場合，Altura SDKの定義済みフォント以外は変換できないためです。

**Windows**  

|:-:|
| Courier |
| Courier New |
| Arial |
| Tahoma |
| MS Sans Serif |
| MS Serif |
| Terminal |
| Symbol |
| Modern |
| Roman |
| Windings |
| Script |
 
その他のフォントはアプリケーションフォントに変換されます。


**macOS Mojave**

| Lucida Grande * |
| Arial |
| Helvetica |
| Times |
| Times Roman |
| Times New Roman |
| Courier |
| Courier New |
| Symbol |
| Geneva |
| Monaco |

* システムフォントに変換

その他のフォントは正しく変換できない可能性があります。

* ACI0098413 ``SVG_SAVE_AS_PICTURE``は，ファイルまたはフォルダーの名前に複数の拡張子が存在する場合に画像が保存できませんでした。内部的に使用されている正規表現が間違っているためです。

* ACI0099507 クライアントがシンタックスチェックを実行している間に別のクライアントで``SET DATABASE PARAMETER``を``4D Remote mode timeout``セレクターで実行すると，シンタックスチェックを実行しているほうのクライアントがフリーズしました。

* ACI0099448 CEF版WebエリアでGoogleカレンダーなどのWebサービスにログインした後，アプリケーションを再起動して再度アクセスした場合，認証情報の再入力を求められました。32ビット版では問題ありません。

* ACI0099584 フォームオブジェクトを作成した直後はコピー＆ペースト操作ができませんでした。

* ACI0099524 サーバー管理画面のプロセスベージにプリエンプティブワーカーのプロセス名が正しく表示されませんでした。ローカライズされてない文字列リソース（``:xliff:MONI_PROCESS_Type39 - (process name)``）が表示されました。

* ACI0099476 右から左に向かって読む言語（アラビア語など）のWrite Proテキストを揃えた場合，右ではなく，左揃えになりました。

* ACI0099482 リストボックスのセルに右揃えの値を表示した場合，値の文字数とセルの幅によっては，点滅キャレットが表示されないことがありました。

* ACI0099458 ピクチャオブジェクトに表示された``.svg``画像を（矢印キーではなく）スクロールバーやホイールボタンで動かした場合，``On scroll``イベントの処理が重くなりました。

* ACI0098452 Mac版のみ。リストフォームに配置されたピクチャ型フィールドの表示に問題がありました。リスト上でレコードの編集を開始すると，ピクチャ型フィールドの画像が消えました。``.svg``形式の場合，レコードの編集を終了すると，すべての行に同じ画像が表示されました。

* ACI0099536 64ビット版のクイックレポートエディターは，``Tab``以外のセパレーター記号を設定することができませんでした。

**注記**: ``QR AREA``は，デフォルトでシステム変数の``FldDelimit``と``RecDelimit``を使用しますが，これは``QR SET PROPERTY``でオーバーライドすることができます。修正により，``QR SET DESTINATION``の前に``QR SET PROPERTY``を使用すれば，``FldDelimit``と``RecDelimit``がオーバーライドできるようになりました。

* ACI0099334 ``dataClass.query()`` ``entitySelection.query()``の``IN``条件にコレクションを渡した場合，あるいは``QUERY WITH ARRAY``で検索を実行した場合，日本語の検索結果が正しくありませんでした。データベースの言語が日本語に設定されており，「テキスト検索用の文字列比較を使用する」が有効にされている場合に問題が発生します。

* ACI0098732 64ビット版のみ。フォームエディターでセレクション型のリストボックスに表示されたオブジェクト型のフィールドを選択した場合，アプリケーションがクラッシュしました。

* ACI0099228 クロスタブ形式のクイックレポートは，時間型フィールドの``Sum``が正しくありませんでした。32ビット版では，空のレポートが出力されます。64ビット版では，``1``時間が約``3.57``秒として計算されました。

* ACI0099451 コマンドでリストボックスにカラムを追加した場合，``LISTBOX SET PROPERTY``の``lk auto row height``（行の高さを自動的に調整）が働きませんでした。カラムをドラッグして位置を入れ替えれば，正しくリサイズされるようになります。

* ACI0099431 64ビット版のみ。``CLOB``タイプのカラムに対して``OCILobGetLength``を実行した場合，``0``ではなく``-2``が返されました。

* ACI0099331 リスト型のサブフォームをダブルクリックした場合，``FORM SET INPUT``で設定した詳細フォームではなく，デザインモードで設定したデフォルトの詳細フォームに画面が切り替わりました。

**注記**: 詳細フォームは，下記の優先順位で選ばれるようになりました。

1. ``OBJECT SET SUBFORM``で設定した詳細フォーム
2. ``FORM SET INPUT``で設定したカレントプロセスの詳細フォーム
3. デフォルトの詳細フォーム
