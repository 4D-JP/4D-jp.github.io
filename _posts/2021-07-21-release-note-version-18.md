---
layout: fix
title: "4D v18.5 Hotfix 1 修正リスト"
date: 2021-07-21 08:00:00
categories: 修正リスト
tags: "18.5"
build: 268483
version: 18.5
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0100864 フィールドのフォントが`3of9.TTF`に設定されたラベル設定ファイルを開こうとした場合，エラーが返されました。

**注記**: 修正により，エラーは表示されなくなりましたが，1993年製の「3 of 9」バーコードフォントは，現在のシステムでサポートされていないテクノロジーを使用しているため，画面にも印刷にもレンダリングされません。

* ACI0102145 バイナリモードのみ。プロジェクトモードにデータベースを変換した場合，リストボックスのヘッダーや列のフォントカラーや整列が変わってしまうことがありました。「自動」に設定されているプロパティ値が省略され，リストボックス全体の値を継承するようになってしまうことが原因です。

* ACI0102094 Mac版のみ。Apple Magic Mouseで入力エリアをクリックし，`GOTO OBJECT(*; "")`でフォーカスを消すと同時に`ALERT`などで新しいウィンドウを表示した場合，元のフォームに復帰したときにタブ順が次のオブジェクトにフォーカス表示が移動し，かつ，どこをクリックしても前のオブジェクトのコードが実行される状態に陥りました。

* ACI0101948 RESTリクエストでプロジェクトメソッドが実行された場合，管理画面でRESTセッションがドロップできなくなりました。
 
* ACI0101811 コンパイルモードでは`Milliseconds`が倍長整数ではなく実数型を返しました。

**注記**: シンタックス定義ファイルが修正されました。インタープリターモードではシンタックス定義ファイルが参照されないため，実際のデータ型つまり倍長整数が返されました。修正により，どちらのモードでも`Value type(Milliseconds)`は`Is longint`を返すようになりました。

* ACI0102127 バイナリデータベースをプロジェクトに変換した場合，ピクチャボタンの`pathname`プロパティがエクスポートされないことがありました。昔のベータバージョンで作成されたボタンで問題が発生するようです。

* ACI0102014 日本語版のみ。メソッド名が`20`文字以上のプロジェクトメソッドに`31`個以上のパラメーターが定義されている場合，シンボルファイルが文字化けする恐れがありました。無効なUTF-8シーケンスが出力されるためです。
 
* ACI0102083 Windows版のみ。`Control`+`Shift`キーを併用して文字を入力した場合，`ON EVENT CALL`でセットしたエラーハンドリングメソッドで返される`KEYCODE`システム変数の値が正しくありませんでした。実際に入力された文字ではなく，押されたキーのコードが返されました。また，`Control`キーを併用して文字を入力した場合，制御コードの値が返されました。

* ACI0102112 Write Proドキュメントに挿入されたフィールドの参照などの数式を他のアプリケーションにコピー＆ペーストすることができませんでした。

**注記**: HTML形式のペーストボードデータが修正されました。RTFおよび標準テキストは問題ありませんでしたが，Microsoft WordはRTFとHTMLの両方が存在する場合，HTMLのほうを優先的に採用するため，ペーストができませんでした。

* ACI0101878 プロジェクトモードのみ。データファイルのインデックス型がカタログのインデックス型と合致しない場合，ストラクチャエディターにはデータファイル側のインデックス型がストラクチャエディターに表示されました。そのため，ストラクチャ（プロジェクト）の入れ替えでインデックス型を変更することができません。バイナリモードでは，ストラクチャ側のインデックスが使用されました。
 
* ACI0101684 保存オプションが「データファイル内」に設定されているピクチャに対して`SET EXTERNAL DATA PATH`を実行した場合，オーファンBLOBが発生しました。MSCのデータ検証を実行することにより，そのようなオーファンBLOBを検出することができます。

* ACI0101996 プロジェクトモードでは，文字列型フィールドの入力エリアに最大文字数の制限が適用されませんでした。最大文字数を超過するデータは，フィールドをデータベースに保存したタイミングで失われます。

* ACI0101824 `VP SET CELL STYLE`に`VP Row`または`VP Column`を渡すことができませんでした。

* ACI0099046 macOS Big Surのみ。結合文字のダイアクリティカルマーク（`^`など）を入力した場合，別々の文字になりました。
 
* ACI0101952 `Encrypt data BLOB`および`Decrypt data BLOB`がスレッドセーフではありませんでした。

* ACI0102068 `Associated standard action`という定数がメニューアイテムプロパティと階層リストの両テーマに存在し，値がそれぞれ違っていました。

**注記**: 互換性のため，`SET LIST ITEM PARAMETER`は`4D_standard_action`と`4D_standard_action_name`どちらの文字列も認識するように修正されました。定数は`Associated standard action`です。`SET MENU ITEM PROPERTY`には`ak`接頭辞を有する新しい定数（または文字列`4D_standard_action`）を渡してください。

* ACI0102024 データファイルの暗号化を有効にした場合，レコードが登録されていないテーブルにはMSCが警告マークを表示しました。

* ACI0102092 Mac版のみ。Apple SiliconネイティブのコンパイルモードでView Proエリアを使用した場合，エラーハンドリングメソッドが実行されませんでした。

* ACI0102067 Mac版のみ。プロジェクトモードでタブコントロールがオブジェクトの幅に収まらない場合，ポップアップメニューとして表示されますが，そのメニューがタブの幅いっぱいに表示されました。もっとも長いメニュー項目の幅に表示されるべきです。

* ACI0101999 カレントセレクションが空であり，フォーミュラを適用する対象のレコードが存在しない場合でも`ORDER BY FORMULA`に渡されたフォーミュラが評価されました。たとえば，配列の項目番号が無効であれば，範囲外エラーが返されました。

* ACI0101934 フローティング画像が挿入されたView Proスプレッドシートを`VP Convert to picture`でSVG形式に変換した場合，画像が完全に表示されませんでした。

* ACI0101897 再帰的なコレクションに対して`collection.join()`を実行した場合，アプリケーションがクラッシュしました。

**注記**: 修正により，ランタイムエラーが返されるようになりました。

* ACI0102058 プロジェクトモードのみ。フォームオブジェクトをグループ化した場合，`.4DForm`ファイルのJSONにはグループがページ毎に列挙されました。バージョン管理が効率的にできるよう，グループ名はページに関係なく列挙されるべきです。

* ACI0102022 スプリッターの線カラーがプロジェクトにエクスポートされませんでした。

* ACI0101987 日付フィールドに設定された表示フォーマットが`EXPORT TEXT`に反映されませんでした。

* ACI0101969 メールのエンコーティングが`us-ascii`だった場合，`CR` `.` `CR` という文字列（dot-stuffing）以降の本文が切り捨てられました。`quoted-printable`エンコーディングであれば，問題ありません。

* ACI0101958 Windows版のみ。`HTTP Get`を実行するたびに，ハンドルが作成され，解放されませんでした。ハンドルの数は，Windows Resource Monitorで確認することができます。

* ACI0101849 Mac版のみ。複数のディスプレイが接続されている場合，メニューバーが表示されていないほうの画面では`Open window`で作成したウィンドウが表示されないことがありました。

* ACI0101839 `MSG_GetBody`から本文が返されませんでした。

**注記**: 問題は修正されましたが，できれば`MAIL convert from MIME`の使用を検討してください。

* ACI0101799 Mac版のみ。リスト型サブフォームの行に配置されたオブジェクトのクリックイベントで新規ウィンドウを表示した場合，イベントを処理したオブジェクト以降の行がレンダリングされませんでした。

* ACI0101691 `MAIL Convert to MIME `で出力されるメ--ルの`Content-Type`ヘッダーに不要なアンダースコア記号（`_`）が挿入されることがありました。

* ACI0101408 `HTTP SET OPTION`の`HTTP timeout`オプションが`HTTP Get`の動作に反映されませんでした。つまり，サーバー接続に成功し，なかなか応答が返されず，切断もされない場合，いつまでもレスポンスを待ちました。

* ACI0101348 ユーザー設定が有効にされたアプリケーションをビルドし，Program Filesにインストールして，書き込みが許可されている場所にデータフォルダーを作成した場合，`OPEN SETTINGS WINDOW`で`User settings for data file`を開こうとすると，アプリケーションがクラッシュしました。`Structure settings`であれば，開くことができます。

* ACI0101309 `VP Import from object`に`Null`または空のオブジェクトを渡した場合，エラーが返されました。期待されるのは，新規スプレッドシートが作成されることです。
