---
layout: fix
title: "4D 20r6 修正リスト"
date: 2024-08-01 08:00:00
categories: 修正リスト
tags: 20r6
build: 100141
version: "20r6"
permalink: /2024/178/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0104971 統合Webエリアでクロスドメインリソース共有をした場合，*Access-Control-Allow-Origin* ヘッダーに`*`が設定してもCORSエラーが返されました。

* ACI0104991 `SET AUTOMATIC RELATIONS (True;False)`を実行した後に`QUERY`および`ORDER BY`を実行した場合，`GET FIELD RELATION`からＮ対１リレーションの情報が正しく返されませんでした。ACI0104959の修正に問題がありました。

* ACI0104988 ウィンドウが非アクティブになった場合，ラジオボタンやチェックボックスのテキストがグレーアウトされました。期待されるのはボタンだけがグレーアウトされ，テキストカラーは変化しないことです。

* ACI0104980 フォームエディターでリストボックスに列を挿入した場合，エディター上の「スクロールしない列」がプロパティリストの値を合わなくなりました。

* ACI0104973 *.4DProject* の`compatibilityVersion`が`1860`以上であり，*'settings.4Dsettings* の`session_mode="3"`属性が存在しないプロジェクトは，設定の「Web＞オプションⅠ＞旧式セッション管理」が有効であっても，`Web Server.scalabaleSession`に`True`が返されました。

* ACI0104959 `SET AUTOMATIC RELATIONS (True;False)`を実行した場合，`GET FIELD RELATION`からＮ対１リレーションの情報が正しく返されませんでした。ACI0104414が修正されたことによる副作用です。

* ACI0104920 クライアント/サーバー版のみ。クライアント側のWebプロセスでセットにアクセスした場合，「パスワードが不正です」というエラーが返されました。旧式セッション管理で問題が再現します。

**注記**: ACI0104973が修正されていないバージョンでは，設定で「旧式セッション管理」が有効にされていても，内部的にはスケーラブルセッション管理が有効にされているかもしれません。

* ACI0104843 `VP Convert to picture`でView Proスプレッドシートの一部をピクチャに変換した場合，テキストが違うフォントで表示されました。

* ACI0104580 変数が複数行にわたって宣言されている場合，*Qodly* モデルエディターのカーソルが正しい行番号に表示されませんでした。

* ACI0104795 メソッドエディターに入力したテキストがハイライト表示された状態で*command/control*+*F*を入力した場合，検索ツールが表示されますが，フォーカスは検索ツールに移動しませんでした。

**注記**: 意図的な動作でしたが，[デベロッパーの声](
https://discuss.4d.com/t/regardless-if-text-is-highlighted-put-the-cursor-in-the-search-text-box-when-ctrl-f/30451)を考慮し，仕様が見直されました。

* ACI0104961 テキストファイルからデータをインポートしようとした場合，アプリケーションがクラッシュしました。

* ACI0104957 デバッガのコンテキストメニューから「参照箇所を検索…」を選択し，デザインモードの検索が完了しないうちにメソッドの実行を再開し，新規プロセスでメソッドを再実行してデバッガを表示した場合，アプリケーションがクラッシュしました。

* ACI0104853 Windows版バイナリモードのみ。`HTTP Get`を実行するとアプリケーションがクラッシュすることがありました。`Content-Type: text/html, charset=iso-8859-1`のようにセミコロン記号ではなくカンマ記号を使用したRFC非準拠のヘッダーが返された場合に問題が発生します。

* ACI0104563 リモートデータストアのホスト名に`http(s)://`を追加した場合，`Open datastore`がエラーを返されませんでした。

* ACI0104954 QUICレイヤーのみ。スリープ解除の直後にスリープ開始した場合，クライアント接続が失われました。

* ACI0104960 サーバーがビジー状態のときに複合クエリを実行した場合，クライアントのネットワーク接続が切断されることがありました。クライアントのアイドル接続タイムアウトにサーバーの処理が追いつかないことが関係しているようです。

* ACI0104620 ページ番号が挿入されたWrite Proドキュメントを*.docx* 形式でエクスポートした場合，すべてのページ番号が「`0`ページ中の`1`ページ目」になりました。

* ACI0104962 `forceLogin`オプションを`true`に設定して*http://127.0.0.1/REST/* にアクセスした場合，アプリケーションがクラッシュしました。

* ACI0104904 コンパイルモードのみ。変数に対するポインターの逆参照に続けて`&&`短絡演算子を使用した場合，ブール型の変数が`False`から`True`に変わりました。

```4d
$bool:=False
$ob:={bool: ->$bool}
If ((($ob.bool)->) && True)

End if 
//$boolがTrueに
```

* ACI0104950 プロジェクト設定の「ツールバーを表示する」が有効にされていない場合，プロジェクト再起動後にエクスプローラーのウィンドウがツールバーの高さだけ低い位置に表示されました。

* ACI0104934 [ノンブロッキング印刷](https://blog.4d.com/ja/non-blocking-printing/)の設定がサーバー側の印刷では無視されました。

* ACI0104922 デフォルトの`Agent`または`keepAlive`が`True`に設定された`Agent`を使用し，HTTPSプロキシの背後から`HTTPRequest`を使用使用した場合，HTTP Keep-Aliveが機能しませんでした。

* ACI0103643 プロジェクトを再起動した場合，ツールボックスで更新したプラグインのアクセス権が元に戻りました。

* ACI0103521 データの`255`文字目にセパレーターが出現する場合，`IMPORT TEXT`がフィールドやレコードの区切りを認識しませんでした。

* ACI0104948 Windows版のみ。地域と言語の設定に対応する*.lproj* が存在しない場合，ストラクチャエディターのコンテキストメニューにXLIFFリソースが表示されませんでした。デフォルトで英語のXLIFFリソースがロードされるべきです。

* ACI0104939 `port`を`465`，`acceptUnsecureConnection`を`True`に設定して`SMTPTransporter.send()`を実行した場合，`connectionTimeOut`が適用されませんでした。

* ACI0104938 `IMAPTransporter.getMails()`でサイズのおおきなメールをダウンロードしようとした場合，アプリケーションがフリーズしました。

* ACI0104863 リストボックスの列に垂直パディングが設定されており，行の高さがピクセル単位で設定されている場合，行が正しくハイライト表示されませんでした。ACI0103153が修正されたことによる副作用です。

* ACI0104935 プロジェクトモードのみ。リストボックスの列を削除した場合，リストボックスの列数を超える「ドラッグしない列数」および「スクロールしない列数」プロパティが自動的に変更されませんでした。

* ACI0104933 REST APIから値の`0`がレスポンスとして返された場合，`4D.HTTPRequest`がエラーを返しました。JSON値にバイトオーダーマークがないためです。

* ACI0104371 Windows版のみ。*4D ODBC Driver* のバージョン情報がODBCアドミニストレータに表示されませんでした。

* ACI0104946 メソッドエディターに`Open form window`を入力した場合，コード補完の定数リストに*Plain form window no title* および*Movable form dialog box no title* が表示されませんでした。

* ACI0104930 ジャーナルファイルをデータファイルに統合した場合，*.4DIndx* インデックスファイルのサイズが過去のバージョンよりも大幅に増えることがありました。ACI0104510が修正されたことによる副作用等です。特定のデータベースで現象が発生します。

* ACI0104732 列のフォーマットを金額（ユーロ記号）に設定したクイックレポートをHTML形式で出力した場合，合計行のセルが左揃えで表示されました。印刷では問題ありません。

* ACI0104921 Windows版のみ。*4D ODBC Driver* のデータソースを登録した後，ODBCアドミニストレータで設定を変更することができませんでした。

* ACI0104896 スイス式（桁区切りにアポストロフィ記号を使用する）の数値フォーマットを使用している場合，Write Proドキュメントの数値タブ揃えが小数点の位置ではなくアポストロフィ記号の位置に設定されました。

* ACI0104911 `TRACE`が記述されたメソッドを*Qodly Studio* から実行して4Dでトレースした後，*Qodly Studio* のコードエディターで編集しようとした場合，アプリケーションがクラッシュしました。

* ACI0104870 Mac版のみ。チェックボックスのタイトルをボールド体に設定した場合，Retinaディスプレイでのアンチエイリアス処理がフォームエディターとランタイムでは違いました。

* ACI0104857 データソースが設定されたWrite Proテーブルをテキストボックスに挿入し，*.4wp*形式でドキュメントをエクスポート＆インポートした場合，テーブルのデータ行とブレーク行が複製されました。

* ACI0104897 Windows版のみ。`Dynamic pop up menu`のメニュー項目に*Bold* *Underline* *Italic* のようなスタイルを設定した場合，アイコンがずれた位置に表示され，ポップアップメニューの角が丸くレンダリングされませんでした。

**注記**: アイコンの位置が修正されました。カスタマイズされたポップアップメニューの角が丸くレンダリングされないのは，Windows APIの制約です。

* ACI0104910 オブジェクト型変数の宣言にオブジェクトリテラルで三項演算子を記述した場合，エラーが返されました。

```4d
var $o : Object:={test: False ? "False" : True ? "True" : "False"} 
```

* ACI0104900 サーバーからクライアントに転送されるコンポーネントやプラグインのアーカイブファイル（拡張子 *.4darchive* ）が圧縮されていませんでした。

* ACI0104899 シングルユーザー版のみ。クラスのプロパティ宣言に複数行を記述するためのバックスラッシュ記号を入力してから*enter* キーで改行した場合，アプリケーションがクラッシュしました。

* ACI0104889 OEM版のみ。ビルドしたアプリケーションのライセンス情報に標準ライセンスの*4D Mobile Server* が表示されました。 

* ACI0104826 `SQL EXECUTE`のクエリに時間を要した場合，つづく`SQL LOAD RECORD`でレコードフェッチのメッセージ画面が表示されました。

* ACI0102246 `SQL LOGIN`で表示された接続ダイアログをキャンセルした場合，システム変数`OK`に`1`が代入されました。

* ACI0104905 [`$limit`](https://developer.4d.com/docs/ja/REST/top_$limit/)を指定せずにREST APIでテーブルのレコード全件をリクエストした場合，デフォルトの上限である`100`件ではなく，エンティティセレクション全件がレスポンスとして返されました。

* ACI0104893 QUICレイヤーのみ。クライアントがテーブルリストだけを表示した状態でスリープモードに移行した場合，スリープ解除時にアプリケーションがハングしました。新ネットワークレイヤーでは「接続済みソケットの作成に失敗しました。」エラーが返されることがあります。

* ACI0104881 リモートデータストアに対して`dataStore.authentify()`を実行した場合，エラーが返されました。

* ACI0104655 Apple Siliconターゲットのみ。特定のプロセス変数名を使用してコンパイルを実行した場合，「変数の再定義」エラーが返されました。

```
param:=1
Global:=1
local:=1
artyp:=1
aratt:=1
irgule:=1
ariab:=1
```

* ACI0104883 Intelコンパイルモードのみ。`Case of`構文の条件に`Try`式を使用した場合，アプリケーションがクラッシュしました。

* ACI0102776 時間型を返す計算属性の`fieldType`プロパティが`11 (Is time)`ではなく`9 (Is longint)`でした。

