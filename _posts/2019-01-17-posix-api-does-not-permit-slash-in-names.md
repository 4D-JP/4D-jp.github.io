---
layout: post
title: "Mac版でファイル名にスラッシュを使用することは許可されていない"
date: 2019-01-17 13:34:43
categories: 仕様 
tags: mac 
version: 16.x
---

macOSは，ファイルやフォルダーのパスをPOSIX形式で管理しています。スラッシュ（``/``）はフォルダー区切り記号として予約されているので，ファイルやフォルダーの名称に使用することはできません。ファイルやフォルダーのパスをHFS形式で管理するアプリケーション（Finder，32ビット版の4Dなど）は，スラッシュの使用が許されているような印象を与えますが，これはアプリケーションが自動的にスラッシュをコロン（``:``）に変換し，HFSの区切り文字であるコロンをスラッシュに変換しているためです。

4Dの64ビット版は，Mac OSのレガシーなAPIではなく，macOSのPOSIX APIを全面的に使用しています。古いAPIの使用を中止し，標準的なAPIに移行したことは，アプリケーションを将来のOSアップデートに備えさせただけでなく，ファイルの読み書き速度と全体的なパフォーマンスの引き上げに役立ちました。一方，これまでのようにスラッシュ記号をファイルやフォルダーの名称に使用することはできません。

すでにスラッシュ（実体はコロン）が使用されているファイルやフォルダーのパスは，引き続き取得することができます。ただし，初期のリリースでは，下記のケースで問題があるかもしれません。

* ``DOCUMENT LIST``および``Select document``

  * ファイル/フォルダー名の冒頭にあるスラッシュが省略されます（ACI0097745）

  * ファイル/フォルダー名の中間にあるスラッシュがコロンに変換され，区切り文字との見分けがつきません（ACI0098921）

* ``Convert path POSIX to system``

  * 相対パスを渡した場合，冒頭にボリューム区切り文字のコロンが追加されません（ACI0097794）

**注記**: ``Convert path POSIX to system``のドキュメントには，コマンドが絶対パスを受け入れると明記されており，相対パスを渡した場合の処理は定義されていません。振る舞いは仕様です。
