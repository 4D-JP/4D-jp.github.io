---
layout: fix
title: "4D v19r5 修正リスト"
date: 2022-04-21 08:00:00
categories: 修正リスト
tags: 19r5
build: 278604
version: 19r5
permalink: /111/:slug/
---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0102121 入力フォームにView Proエリアを表示し，自動アクションのナビゲーションを使用して別レコードに移動した場合，View Proエリアのデータソースオブジェクトが空になりました。

* ACI0101857 `LAUNCH EXTERNAL PROCESS`で実行したCLIプログラムの出力ストリームに無効な文字列が含まれる場合，空の文字列が返されました。

**注記**: 修正により，UTF-8からUTF-16に変換できない無効な文字は`?`として出力されるようになりました。

* ACI0101791 コンパイルされていないプロジェクトの*On Startup*データベースメソッドで`BUILD APPLICATION`を使用した場合，コンパイラーのエラーログファイルが出力されませんでした。*On Startup*のタイミングでは，デザインモードがセットアップされていないためです。

* ACI0101229 クライアント側で`SET DATABASE PARAMETER`を使用してクライアント側WebサーバーのHTTP"ポート番号（`Client HTTPS port ID`）を変更した場合，設定したポート番号ではなく，スタンドアロン版のポート番号が使用されました。

* ACI0100764 バックアップ設定「指定時間経過後に再試行：時間・分・秒」のデフォルト値がMacでは`0000-00-00T00:00:00.561`，Windowsでは`0000-00-00T00:00:00.000`となっています。v16では`60`秒でした。

* ACI0102290 空のコレクションに対して`IN`比較演算子を使用して`collection.query()`を実行した場合，アプリケーションがクラッシュしました。

* ACI0102225 ビルドしたサーバーアプリケーションにコマンドラインオプションの`--cache-folder-name`を渡してサーバーのキャッシュフォルダーをカスタマイズすることができませんでした。

* ACI0102197 クライアント/サーバー版のみ。ストアドプロシージャを起動したクライアントのネットワーク接続が強制的に切断された場合，ユーザー数とライセンス数の計算が合わなくなりました。クライアントがクラッシュしたり，ネットワーク接続が切断された場合には，クライアント接続ライセンスが解放されるべきです。

* ACI0102194 `VP SET PRINT INFO`で用紙サイズを文字列で指定した場合，`VP Get print info`から返されるオブジェクトの`paperSize.kind`プロパティが正しくありませんでした。用紙サイズの名称ではなく，SpreadJSの定数値が返されました。

* ACI0102158 `VP Get cell style`コマンドを一回のメソッドで何度も呼び出した場合，スタイル情報の取得に時間がかかりました。

* ACI0102124 View Proエリアから別のView Proエリアにセルの内容をコピー＆ペーストした場合，フォーミュラではなく値が転写されました。リボンインターフェースを使用すれば問題ありません。標準キーボードショートカットを使用した場合に期待したようなコピー＆ペーストができません。

* ACI0102357 Apple Siliconのみ。メソッドが追加されていない空のプロジェクトをコンパイルしようとした場合，内部エラーが返されました。

* ACI0102337 バイナリモードのみ。リストボックスの列に64ビット整数フィールドを表示した場合，数値フォーマットを適用できませんでした。

* ACI0102313 日本語のテーブルタイトルを`VP SET FIELDS`で登録した場合，テーブル名の濁点や半濁点が除去されました。

* ACI0102292 `New OAuth2 provider`に無効なパラメーターが渡された場合，エラーが返されませんでした。

* ACI0102488 クライアント/サーバー通信の暗号化を有効にした場合，クライアントからのアクセスが集中するとサーバーがフリーズすることがありました。

* ACI0102487 Windows版のみ。`entity.fromObject( )`でＮテーブルのエンティティにＮ対１リレーション属性に値を代入しようとした場合，１対Ｎリレーション属性の値が代入されました。

* ACI0102474 Mac版のみ。マウス操作でウィンドウをリサイズした場合，リサイズ中は`GET WINDOW RECT`から返される`top`位置が上下に変動しました。

* ACI0102464 `WP Get view properties`は，スペルチェックの情報（標準アクションの`spell/enabled`）ではなく自動スペルチェックの情報（`OBJECT Get auto spellcheck`）を返しました。

* ACI0102454 プリエンプティブプロセスでSQLコードを実行し，`FN`ステートメント経由でメソッドをコールした場合，サーバーがクラッシュしました。

* ACI0102433 コレクションにオブジェクト型を追加し，そのプロパティにエンティティを追加した場合，`property == null`のような条件でコレクションをクエリするとエンティティが返されました。`File`や`Folder`でも同じような結果になり，標準の`Object`と振る舞いが違います。

* ACI0102425 クラス関数の中で`WEB SET HTTP HEADER`を使用した場合，常に`200 OK`のHTTPステータスコードが返されました。プロジェクトメソッドで使用すれば問題ありません。

* ACI0102424 View Proスプレッドシートに統合されたセルが含まれている場合，SVG形式のエクスポートが正しく変換されませんでした。

* ACI0102388 詳細フォーム型のサブフォーム（ウィジェット）に対して`OBJECT SET SCROLL POSITION`または`OBJECT GET SCROLL POSITION`を使用することができませんでした。

* ACI0102380 データ言語が日本語に設定されている場合，`Compare strings`を`sk strict`モードで使用すると，`sk case insensitive`を指定しなくても常に大文字と小文字が同等とみなされました。日本語版は，大文字と小文字を同等とみなさないのがデフォルトの動作です。

* ACI0102379 `IMAP_MsgLst`から返される件名のアクセント文字が間違っていることがありました。

* ACI0102374 インタープリターモードのみ。配列型リストボックスの制御配列プロパティに倍長整数型の配列が使用されている場合，フォームのロード時に配列がブール型で再初期化されました。

* ACI0102573 バイナリモードのみ。インタープリターモードではREST公開したメソッドをサーバー側でデバッガすることができませんでした。また，コンパイルモードではREST公開したメソッドをサーバー側のコオペラティブプロセスで実行できませんでした。

* ACI0102838 Windows版のみ。DirectWriteレンダリングを有効にした場合，バイナリモードで自動的に生成されたリストフォームのフィールドがオブジェクトの境界を超えて表示されました。

* ACI0102822 入力不可フィールドに表示フォーマットが設定されている場合，値が完全に表示されないことがありました。ACI0102747が修正されたことによる副作用のようです。

* ACI0102813 XML要素の値に`Char(29)`のような制御文字が含まれている場合，`DOM EXPORT TO VAR`または`DOM EXPORT TO FILE`を実行するとアプリケーションがクラッシュしました。

* ACI0102836 ビルド版アプリケーションを起動し，初回にデータファイルの場所を指定した場合，`lastDataPath.xml`が更新されず，次回もデータファイルの場所を指定するよう求められました。ビルド`277038`よりも前のバージョンでは問題ありません。

* ACI0102801 Mac版のみ。4Kまたは5KのRetinaディスプレイにフォームを表示した場合，線。四角形・円などのオブジェクトが正しく表示されませんでした。図形とはずれた位置に外縁が描画されました。

* ACI0102847 フォームメソッドで`SystemWorker.wait()`を実行した場合，システムワーカーからのメッセージが返されませんでした。

* ACI0102831 *On Server Startup*データベースメソッドで`OPEN DATABASE`を使用した場合，管理画面を閉じるまで再起動がブロックされました。

* ACI0102834 Apple Siliconコンパイルモードのみ。「サーバー側で実行」メソッドで`Count parameters`を使用した場合，正しい数が返されませんでした。

* ACI0102789 フォームエディターの実行ボタンをクリックした場合，フォームがアプリケーションプロセスで実行されるため，プロセス変数が使用されているフォームオブジェクトのプロパティがリセットされませんでした。

* ACI0102731 バイナリモードのみ。クライアント側で`FORM LOAD`を使用し，空のフォームをロードした場合，終了時にアプリケーションがクラッシュしました。

* ACI0102534 クライアントが終了してもサーバー側のエンティティセレクションが解放されないことがありました。

* ACI0102533 Mac版のみ。関連フォルダーを含めずにプロジェクトをコンパイルした場合，*Librairies*フォルダー内の*lib4d-arm64.dylib*ファイルが上書きされませんでした。

* ACI0102531 Mac版のみ。4D Go Mobileでコレクション型のテンプレート（例：`simpleCollection`）を使用してカレントエンティティをスコープとしたアクションを設定した場合，ロングクリック操作ではなく，スワイプ操作でアクションのリストが表示されました。

* ACI0102530 新規データファイルを作成した直後にトランザクションを開始し，レコードを追加してトランザクションを確定しないままインデックスフィールドの並び替えを実行した場合，アプリケーションがクラッシュしました。

* ACI0102525 Windows版のみ。「Silicon macOSクライアントからの接続を許可」を有効にし，コンパイル済みストラクチャの場所を指定してビルド版のサーバーアプリケーションとコンパイル版のプロジェクトを同時にビルドしようとした場合，コンパイル版のプロジェクトが作成されませんでした。「Silicon macOSクライアントからの接続を許可」を有効にしなければ問題ありません。

* ACI0102524 同一ドキュメント内で`4DEACH`タグと`4DLOOP`タグの両方を実行することができませんでした。

* ACI0102513 統合Webエリアの`$4d`オブジェクトを使用してJavaScriptからメソッドを実行することができませんでした。CEFのアップデートに伴う不具合のようです。

* ACI0102507 クライアント/サーバー版プロジェクトモードのみ。入力フォームでトランザクションを開始し，フォームを閉じると同時にトランザクションをキャンセルした場合，約`3`分後に「サーバーとの接続が壊れました」エラーが返されました。トランザクション中に`ARRAY TO LIST`を実行した場合に問題が発生します。

* ACI0102506 アカウント情報の氏名または会社名にアクセント記号が使用されている場合，ライセンスのアクティベーションができませんでした。

* ACI0102497 リモートデータストアにORDAでアクセスした場合，パスの中間または最後に記述されたエイリアス属性が`null`として評価されました。

* ACI0102495 クライアント/サーバー版のみ。「サーバー側で実行」メソッドを実行した後，クライアント側のプロセスでレコードをロックした場合，`LOCKED BY`や`Get lock record info`がサーバー側のユーザー名およびマシン名を返しました。

* ACI0102567 Apple Siliconのみ。時間型の除算がコンパイルエラーになることがありました。

* ACI0102565 ポインターの逆参照でフォーミュラを作成した場合（例：`Formula(gPtr->:=2)`）逆参照の演算子（`->`）が取り除かれました。

* ACI0102562 Mac版のみ。Webエリアに表示したページでカメラの使用は許可できるようになりましたが，マイクの使用は許可できませんでした。

* ACI0102560 データベース設定で「Webサービスリクエストを許可する」を無効にした場合，`/4DWSDL`にアクセスするとXMLエラーが表示されました。

* ACI0102558 クライアント/サーバー版のみ。リレーション属性と一緒にエンティティセレクションを`entitySelection.toCollection()`でコレクションに変換した場合，クライアント接続が切断されるまでエンティティセレクションが解放されずにメモリーリークが発生しました。

* ACI0102556 メソッド名に日本語が使用されている場合，Apple Siliconターゲットのコンパイルが失敗することがありました。`LAUNCH EXTERNAL PROCESS`で日本語のファイル名が`clang`に渡されていますが，UTF-8の日本語はShift_JISよりもバイト数を必要とすることが考慮されていないようです。

* ACI0102555 `LISTBOX SET PROPERTY`に空の文字列を渡してリストボックスの詳細フォーム名（`lk detail form name`）をリセットすることができませんでした。

* ACI0102550 プロジェクトモードのみ。プロジェクトが膨大な数のフォームやメソッドなどのソースファイルで構成されている場合，ハードディスクから*.4DZ*ファイルを起動するのに時間がかかりました。`32,000`個のフォームをロードするのに約`20`秒を要するかもしれません。バイナリモードであれば`2`秒ほどで起動できます。SSDでは問題ありません。

* ACI0102549 Apple Siliconのみ。負の値を減算するようなコードがコンパイルエラーになりました。

* ACI0102548 `#DECLARE`宣言を記述せずに`return`キーワードを使用し，プロジェクトメソッドを単独で実行した場合，アプリケーションがクラッシュしました。サブルーチンとして呼び出せば問題ありません。

* ACI0102546 フランス語版のみ。Write Proウィジェットに英語とフランス語のローカライズが混在していました。

* ACI0102542 モバイルプロジェクトエディターの「ストラクチャ」セクションでリレーションを追加した場合，リレーションで結ばれたデータクラスの計算属性が公開（`exposed`）されていなくても，フィールドリストに表示されました。そのような計算属性をフォームに追加しようとすると，エラーが返されました。明示的に公開されていないリレーション計算属性は，フィールドのリストに表示されるべきではありません。

* ACI0102541  Mac版のみ。Intelターゲット専用のアプリをビルドした場合，アプリケーションが起動できませんでした。`LSArchitecturePriority`プロパティキーをセットし，Siliconターゲットが存在しない場合には自動的にRosettaで起動するべきです。

* ACI0102539 Windows版のみ。4D for Androidに必要なファイル（内部コンポーネント「4D Mobile App.4dbase」のdatabaseフォルダー）がインストールされませんでした。

* ACI0102537 バーチャルストラクチャでフィールドタイトルが設定されている場合，`PRINT LABEL`を実行すると，フィールド値ではなくフィールド名がラベルに出力されました。

* ACI0102536 未確定（入力中）の日本語変換文字列を`delete`キーですべて削除した場合，確定済の文字列も`1`文字削除されました。

* ACI0102535 プロジェクトモードのみ。コンポーネントメソッドをWebサービスとして公開できませんでした。ホストがバイナリモードであれば問題ありません。

* ACI0102810 Windows版のみ。電源に接続されていないノートパソコンからサーバーに接続し，クライアントを起動したままシステムを放置した場合，スリープの解除後にクライアントがサーバーに自動再接続できませんでした。

* ACI0102808 Windows版のみ。タブコントロールの描画に問題がありました。タブの数が多く，フォームの幅にすべて収まらない場合，矢印ボタンが縦スクロールバーに重ねて表示されました。Windows 11では，矢印ボタンが表示されません。

* ACI0102806 クライアント/サーバー版のみ。クラス関数からエンティティセレクション型のオブジェクトを返した場合，メモリーリークが発生する可能性がありました。

* ACI0102802 IMAPトランスポーターを使用してdovecotメールサーバーからメールを受信しようとした場合，アプリケーションがフリーズすることがありました。GmailやExchangeサーバーでは問題ありません。

* ACI0102795 [`Web Server`](https://developer.4d.com/docs/ja/WebServer/webServerObject.html)オブジェクトを使用して複数のHTTP/HTTPSサーバーを起動した場合，すでにポートが使用されている場合はエラーが返されるべきですが，特定の条件が揃うと，待ち受けポート番号が勝手にインクリメントされてサーバーが開始されました。

* ACI0102792 オブジェクト型のクラスを`4D.System Worker`と宣言した場合，`wait()`などの関数コールに対してコンパイラー警告`550.2`が表示されました。

* ACI0102785 `VP All`でレンジを作成し，`VP SET CELL STYLE`で*backColor*を`Null`に設定してデフォルトのスタイル属性をクリアした後，`VP Cells`で作成したレンジの*backColor*を設定しようとした場合，*backColor*以外の属性はクリアされ，*backColor*は変更されませんでした。

* ACI0102782 すべてのセクションが横向きに設定されたWrite Proドキュメントからセクションを削除した場合，一部のセクションが縦向きになりました。

* ACI0102781 Windows版のみ。`VP Copy to object`を実行するとView Proエリアが真っ白になりました。

* ACI0102780 Windows版のみ。*Alt*キーを押しながら下矢印キーを入力した場合，コンボボックスまたはポップアップメニューに関連づけられた選択リストの表示がトグルされるべきですが，何も起きませんでした。

* ACI0102779 4D ViewスプレッドシートをView Proに変換した場合，フォーミュラが正しく変換されないことがありました。フォーミュラの冒頭に`-1`という値が使用されている場合に問題が発生します。

* ACI0102777 旧バージョンで作成されたインタープリター版のストラクチャをサーバーで開いた場合，クライアントのログイン画面と同時にデッドロック状態が発生し，アプリケーションが使用できないことがありました。

* ACI0102774 Mac版のみ。4D for iOSのフォームセクションで１対Ｎリレーションフィールドを追加した後，ＮテーブルをREST公開し，フォームセクションで追加した場合，*.4dmobileapp*ファイルに`isToMany`属性が追加されないため，生成されたストーリーボードに必要な`relationIsToMany`がありませんでした。

* ACI0102772 `Begin SQL`という文字列を`Parse formula`で解析した場合，トークン（`Begin SQL:C949`）が返されませんでした。`End SQL`も同様です。

* ACI0102771 プロジェクトモードのみ。ボタンが「フォーカス可」に設定されている場合，「サブレコード追加」および「サブレコード削除」の標準アクションが動作しませんでした。

* ACI0102766 リサイズプロパティが「拡大」に設定されたオブジェクトが配置された入力フォームを`DISPLAY RECORD`で表示した場合，アプリケーションがクラッシュしました。

* ACI0102764 View Proスプレッドシートのチャートをコピー＆ペーストすることができませんでした。

* ACI0102763 プロジェクトモードのみ。v18から変換したプロジェクトで内部にリストボックスが表示されたサブフォームの「自動サイズ」プロパティをコンテキストモードで有効にした場合，アプリケーションがクラッシュしました。

* ACI0102757 Mac版のみ。リストボックスのヘッダーの表示に問題がありました。上側の罫線が描画されません。ヘッダーの高さを２行以上にすると上側の罫線が描画されます。

**注記**: Macでは，リストボックスのヘッダーに相当するネイティブオブジェクトは高さが決められています。高さをカスタマイズした場合，ヘッダーは4Dによって描画されるため，macOS 11/12特有のデザインに左右されません。macOS 10.15 Catalina以前のデザインでは，ヘッダーに上側の罫線がありました。

* ACI0102578 `WP Get position`から返される`bounds.left`の値が正しくないことがありました。段落の直後にある空行にカーソルを置いた場合，`WP Text range`はカーソルの位置ではなく段落の最終位置を返すようです。

* ACI0102577 プロパティリストでボタンのタイトルを変更し，項目の入力を確定せずにフォームを閉じた場合，値が更新されませんでした。

* ACI0102576 リストボックスのヘッダーの画像ソースに値が設定されていない場合，ストラクチャをプロジェクトに変換すると，当該プロパティが存在しないリストボックスになりました。

* ACI0102575 バイナリモードの新規ストラクチャを作成した場合，リストボックスのヘッダーの画像ソース（変数名）がプロパティリストに表示されませんでした。

* ACI0102574 メニューバーにピクチャライブラリのスプラッシュ画像が設定されている場合，ストラクチャをプロジェクトに変換すると，スプラッシュ画像の参照が失われました。

* ACI0102572 クライアント/サーバー版のみ。新規プロセスで`Create entity selection`を実行し，エンティティセレクションを作成した場合，メモリーリークが発生しました。

* ACI0102606 コンパイルモードでは`#DECLARE`構文で宣言したパラメーター名の大文字と小文字が区別されました。

* ACI0102605 4D Go MobileでＮフィールドの追加アクションを実行した場合，リレーションの１フィールドに関する情報がデータベースメソッドに返されませんでした。

* ACI0102604 パラメーターが設定されたアクションビューを4D for Androidで開いた場合，ビューのタイトルにはアクション名ではなく"Action Parameters"が表示されました。

* ACI0102603 メソッドエディターでクラスを開いた場合，メソッドエディターのタイプアヘッドに同じ候補が何度も表示されることがありました。`Function get`で問題が発生するようです。

* ACI0102602 整数型のフィールドを4D Go Mobileで開いた場合，入力エリアに小数の`.0`も表示されました。

* ACI0102601 View Proスプレッドシートのセルスタイルに`wordWrap`が適用されている場合，`VP EXPORT DOCUMENT`がエラーを返しました。

* ACI0102600 `HTTP Request`が`0`や`1`といった不明なステータスコードを返すことがありました。アプリケーションを長時間にわたって運用していると発生するようです。

* ACI0102599 Mac版のみ。4D for iOSのリストフォームまたは詳細フォームにフィールドを追加してから削除し，再び追加した場合，そのフィールドは表示されませんでした。`defaultField`プロパティが追加されないためです。

* ACI0102598 ピクチャ型のパラメーターが設定されたアクションのビューを4D for Androidで開こうとした場合，アプリがクラッシュしました。

* ACI0102597 日付型のフィールドに設定されたアクションビューを開こうとした場合，4D for Androidがクラッシュしました。

* ACI0102593 プロジェクトモードのみ。フォームの最小サイズを最大サイズよりも上に設定した場合，右位置が最大サイズを超えているオブジェクトが完全に表示されませんでした。矛盾した設定ですが，フォームのプロパティは`.json`ファイルまたはオブジェクト型で設定できる以上，あり得ないことではありません。バイナリモードでは，最大サイズと最小サイズの大きいほうが最大サイズになりました。

* ACI0102592 メソッドエディターでクラスを開いた場合，エディターのヘッダーに関数名が表示されますが，長い関数名は途中で切れてしまうことがありました。

* ACI0102589 Apple Siliconのみ。プラグインコマンドの整数型パラメーターに定数の`0xffff`が渡されている場合，コンパイルエラーが返されました。

* ACI0102584 4D Go Mobileの「データ」セクションから「公開」セクションに移動し，プロダクションサーバーのアドレスを入力してから「データ」セクションに戻った場合，ランタイムエラーが返されました。

* ACI0102579 プロジェクトモードのみ。フォームエディターとプロパティリストを表示した状態でプロジェクトを閉じた場合，次回の起動でフォームエディターは表示されますが，プロパティリストは表示されませんでした。
