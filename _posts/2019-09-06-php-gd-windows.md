---
layout: post
title: "PHPとGDライブラリ"
date: 2019-09-06 12:00:00
categories: 注意点
version: 17r5
tags: windows php
---

v13以前のバージョンで``PHP Execute``を実行した場合，アプリケーションのResourcesフォルダーに作成される``php.ini``ファイルには，下記の１行が存在します。当時のPHPは，GDライブラリが外部DLLとしてコンパイルされており，起動時にロードする必要がありました。

```
extension=php_gd2.dll
```

17r5では，PHPがバージョン``4``（32ビット版）から``7``（64ビット版）にアップデートされました。このバージョンでは，GDライブラリが実行ファイルに埋め込まれているため，上記の１行は不要となりました。

v13で作成されたアプリケーションを17r5に変換した場合，``PHP Execute``でエラー``500``が返されるかもしれません。Windows 10 (1903) 以降，無効なDLLロードで例外が返されるようになったことが関係しているようです。

``php.ini``ファイルの前述した行を削除またはコメントアウトすることにより，問題を回避することができます。

