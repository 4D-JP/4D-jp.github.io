---
layout: fix
title: "4D v18r6 修正リスト"
date: 2021-04-16 08:00:00
categories: 修正リスト
tags: 18r6
build: 264867
version: 18r6

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}}  

* ACI0101867 プロジェクトモードのみ。クライアント側からサーバーをコンパイルモードで再起動した場合，`.4DZ`ファイルが使用中なので開けないという内容のエラーメッセージが表示されました。

* ACI0101748 Windows版のみ。地域と言語の設定が「トルコ」に設定されている場合，プロパティリストを表示するとアプリケーションがクラッシュしました。

**注記**: 内部コンポーネントがバイナリモードからプロジェクトに変換されたことに伴う副作用でした。トルコ語の「アイ」（`İi`）は大文字に点がついており，ラテン文字のアイとは別の文字として扱われなければなりません。

* ACI0101854 スケーラブルなセッション管理が有効にされている場合，セッションを開始した後，Webサーバーを再起動してから同じクライアントから接続すると，新しいセッションが作成されました。

* ACI0101822 `New process`で新規プロセスを起動した場合，１回目はランタイムエクスプローラーでプロセスをアボートすることができますが，２回目はできませんでした。

* ACI0101858 Windows版のみ。ファイル＞新規メニューではモバイルプロジェクトが選択不可になっていますが，ファイル＞開くメニューではモバイルプロジェクトを選択することができました。ツールバーは両方のメニューが選択不可になっています。4D for iOSコンポーネントがWindows版にもインストールされていることが原因です。

* ACI0101236 メソッドエディターに`Begin SQL` `end s` と入力した場合，自動コード補完を確定したタイミングでアプリケーションがクラッシュしました。
 
* ACI0101842 `Open datastore`でデータベースにアクセスしてスケーラブルなセッションを開始した後，ブラウザでREST APIのURLを開いた場合，スケーラブルなセッションが`2`件になりますが，その状態でブラウザをリフレッシュすると，さらに`2`件のセッションが作成されました。また，すでにセッションを開始しているデータベースに対し，新規プロセスで`Open datastore`を再実行した場合，` On REST Authentication`がコールされ，セッションが追加されました。

* ACI0101794 クライアント/サーバー版のみ。クライアント側のWebサーバーは，常にスケーラブルなセッション管理が有効でした。

* ACI0101809 アンダースコア記号で単語が連結されたテキストをダブルクリックした場合，テキスト全体ではなく，単語がハイライト選択されました。

**注記**: ICUライブラリの更新により，アンダースコア記号が文法記号とみなされるようになったことが関係しています。修正により，18r5以前の振る舞いが復元されましたが，フォームエディターのプロパティリストでは，ドット記法のフォーミュラ式をダブルクリックしたときに属性が選択されるよう，例外的にピリオド記号でハイライトが分割されるようになっています。

* ACI0101796 クライアント側でトランザクションを開始してから「サーバー側で実行メソッド」を実行した場合，すぐにはトランザクション状態がサーバー側のツインプロセスに反映されませんでした。`Find in field`のようなデータベースアクセスコマンドをクライアント側で実行すれば，トランザクション状態の同期が取られました。

* ACI0101626 チェコ語版の「ようこそ画面」でWebサイトのリンクをクリックした場合，"cz.4d.com"ではなく"us.4d.com"にジャンプしました。

* ACI0101769 Mac版のみ。macOS Big Surでは，コンボボックスをクリックしたときにテキストが少しだけ右に寄って表示されました。

* ACI0101761 `112`文字を下回るテキストを`COMPRESS BLOB`で圧縮した場合，`EXPAND BLOB`で展開することができませんでした。圧縮ではなくgzipアルゴリズムの展開に問題があります。

* ACI0101642 Mac版のみ。`ON EVENT CALL`でイベントハンドラーメソッドをインストールした場合，リストボックスのヘッダーをタップをしても`On Header Click`イベントが発生しませんでした。クリックであれば問題ありません。

* ACI0101626 チェコ語版の「ようこそ画面」でWebサイトのリンクをクリックした場合，"cz.4d.com"ではなく"us.4d.com"にジャンプしました。

* ACI0101762 Windows版のみ。`LAUNCH EXTERNAL PROCESS`で `curl`を実行した場合，環境変数`PATH`で最初にみつかるはずのバージョンではない`libcurl/7.55.1 WinSSL`が実行されました。

* ACI0101786 Mac版のみ。最前面ではないウィンドウの3Dボタンはタイトルテキストがグレーアウト表示されました。

* ACI0101503 サーバー/クライアント版のみ。パッケージされたプロジェクト（`.4DZ`ファイル）やデータファイルを入れ替えた直後の起動中にサーバークラッシュすることがありました。何度か繰り返しているうちに起動できるようになります。圧縮ファイルの展開中に問題が発生しているようです。
 
* ACI0101699 `VP Convert from 4D view`で4D Viewスプレッドシートが正しく変換されないことがありました。新規スプレッドシートも罫線のない白紙のドキュメントになります。値のないセルがうまく処理されないようです。

* ACI0101593 クエリエディターで条件に複数の「含む」条件を「または」連結で入力し，ファイルに保存した場合，クエリ条件が正しく再現されませんでした。クエリ条件をファイルから読み込むと，条件が「リスト内にある」に変換され，ペーストボードにコピーすると，条件文字列のワイルドカード文字が失われていることが確認できます。

* ACI0101580 View ProスプレッドシートをPDF形式でエクスポートした場合，標準体で出力されるべきセルのテキストがボールド体で出力されることがありました。
 
* ACI0101740 macOS Big Surのみ。統合Webエリアで [accounts.google.com ](https://myaccount.google.com/) で開こうとした場合，アプリケーションがクラッシュしました。

* ACI0101706 `New process`で同じ名前のプロセスをほぼ同時に起動した場合，ランタイムエクスプローラーに表示されるプロセス番号が一緒になりました。

* ACI0101700 バーチャルストラクチャが設定されている場合，ユーザーモードの「ツール」メニューからクイックレポートを開こうとすると，シンタックスエラーが返されることがありました。

* ACI0101719 クライアント/サーバー版のみ。サーバーがリモートデータストアに接続した状態で，`ds`オブジェクトのメンバー関数をコールした場合，ローカルデータストアではなく，リモートデータストアの情報が返されましたs。

* ACI0101405 オブジェクト型フィールドにコレクションが含まれている場合，`OB Copy`でエンティティをコピーしただけでフィールドが`touched`になりました。

* ACI0101635 コンポーネント内で`Compare strings`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101622  4D for iOSの「ラベル＆アイコン」セクションでフィールドにカスタムフォーマッターを設定し，「フォーム」セクションでフィールドをモデルにドラッグ＆ドロップした後，「ラベル＆アイコン」セクションでデフォルトのフォーマッターをフィールドに設定した場合，`project.4dmobileapp`ファイル内に不正なフォーマットが記述され，データの同期中にアプリがクラッシュしました。フィールドをモデルから削除し，再度，ドラッグ＆ドロップすれば問題ありません。

* ACI0101605 4D for iOSの「ストラクチャ」セクションでフィルターを使用し，公開したテーブルだけを表示した場合，ランタイムエラーが返されました。

* ACI0101750 Windows版のみ。クライアントがクラッシュした場合，キャッシュフォルダー内の`inuse.txt`ファイルが削除されず，新しいキャッシュフォルダーが作成されました。クライアントアプリのパスが変わっておらず，以前にキャッシュフォルダーを使用していたプロセスがもう存在しないのであれば，キャッシュフォルダーは再利用されるべきです。

* ACI0101739 クライアント/サーバー版のみ。クライアントキャッシュフォルダー内の`inuse.txt`ファイルが何らかの理由で削除されなかった場合，次回の接続で新しいクライアントキャッシュファイルが作成されました。`inuse.txt`ファイルに記録された番号のプロセスが存在しなければ，クライアントキャッシュフォルダーを再利用するべきです。

**注記**: 通常，クライアントが正常に終了すれば，`inuse.txt`ファイルは削除されるはずですが，ターミナルサーバー（TSE）使用時など，特殊な環境では，クライアントがフリーズまたはクラッシュしなくても，ファイルが残ってしまうことがあるようです。修正により，そのような場合でもクライアントキャッシュフォルダーが再利用されるようになりました。

* ACI0101710 Windows版のみ。`CFBundleShortVersionString`にビルド番号が含まれていませんでした。
 
* ACI0101731 コンパイルモードのみ。`EXECUTE FORMULA`で変数を作成し，しばらくアプリケーションを使用していると，変数が未定義になり，シンタックスエラー（未知の変数に対するポインターあるいは不正なポインターの使用）が返されました。

* ACI0101721 Mac版のみ。`MAIL Convert from MIME`を実行した場合，アプリケーションがクラッシュすることがありました。

* ACI0101701 クライアント/サーバー版のコンパイルモードモードのみ。`entitySelection.orderByFormula()`を実行すると「スタックが一杯」エラーが返されることがありました。入力フォームで問題が再現します。単独でコードを実行した場合は問題ありません。

* ACI0101717 Windows版コンパイルモードのみ。オブジェクトのメンバーメソッドがプロジェクトメソッドの`Formula`であり，をパラメーターを渡してそのメンバーメソッドを`This`で呼び出した場合，アプリケーションがクラッシュしました。パラメーターを渡さなければ問題ありません。

* ACI0101687 SuperReport Proプラグインエリアが配置されたフォームを表示した場合，アプリケーションがクラッシュしました。

* ACI0101686 `#declare`構文で宣言したクラス関数のパラメーターリストがメソッドエディターのステータスバーに正しく表示されませんでした。パラメーターの型だけが表示され，パラメーター名が表示されませんでした。

* ACI0101656 18r5以前に作成されたバイナリデータベースのスケーラブルセッション管理はデフォルトで「旧式」のはずですが，`WEB Server`の`scalableSession`に`True`が返されました。データベース設定をトグルすれば正しい値になります。

* ACI0101609 インデックスが設定されていないフィールドに対して`QUERY`を実行した場合，アプリケーションがクラッシュしました。

**注記**: 開発中のデータエクスプローラー用に拡張されたクエリパスの仕組みが完全に実装されていなかったことが原因でした。

* ACI0101625 `Content-Type`が`multipart/alternative `のメールを`MAIL CONVERT FROM MIME`で変換した場合，本文のエンコーディングが正しくありませんでした。

* ACI0101690 コンパイルモードでしばらくアプリケーションを使用していると，フォームローカル変数に対するポインターが無効になることがありました。

**注記**:: 問題は修正されましたが，再コンパイルが必要です。 

* ACI0101491 配列を参照していないポインター配列の`0`番要素の逆参照に配列の要素番号を変数で渡した場合，エラーが返される代わりに配列の要素番号に使われた変数に値が代入されました。

* ACI0101636 Write Proエリアを4Kまたは5Kディスプレイに表示した場合，ツールバーのアイコン画像がぼやて表示されました。ACI0101494が修正されたことによる副作用のようです。

* ACI0101676 `WP Get elements`はWrite Proドキュメントのアンカー画像をz-order順に返しませんでした。

**注記**: 修正により，`wk type image anchored`を指定した場合，アンカー画像がz-order順に返されるようになりました。

* ACI0101667 Window版のみ。検証またはコンパイルを実行した場合，アプリケーションがクラッシュすることがありました。

* ACI0101675 4D WriteドキュメントをWrite Proに変換した場合，アンカー画像のサイズが固定されていたかどうかを判別することができませんでした。

**注記**: 4D Write（`.4W7`）ファイルでアンカー画像のサイズが固定されていなかった場合，幅および高さは`auto`に変換されます。

* ACI0101654 リボンインターフェースからスタイルを設定した場合，`VP SET CELL STYLE`に`Null`を渡しても`parentName`プロパティがクリアされず，スタイルをリセットすることができませんでした。

**注記**: SpreadJSのAPI変更が反映されていませんでした。スタイルをリセットする場合，`New object("parentName"; Null)`ではなく，`New object("name"; Null)`をレンジに渡す必要があります。`parentName`はCSSを作成するためのもので，スタイルシート名を指定するためのものではありません。

* ACI0101659 4D WriteドキュメントをWrite Proにインポートした場合，アプリケーションがクラッシュすることがありました。

**注記**: 4D Writeドキュメント（`.4W7`ファイル）`&quot`という異常なフォント名が含まれているために不正なXMLが出力されたことが原因でした。

* ACI0101606 View Proエリアのツールバーが使用されている場合，特定のスプレッドシート（`.4VP`ファイル）をインポートすると，`On After Edit`や`On Selection Change`のようなフォームイベントが発生しませんでした。リボンインターフェースでは問題ありません。

* ACI0101563 `VP Convert from 4D View`で4D Viewドキュメント（`.4PV`ファイル）を変換できないことがありました。

**注記**: SpreadJS 12の不具合により，「名前の重複」例外が発生した場合，再描画がブロックされ，エリアがレンダリングされなかったことが原因でした。

* ACI0101487 Windows版のコンパイルモードのみ。`DIALOG`コマンドでアプリケーション全体がフリーズすることがありました。

**注記**: `1/60`秒以下のタイムアウトが指定された場合，無限ループに陥る可能性がありました。

* ACI0101630 `PRINT LABEL`で行毎に出力されるラベルの数が正しくありませんでした。

* ACI0101570 `DELETE SELECTION`でレコードを削除した場合，オブジェクト型フィールドのインデックスに問題が発生し，データファイルが破損しました。クラスターインデックスが削除されたレコードを参照しているというエラーであり，MSCによる修復が必要です。

* ACI0101643 メソッドをコンパイルすると，「ローカル変数の合計サイズが32KBを超えています」というエラーが返されることがありました。ACI0101186が修正されたことによる副作用のようです。

* ACI0101534 `MSG_Extract`で添付ファイルを保存した場合，ファイル名のアクセント文字が無視されました。ACI0098362が修正されたことによる副作用のようです。

* ACI0101406 バイナリモードのみ。リストボックスのフッターに`Form.property`のようなフォーミュラを入力することができました。ヘッダーやフッターのデータソースに設定できるのは変数だけです。オブジェクト記法が入力された場合，型宣言コンパイラーメソッドに無効な宣言コマンドが出力されました。

**注記**: リストボックス・列・ヘッダー・フッターそれぞれの変数名をプロパティリストに入力し，明示的には型宣言しなかった場合，プロジェクトモードでは，自動型宣言により，リストボックスと列だけが追加され，ヘッダー・フッター・制御配列は無視されますが，バイナリモードでは，リストボックス・列・ヘッダー・フッターすべてがコンパイラーメソッドに追加されることが原因でした。

* ACI0101285 4D Viewから変換されたView Proドキュメントに長いフォーミュラが挿入されている場合，スプレッドシートをロードするのに数分を要しました。長いフォーミュラとは，`25`個の`AVERAGE`を計算して合計を求めるような数式のことです。v17では問題ありませんでした。

**注記**: 非同期コールのパフォーマンスを改善するため，4Dを修正することに加え，SpreadJSのバージョンが`14.0.4`に[アップデート](https://www.grapecity.com/forums/spreadjs/custom-async-function-call)されました。

* ACI0101581 CEF版Webエリアに空のページを表示した状態で`WA OPEN WEB INSPECTOR`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101628 階層リストのデータソース（変数または式）に`Form.var`のようなオブジェクト記法を入力することができませんでした。

* ACI0101610 `$name:=Field name(variable.prop)`および`$name:=Field name(variable.prop->)`のようなコードがコンパイルエラー（パラメーター不足）になりました。

* ACI0101629 `4D CSS`の`serveCss`および`4D Mobile App Server`の`MobileAppServer`メソッドの属性が「非表示」に設定されていませんでした。

* ACI0101592 サーバーアプリケーションの`Resources/Internal User Components`フォルダーにラベルエディターコンポーネント（`4D Labels.4dbase`）がインストールされていませんでした。そのため，サーバー側で`PRINT LABEL`を実行することができません。プロジェクトの`Components`に自分でコンポーネントのコピーをインストールする必要があります。

* ACI0101601 Write Proドキュメントを`.docx`形式でエクスポートした場合，数式がフィールドとして書き出されませんでした。

* ACI0101602 Write Proの定数`_o_wk recompute formula` `_o_wk do not recompute formulas`の名称が不適切です。`_o_`接頭辞を追加する代わりに`formula`が`expression`に変更すれば，既存のコードがトークナイズ変換され，そのまま使用することができるはずです。

* ACI0101589 デバッガーに`IMAP Transporter`オブジェクトを表示した場合，アプリケーションがクラッシュしました。

* ACI0101533 フィールドや変数のオブジェクト名がプロパティリストのポップアップメニューに正しく表示されませんでした。変数名リストモードで問題があります。オブジェクト名リストモードでは問題ありません。

* ACI0101517 オフスクリーンエリアのView Proエリアでは`Form event code`でイベントを処理することができませんでした。`Form event.code`であれば問題ありません。

* ACI0101512 データベース設定でWebのオプションページキャッシュサイズを変更した場合，スケーラブルセッションも有効になりました。

* ACI0100886 クラスメソッド内で存在しないプロジェクトメソッドを使用した場合，プロセス変数のトークンが無視され，メソッドの引数がそのまま左オペランドに代入されました。

**注記**: 修正により，「プロジェクトメソッドがみつかりません」というエラーが返されるようになりました。

* ACI0101354 デザインメニューからツールボックスのリソースページを表示した場合，デザインメニューの該当する項目に選択マークが表示されませんでした。

* ACI0101370 `SET LIST ITEM PROPERTIES`のアイコンパラメーターを省略することができませんでした。スタイルだけを変更するのにアイコンを指定しなければならないのは不便です。アイコンは`SET LIST ITEM ICON`で設定することができるので，パラメーターは省略できても良いはずです。

**注記**: 修正により，アイコン以降のパラメーターは任意になりました。もちろん，カラーを設定するのであれば，アイコンを省略することはできません。

* ACI0101360 コンパイルモードのみ。SQLの`FN`関数コールでエラーが返されました。ビルド`257581`以前は問題ありません。

```sql
Begin SQL
	select ID from Table_1 where ID = {FN bbb(1) as NUMERIC} into :$x
End SQL
```

**注記**: SQLでは`64`ビット整数が返されますが，ARMコンパイラーがこれに対応していなかったことが原因でした。

* ACI0101003 プロジェクトモードのみ。デザインモードの使用中は，アプリケーションを素早く最前面に移動することができませんでした。プロジェクトの構成ファイルをすべてチェックしているためです。

* ACI0101250 プロジェクトモードのみ。エクスプローラーでフォルダーを削除した場合，フォルダー内のクラスは削除されませんでした。

* ACI0101277 Windowsクライアント/サーバー版のみ。4D Remoteの接続解除ダイアログにアイコンが表示されませんでした。

* ACI0101320 コンパイルモードのみ。`#DECLARE`構文が使用されているメソッドでランタイムエラーが発生した場合，エラーダイアログに間違った行番号が表示されました。

* ACI0101321 空のエンティティセレクションに対して`min()` `max()` `average()` を実行した場合，未定義が返されました。期待されるのは，コレクションと同じように`Null`が返されることです。

* ACI0101311 インタープリターモードのみ。コレクションの`For each`ループで`Until`キーワードに括弧なしで引数を渡した場合，値が無視されました。

**注記**: 修正により，括弧は必須ではなくなりました。

* ACI0101313 Mac版プロジェクトモードのみ。シンタックスチェックを続けて実行した場合，２度目のチェックは`10`倍ほどの時間を要しました。

**注記**: メモリアロケーションの問題でした。Macの`NewHandle()`は時間とともに遅くなるようです。修正により，`malloc()`が使用されるようになりました。

* ACI0101460 `IMAP_MsgLst`でアクセント付き文字（`é` `ê` `ë` `â`）が正しく返されませんでした。

* ACI0101568 Windows版のみ。ツールバーからクイックレポートエディターを開き，エリア上をマウスポインターを置いた場合，`1920x1080`の巨大なヘルプTipsが表示されました。

* ACI0101505 フォームエディターのページを切り替えた後，入力順から除いたフォームオブジェクトに入力順が再設定されました。

* ACI0097879 サブフォームオブジェクトの「自動リサイズ」プロパティを有効にした場合，キーボードやマウスを使用して垂直方向にリサイズすることができませんでした。

* ACI0097837 `SET DRAG ICON`に`Form.image`のようなオブジェクト記法でピクチャ型のプロパティを渡すことができませんでした。

* ACI0101465 View Proエリアは`SET ALLOWED METHODS'`に対応しているはずですが，ワイルドカード文字（`@`）による一括指定ができませんでした。

* ACI0101569 View Proエリアで日付型のパラメーターを受け取るフォーミュラに日付型を渡さなかった場合，エリアが`1`分間ほどフリーズした状態になりました。`VP SET CUSTOM FUNCTIONS`と`VP SET ALLOWED METHODS`のどちらでも問題が再現します。

* ACI0101451 コンパイルモードのみ。リレートテーブルのオブジェクト型フィールドに対して`ORDER BY ATTRIBUTE`を実行した場合，正しい結果が返されませんでした。ビルド`258357`は問題ありませんでした。

* ACI0101513 データベース設定でスケーラブルセッションを有効にした後，Webサーバーを再起動した場合，`Session`オブジェクトが`Null`を返しました。

* ACI0101029 Windows版のみ。CEF版のWebエリアで`WA SET PAGE CONTENT`を使用し，ページをリロードした場合，`$4d`オブジェクトでプロジェクトメソッドが呼び出せなくなることがありました。

**注記**: [CEFのアップデート](https://www.magpcss.org/ceforum/viewtopic.php?f=6&t=17231)で`CefProcessHandler` `setContent` などのAPIが廃止されたことに伴い，ページをリロードした後にブリッジを再アクティベートすることができなくなったことが原因でした。`WA SET PAGE CONTENT`の実装が完全に作り直され，[プロバイダーでリソースの読み込みをインターセプトする仕組み](https://bitbucket.org/chromiumembedded/cef/commits/18b5f727017ba0d5816687536cbeefe4b640c9ef)になりました。なお，ベースURLを指定しなかった場合のURLは`file:///`となります。URLを省略することは許されないためです。また，URLを`about:blank`に設定した場合はページのコンテンツは無視されます。空のページは空だからです。

* ACI0101529 プロジェクトモードのみ。データベース設定でスケーラブルセッションを有効にしてダイアログを確定しても，設定が保存されませんでした。

* ACI0101527 プロジェクトモードのみ。サーバーでプロジェクトを開始した場合，クライアント側のデータベース設定のスケーラブルセッションが有効になっていませんでした。

* ACI0101523 コンポーネント内でテーブルに対するポインターの逆参照を`EXECUTE FORMULA`で評価した場合，エラーが返されました。

* ACI0101192 IMAPトランスポーターの``searchMails``メソッドでアクセント文字をサーチすることができませんでした。

* ACI0101186 コンパイルモードでテーブルに対するポインターの逆参照を``PRINT SELECTION``に渡した場合，アプリケーションがクラッシュしました。

* ACI0101175 フォルダー名にウムラウト記号が含まれる場合，`IMAP_SetPrefs`および`POP3_SetPrefs`からエラー`-43`が返されました。

* ACI0101143 プロジェクトモードのみ。大量のオブジェクト（アイコンが設定されたボタン）がフォームに配置されている場合，フォームエディターの動作がとても重くなりました。バイナリモードでは問題ありません。

* ACI0101135 プロジェクトモードのみ。``LISTBOX SET PROPERTY``と``lk named selection``の組み合わせでリストボックスの命名セレクションを設定することができませんでした。

* ACI0101120 ピクチャ型のオブジェクトプロパティを直接``SET PICTURE TO PASTEBOARD``に渡すことができませんでした。

* ACI0101114 Mac版のみ。ポップアップ/ドロップダウンメニューに大文字/小文字の区別またはアクセント記号だけが違っている値が表示されている場合，カレント項目ではない行にチェックマークが表示されました。

* ACI0101106 プロジェクトモードのみ。データソースに命名セレクションが設定されたリストボックスに``CUT NAMED SELECTION``または``COPY NAMED SELECTION``で作成したセレクションが表示されませんでした。

* ACI0101067 ``MAIL Convert from MIME``で変換したメールオブジェクトは，送信日が正しく返されないことがありました。タイムゾーンが正しく計算されていないためです。たとえばMIMEのヘッダー値が``Mon, 3 Aug 2020 09:27:52 +0200``だった場合，``2020-08-03T09:27:52.000Z``のような日付に変換されました。

* ACI0101065 アプリケーションビルド画面のオプションでコンポーネントビルドだけを選択した場合，「ビルド」ボタンがクリックできませんでした。

* ACI0101061 プロジェクトモードのみ。新規作成したリストボックスには「行の移動可」プロパティがありませんでした。バイナリモードから変換されたリストボックスは問題ありません。プロパティが設定されていない場合，行のドラッグ＆ドロップができません。

* ACI0101051 Windows版のみ。フォームエディターのテキストエリアに``Alt``キーと数字のコンビネーションでアクセント文字を入力することができませんでした。メソッドエディターでは問題ありません。

* ACI0101041 プロジェクトモードのみ。``folders.json``を外部エディターで編集し，メソッドまたはフォームを下位のフォルダーに移動（カット＆ペースト）した場合，メソッドまたはフォームがトップレベルに複製されました。

* ACI0101037 メソッドエディターの自動コード補完で定数が正しく入力できませんでした。

**注記**: 前付き引数がサポートされるようになったことによる副作用でした。修正により，候補ウィンドウは表示されるようになりましたが，定数は低い優先順位でリストアップされます。

* ACI0101035 Mac版バイナリモードのみ。``MODIFY SELECTION``で表示したリストフォームにフッターエリアに表示されたボタンがクリックに反応しないことがありました。

* ACI0101027 クエリエディターで「である」と「または」を組み合わせた検索条件が正しく読み込まれませんでした。

* ACI0101026 Mac版のみ。オブジェクトに``.SF NS Text``フォントが設定されている場合，システムフォントではないフォントが表示されました。

* ACI0101013 Mac版のみ。View ProエリアのツールバーからPDF形式でエクスポート使用とした場合，テンポラリフォルダーがデフォルトの書き出しフォルダーとして表示されました。

* ACI0101010 サーバー管理画面の「プロセス」ページで複数の行を選択した場合，スクロールバーをクリック＆ドラッグ操作で動かすことができませんでした。

* ACI0101001 クライアント/サーバー版のみ。ORDAの``IN``条件でクエリを実行した場合，正しい結果が返されないことがありました。フィールドにインデックスが設定されていれば問題ありません。データベース言語が「日本語」で文字列比較用のテキスト比較が「有効」に設定されている場合に問題が再現します。

* ACI0100980 hMailServerから``POP3 Transporter``の``getMail()``メソッドでメールを受信しようとした場合，``Null``が返されることがありました。

* ACI0100977 プロジェクトモードのみ。図形オブジェクトの「角の丸み」プロパティが``0``以外の値に設定されていない場合，``OBJECT SET CORNER RADIUS``が使用できませんでした。

* ACI0100974 ``MAIL Convert from MIME``でメールの本文が取り出せないことがありました。特定の標準テキストメールで問題が再現します。マルチパートメールでは問題ありません。

* ACI0100969 4D for iOSのカスタムデータフォーマッターがＮ対１リレーションフィールドに適用されませんでした。

* ACI0100945 ``OB SET``または``OB SET ARRAY``でオブジェクト型フィールドを更新してかた``SAVE RECORD ``で保存した場合，``Modified record``が``True``を返しました。フィールド自体にフィールドを代入すれば，``False``が返されるようになります。

* ACI0100926 Windows版のみ。進行中のプログレスバーのキャンセルボタンをクリックした場合，コールバックメソッドの呼び出しでエラーが返されました。ローカルプロセスのスタックサイズが不足しているようです。

* ACI0100922 アプリケーションが最前面ではなくなった初回のタイミングでは``On Application background move``システムイベントが発生しませんでした。

* ACI0100884 クライアント/サーバー版のみ。ORDAでピクチャ型の属性アクセスした場合，正しいサイズが返されませんでした。

* ACI0100870 ``ENCRYPT BLOB``の第３パラメーターに未定義の変数を渡した場合，アプリケーションがクラッシュしました。

* ACI0100737 Windows版のみ。システム言語が「英語」に設定されている場合，バックアップ設定の項目「n秒後に再試行」が保存されませんでした。``.4DSettings``ファイルには値が書き込まれていますが，設定画面には``0``と表示されました。

* ACI0100734 ``SET ALLOWED METHODS``で許可したメソッドが4D View Proのツールバーに数式として表示されませんでした。

* ACI0100639 フォーカス不可でタブ不可のオブジェクトをJSONフォームあるいはプロジェクトモードに変換した場合，フォーカス可になりました。

**注記**: 同時にルーラーのJSON変換も修正されました。ルーラーもフォーカス可プロパティがエクスポートされるようになり，「上」「左」以外のラベル位置もサポートされるようになりました。

* ACI0100620 日本語ではないシステム言語設定で日本語のファイル名を添付して``SMTP_Send``を実行した場合，エラー``-43``が返されました。

* ACI0100555 特定のメールサーバーに対して使用した場合，``POP3 Transporter``の``getMail()``メソッドから``Null``が返されました。

* ACI0100439 Mac版のみ。box.comからインストールしたBoxアプリが作成したフォルダーに対して``FOLDER LIST``または``DOCUMENT LIST``を実行した場合，空の配列が返されました。

* ACI0100004 ノルウェー語とフランス語のスペルチェック辞書に同一のID番号が振られました。

**注記**: Mac版のシステムスペルチェックだけが修正され，番号ではなく``fr-FR``や``en-US``のような識別子が使用されるようになりました。Hunspell版のスペルチェックは，ライブラリが発行するIDをそのまま使用しています。

* ACI0099364 Mac 64ビット版のみ。プラグインSDKの``PA_GetCarbonPageFormat``および``PA_GetCarbonPrintSettings``が``null``を返しました。

* ACI0099000 `4DLOOP`ブロックの中に`4DIF` `4DELSE` `4DELSEIF` `4DENDIF`ブロックが`3`回記述されている場合，２巡目のループで`PROCESS 4D TAGS`がエラー（`4DENDIF`がありません）を返しました。`3`回の`4DIF` `4DELSE` `4DELSEIF` `4DENDIF`ブロック全体を`4DIF True` `4DELSEIF`で囲えば問題ありません。

* ACI0098630 エクスプローラー画面を最小化されている場合，ツールバーのエクスプローラーボタンをクリックしても，ウィンドウが再表示されませんでした。

* ACI0098362 `.eml`ファイルの添付ファイルが`MSG_HasAttach`に認識されないことがありました。

* ACI0101262 フィールドの重複不可プロパティを解除してから別のデータファイルに切り替えた場合，インデックスの自動再作成が実行されないため，レコードの追加でキーの重複エラーが発生する恐れがありました。インデックスファイルを削除すれば，問題ありません。

* ACI0101261 バイナリデータベースをプロジェクトに変換した場合，階層リストの「透過」プロパティがエクスポートされませんでした。

* ACI0101260 旧式ネットワークレイヤーのみ。4D ServerがWebリクエストを処理している間，4D RemoteのCPUアクティビティが高くなりました。ストラクチャファイルがリードオンリーであれば，問題ありません。Webリクエストを処理するたびに``.4DC``ファイルが更新されているようです。

* ACI0101259 ``MAIL New attachment``で作成したメール添付オブジェクトを別プロセスに渡すことができませんでした。

* ACI0101254 バイナリモードのみ。オブジェクトメソッドが設定されているオブジェクトを含むフォームを削除してごみ箱に空にした場合，MSCのアプリケーション検査を実行すると，どこにも使用されていない``CC4D``リソース（オーファンメソッド）が検出されました。

* ACI0101249 Mac版のみ。SVGをPDFに出力した場合，``@media``属性で印刷用のスタイル設定が出力に反映されませんでした。スクリーン用と同じイメージが出力されました。

* ACI0101246 Mac版のみ。別のアプリケーションを最前面に移動してから4Dを最前面に移動した場合，呼び出し元の検索やシンタックスチェックの速度が大幅に低下しました。おおきなアプリケーションの場合，処理が完了するまでにバイナリモードでは``10``秒，プロジェクトモードでは``10``分以上待たされることがありました。

* ACI0101244 シリアル通信ポートを開いた状態でデバイスをコンピューターから抜き取ると，アプリケーションがクラッシュしました。

* ACI0101242 Mac版のみ。コード署名せずにクライアントアプリーケーションをビルドした場合，起動直後にアプリケーションがクラッシュしました。シングル版およびサーバーアプリケーションでは問題ありません。

* ACI0101240 ラベルエディターで連結したフィールドが正しく出力されませんでした。最初のオペランドだけが出力されました。

* ACI0101237 Write Proドキュメントにフォーミュラを挿入した場合，行の高さが増加しました。

* ACI0101234 ``FORM SCREENSHOT``から返される出力フォームの画像は最終レコードが含まれていませんでした。

* ACI0101228 ``WP SET LINK``で設定したプロジェクトメソッドのハイパーリンクがアプリケーションモードではクリックに反応しませんでした。別のウィンドウをアクティブにした後，4D Writeエリアが表示されているウィンドウをアクティブにすれば，使用できるようになります。

* ACI0101226 IMAPトランスポーターでサーバーに接続し，`30`分（Exchangeサーバーのタイムアウト設定）メソッドの実行を停止してから処理を再開した場合，「SSL read failed」というエラーが返されました。期待されるのは，どれだけ間隔が空いたとしても，エラーを返さずに処理が継続できることです。

* ACI0101220 リストボックス全体にCSSクラスが設定されている場合，フッターに設定されたCSSフォントがフォームの実行時に反映されませんでした。デザインモードでは問題ありません。

* ACI0101218 特定のテーブルに対し，読み込みダイアログを使用してデータをインポートした場合，インポート対象に指定したフィールドがスキップされることがありました。すべてのテーブルで問題が発生するわけではありません。

* ACI0101217 インポートダイアログでフィールド数が``1``個のテーブルを選択した場合，エラー``215``が返されました。

* ACI0101213 コンパイルモードのみ。フォームに表示されたタブコントロールの変数が数値型ではなかった場合，フォームを閉じるとアプリケーションがクラッシュしました。

* ACI0101212 ``MAIL Convert from MIME``でメールオブジェクトを作成した場合，エンコードに問題があるために画像が表示されないことがありました。

* ACI0101211 PDFファイルが添付された``.eml``ファイルを``MIME Convert to mail``でメールオブジェクトに変換して送信した場合，受信クライアントに添付ファイルが表示されないことがありました。

* ACI0101209 エンティティセレクション型のリストボックスをサブフォーム内で使用した場合，「カレントの項目の位置」や「選択された項目」がデバッガーに表示されませんでした。「カレントの項目」だけが表示されました。

* ACI0101319 View ProスプレッドシートをSVGに変換した場合，ワードラップされたセルの文字列が正しくレンダリングされませんでした。

* ACI0101318 オブジェクト型のプロパティに対してワイルドカードの`@`と`IN`比較演算子を使用してクエリを実行した場合の結果が正しくありませんでした。完全に合致する文字列が結果に含まれませんでした。

* ACI0101317 クライアント/サーバー版のみ。ORDA言語でWrite Proドキュメントを保存した後，そのエンティティ属性にアクセスするとエラーが返されました。

* ACI0101315 ``entitySelection.query()``および``collection.query()``で``IN``比較演算子を使用した場合，条件に使用したコレクションがメモリーリークすることがありました。

* ACI0101312 ランタイムエクスプローラーの更新間隔を変更しても設定が無視され，常に``1``秒間隔で表示が更新されました。

* ACI0101308 ``MAIL convert from MIME``でメールの件名が正しくデコードされないことがありました。折り返されたUTF-8 quoted printableのエスケープ文字がそのまま返される場合がありました。

* ACI0101307 4D for iOSの同期アクションでデータをシンクロした場合，文字列型のフィールドに``Null``が返されるとアプリがクラッシュしました。「ヌル値を空値にマップする」が有効であれば問題ありません。

* ACI0101305 リストボックスの「自動行の高さ」が有効にされている場合，``OBJECT GET SCROLL POSITION``から返される行番号が``0``から始まりました。通常のリストボックスであれば，行番号が``1``から始まります。

* ACI0101304 Mac版のみ。ようこそ画面など，CEF版Webエリアを使用しているフォームを表示した場合，終了直前にアプリケーションがクラッシュしました。

* ACI0101299 クライアント/サーバー版のみ。リモート側では，オブジェクト型フィールドのロードに時間がかかりました。たとえば，リストフォームのスクロール操作や，ループ処理内の``NEXT RECORD``の速度で違いを確認することができます。オブジェクトにおおきなサイズのピクチャ型プロパティが含まれている場合に問題が発生します。

* ACI0101298 背景色が設定されているテキスト入力エリアに対して``OBJECT SET RGB COLORS``を使用した場合，フォーカスアウトのタイミングで``On Data change``イベントが発生しました。背景色が「透過」に設定されているオブジェクトは問題ありません。

* ACI0101296 RESTで公開されているテーブルとRESTで公開されていないテーブルにリレーションが結ばれている場合，リモートデータストアとしてアクセスすることができませんでした。「リレーションを解決することができません」というエラーが返されました。

* ACI0101294 ``VP Convert to picture``はシート番号を``0``ではなく``1``からカウントしました。

* ACI0101293 マルチコアのバーチャルマシンで``Get system info``を実行した場合，返されるコア数が正しくありませんでした。

* ACI0101291 クライアント/サーバー版のみ。``dataClass.fromCollection()``から共有エンティティセレクションが返されませんでした。

* ACI0101288 Windows版のみ。統合CEF版Webエリアがマウスホイールのスクロール操作やポインターのホバリングイベントに反応しないことがありました。ACI100774が修正されたことによる副作用のようです。``On Load``イベントではなく，``SET TIMER(-1)``で誘発した``On Timer``イベントでHTMLをロードすれば問題ありません。

* ACI0101287 変数にコレクションの要素を代入し，その同じ変数を``For each``ブロックの第１パラメーター（カレント要素），コレクションを第２パラメーターに渡してループ処理を実行した場合，メモリリークが発生しました。

* ACI0101284 リストボックスオブジェクトをコピーするとアプリケーションがクラッシュしました。

* ACI0101283 ボタンまたはテキスト入力またはリストボックスをコピーしてオブジェクトライブラリペーストした場合，エラーが返され，プレビューが正しく表示されませんでした。

* ACI0101282 一定の時間（``3``時間以上），リモートデバッガーにアタッチされていた場合，クライアントの終了時に「Task Pending」メッセージが表示されました。

* ACI0101280 4D ViewスプレッドシートをView Proに変換した場合，埋め込まれたフォーミュラの大部分が失われることがありました。

* ACI0101276 プロジェクトモードのみ。テキスト入力ボジェクト（変数）に対して``OBJECT SET LIST BY NAME``が使用できませんでした。

* ACI0101274 クライアント/サーバー版のみ。サーバー管理ウィンドウメニューを使用することができませんでした。ACI0096662が修正されたことによる副作用です。

* ACI0101273 フランス語版のみ。定数の`mail disposition en pièce-jointe`が認識されませんでした。

* ACI0101272 Windows版のみ。「アプリケーションについて」画面のリンク（法的な情報・著作権・世界の4D）を``1``回クリックすると，``2``回，WebページがEdgeブラウザで開かれました。ページHTMLの``<div>``と``span``それぞれにスクリプトが記述されているためです。

* ACI0101270 エクスプローラーのフォルダーに入れられているフォームまたはプロジェクトメソッドを複製した場合，新しいフォームまたはプロジェクトメソッドがオリジナルと同じフォルダーではなく，エクスプローラーのトップレベルに作成されました。

* ACI0101266 クライアント/サーバー版のみ。保存オプションが「データファイルの外」に設定されているピクチャフィールドに対して``SELECTION TO ARRAY``を実行した場合，エラー``-10533``が返されました。

* ACI0101366 macOS Big Surのみ。ダウンロードしたディスクイメージを開き，アプリケーションフォルダーに4Dをインストールした場合，「開発元を確認できないため，開けません」というエラーメッセージが表示されました。Volume Desktopと4D Serverは問題ありません。

* ACI0101365 リストフォームに配置したスプリッターを操作することができませんでした。ACI0101035が修正されたことによる副作用のようです。

* ACI0101364 ワーカープロセスで実行した初回の``DELAY PROCESS``が無視されました。``Open window`` ``ALERT``のようなユーザーインタフェースコマンド，あるいは``TRACE``を使用して後であれば，問題ありません。

* ACI0101363 MIMEの``From``ヘッダー値にカンマが含まれる場合（例：``DOE, John <john.doe@4d.com>``），``MAIL Convert from MIME``で正しいメールオブジェクトに変換できませんでした。アドレス情報が``2``件の送信者（例：``DOE``および``John <john.doe@4d.com>``）に分断されました。

* ACI0101362 クライアント/サーバー版のみ。空のピクチャを含むカレントセレクションに対して``SELECTION TO ARRAY``を実行した場合，エラー``-10533``が返されました。ACI0101266が修正されたことにより副作用のようです。

* ACI0101361 ``SHOW PROCESS``を実行するたびにプロセスの非表示と表示が切り替わるために画面がちらつきました。

* ACI0101357 `IMAP Transporter`でdovecotメールサーバーにログインすることができませんでした。

* ACI0101356 `buildapp.4dsettings`の`ClientServerSystemFolderName`オプションを使用してサーバーアプリケーションをビルドした場合，キャッシュフォルダー名が`info.plist`ではなく`catalog.4dcatalog`に記録されました。

* ACI0101350 Windows版のみ。ラベル設定ファイル（`*.4lbp`）を上書き保存しようとした場合，新規ファイルが作成され，拡張子が二重に追加されました。

* ACI0101345 `#DECLARE`をメソッドの第`1`行以外に記述した場合，メソッドエディターには警告が表示されますが，コンパイルエラーにはなりませんでした。

* ACI0101339 Windows版のみ。日本語入力中，変換文字列の先頭にカーソルが表示されました。

* ACI0101338 **var**構文を使用した変数の宣言に改行（`\`）を挿入し，改行の前後にスペース記号を入力した場合，メソッドのトークナイズと同時にアプリケーションがクラッシュしました。

* ACI0101336 macOS Big Surのみ。ディスクイメージ（``.dmg``）からインストールした場合，終了時にアプリケーションがクラッシュしました。アーカイブ（``.zip``）からインストールすれば問題ありません。またストラクチャエディターを表示しなければ問題ありません。

* ACI0101334 Write Proドキュメントを``.docx``形式でエクスポートした場合，リスト項目（数字または記号）がMicrosoft Wordで正しく表示されませんでした。

* ACI0101333 ORDAのクエリで``<=`` ``>=``比較演算子でワイルドカードが末尾に使用された文字列（後方一致）を検索した場合，``<`` ``>``条件に合致する値だけが返され，``=``条件に合致する値が返されませんでした。

* ACI0101330 Mac版のみ。システムフォントをスタイルシート経由で設定した場合，ボタンタイトルのフォントをボールド体にすることができませんでした。R3では問題ありません。

* ACI0101328 フランス語版のみ。Write Proツールバーの「画像」タブの表示が正しくありませんでした。「Images」の代わりに「Import/Export」と表示されました。

* ACI0101327 `shift`キーを押しながらエクスプローラーを表示した場合，ウィンドウサイズがリセットされますが，以後，メソッドのプレビューが表示されませんでした。プレビュー表示の状態を示すフラグがリセットされていないようです。プレビューエリアを閉じてから再表示すれば，問題が解消されます。

* ACI0101325 名前付き引数を参照するようなフォーミュラをコンパイルすることができませんでした。

* ACI0101323 `WEB Get server info`のプロパティ`webInactiveProcessTimeout`および`webMaxConcurrentProcesses`には，デフォルト値が常に返されました。データベース設定または`WEB SET OPTION`で変更した値が返されるべきです。

* ACI0101420 フランス語版の4D View Proインターフェースが一部ローカライズされていませんでした。

* ACI0101418 モディファイアを押しながらリストボックスの行をクリックして選択した場合，リストボックスを再フォーカスするまで，`On Before Keystroke`イベントが発生しませんでした。

* ACI0101414 `MAIL Convert from MIME`でMIMEを処理した場合，``Content-Disposition``ヘッダーの``name``パラメーターが正しく解析されませんでした。通常，`name`は`Content-Type`ヘッダーに記述されますが，Thunderbirdのようなメールクライアントはどちらに記述されていたとしても添付ファイル名を表示することができます。

* ACI0101413 クライアント側で`GET BACKUP INFORMATION`を実行した場合，ユーザー設定ではなくストラクチャ設定のバックアップ情報が返されました。

* ACI0101412 ``IMAP Transporter``の``getMail()``メソッドで取得したメールオブジェクトには本文がありませんでした。

* ACI0101409 IMAPで受信したメールの``receivedAt`` ``getMail`` ``getMails``属性が正しくありませんでした。

* ACI0101402 Mac版のみ。`OBJECT SET FORMAT`で3Dピクチャボタンのリソースピクチャファイルパスを更新することができませんでした。

* ACI0101401 クライアント/サーバー版のみ。新規作成したエンティティから`2`レベルのＮリレーション属性にドット記法でアクセスしようとした場合，エンティティセットがみつからないというエラーが返されました。スタンドアロン版のように空のエンティティセレクションが返されるべきです。

* ACI0101398 Windows版のみ。日本語入力の変換メニューとコード補完のポップアップウィンドウの両方が表示された場合，日本語入力が確定されて最初の変換候補が入力されました。

* ACI0101397 ラベルエディターでフォームを指定し，自動リサイズオプションを解除した場合，列数の設定が無視されました。

* ACI0101390 新規エンティティのリレーション属性が``0``件のエンティティセレクションだった場合，``entitySelection.orderBy()``を実行すると，リレーションで結ばれたデータクラスの全エンティティが返されました。

* ACI0101388 新規プロセスにエンティティセレクションをパラメーターとして渡した場合，受け取った側のプロセスで開始したトランザクションの状態がエンティティセレクションには適用されませんでした。たとえば，トランザクション内でエンティティを保存してからトランザクションをキャンセルしても，保存が取り消されませんでした。

* ACI0101386 Windows版のみ。クライアント/サーバー認証のドメインサーバーを使用している場合（シングル・サイン・オン），リクエストログとデバッグログを有効にするとアプリケーションがクラッシュしました。

* ACI0101383 フォームエディターでHTMLヘルプのチャプター番号（アンカー）を更新することができませんでした。

* ACI0101382 View Proのインターフェースからフォーミュラを挿入することができませんでした。

* ACI0101380 4D View Proエリアの「ファイル＞インポート＞CSVファイル」メニューで表示されるインタフェースではCSV以外のテキストデータをインポートすることができませんでした。列または行の区切り文字に``\t``または``\n``のような文字を指定しても無視されました。

* ACI0101379 Windows版のみ。デフォルトのファイル名を``*.gif``に設定して``WRITE PICTURE FILE``を実行した場合，保存ダイアログに間違ったファイル拡張子（``.4pct``）が表示されました。

* ACI0101376 共有オブジェクトのプロパティに`Signal`オブジェクトをセットしてオブジェクトグループを構成した場合，`Signal`オブジェクトの`__LockerID`が正しく更新されませんでした。期待されるのは，負の値から正の値に反転し，同一グループの共有オブジェクトが`Use`できるようになることです。

* ACI0101374 View Proスプレッドシートのセルに「2020年10月26日」を入力すると「2020年10月2**5**日」に変換されました。

* ACI0101372 クラスのコードにシンタックスエラーが存在する場合，間違った行番号がコンパイラーに表示されました。

* ACI0101371 コンパイルされたストラクチャファイル（``.4DC``）で``FORM Convert to dynamic``を実行した場合，オブジェクトメソッドがロードされませんでした。 

* ACI0101450 `WP INSERT BREAK`をループ処理の中で続けて実行した場合，処理に時間がかかりました。

**注記**: ブレークの挿入は，段落の作成が関係しているため，既存の段落にテキストを挿入するよりも重い処理となります。修正により，ブレーク挿入の処理速度は，テキスト挿入との比較で``2``倍程度になりました。今回の最適化は，オフスクリーン処理に限定されます。フォームに表示されたドキュメントには適用されません。長文をプログラミングで加工する場合，`OB Copy`でドキュメントを変数にコピーし，オフスクリーン処理をしてからフォームオブジェクトに戻すことを検討してください。

* ACI0101443 「変数または式」プロパティにマイナス記号が使用されているフォームオブジェクトをプロジェクトモードに変換した場合，マイナス記号がアンダースコア記号になりました。たとえば，``This.length-1``あるいは``Add to date(Current date; 1; 0; -1)``のような値が変換されてしまいました。

* ACI0101441 Windows版のみ。リストフォームでは，入力状態ではないオブジェクトの`%password`フォントが無視されました。

* ACI0101439 エンティティセレクション型のリストボックスがフォーカスされた状態でキー入力した場合，リストボックスとセルの区別がなく，`Is editing text`が常に`False`を返しました。セレクション型のリストボックスであれば問題ありません。

* ACI0101438 日付フィールド内の`On Before Keystroke`イベントで数字以外のキーストロークを処理した場合，値の先頭文字が消去されました。

* ACI0101435 MacOs Big Surのみ。高さが``15``ポイント以下のチェックボックスまたはラジオボタンが完全に表示されませんでした。Windows版の場合，フォームエディターに限り，高さが``12``ポイント以下のオブジェクト表示に問題がありました。

* ACI0101430 セレクション型のリストボックスに``COPY NAMED SELECTION``で作成した命名セレクションを表示し，`shift`キーを押しながらクリックして複数の行を選択した後，上下矢印キーを使用して場合，間違った行がハイライトされました。

* ACI0101428 macOS Big Surのみ。Apple SiliconマシンではWebエリアが表示されませんでした。

* ACI0101423 View Proのツールバーインタフェースのスタイル付きテキスト入力ダイアログのメニューにマウスポインターを重ねたときに表示される情報がローカライズされていませんでした。

* ACI0101489 Mac版のみ。View Proスプレッドシートのセルに対し，`command`+`V`ショートカットで値をペーストすることができませんでした。WebエリアのCEFバージョンが`86`にアップデートされたことによる副作用のようです。

* ACI0101478 クライアント/サーバー版のみ。エンティティ値にカンマが含まれる場合，エンティティセレクションやリレーション属性が ORDAで正しく転送されませんでした。

* ACI0101475 フィールドにインデックスが設定されていない場合，トランザクションを確定またはキャンセルした後に`SET QUERY AND LOCK`でロックされたカレントレコードがアンロックされました。オブジェクト型フィールドおよびインデックスが設定されたフィールドは問題ありません。また，カレントレコードを更新し，トランザクションを確定した場合は問題ありません。トランザクションを確定またはキャンセルした場合，`SET QUERY AND LOCK`でロックされたレコードはすべてアンロックされるべきですが，カレントレコードだけは引き続きロックされているのが正しい動作です。

* ACI0101474 4D Writeから変換されたドキュメントに特定のフォント（例: `Uni Neue`）が設定できませんでした。

* ACI0101473 Windows版のみ。出力先をPDFに設定して`OPEN PRINTING JOB`でプリントジョブを開始した後，`WP PRINT`を実行すると，印刷ダイアログが表示されますが，そのダイアログをキャンセルしてもファイル作成ダイアログが表示され，結果的に空のPDFが作成されました。期待されるのは，第１のダイアログがキャンセルされたならば，システム変数が`OK`にセットされ，第２のダイアログが表示されないことです。

* ACI0101471 macOS Big Surのみ。ポップアップドロップダウンメニュー右側の矢印ボタンが`2`ピクセルほど欠けて表示されました。

* ACI0101470 macOS Big Surのみ。コンボボックスのテキスト入力エリアが角の丸いアウトラインに食い込んでいました。「自家製」のフォーカスリングと入力エリアのレンダリングと合っていません。

* ACI0101466 エンティティセレクションをパラメーターとして受け取るようなクラスメソッドをRESTで公開し，`Open remote datastore`で呼び出した場合，`exposed Function`のコード内でエンティティセレクションの`length`プロパティにアクセスできませんでした。

* ACI0101464 プロジェクトモードのみ。CSSプロパティの`resizingMode`が正しくハンドリングされていませんでした。[リサイズオプション](https://developer.4d.com/docs/ja/FormObjects/propertiesResizingOptions.html#column-auto-resizing)はカラム自動リサイズの有効（`rightToLeft`）または無効(`legacy`)に対応するものです。フォームエディターのプロパティリストとJSONファイルが連動していませんでした。

* ACI0101458 コレクションメソッドのコールバック関数に`#DECLARE`宣言が使用されている場合，`2`巡目から正しくない値がパラメーターに渡されました。未定義のパラメーターが渡されたり，`$1`に渡されるべきオブジェクトが`$2`に渡されたりしました。

* ACI0101457 カレントレコードが存在しない状態で`String`にテキスト型フィールドを渡した場合，ランタイムエラーが返されました。

* ACI0100904 数週間にわたってストアドプロシージャを実行した場合，作成したローカル配列の最後の要素に対するアクセスが範囲チェックエラー`-20001`になることがありました。

* ACI0101378 View Proエリアのリボンインターフェースで拡張子`.csv`以外の一般的なテキストファイルをインポートすることができませんでした。

* ACI0101553 `LAUNCH EXTERNAL PROCESS`に４個未満のパラメーター（`cmd` `stdIn` `stdOut`）を渡し，エラーストリーム（`stdErr`）を省略した場合，CPU消費が異常に高くなり，ハングしたような状態になりました。

* ACI0101538 オブジェクトメソッドが設定されているフォームオブジェクトの名称をフォームエディターのプロパティリストで変更した場合，大文字を小文字に変えただけであれば，オブジェクト名の重複とみなされ，新しいオブジェクト名に連番が付けられました。
2

* ACI0101545 MSCのマニュアル操作でバックアップを復元した後，最初に選択したジャーナルァイルのオペレーションはデータベースに統合されますが，続けて選択したジャーナルファイルのオペレーションはデータベースに統合されませんでした。ファイル選択ダイアログに問題があるようです。

* ACI0101541 プロジェクトモードのみ。リストボックス列をブール型に設定した場合，表示形式はチェックボックスになりますが，プロパティリストの項目としてタイトルが表示されませんでした。ポップアップメニューで表示形式をチェックボックスに再設定すれば，タイトルが入力できるようになります。

* ACI0101521 Write Proドキュメントのインデント（`wk text indent`）が負の値に設定されている場合，MIMEフォーマットでHTMLエクスポートすると，行の先頭部分が切り捨てられました。webフォーマットでHTMLエクスポートすれば問題ありません。HTMLエクスポートでは，逆インデントが無視されるべきです。

* ACI0101518 `#DECLARE`構文が使用されているメソッドを実行した場合，アプリケーションがクラッシュしました。

* ACI0101509 リストボックスのデータソースを命名セレクションからカレントセレクションに変更した場合，両者に共通であるはずの列プロパティが一部リセットされました。

* ACI0101501 ストラクチャエディターのインスペクターでフィールド名を入力した後，別のフィールドを選択した場合，入力した内容がキャンセルされました。確定するためには，`tab`キーを使用するか，インスペクター上のアクティブオブジェクトをクリックする必要があります。

* ACI0101494 バイナリモードのみ。リストボックスヘッダーの画像ソースプロパティを「ファイル」に設定した場合，アプリケーションがクラッシュしました。

* ACI0101608 プロジェクトモードのみ。MSCでデータファイルの暗号化を設定した後にMSCの検証を実行した場合，「テーブルの暗号化が設定されていないのにレコードが暗号化されている」という趣旨のエラーが返されました。

* ACI0101594 [`#DECLARE`](https://developer.4d.com/docs/ja/Concepts/parameters.html)構文を使用しているメソッドの戻り値のパラメーター名が省略されている場合，未定義が返されました。ACI0101458が修正されたことによる副作用のようです。

* ACI0101468 フォーカス可で入力不可のオブジェクト（階層リスト・ルーラー・ステッパー・リストボックス）にフォーカスが移動した場合，日本語IMEが無効になりませんでした。ボタン・ラジオボタン・チェックボックスであれば問題ありません。そのようなオブジェクトにテキストをタイプ入力することはないので，日本語IMEは自動的に切られるべきです。

* ACI0101565 ストラクチャエディターにテーブル名やフィールド名を入力しようとした場合，日本語IMEが有効になりませんでした。プロパティリストを使用すれば問題ありません。

* ACI0101572 クラスのソースコードにマルチラインコメント構文（`/*` `*/`）が使用されている場合，コメントブロックにローカル変数名を入力するとアプリケーションがクラッシュしました。

* ACI0101556 データの暗号化が有効にされたテーブルにレコードがまだ登録されていない場合，MSCの検証でエラー`5`（テーブルの暗号化が有効にされているのにデータが暗号化されていない）が返されました。

* ACI0101486 `IMAP_SetPrefs`で指定したフォルダーパスに記号が含まれる場合，`IMAP_MsgLst`がエラー`-38`を返しました。

* ACI0101483 `POP3_SetPrefs`で指定したフォルダーパスに記号が含まれる場合，`POP3_MsgLst`がエラー`-38`を返しました。

* ACI0101611 Windows版のみ。Citrixプラットフォームでタスクパーのウィンドウを閉じた場合，アプリケーションが正常に終了しませんでした。Citrixでタスクパーを右クリックしてウィンドウを閉じると`WM_SYSCOMMAND`の`SC_CLOSE`ではなく`WM_CLOSE`イベントが送信されますが，4DのMDIウィンドウがこのイベントを処理しないためにアプリケーションが終了せず，バックグランドで非常に高いCPU使用率のまま動き続けてしまうことが原因です。

* ACI0101600 ヌル終点エラー（ネットワーク切断）が突発的に発生しました。ネットワークリクエストログ（サーバー側）を解析すると，プロセスがアイドル接続タイムアウトから復帰するタイミングでネットワーク接続の例外が発生していることがわかります。

* ACI0101579 フォーミュラのパラメーターに4D Viewエリアの参照変数が使用されているスプレッドシートをView Proに変換した場合，エリアの参照変数が消えました。

* ACI0101575 プロジェクトモードのみ。オブジェクトメソッドが定義されているフォームオブジェクトをコピー＆ペーストした後，そのオブジェクトをコピーして別のフォームにコピー＆ペーストした場合，コピーされたオブジェクトおよびコピーからコピーされたオブジェクトのメソッドに制御コードが追加されました。元のオブジェクトは問題ありません。フォームオブジェクトのコピー＆ペーストで問題が発生し，オブジェクトの複製では発生しません。

* ACI0101484 Webサービス（SOAP）でオブジェクト型を入力変数に使用した場合，サーバーがクラッシュしました。

**注記**: `SOAP DECLARATION`は`Is collection`や`Is object`をサポートしていません。修正により，エラーが返されるようになりました。

* ACI0101480 Mac版のみ。テキストの`3`文字目にキャレットが表示されている状態で英数キーを長押ししてアクセント付きの文字を入力した場合，テキストの`4`文字目に文字が入力されました。

* ACI0101488 WebエリアのURLおよび進捗プロパティに`Form`を入力した場合，コマンドがトークナイズされませんでした。

* ACI0101493 `Use` `End use`ブロックの内部で`Use` `End use`ブロックを使用し，内側のブロックでプロテクトした共有オブジェクトを外側のブロックでプロテクトしたオブジェクトに代入した場合，内側の`End use`でエラー`-10719`が返されました。

```
$o:=New shared object
$o2:=New shared object
Use ($o) 
	Use ($o2)
		$o2.a:=$o  // 代入により$oは$o2グループに編入される
	End use // $o2グループのプロテクトを解除
	$o.b:=52 // $oが属する$o2グループはプロテクトされていないのでエラー
End use 
```

* ACI0101596 処理に時間を要するコマンドの監視を有効にした状態で`QUERY BY FORMULA`を実行した場合，アプリケーションがクラッシュしました。

* ACI0101578 View Proエリアのフォーミュラ`COLUMNLETTER`のパラメーターを省略した場合，カレント列の文字が返されるはずですが，無効なフォーミュラであるというエラーが返されました。

* ACI0101566 [`VP SET CUSTOM FUNCTIONS`](https://doc.4d.com/4Dv18R5/4D/18-R5/VP-SET-CUSTOM-FUNCTIONS.301-5062623.ja.html)でプロジェクトメソッドをフォーミュラとして登録した場合，日付型の`value`プロパティを有するオブジェクト型ではなく，`year` `month` `day`のプロパティを有するオブジェクトが`$1`に渡されました。`VP SET ALLOWED METHODS`であれば問題ありません。

```
$allowedMethods:=New object
$allowedMethods.testDate:=New object
$allowedMethods.testDate.formula:=Formula(testDate)
$allowedMethods.testDate.minParams:=1
$allowedMethods.testDate.maxParams:=1
VP SET CUSTOM FUNCTIONS("ViewProArea"; $allowedMethods)
```
