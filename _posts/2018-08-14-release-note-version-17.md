---
layout: fix
title: "4D v17.0 Hotfix 1 修正リスト"
date: 2018-08-14 00:00:00
categories: 修正リスト
tags: 17.0 hotfix
build: 226237
version: 17.0

---

**バージョン**: {{page.version}}  
**ビルド**: {{page.build}} 

* ACI0098246 Mac 64ビット版およびWindows版のみ。ダイアログを表示中に``ADD RECORD``を実行し，切り替わった入力フォームでボタン（フォーカス可・タブ可）がフォーカスされた場合， ``GOTO OBJECT``を使用してテキスト入力エリアにフォーカスを移動しても，日本語入力メソッドがオフになったままでした。

* ACI0098386 日本語変換入力中に表示される下線の色がブラックに固定されていました。

* ACI0098277 環境設定でフォームエディターにデフォルトで表示されるバッジを変更した場合，エディターのツールバーに表示されるアイコンが選択されているバッジと合わないことがありました。たとえば『オブジェクトメソッド』のバッジが選択されているのに『標準アクション』のアイコンが表示されました。

* ACI0098213 Windows版のみ。``HTTP Get``コマンドで特定のURLにアクセスするとエラー#30（``HTTP Server unreachable``）が返されました。

* ACI0098307 Windows 32ビット版のみ。実行中の印刷ジョブをキャンセルボタンで中止することができませんでした。

* ACI0097823 プリエンプティブモードで``RESOLVE POINTER``を実行すると，空の文字列が返されました。

* ACI0098363 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，コレクション型およびオブジェクト型の変数が検出されませんでした。

* ACI0098163 セレクション型のリストボックスに『サブレコード追加』標準アクションでレコードを追加し，セルにタイプ入力したテキストが未確定の状態で再びレコード追加を実行すると，編集中だったセルの値が新規レコードのセルに引き継がれました。

* ACI0097388 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，BLOB配列，オブジェクト配列，時間配列は検出されませんでした。

* ACI0098359 SSO（ドメインサーバー認証）とクライアント/サーバー通信の暗号化を両方とも有効にした場合，クライアントからサーバーに接続できませんでした。接続に失敗した後，サーバーに無名の接続中ユーザーが残されました。管理画面にユーザーが表示されるわけではなく，サーバーを終了しようとすると『接続中のユーザーがいます』というメッセージが表示されることにより，その存在と人数が確認できます。

* ACI0098208 文字列の位置を指定する添字``[[$index]]``を文字列定数に対して使用した場合，コンパイルでエラーが返されました。文字列定数の代わりに変数を使用すれば問題ありません。

* ACI0098368 ``DELAY PROCESS``で遅延したプロセスを``PAUSE PROCESS``で停止した場合，1回の``RESUME PROCESS``では再開することができず，``RESUME PROCESS``または``DELAY PROCESS(...;0)``をもう一度コールする必要がありました。

* ACI0098446 4D Write文書を4D Write Proに変換した後，そのレコードを開こうとすると，アプリケーションがクラッシュすることがありました。コマンドで変換するのではなく，4D Writeから4D Write Proにコピー＆ペーストすれば問題ありません。

* ACI0098400 Mac版のみ。ハイパーリンクが設定された文章をテキストエディットからコピー＆ペーストした場合，ハイパーリンクのURLとスタイルが継承されませんでした。

* ACI0098393 ``OB SET ARRAY``コマンドを4D Write Proオブジェクトに対して使用すると，アプリケーションがクラッシュすることがありました。

``注記**: 問題は，レンジオブジェクトをWrite Pro文書のカスタムプロパティとして保存しようとしたときに発生します。レンジオブジェクトは，Write Pro文書に対する参照なので，そのまま挿入しようとすると，再帰的な参照になってしまいます。ですから，そのような操作は許されていません。テキストの範囲を文書に記録したい場合，レンジオブジェクトではなく，開始位置と終了位置からなる単純なオブジェクトを作成して挿入するようにしてください。Write Proオブジェクトを元のWrite Pro文書オブジェクトに保存することはできません。

* ACI0098356 4D Write文書をWrite Proに変換した場合，タブ処理が正しく変換されないことがありました。カスタマイズされたデフォルトのタプ位置や，リスト項目の絶対タブ位置のレンダリングが間違っていました。

* ACI0098175 画像を返すプロジェクトメソッドが式として埋め込まれた4D Write文書をWrite Proに変換した場合，画像ではなく，``0 octets``という値が挿入されました。

* ACI0098036 32ビット版のみ。ラベルエディターでレイアウトを``4LB``形式で書き出した場合，空のファイルが作成されました。

* ACI0097865 空の文字列を返すプロジェクトメソッドを式として4D Write Proに埋め込んだ場合，``Length``が``0``ではなく``1``の文字列が挿入されました。

**注記**: 式は，スタイルテキスト内で選択範囲として指定できるよう，常に長さが``1``以上でなければなりません。式が空の文字列を返した場合，スタイル付きテキストやWrite Pro文書の中では空白文字に置換され，長さが``0``にならないようになっています。修正により，新コマンドの``WP Get text(...;wk expressions as value)``および``ST Get plain text(...;ST 4D Expressions as values)``をWrite Pro文書に対して使用した場合には，空白ではなく，空の文字列が返されるようになりました。また，画面上や印刷でも空白ではなく，空の文字列が出力されるようになりました。互換性を保持するため，スタイル付きテキストの処理は変更されていません。

* ACI0098408 64ビット版のみ。ラベルエディターにピクチャーフィールドをドラッグ＆ドロップして追加した場合，初回の印刷プレビューでエラーが返されました。エディターを閉じて，同じ操作をもう一度繰り返した後，画像が表示されるようになります。

* ACI0098480 ``QR RUN``コマンドでテキスト形式のクイックレポートを出力した場合，システム変数の``FldDelimit``および``RecDelimit``ではなく，既定の区切り文字（``Tab``および``Carriage return``/Windows版は``CR LF``）が使用されました。

* ACI0098389 Word文書から4D Write Proにテキストをコピー＆ペーストした後，ウィジェットの『マージンとスタイル』タブをクリックすると，エラーが返されることがありました。

**注記**: コマンドで行の高さ数値型で取得しようとした場合にエラーが返されることがあるのは仕様です。高さは割合（例：``100%``）あるいは単位（例：``12pt``, ``0.1pt``, ``0.8cm``）で設定することができるからです。ドキュメントの単位とカレント行の単位が合わない場合にはエラーが返されます。なお，行の高さ（数値）を計算するために一時的であっても文書の単位を変更するべきではありません。単位はルーラーなどのユーザーインタフェースでも使用されており，変更すれば，ドキュメントの最終変更日も更新されます。行の高さが数値で欲しいのであれば，一時的なドキュメントを作成し，行の高さを文字列で設定した後，エラーハンドリングをインストールした上で，パーセントおよび``cm``などの単位を指定して数値型で取得を試みることができます。

* ACI0097842 オブジェクト記法と文字列の位置を指定する``[[``と``]``を併用した場合，コンパイルでエラーが返されました。

```
C_OBJECT($e)
$e:=ds.T1.new()
$e.prop:="toto"
$e.prop[[1]]:="a"
```

* ACI0098331 別のインスタンスで開かれたデータベースを開こうとすると，『READ ONLYモードで開きますか』警告ダイアログが表示されますが，これをキャンセルすると，アプリケーションがクラッシュしました。

* ACI0098179 64ビット版のみ。ファイルメニューの「データをファイルに書き出し」で表示されるダイアログは，自動リレーションに対応していませんでした。リレートテーブルを選択しても，マスターテーブルのフィールドが表示されました。

* ACI0098117 ``IMAP_Search``でアプリケーションがクラッシュする場合がありました。ACI0096656修正の副作用です。リクエストが長すぎる場合，サーバーに拒否されることがあります。修正により，クラッシュする代わりに，エラーが返されるようになりました。

* ACI0098099 ファイルメニューのインポート/エクスポートダイアログおよび``IMPORT DATA``/``EXPORT DATA``コマンドでDBF形式の読み込み/書き出しができませんでした。

* ACI0090544 ``IMAP_Search``の第2パラメーターに空の文字列を渡すとアプリケーションがクラッシしました。

* ACI0098287 Windows 64ビット版のみ。メニューバーが関連付けられた標準ウィンドウからメニューバーが関連付けられていないモーダルダイアログを表示した場合，メニュー項目が``disabled``状態になります。そこまでは良いのですが，そこからさらにメニューバーが関連付けられていないモーダルダイアログを表示して閉じると，最初のモーダルダイアログが最前面にとどまらず，メニュー項目にアクセスできてしまいました。

* ACI0098097 4D Viewプラグインエリアのセルに対してコピー・カット操作あるいは``PV SPECIAL CUT``コマンドを実行すると，特定のセルでアプリケーションがクラッシュしました。スタイルシートをセルに対して設定した後，そのスタイルシートを削除した場合に問題が発生します。

* ACI0098476 4D Viewのセルに``=``記号を入力すると，マウス操作でセルを指定してフォーミュラを入力することができますが，Retinaディスプレイでは，正しい座標の範囲が選択されませんでした。

* ACI0098169 コレクション型のリストボックスにオブジェクト型フィールドの属性値を表示した場合，列ヘッダーをクリックすると，並び替えが実行される代わりにエラーが返されました。

* ACI0097377 4D Viewに貼り付けられた画像をコンテキストメニューの『クリア』で消去し，入力を確定した後，同じレコードを開いてピクチャーの参照をダブルクリックし，ピクチャー属性の『縦横比を保持』を有効にすると，アプリケーションがクラッシュしました。

* ACI0098509 クライアントサーバー版のみ。「4D Mobileで公開する」プロパティが設定されていないテーブルの1対Nリレーション属性にアクセスすると，『``{EntityModelName}``データストアクラスの``Param1``属性がみつかりません』というエラーが返されました。

* ACI0098530 サーバー管理画面の『新規接続を拒否・許可』ボタンをクリックして，新規クライアント接続を許可した後，サーバーが『利用可能なサーバー』リストに再表示されませんでした。また，サーバーを再起動するまで接続することができませんでした。
