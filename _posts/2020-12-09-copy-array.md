---
layout: post
title: "COPY ARRAYの型は揃っていなければならない"
date: 2020-12-09 12:00:00
categories: 仕様
tags: 18.x programming
---

`COPY ARRAY`で`ARRAY REAL`を`ARRAY LONGINT`にコピーした場合，v17では数値配列のタイプが変換されました。v18以降，このコマンドで配列のタイプを整数⇄実数⇄梅長整数と変換することはできません。18r5のドキュメントは，新しい仕様を反映した記述になっています。

> コンパイルモードでは，destination 引数の配列は，source 引数の配列と同じ型である必要があります。そのため，インタープリタモードどコンパイルモードで配列に同様の振る舞いをさせるためには，常に同じ型の配列を使用することが推奨されます。

<i class="fa fa-external-link" aria-hidden="true"></i> [doc.4d.com](https://livedoc.4d.com/--18-R5/-/COPY-ARRAY.301-5129342.ja.html)

インタープリターモードは，できるだけコンパイルモードの厳密な仕様を忠実に再現するよう配慮されていますが，`COPY ARRAY`のように，インタープリターモードであれば幾らか「緩い」用途が許容されるコマンドは，コンパイルモードを意識してコーディングする必要があります。
