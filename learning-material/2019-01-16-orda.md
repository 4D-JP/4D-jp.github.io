---
layout: page
title: 教材
permalink: /learning-material/2019-01-16/
standalone: true
---
    
* content
{:toc}

## データストアのセットアップ

* テキストファイルの読み込み（``Get 4D folder`` ``Document to text``）

* テーブルの作成（``IMPORT STRUCTURE``）

* データストアの更新（``RESTART 4D``）

* データストアオブジェクト（``ds``）

* コレクション型とオブジェクト型（``C_COLLECTION`` ``C_OBJECT``）

* エンティティの追加（``JSON Parse`` ``dataClass.new()`` ``entity.fromObject()`` ``entity.save()``）

**謝辞**: サンプルデータ by [tm-webtools.com](http://tm-webtools.com/Tools/TestData)

## ユーザーインタフェース

#### リストボックスのプロパティ（１個目）

 * コレクションまたはエンティティセレクション

```
Form.peopleA.currentCollection
```

* カレントの項目

```
Form.peopleA.currentItem
```

* カレント項目位置

```
Form.peopleA.currentItemPos
```

* 選択された項目

```
Form.peopleB.currentCollection
```

#### リストボックスのプロパティ（２個目）

 * コレクションまたはエンティティセレクション

```
Form.peopleB.currentCollection
```

* カレントの項目

```
Form.peopleB.currentItem
```

* カレント項目位置

```
Form.peopleB.currentItemPos
```

* 選択された項目

```
Form.peopleB.currentHighlight
```

* フォーム変数（``Form``）

```
// dialog_01_form

C_OBJECT($0;$form)

$form:=New object("people";New object;"peopleA";New object;"peopleB";New object)

$form.people.all:=ds.People.all().orderBy("lastNameYomi")

$form.peopleA.currentCollection:=$form.people.all
$form.peopleA.currentItem:=Null
$form.peopleA.currentItemPos:=Null
$form.peopleA.currentHighlight:=Null

$form.peopleB.currentCollection:=ds.People.newSelection(dk keep ordered)
$form.peopleB.currentItem:=Null
$form.peopleB.currentItemPos:=Null
$form.peopleB.currentHighlight:=Null

$0:=$form
```

* フォームイベント

```
$event:=Form event

Case of 
	: ($event=On Load)
		
		If (OB Is empty(Form))
			
			$form:=dialog_01_form 
			
			C_TEXT($name)
			For each ($name;$form)
				Form[$name]:=$form[$name]
			End for each 
			
		End if 
				
End case 
```

* ダイアログの実行

```
$window:=Open form window("people")

$form:=dialog_01_form 

DIALOG("people";$form)
```
